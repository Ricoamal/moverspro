import{r as T,a as $r,R as je,g as ms}from"./vendor-CIP6LD3P.js";import{u as qs,L as dt,a as us,B as Hr,R as qr,b as Te}from"./router-DT98vOoL.js";import{C as Vr,L as Kr,a as Fa,M as Wr,X as Yr,b as Jr,S as Qr}from"./ui-CbvzyhNi.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();var Ua={exports:{}},xs={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zr=T,Xr=Symbol.for("react.element"),en=Symbol.for("react.fragment"),tn=Object.prototype.hasOwnProperty,sn=Zr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,an={key:!0,ref:!0,__self:!0,__source:!0};function Ba(s,t,a){var r,n={},i=null,l=null;a!==void 0&&(i=""+a),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)tn.call(t,r)&&!an.hasOwnProperty(r)&&(n[r]=t[r]);if(s&&s.defaultProps)for(r in t=s.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:Xr,type:s,key:i,ref:l,props:n,_owner:sn.current}}xs.Fragment=en;xs.jsx=Ba;xs.jsxs=Ba;Ua.exports=xs;var e=Ua.exports,za,Qs=$r;za=Qs.createRoot,Qs.hydrateRoot;const rn=()=>{const{pathname:s}=qs();return T.useEffect(()=>{window.scrollTo(0,0)},[s]),null};function E({name:s,size:t=24,color:a="currentColor",className:r="",strokeWidth:n=2,...i}){const l=Kr[s];return l?e.jsx(l,{size:t,color:a,strokeWidth:n,className:r,...i}):e.jsx(Vr,{size:t,color:"gray",strokeWidth:n,className:r,...i})}class nn extends je.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,a){var r;t.__ErrorBoundary=!0,(r=window.__COMPONENT_ERROR__)==null||r.call(window,t,a)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-neutral-50",children:e.jsxs("div",{className:"text-center p-8 max-w-md",children:[e.jsx("div",{className:"flex justify-center items-center mb-2",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"42px",height:"42px",viewBox:"0 0 32 33",fill:"none",children:[e.jsx("path",{d:"M16 28.5C22.6274 28.5 28 23.1274 28 16.5C28 9.87258 22.6274 4.5 16 4.5C9.37258 4.5 4 9.87258 4 16.5C4 23.1274 9.37258 28.5 16 28.5Z",stroke:"#343330",strokeWidth:"2",strokeMiterlimit:"10"}),e.jsx("path",{d:"M11.5 15.5C12.3284 15.5 13 14.8284 13 14C13 13.1716 12.3284 12.5 11.5 12.5C10.6716 12.5 10 13.1716 10 14C10 14.8284 10.6716 15.5 11.5 15.5Z",fill:"#343330"}),e.jsx("path",{d:"M20.5 15.5C21.3284 15.5 22 14.8284 22 14C22 13.1716 21.3284 12.5 20.5 12.5C19.6716 12.5 19 13.1716 19 14C19 14.8284 19.6716 15.5 20.5 15.5Z",fill:"#343330"}),e.jsx("path",{d:"M21 22.5C19.9625 20.7062 18.2213 19.5 16 19.5C13.7787 19.5 12.0375 20.7062 11 22.5",stroke:"#343330",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),e.jsxs("div",{className:"flex flex-col gap-1 text-center",children:[e.jsx("h1",{className:"text-2xl font-medium text-neutral-800",children:"Something went wrong"}),e.jsx("p",{className:"text-neutral-600 text-base w w-8/12 mx-auto",children:"We encountered an unexpected error while processing your request."})]}),e.jsx("div",{className:"flex justify-center items-center mt-6",children:e.jsxs("button",{onClick:()=>{window.location.href="/"},className:"bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded flex items-center gap-2 transition-colors duration-200 shadow-sm",children:[e.jsx(E,{name:"ArrowLeft",size:18,color:"#fff"}),"Back"]})})]})}):this.props.children}}const nt=()=>{const[s,t]=T.useState(!1),a=qs(),r=[{name:"Dashboard",path:"/admin-dashboard",icon:"LayoutDashboard",badge:null},{name:"Customers",path:"/customers",icon:"Users",badge:null},{name:"Staff",path:"/staff",icon:"UserCheck",badge:null},{name:"Payroll",path:"/payroll",icon:"Calculator",badge:null},{name:"CRM",path:"/crm",icon:"Target",badge:null},{name:"Website Builder",path:"/website-builder",icon:"Layout",badge:null},{name:"Quotes",path:"/quote-management",icon:"FileText",badge:12},{name:"Invoices",path:"/invoice-management",icon:"Receipt",badge:5}],n=[{name:"Settings",path:"/settings",icon:"Settings"},{name:"Help",path:"/help",icon:"HelpCircle"},{name:"Logout",path:"/login",icon:"LogOut"}],i=o=>a.pathname===o,l=()=>{t(!s)};return e.jsxs(e.Fragment,{children:[e.jsx("aside",{className:`fixed left-0 top-0 z-40 h-screen bg-white border-r border-gray-200 shadow-card transition-all duration-300 ${s?"w-16":"w-64"} hidden lg:block`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[!s&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:e.jsx(E,{name:"Truck",size:20,color:"white"})}),e.jsx("span",{className:"text-xl font-semibold text-gray-900",children:"MoveEase Pro"})]}),e.jsx("button",{onClick:l,className:"p-2 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-smooth",children:e.jsx(E,{name:s?"ChevronRight":"ChevronLeft",size:20})})]}),e.jsx("nav",{className:"flex-1 px-3 py-4 space-y-2",children:r.map(o=>e.jsxs(dt,{to:o.path,className:`flex items-center px-3 py-3 rounded-lg text-sm font-medium transition-smooth group ${i(o.path)?"bg-primary text-white":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(E,{name:o.icon,size:20,className:`flex-shrink-0 ${s?"mx-auto":"mr-3"}`}),!s&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex-1",children:o.name}),o.badge&&e.jsx("span",{className:`inline-flex items-center justify-center px-2 py-1 text-xs font-bold rounded-full ${i(o.path)?"bg-white text-primary":"bg-accent text-white"}`,children:o.badge})]})]},o.name))}),e.jsx("div",{className:"px-3 py-4 border-t border-gray-200 space-y-2",children:n.map(o=>e.jsxs(dt,{to:o.path,className:`flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-smooth ${o.name==="Logout"?"text-red-600 hover:bg-red-50":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"}`,children:[e.jsx(E,{name:o.icon,size:18,className:`flex-shrink-0 ${s?"mx-auto":"mr-3"}`}),!s&&e.jsx("span",{children:o.name})]},o.name))})]})}),e.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 z-50 bg-white border-t border-gray-200 shadow-elevated",children:e.jsx("div",{className:"grid grid-cols-3 h-16",children:r.map(o=>e.jsxs(dt,{to:o.path,className:`flex flex-col items-center justify-center space-y-1 transition-smooth relative ${i(o.path)?"text-primary bg-blue-50":"text-gray-600 hover:text-primary"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(E,{name:o.icon,size:20}),o.badge&&e.jsx("span",{className:"absolute -top-2 -right-2 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold text-white bg-accent rounded-full min-w-[18px] h-[18px]",children:o.badge})]}),e.jsx("span",{className:"text-xs font-medium",children:o.name})]},o.name))})})]})},ln=({title:s,value:t,change:a,changeType:r,icon:n,color:i="blue"})=>{const l={blue:"bg-blue-50 text-blue-600",green:"bg-green-50 text-green-600",amber:"bg-amber-50 text-amber-600",purple:"bg-purple-50 text-purple-600"},o=()=>r==="increase"?"TrendingUp":r==="decrease"?"TrendingDown":"Minus",c=()=>r==="increase"?"text-green-600":r==="decrease"?"text-red-600":"text-gray-500";return e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:s}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t}),a&&e.jsxs("div",{className:`flex items-center mt-2 ${c()}`,children:[e.jsx(E,{name:o(),size:16,className:"mr-1"}),e.jsx("span",{className:"text-sm font-medium",children:a})]})]}),e.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${l[i]}`,children:e.jsx(E,{name:n,size:24})})]})})};function Zs(s,t){if(typeof s=="function")return s(t);s!=null&&(s.current=t)}function on(...s){return t=>{let a=!1;const r=s.map(n=>{const i=Zs(n,t);return!a&&typeof i=="function"&&(a=!0),i});if(a)return()=>{for(let n=0;n<r.length;n++){const i=r[n];typeof i=="function"?i():Zs(s[n],null)}}}}function cn(s){const t=mn(s),a=T.forwardRef((r,n)=>{const{children:i,...l}=r,o=T.Children.toArray(i),c=o.find(xn);if(c){const d=c.props.children,u=o.map(b=>b===c?T.Children.count(d)>1?T.Children.only(null):T.isValidElement(d)?d.props.children:null:b);return e.jsx(t,{...l,ref:n,children:T.isValidElement(d)?T.cloneElement(d,void 0,u):null})}return e.jsx(t,{...l,ref:n,children:i})});return a.displayName=`${s}.Slot`,a}var dn=cn("Slot");function mn(s){const t=T.forwardRef((a,r)=>{const{children:n,...i}=a;if(T.isValidElement(n)){const l=gn(n),o=pn(i,n.props);return n.type!==T.Fragment&&(o.ref=r?on(r,l):l),T.cloneElement(n,o)}return T.Children.count(n)>1?T.Children.only(null):null});return t.displayName=`${s}.SlotClone`,t}var un=Symbol("radix.slottable");function xn(s){return T.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===un}function pn(s,t){const a={...t};for(const r in t){const n=s[r],i=t[r];/^on[A-Z]/.test(r)?n&&i?a[r]=(...o)=>{const c=i(...o);return n(...o),c}:n&&(a[r]=n):r==="style"?a[r]={...n,...i}:r==="className"&&(a[r]=[n,i].filter(Boolean).join(" "))}return{...s,...a}}function gn(s){var r,n;let t=(r=Object.getOwnPropertyDescriptor(s.props,"ref"))==null?void 0:r.get,a=t&&"isReactWarning"in t&&t.isReactWarning;return a?s.ref:(t=(n=Object.getOwnPropertyDescriptor(s,"ref"))==null?void 0:n.get,a=t&&"isReactWarning"in t&&t.isReactWarning,a?s.props.ref:s.props.ref||s.ref)}function Ga(s){var t,a,r="";if(typeof s=="string"||typeof s=="number")r+=s;else if(typeof s=="object")if(Array.isArray(s)){var n=s.length;for(t=0;t<n;t++)s[t]&&(a=Ga(s[t]))&&(r&&(r+=" "),r+=a)}else for(a in s)s[a]&&(r&&(r+=" "),r+=a);return r}function $a(){for(var s,t,a=0,r="",n=arguments.length;a<n;a++)(s=arguments[a])&&(t=Ga(s))&&(r&&(r+=" "),r+=t);return r}const Xs=s=>typeof s=="boolean"?`${s}`:s===0?"0":s,ea=$a,hn=(s,t)=>a=>{var r;if((t==null?void 0:t.variants)==null)return ea(s,a==null?void 0:a.class,a==null?void 0:a.className);const{variants:n,defaultVariants:i}=t,l=Object.keys(n).map(d=>{const u=a==null?void 0:a[d],b=i==null?void 0:i[d];if(u===null)return null;const C=Xs(u)||Xs(b);return n[d][C]}),o=a&&Object.entries(a).reduce((d,u)=>{let[b,C]=u;return C===void 0||(d[b]=C),d},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((d,u)=>{let{class:b,className:C,...w}=u;return Object.entries(w).every(g=>{let[p,x]=g;return Array.isArray(x)?x.includes({...i,...o}[p]):{...i,...o}[p]===x})?[...d,b,C]:d},[]);return ea(s,l,c,a==null?void 0:a.class,a==null?void 0:a.className)},Vs="-",yn=s=>{const t=bn(s),{conflictingClassGroups:a,conflictingClassGroupModifiers:r}=s;return{getClassGroupId:l=>{const o=l.split(Vs);return o[0]===""&&o.length!==1&&o.shift(),Ha(o,t)||fn(l)},getConflictingClassGroupIds:(l,o)=>{const c=a[l]||[];return o&&r[l]?[...c,...r[l]]:c}}},Ha=(s,t)=>{var l;if(s.length===0)return t.classGroupId;const a=s[0],r=t.nextPart.get(a),n=r?Ha(s.slice(1),r):void 0;if(n)return n;if(t.validators.length===0)return;const i=s.join(Vs);return(l=t.validators.find(({validator:o})=>o(i)))==null?void 0:l.classGroupId},ta=/^\[(.+)\]$/,fn=s=>{if(ta.test(s)){const t=ta.exec(s)[1],a=t==null?void 0:t.substring(0,t.indexOf(":"));if(a)return"arbitrary.."+a}},bn=s=>{const{theme:t,classGroups:a}=s,r={nextPart:new Map,validators:[]};for(const n in a)Rs(a[n],r,n,t);return r},Rs=(s,t,a,r)=>{s.forEach(n=>{if(typeof n=="string"){const i=n===""?t:sa(t,n);i.classGroupId=a;return}if(typeof n=="function"){if(vn(n)){Rs(n(r),t,a,r);return}t.validators.push({validator:n,classGroupId:a});return}Object.entries(n).forEach(([i,l])=>{Rs(l,sa(t,i),a,r)})})},sa=(s,t)=>{let a=s;return t.split(Vs).forEach(r=>{a.nextPart.has(r)||a.nextPart.set(r,{nextPart:new Map,validators:[]}),a=a.nextPart.get(r)}),a},vn=s=>s.isThemeGetter,jn=s=>{if(s<1)return{get:()=>{},set:()=>{}};let t=0,a=new Map,r=new Map;const n=(i,l)=>{a.set(i,l),t++,t>s&&(t=0,r=a,a=new Map)};return{get(i){let l=a.get(i);if(l!==void 0)return l;if((l=r.get(i))!==void 0)return n(i,l),l},set(i,l){a.has(i)?a.set(i,l):n(i,l)}}},Os="!",_s=":",Nn=_s.length,wn=s=>{const{prefix:t,experimentalParseClassName:a}=s;let r=n=>{const i=[];let l=0,o=0,c=0,d;for(let g=0;g<n.length;g++){let p=n[g];if(l===0&&o===0){if(p===_s){i.push(n.slice(c,g)),c=g+Nn;continue}if(p==="/"){d=g;continue}}p==="["?l++:p==="]"?l--:p==="("?o++:p===")"&&o--}const u=i.length===0?n:n.substring(c),b=Sn(u),C=b!==u,w=d&&d>c?d-c:void 0;return{modifiers:i,hasImportantModifier:C,baseClassName:b,maybePostfixModifierPosition:w}};if(t){const n=t+_s,i=r;r=l=>l.startsWith(n)?i(l.substring(n.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:l,maybePostfixModifierPosition:void 0}}if(a){const n=r;r=i=>a({className:i,parseClassName:n})}return r},Sn=s=>s.endsWith(Os)?s.substring(0,s.length-1):s.startsWith(Os)?s.substring(1):s,Cn=s=>{const t=Object.fromEntries(s.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const n=[];let i=[];return r.forEach(l=>{l[0]==="["||t[l]?(n.push(...i.sort(),l),i=[]):i.push(l)}),n.push(...i.sort()),n}},En=s=>({cache:jn(s.cacheSize),parseClassName:wn(s),sortModifiers:Cn(s),...yn(s)}),Tn=/\s+/,Pn=(s,t)=>{const{parseClassName:a,getClassGroupId:r,getConflictingClassGroupIds:n,sortModifiers:i}=t,l=[],o=s.trim().split(Tn);let c="";for(let d=o.length-1;d>=0;d-=1){const u=o[d],{isExternal:b,modifiers:C,hasImportantModifier:w,baseClassName:g,maybePostfixModifierPosition:p}=a(u);if(b){c=u+(c.length>0?" "+c:c);continue}let x=!!p,m=r(x?g.substring(0,p):g);if(!m){if(!x){c=u+(c.length>0?" "+c:c);continue}if(m=r(g),!m){c=u+(c.length>0?" "+c:c);continue}x=!1}const j=i(C).join(":"),S=w?j+Os:j,y=S+m;if(l.includes(y))continue;l.push(y);const A=n(m,x);for(let N=0;N<A.length;++N){const f=A[N];l.push(S+f)}c=u+(c.length>0?" "+c:c)}return c};function An(){let s=0,t,a,r="";for(;s<arguments.length;)(t=arguments[s++])&&(a=qa(t))&&(r&&(r+=" "),r+=a);return r}const qa=s=>{if(typeof s=="string")return s;let t,a="";for(let r=0;r<s.length;r++)s[r]&&(t=qa(s[r]))&&(a&&(a+=" "),a+=t);return a};function In(s,...t){let a,r,n,i=l;function l(c){const d=t.reduce((u,b)=>b(u),s());return a=En(d),r=a.cache.get,n=a.cache.set,i=o,o(c)}function o(c){const d=r(c);if(d)return d;const u=Pn(c,a);return n(c,u),u}return function(){return i(An.apply(null,arguments))}}const Ne=s=>{const t=a=>a[s]||[];return t.isThemeGetter=!0,t},Va=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Ka=/^\((?:(\w[\w-]*):)?(.+)\)$/i,kn=/^\d+\/\d+$/,Dn=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Rn=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,On=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,_n=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ln=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,bt=s=>kn.test(s),ae=s=>!!s&&!Number.isNaN(Number(s)),lt=s=>!!s&&Number.isInteger(Number(s)),Cs=s=>s.endsWith("%")&&ae(s.slice(0,-1)),Ze=s=>Dn.test(s),Mn=()=>!0,Fn=s=>Rn.test(s)&&!On.test(s),Wa=()=>!1,Un=s=>_n.test(s),Bn=s=>Ln.test(s),zn=s=>!q(s)&&!V(s),Gn=s=>Et(s,Qa,Wa),q=s=>Va.test(s),ut=s=>Et(s,Za,Fn),Es=s=>Et(s,Kn,ae),aa=s=>Et(s,Ya,Wa),$n=s=>Et(s,Ja,Bn),Vt=s=>Et(s,Xa,Un),V=s=>Ka.test(s),It=s=>Tt(s,Za),Hn=s=>Tt(s,Wn),ra=s=>Tt(s,Ya),qn=s=>Tt(s,Qa),Vn=s=>Tt(s,Ja),Kt=s=>Tt(s,Xa,!0),Et=(s,t,a)=>{const r=Va.exec(s);return r?r[1]?t(r[1]):a(r[2]):!1},Tt=(s,t,a=!1)=>{const r=Ka.exec(s);return r?r[1]?t(r[1]):a:!1},Ya=s=>s==="position"||s==="percentage",Ja=s=>s==="image"||s==="url",Qa=s=>s==="length"||s==="size"||s==="bg-size",Za=s=>s==="length",Kn=s=>s==="number",Wn=s=>s==="family-name",Xa=s=>s==="shadow",Yn=()=>{const s=Ne("color"),t=Ne("font"),a=Ne("text"),r=Ne("font-weight"),n=Ne("tracking"),i=Ne("leading"),l=Ne("breakpoint"),o=Ne("container"),c=Ne("spacing"),d=Ne("radius"),u=Ne("shadow"),b=Ne("inset-shadow"),C=Ne("text-shadow"),w=Ne("drop-shadow"),g=Ne("blur"),p=Ne("perspective"),x=Ne("aspect"),m=Ne("ease"),j=Ne("animate"),S=()=>["auto","avoid","all","avoid-page","page","left","right","column"],y=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],A=()=>[...y(),V,q],N=()=>["auto","hidden","clip","visible","scroll"],f=()=>["auto","contain","none"],v=()=>[V,q,c],h=()=>[bt,"full","auto",...v()],I=()=>[lt,"none","subgrid",V,q],R=()=>["auto",{span:["full",lt,V,q]},lt,V,q],L=()=>[lt,"auto",V,q],H=()=>["auto","min","max","fr",V,q],k=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],U=()=>["start","end","center","stretch","center-safe","end-safe"],O=()=>["auto",...v()],M=()=>[bt,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...v()],z=()=>[s,V,q],G=()=>[...y(),ra,aa,{position:[V,q]}],se=()=>["no-repeat",{repeat:["","x","y","space","round"]}],le=()=>["auto","cover","contain",qn,Gn,{size:[V,q]}],Se=()=>[Cs,It,ut],pe=()=>["","none","full",d,V,q],ge=()=>["",ae,It,ut],Ue=()=>["solid","dashed","dotted","double"],Ye=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],he=()=>[ae,Cs,ra,aa],mt=()=>["","none",g,V,q],Je=()=>["none",ae,V,q],Qe=()=>["none",ae,V,q],it=()=>[ae,V,q],F=()=>[bt,"full",...v()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ze],breakpoint:[Ze],color:[Mn],container:[Ze],"drop-shadow":[Ze],ease:["in","out","in-out"],font:[zn],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ze],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ze],shadow:[Ze],spacing:["px",ae],text:[Ze],"text-shadow":[Ze],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",bt,q,V,x]}],container:["container"],columns:[{columns:[ae,q,V,o]}],"break-after":[{"break-after":S()}],"break-before":[{"break-before":S()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:A()}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:f()}],"overscroll-x":[{"overscroll-x":f()}],"overscroll-y":[{"overscroll-y":f()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:h()}],"inset-x":[{"inset-x":h()}],"inset-y":[{"inset-y":h()}],start:[{start:h()}],end:[{end:h()}],top:[{top:h()}],right:[{right:h()}],bottom:[{bottom:h()}],left:[{left:h()}],visibility:["visible","invisible","collapse"],z:[{z:[lt,"auto",V,q]}],basis:[{basis:[bt,"full","auto",o,...v()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ae,bt,"auto","initial","none",q]}],grow:[{grow:["",ae,V,q]}],shrink:[{shrink:["",ae,V,q]}],order:[{order:[lt,"first","last","none",V,q]}],"grid-cols":[{"grid-cols":I()}],"col-start-end":[{col:R()}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":I()}],"row-start-end":[{row:R()}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":H()}],"auto-rows":[{"auto-rows":H()}],gap:[{gap:v()}],"gap-x":[{"gap-x":v()}],"gap-y":[{"gap-y":v()}],"justify-content":[{justify:[...k(),"normal"]}],"justify-items":[{"justify-items":[...U(),"normal"]}],"justify-self":[{"justify-self":["auto",...U()]}],"align-content":[{content:["normal",...k()]}],"align-items":[{items:[...U(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...U(),{baseline:["","last"]}]}],"place-content":[{"place-content":k()}],"place-items":[{"place-items":[...U(),"baseline"]}],"place-self":[{"place-self":["auto",...U()]}],p:[{p:v()}],px:[{px:v()}],py:[{py:v()}],ps:[{ps:v()}],pe:[{pe:v()}],pt:[{pt:v()}],pr:[{pr:v()}],pb:[{pb:v()}],pl:[{pl:v()}],m:[{m:O()}],mx:[{mx:O()}],my:[{my:O()}],ms:[{ms:O()}],me:[{me:O()}],mt:[{mt:O()}],mr:[{mr:O()}],mb:[{mb:O()}],ml:[{ml:O()}],"space-x":[{"space-x":v()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":v()}],"space-y-reverse":["space-y-reverse"],size:[{size:M()}],w:[{w:[o,"screen",...M()]}],"min-w":[{"min-w":[o,"screen","none",...M()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[l]},...M()]}],h:[{h:["screen","lh",...M()]}],"min-h":[{"min-h":["screen","lh","none",...M()]}],"max-h":[{"max-h":["screen","lh",...M()]}],"font-size":[{text:["base",a,It,ut]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,V,Es]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Cs,q]}],"font-family":[{font:[Hn,q,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[n,V,q]}],"line-clamp":[{"line-clamp":[ae,"none",V,Es]}],leading:[{leading:[i,...v()]}],"list-image":[{"list-image":["none",V,q]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",V,q]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:z()}],"text-color":[{text:z()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ue(),"wavy"]}],"text-decoration-thickness":[{decoration:[ae,"from-font","auto",V,ut]}],"text-decoration-color":[{decoration:z()}],"underline-offset":[{"underline-offset":[ae,"auto",V,q]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:v()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",V,q]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",V,q]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:G()}],"bg-repeat":[{bg:se()}],"bg-size":[{bg:le()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},lt,V,q],radial:["",V,q],conic:[lt,V,q]},Vn,$n]}],"bg-color":[{bg:z()}],"gradient-from-pos":[{from:Se()}],"gradient-via-pos":[{via:Se()}],"gradient-to-pos":[{to:Se()}],"gradient-from":[{from:z()}],"gradient-via":[{via:z()}],"gradient-to":[{to:z()}],rounded:[{rounded:pe()}],"rounded-s":[{"rounded-s":pe()}],"rounded-e":[{"rounded-e":pe()}],"rounded-t":[{"rounded-t":pe()}],"rounded-r":[{"rounded-r":pe()}],"rounded-b":[{"rounded-b":pe()}],"rounded-l":[{"rounded-l":pe()}],"rounded-ss":[{"rounded-ss":pe()}],"rounded-se":[{"rounded-se":pe()}],"rounded-ee":[{"rounded-ee":pe()}],"rounded-es":[{"rounded-es":pe()}],"rounded-tl":[{"rounded-tl":pe()}],"rounded-tr":[{"rounded-tr":pe()}],"rounded-br":[{"rounded-br":pe()}],"rounded-bl":[{"rounded-bl":pe()}],"border-w":[{border:ge()}],"border-w-x":[{"border-x":ge()}],"border-w-y":[{"border-y":ge()}],"border-w-s":[{"border-s":ge()}],"border-w-e":[{"border-e":ge()}],"border-w-t":[{"border-t":ge()}],"border-w-r":[{"border-r":ge()}],"border-w-b":[{"border-b":ge()}],"border-w-l":[{"border-l":ge()}],"divide-x":[{"divide-x":ge()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ge()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ue(),"hidden","none"]}],"divide-style":[{divide:[...Ue(),"hidden","none"]}],"border-color":[{border:z()}],"border-color-x":[{"border-x":z()}],"border-color-y":[{"border-y":z()}],"border-color-s":[{"border-s":z()}],"border-color-e":[{"border-e":z()}],"border-color-t":[{"border-t":z()}],"border-color-r":[{"border-r":z()}],"border-color-b":[{"border-b":z()}],"border-color-l":[{"border-l":z()}],"divide-color":[{divide:z()}],"outline-style":[{outline:[...Ue(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ae,V,q]}],"outline-w":[{outline:["",ae,It,ut]}],"outline-color":[{outline:z()}],shadow:[{shadow:["","none",u,Kt,Vt]}],"shadow-color":[{shadow:z()}],"inset-shadow":[{"inset-shadow":["none",b,Kt,Vt]}],"inset-shadow-color":[{"inset-shadow":z()}],"ring-w":[{ring:ge()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:z()}],"ring-offset-w":[{"ring-offset":[ae,ut]}],"ring-offset-color":[{"ring-offset":z()}],"inset-ring-w":[{"inset-ring":ge()}],"inset-ring-color":[{"inset-ring":z()}],"text-shadow":[{"text-shadow":["none",C,Kt,Vt]}],"text-shadow-color":[{"text-shadow":z()}],opacity:[{opacity:[ae,V,q]}],"mix-blend":[{"mix-blend":[...Ye(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ye()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ae]}],"mask-image-linear-from-pos":[{"mask-linear-from":he()}],"mask-image-linear-to-pos":[{"mask-linear-to":he()}],"mask-image-linear-from-color":[{"mask-linear-from":z()}],"mask-image-linear-to-color":[{"mask-linear-to":z()}],"mask-image-t-from-pos":[{"mask-t-from":he()}],"mask-image-t-to-pos":[{"mask-t-to":he()}],"mask-image-t-from-color":[{"mask-t-from":z()}],"mask-image-t-to-color":[{"mask-t-to":z()}],"mask-image-r-from-pos":[{"mask-r-from":he()}],"mask-image-r-to-pos":[{"mask-r-to":he()}],"mask-image-r-from-color":[{"mask-r-from":z()}],"mask-image-r-to-color":[{"mask-r-to":z()}],"mask-image-b-from-pos":[{"mask-b-from":he()}],"mask-image-b-to-pos":[{"mask-b-to":he()}],"mask-image-b-from-color":[{"mask-b-from":z()}],"mask-image-b-to-color":[{"mask-b-to":z()}],"mask-image-l-from-pos":[{"mask-l-from":he()}],"mask-image-l-to-pos":[{"mask-l-to":he()}],"mask-image-l-from-color":[{"mask-l-from":z()}],"mask-image-l-to-color":[{"mask-l-to":z()}],"mask-image-x-from-pos":[{"mask-x-from":he()}],"mask-image-x-to-pos":[{"mask-x-to":he()}],"mask-image-x-from-color":[{"mask-x-from":z()}],"mask-image-x-to-color":[{"mask-x-to":z()}],"mask-image-y-from-pos":[{"mask-y-from":he()}],"mask-image-y-to-pos":[{"mask-y-to":he()}],"mask-image-y-from-color":[{"mask-y-from":z()}],"mask-image-y-to-color":[{"mask-y-to":z()}],"mask-image-radial":[{"mask-radial":[V,q]}],"mask-image-radial-from-pos":[{"mask-radial-from":he()}],"mask-image-radial-to-pos":[{"mask-radial-to":he()}],"mask-image-radial-from-color":[{"mask-radial-from":z()}],"mask-image-radial-to-color":[{"mask-radial-to":z()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":y()}],"mask-image-conic-pos":[{"mask-conic":[ae]}],"mask-image-conic-from-pos":[{"mask-conic-from":he()}],"mask-image-conic-to-pos":[{"mask-conic-to":he()}],"mask-image-conic-from-color":[{"mask-conic-from":z()}],"mask-image-conic-to-color":[{"mask-conic-to":z()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:G()}],"mask-repeat":[{mask:se()}],"mask-size":[{mask:le()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",V,q]}],filter:[{filter:["","none",V,q]}],blur:[{blur:mt()}],brightness:[{brightness:[ae,V,q]}],contrast:[{contrast:[ae,V,q]}],"drop-shadow":[{"drop-shadow":["","none",w,Kt,Vt]}],"drop-shadow-color":[{"drop-shadow":z()}],grayscale:[{grayscale:["",ae,V,q]}],"hue-rotate":[{"hue-rotate":[ae,V,q]}],invert:[{invert:["",ae,V,q]}],saturate:[{saturate:[ae,V,q]}],sepia:[{sepia:["",ae,V,q]}],"backdrop-filter":[{"backdrop-filter":["","none",V,q]}],"backdrop-blur":[{"backdrop-blur":mt()}],"backdrop-brightness":[{"backdrop-brightness":[ae,V,q]}],"backdrop-contrast":[{"backdrop-contrast":[ae,V,q]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ae,V,q]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ae,V,q]}],"backdrop-invert":[{"backdrop-invert":["",ae,V,q]}],"backdrop-opacity":[{"backdrop-opacity":[ae,V,q]}],"backdrop-saturate":[{"backdrop-saturate":[ae,V,q]}],"backdrop-sepia":[{"backdrop-sepia":["",ae,V,q]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":v()}],"border-spacing-x":[{"border-spacing-x":v()}],"border-spacing-y":[{"border-spacing-y":v()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",V,q]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ae,"initial",V,q]}],ease:[{ease:["linear","initial",m,V,q]}],delay:[{delay:[ae,V,q]}],animate:[{animate:["none",j,V,q]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[p,V,q]}],"perspective-origin":[{"perspective-origin":A()}],rotate:[{rotate:Je()}],"rotate-x":[{"rotate-x":Je()}],"rotate-y":[{"rotate-y":Je()}],"rotate-z":[{"rotate-z":Je()}],scale:[{scale:Qe()}],"scale-x":[{"scale-x":Qe()}],"scale-y":[{"scale-y":Qe()}],"scale-z":[{"scale-z":Qe()}],"scale-3d":["scale-3d"],skew:[{skew:it()}],"skew-x":[{"skew-x":it()}],"skew-y":[{"skew-y":it()}],transform:[{transform:[V,q,"","none","gpu","cpu"]}],"transform-origin":[{origin:A()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:F()}],"translate-x":[{"translate-x":F()}],"translate-y":[{"translate-y":F()}],"translate-z":[{"translate-z":F()}],"translate-none":["translate-none"],accent:[{accent:z()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:z()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",V,q]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":v()}],"scroll-mx":[{"scroll-mx":v()}],"scroll-my":[{"scroll-my":v()}],"scroll-ms":[{"scroll-ms":v()}],"scroll-me":[{"scroll-me":v()}],"scroll-mt":[{"scroll-mt":v()}],"scroll-mr":[{"scroll-mr":v()}],"scroll-mb":[{"scroll-mb":v()}],"scroll-ml":[{"scroll-ml":v()}],"scroll-p":[{"scroll-p":v()}],"scroll-px":[{"scroll-px":v()}],"scroll-py":[{"scroll-py":v()}],"scroll-ps":[{"scroll-ps":v()}],"scroll-pe":[{"scroll-pe":v()}],"scroll-pt":[{"scroll-pt":v()}],"scroll-pr":[{"scroll-pr":v()}],"scroll-pb":[{"scroll-pb":v()}],"scroll-pl":[{"scroll-pl":v()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",V,q]}],fill:[{fill:["none",...z()]}],"stroke-w":[{stroke:[ae,It,ut,Es]}],stroke:[{stroke:["none",...z()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Jn=In(Yn);function ie(...s){return Jn($a(s))}const Qn=hn("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-success text-success-foreground hover:bg-success/90",warning:"bg-warning text-warning-foreground hover:bg-warning/90",danger:"bg-error text-error-foreground hover:bg-error/90"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10",xs:"h-8 rounded-md px-2 text-xs",xl:"h-12 rounded-md px-10 text-base"}},defaultVariants:{variant:"default",size:"default"}}),P=je.forwardRef(({className:s,variant:t,size:a,asChild:r=!1,children:n,loading:i=!1,iconName:l=null,iconPosition:o="left",iconSize:c=null,fullWidth:d=!1,disabled:u=!1,...b},C)=>{const w=r?dn:"button",p=c||{xs:12,sm:14,default:16,lg:18,xl:20,icon:16}[a]||16,x=()=>e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),m=()=>l?e.jsx(E,{name:l,size:p,className:ie(n&&o==="left"&&"mr-2",n&&o==="right"&&"ml-2")}):null;return e.jsxs(w,{className:ie(Qn({variant:t,size:a,className:s}),d&&"w-full"),ref:C,disabled:u||i,...b,children:[i&&e.jsx(x,{}),l&&o==="left"&&m(),n,l&&o==="right"&&m()]})});P.displayName="Button";const Zn=({inquiries:s,onViewDetails:t,onApproveQuote:a,onContactCustomer:r})=>{const[n,i]=T.useState("date"),[l,o]=T.useState("desc"),[c,d]=T.useState("all"),u={pending:"bg-amber-100 text-amber-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",completed:"bg-blue-100 text-blue-800"},b=g=>{n===g?o(l==="asc"?"desc":"asc"):(i(g),o("asc"))},w=[...s.filter(g=>c==="all"||g.status===c)].sort((g,p)=>{let x=g[n],m=p[n];return n==="date"&&(x=new Date(x),m=new Date(m)),n==="amount"&&(x=parseFloat(x.replace(/[^\d.-]/g,"")),m=parseFloat(m.replace(/[^\d.-]/g,""))),l==="asc"?x>m?1:-1:x<m?1:-1});return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-card",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Customer Inquiries"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("select",{value:c,onChange:g=>d(g.target.value),className:"text-sm border border-gray-300 rounded-md px-3 py-1 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsx(P,{variant:"outline",size:"sm",iconName:"Download",children:"Export"})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>b("date"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Date"}),e.jsx(E,{name:"ArrowUpDown",size:14})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>b("customer"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Customer"}),e.jsx(E,{name:"ArrowUpDown",size:14})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>b("amount"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Quote Amount"}),e.jsx(E,{name:"ArrowUpDown",size:14})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(g=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(g.date).toLocaleDateString("en-GB")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center mr-3",children:e.jsx(E,{name:"User",size:16,className:"text-gray-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:g.customer}),e.jsx("div",{className:"text-sm text-gray-500",children:g.phone})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g.serviceType}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:g.amount}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${u[g.status]}`,children:g.status.charAt(0).toUpperCase()+g.status.slice(1)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{variant:"ghost",size:"sm",iconName:"Eye",onClick:()=>t(g.id),children:"View"}),g.status==="pending"&&e.jsx(P,{variant:"default",size:"sm",iconName:"Check",onClick:()=>a(g.id),children:"Approve"}),e.jsx(P,{variant:"outline",size:"sm",iconName:"MessageCircle",onClick:()=>r(g.phone),children:"WhatsApp"})]})})]},g.id))})]})}),w.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(E,{name:"FileText",size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No inquiries found"}),e.jsx("p",{className:"text-gray-500",children:"No customer inquiries match your current filter."})]})]})},Xn=({activities:s})=>{const t=n=>{switch(n){case"quote":return"FileText";case"payment":return"CreditCard";case"message":return"MessageCircle";case"system":return"Settings";case"customer":return"User";default:return"Bell"}},a=n=>{switch(n){case"quote":return"bg-blue-100 text-blue-600";case"payment":return"bg-green-100 text-green-600";case"message":return"bg-purple-100 text-purple-600";case"system":return"bg-gray-100 text-gray-600";case"customer":return"bg-amber-100 text-amber-600";default:return"bg-gray-100 text-gray-600"}},r=n=>{const i=new Date,l=new Date(n),o=Math.floor((i-l)/(1e3*60));return o<1?"Just now":o<60?`${o}m ago`:o<1440?`${Math.floor(o/60)}h ago`:l.toLocaleDateString("en-GB")};return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-card",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"}),e.jsx("button",{className:"text-sm text-primary hover:text-primary-dark font-medium",children:"View All"})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(E,{name:"Activity",size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No recent activity"}),e.jsx("p",{className:"text-gray-500",children:"Activity will appear here as it happens."})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:s.map(n=>e.jsx("div",{className:"px-6 py-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${a(n.type)}`,children:e.jsx(E,{name:t(n.type),size:16})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:n.title}),e.jsx("p",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:r(n.timestamp)})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n.description}),n.amount&&e.jsx("p",{className:"text-sm font-semibold text-green-600 mt-1",children:n.amount})]})]})},n.id))})}),e.jsx("div",{className:"px-6 py-3 bg-gray-50 border-t border-gray-200",children:e.jsx("button",{className:"w-full text-sm text-primary hover:text-primary-dark font-medium py-2",children:"Load More Activities"})})]})},ei=({onCreateQuote:s,onScheduleJob:t,onViewReports:a,onManageCustomers:r})=>{const n=[{title:"Create Quote",description:"Generate new quote for customer",icon:"Plus",color:"default",onClick:s},{title:"Schedule Job",description:"Schedule moving service",icon:"Calendar",color:"secondary",onClick:t},{title:"View Reports",description:"Business analytics & insights",icon:"BarChart3",color:"outline",onClick:a},{title:"Manage Customers",description:"Customer database & history",icon:"Users",color:"ghost",onClick:r}];return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-card p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:n.map((i,l)=>e.jsx(P,{variant:i.color,size:"lg",iconName:i.icon,iconPosition:"left",onClick:i.onClick,className:"h-auto p-4 flex-col items-start text-left",children:e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"font-semibold text-sm mb-1",children:i.title}),e.jsx("div",{className:"text-xs opacity-75 font-normal",children:i.description})]})},l))})]})},ti=({payments:s})=>{const[t,a]=T.useState(s);T.useEffect(()=>{const l=setInterval(()=>{a(o=>o.map(c=>c.status==="processing"&&Math.random()>.7?{...c,status:Math.random()>.2?"completed":"failed",updatedAt:new Date().toISOString()}:c))},5e3);return()=>clearInterval(l)},[]);const r=l=>{switch(l){case"completed":return"bg-green-100 text-green-800";case"processing":return"bg-amber-100 text-amber-800";case"failed":return"bg-red-100 text-red-800";case"pending":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},n=l=>{switch(l){case"completed":return"CheckCircle";case"processing":return"Clock";case"failed":return"XCircle";case"pending":return"AlertCircle";default:return"AlertCircle"}},i=t.reduce((l,o)=>l+(o.status==="completed"?parseFloat(o.amount.replace(/[^\d.-]/g,"")):0),0);return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-card",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"M-Pesa Payments"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Live"})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["KES ",i.toLocaleString()]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Total received today"})]})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto",children:t.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(E,{name:"CreditCard",size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No payments today"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:t.map(l=>e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(E,{name:"Smartphone",size:16,className:"text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:l.customer}),e.jsx("p",{className:"text-xs text-gray-500",children:l.phone})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:l.amount}),e.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[e.jsx(E,{name:n(l.status),size:12}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${r(l.status)}`,children:l.status.charAt(0).toUpperCase()+l.status.slice(1)})]})]})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Transaction ID: ",l.transactionId]})]},l.id))})})]})},si=()=>{const s=us(),[t,a]=T.useState(new Date);T.useEffect(()=>{const g=setInterval(()=>{a(new Date)},6e4);return()=>clearInterval(g)},[]);const r=[{title:"Daily Revenue",value:"KES 125,400",change:"+12.5% from yesterday",changeType:"increase",icon:"DollarSign",color:"green"},{title:"Pending Quotes",value:"23",change:"+3 new today",changeType:"increase",icon:"FileText",color:"amber"},{title:"Active Jobs",value:"8",change:"2 completing today",changeType:"neutral",icon:"Truck",color:"blue"},{title:"Customer Satisfaction",value:"4.8/5",change:"+0.2 this month",changeType:"increase",icon:"Star",color:"purple"}],n=[{id:1,date:"2025-01-27",customer:"John Kamau",phone:"+254712345678",serviceType:"House Moving",amount:"KES 45,000",status:"pending"},{id:2,date:"2025-01-27",customer:"Mary Wanjiku",phone:"+254723456789",serviceType:"Office Relocation",amount:"KES 85,000",status:"approved"},{id:3,date:"2025-01-26",customer:"Peter Ochieng",phone:"+254734567890",serviceType:"Apartment Moving",amount:"KES 32,000",status:"completed"},{id:4,date:"2025-01-26",customer:"Grace Akinyi",phone:"+254745678901",serviceType:"Storage Service",amount:"KES 15,000",status:"pending"},{id:5,date:"2025-01-25",customer:"David Mwangi",phone:"+254756789012",serviceType:"House Moving",amount:"KES 52,000",status:"rejected"}],i=[{id:1,type:"payment",title:"Payment Received",description:"John Kamau paid KES 45,000 via M-Pesa",amount:"KES 45,000",timestamp:new Date(Date.now()-3e5).toISOString()},{id:2,type:"quote",title:"New Quote Request",description:"Mary Wanjiku requested quote for office relocation",timestamp:new Date(Date.now()-9e5).toISOString()},{id:3,type:"message",title:"WhatsApp Message",description:"Customer inquiry about packing services",timestamp:new Date(Date.now()-18e5).toISOString()},{id:4,type:"system",title:"eTIMS Integration",description:"Tax invoice generated successfully",timestamp:new Date(Date.now()-36e5).toISOString()},{id:5,type:"customer",title:"Customer Registration",description:"New customer Peter Ochieng registered",timestamp:new Date(Date.now()-72e5).toISOString()}],l=[{id:1,customer:"John Kamau",phone:"+254712345678",amount:"KES 45,000",status:"completed",transactionId:"MPX123456789",updatedAt:new Date(Date.now()-3e5).toISOString()},{id:2,customer:"Mary Wanjiku",phone:"+254723456789",amount:"KES 25,000",status:"processing",transactionId:"MPX987654321",updatedAt:new Date(Date.now()-6e5).toISOString()},{id:3,customer:"Peter Ochieng",phone:"+254734567890",amount:"KES 32,000",status:"completed",transactionId:"MPX456789123",updatedAt:new Date(Date.now()-12e5).toISOString()}],o=g=>{console.log("Viewing details for inquiry:",g),s("/quote-management")},c=g=>{console.log("Approving quote for inquiry:",g)},d=g=>{const p=`https://wa.me/${g.replace("+","")}`;window.open(p,"_blank")},u=()=>{s("/quote-management")},b=()=>{console.log("Scheduling new job")},C=()=>{console.log("Viewing reports")},w=()=>{console.log("Managing customers")};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(nt,{}),e.jsxs("div",{className:"lg:ml-64 pb-16 lg:pb-0",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 shadow-card",children:e.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Welcome back! Here's what's happening with your business today."})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"hidden sm:block text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.toLocaleDateString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsx("p",{className:"text-sm text-gray-600",children:t.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})})]}),e.jsx(P,{variant:"default",iconName:"Plus",iconPosition:"left",children:"New Quote"})]})]})})}),e.jsxs("main",{className:"px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:r.map((g,p)=>e.jsx(ln,{title:g.title,value:g.value,change:g.change,changeType:g.changeType,icon:g.icon,color:g.color},p))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx(Zn,{inquiries:n,onViewDetails:o,onApproveQuote:c,onContactCustomer:d}),e.jsx(ei,{onCreateQuote:u,onScheduleJob:b,onViewReports:C,onManageCustomers:w})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsx(ti,{payments:l}),e.jsx(Xn,{activities:i})]})]})]})]})]})},er=()=>{const[s,t]=T.useState(!1),a=qs(),r=[{name:"Home",path:"/landing-page",icon:"Home"},{name:"Get Quote",path:"/cost-calculator",icon:"Calculator"},{name:"Sign In",path:"/login",icon:"LogIn"}],n=l=>a.pathname===l,i=()=>{t(!s)};return e.jsxs("header",{className:"fixed top-0 left-0 right-0 z-50 bg-white border-b border-gray-200 shadow-card",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs(dt,{to:"/landing-page",className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:e.jsx(E,{name:"Truck",size:20,color:"white"})}),e.jsx("span",{className:"text-xl font-semibold text-gray-900",children:"MoveEase Pro"})]})}),e.jsx("nav",{className:"hidden md:flex items-center space-x-8",children:r.map(l=>e.jsxs(dt,{to:l.path,className:`flex items-center space-x-1 px-3 py-2 rounded-md text-sm font-medium transition-smooth ${n(l.path)?"text-primary bg-blue-50":"text-gray-700 hover:text-primary hover:bg-gray-50"}`,children:[e.jsx(E,{name:l.icon,size:16}),e.jsx("span",{children:l.name})]},l.name))}),e.jsx("div",{className:"hidden md:block",children:e.jsx(P,{variant:"default",size:"sm",onClick:()=>window.location.href="/cost-calculator",iconName:"ArrowRight",iconPosition:"right",children:"Get Free Quote"})}),e.jsx("div",{className:"md:hidden",children:e.jsx("button",{onClick:i,className:"inline-flex items-center justify-center p-2 rounded-md text-gray-700 hover:text-primary hover:bg-gray-50 transition-smooth","aria-expanded":"false",children:e.jsx(E,{name:s?"X":"Menu",size:24})})})]})}),s&&e.jsx("div",{className:"md:hidden bg-white border-t border-gray-200 shadow-elevated",children:e.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[r.map(l=>e.jsxs(dt,{to:l.path,onClick:()=>t(!1),className:`flex items-center space-x-3 px-3 py-3 rounded-md text-base font-medium transition-smooth ${n(l.path)?"text-primary bg-blue-50 border-l-4 border-primary":"text-gray-700 hover:text-primary hover:bg-gray-50"}`,children:[e.jsx(E,{name:l.icon,size:20}),e.jsx("span",{children:l.name})]},l.name)),e.jsx("div",{className:"px-3 pt-4",children:e.jsx(P,{variant:"default",fullWidth:!0,onClick:()=>{t(!1),window.location.href="/cost-calculator"},iconName:"ArrowRight",iconPosition:"right",children:"Get Free Quote"})})]})})]})};function ps({src:s,alt:t="Image Name",className:a="",...r}){return e.jsx("img",{src:s,alt:t,className:a,onError:n=>{n.target.src="/assets/images/no_image.png"},...r})}const ai=()=>{const s=us(),t=()=>{s("/cost-calculator")},a=()=>{document.getElementById("services-section").scrollIntoView({behavior:"smooth"})};return e.jsxs("section",{className:"relative bg-gradient-to-br from-blue-50 to-white pt-20 pb-16 lg:pt-24 lg:pb-20 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-5",children:[e.jsx("div",{className:"absolute top-10 left-10 w-20 h-20 bg-primary rounded-full"}),e.jsx("div",{className:"absolute top-32 right-20 w-16 h-16 bg-accent rounded-full"}),e.jsx("div",{className:"absolute bottom-20 left-1/4 w-12 h-12 bg-secondary rounded-full"})]}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{className:"text-center lg:text-left",children:[e.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900 leading-tight mb-6",children:["Professional Moving Services",e.jsx("span",{className:"block text-primary",children:"Made Simple"})]}),e.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-2xl mx-auto lg:mx-0",children:"Get instant quotes, track your move, and enjoy stress-free relocation with Kenya's most trusted moving company. From residential to commercial moves, we've got you covered."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center lg:justify-start",children:[e.jsx(P,{variant:"default",size:"lg",onClick:t,iconName:"Calculator",iconPosition:"left",className:"text-lg px-8 py-4",children:"Calculate Cost Now"}),e.jsx(P,{variant:"outline",size:"lg",onClick:a,iconName:"ArrowDown",iconPosition:"right",className:"text-lg px-8 py-4",children:"Learn More"})]}),e.jsxs("div",{className:"mt-12 flex flex-wrap items-center justify-center lg:justify-start gap-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{name:"Shield",size:20,className:"text-green-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Fully Insured"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{name:"Clock",size:20,className:"text-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"24/7 Support"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{name:"Star",size:20,className:"text-yellow-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"5-Star Rated"})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"relative z-10",children:e.jsx(ps,{src:"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",alt:"Professional movers loading boxes into truck",className:"w-full h-96 lg:h-[500px] object-cover rounded-2xl shadow-elevated"})}),e.jsx("div",{className:"absolute -top-4 -left-4 bg-white p-4 rounded-xl shadow-card z-20 hidden lg:block",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(E,{name:"CheckCircle",size:24,className:"text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"500+ Moves"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Completed This Month"})]})]})}),e.jsx("div",{className:"absolute -bottom-4 -right-4 bg-white p-4 rounded-xl shadow-card z-20 hidden lg:block",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(E,{name:"Truck",size:24,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Same Day"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Service Available"})]})]})})]})]})})]})},ri=()=>{const s=[{id:1,icon:"Home",title:"Residential Moving",description:"Complete home relocation services with professional packing, loading, and unpacking. Perfect for apartments, houses, and condos.",features:["Professional Packing","Furniture Assembly","Fragile Item Care"],image:"https://images.pexels.com/photos/7464230/pexels-photo-7464230.jpeg?auto=compress&cs=tinysrgb&w=400"},{id:2,icon:"Building2",title:"Commercial Moving",description:"Minimize business downtime with our efficient office and commercial moving solutions. We handle everything from desks to servers.",features:["Minimal Downtime","IT Equipment Care","Weekend Service"],image:"https://images.pixabay.com/photo/2016/11/19/14/00/code-1839406_960_720.jpg"},{id:3,icon:"Package",title:"Packing Services",description:"Professional packing with high-quality materials. We pack everything from delicate items to bulky furniture with care.",features:["Quality Materials","Expert Techniques","Item Protection"],image:"https://images.unsplash.com/photo-1553062407-98eeb64c6a62?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80"},{id:4,icon:"Warehouse",title:"Storage Solutions",description:"Secure, climate-controlled storage facilities for short-term and long-term needs. Access your items anytime.",features:["Climate Controlled","24/7 Security","Flexible Terms"],image:"https://images.pexels.com/photos/4246120/pexels-photo-4246120.jpeg?auto=compress&cs=tinysrgb&w=400"},{id:5,icon:"Shield",title:"Insurance Coverage",description:"Comprehensive protection for your belongings during the move. Multiple coverage options available.",features:["Full Coverage","Quick Claims","Peace of Mind"],image:"https://images.pixabay.com/photo/2017/06/10/07/18/list-2389219_960_720.jpg"},{id:6,icon:"MapPin",title:"Long Distance",description:"Reliable long-distance moving services across Kenya. Real-time tracking and regular updates throughout your move.",features:["GPS Tracking","Regular Updates","Nationwide Coverage"],image:"https://images.unsplash.com/photo-1586953208448-b95a79798f07?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80"}];return e.jsx("section",{id:"services-section",className:"py-16 lg:py-20 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Our Moving Services"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"From residential moves to commercial relocations, we provide comprehensive moving solutions tailored to your specific needs."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map(t=>e.jsxs("div",{className:"group bg-white rounded-2xl shadow-card hover:shadow-elevated transition-all duration-300 overflow-hidden border border-gray-100 hover:border-primary/20",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx(ps,{src:t.image,alt:t.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"}),e.jsx("div",{className:"absolute top-4 left-4 w-12 h-12 bg-white/90 backdrop-blur-sm rounded-lg flex items-center justify-center",children:e.jsx(E,{name:t.icon,size:24,className:"text-primary"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3 group-hover:text-primary transition-colors",children:t.title}),e.jsx("p",{className:"text-gray-600 mb-4 leading-relaxed",children:t.description}),e.jsx("ul",{className:"space-y-2",children:t.features.map((a,r)=>e.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(E,{name:"Check",size:16,className:"text-green-500 mr-2 flex-shrink-0"}),a]},r))}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-100",children:e.jsxs("button",{className:"flex items-center text-primary font-medium hover:text-primary/80 transition-colors group",children:["Learn More",e.jsx(E,{name:"ArrowRight",size:16,className:"ml-2 group-hover:translate-x-1 transition-transform"})]})})]})]},t.id))}),e.jsx("div",{className:"text-center mt-16",children:e.jsxs("div",{className:"bg-gradient-to-r from-primary to-blue-600 rounded-2xl p-8 text-white",children:[e.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Need a Custom Moving Solution?"}),e.jsx("p",{className:"text-blue-100 mb-6 max-w-2xl mx-auto",children:"Every move is unique. Contact us for a personalized quote and moving plan that fits your specific requirements and budget."}),e.jsxs("button",{className:"bg-white text-primary px-8 py-3 rounded-lg font-semibold hover:bg-gray-50 transition-colors inline-flex items-center",children:["Get Custom Quote",e.jsx(E,{name:"ArrowRight",size:18,className:"ml-2"})]})]})})]})})},ni=()=>{const s=[{id:1,name:"Sarah Wanjiku",location:"Nairobi, Kenya",rating:5,comment:"Exceptional service! The team was professional, punctual, and handled our fragile items with utmost care. Moving from Westlands to Karen was seamless.",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-4.0.3&auto=format&fit=crop&w=150&q=80",moveType:"Residential Move"},{id:2,name:"David Kimani",location:"Mombasa, Kenya",rating:5,comment:"Our office relocation was completed over the weekend with zero downtime. The IT equipment was handled professionally. Highly recommend!",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&auto=format&fit=crop&w=150&q=80",moveType:"Commercial Move"},{id:3,name:"Grace Muthoni",location:"Kisumu, Kenya",rating:5,comment:"The packing service was incredible. They packed my entire 3-bedroom house in just 4 hours. Everything arrived safely at my new home.",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-4.0.3&auto=format&fit=crop&w=150&q=80",moveType:"Full Service Move"}],t=[{id:1,name:"KRA Certified",description:"Kenya Revenue Authority Registered",icon:"Shield",color:"text-green-600 bg-green-100"},{id:2,name:"M-Pesa Verified",description:"Secure Mobile Payments",icon:"Smartphone",color:"text-blue-600 bg-blue-100"},{id:3,name:"Insured & Bonded",description:"Full Coverage Protection",icon:"ShieldCheck",color:"text-purple-600 bg-purple-100"},{id:4,name:"ISO Certified",description:"Quality Management Standards",icon:"Award",color:"text-orange-600 bg-orange-100"}],a=[{label:"Happy Customers",value:"5,000+",icon:"Users"},{label:"Successful Moves",value:"8,500+",icon:"Truck"},{label:"Years Experience",value:"12+",icon:"Calendar"},{label:"Team Members",value:"50+",icon:"UserCheck"}];return e.jsx("section",{className:"py-16 lg:py-20 bg-gray-50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Trusted by Thousands of Kenyans"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Our commitment to excellence has earned us the trust of families and businesses across Kenya."})]}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6 mb-16",children:a.map(r=>e.jsxs("div",{className:"text-center bg-white rounded-xl p-6 shadow-card",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mx-auto mb-4",children:e.jsx(E,{name:r.icon,size:24,className:"text-primary"})}),e.jsx("div",{className:"text-2xl lg:text-3xl font-bold text-gray-900 mb-1",children:r.value}),e.jsx("div",{className:"text-sm text-gray-600",children:r.label})]},r.label))}),e.jsxs("div",{className:"mb-16",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 text-center mb-12",children:"What Our Customers Say"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:s.map(r=>e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-card hover:shadow-elevated transition-shadow",children:[e.jsx("div",{className:"flex items-center mb-4",children:[...Array(r.rating)].map((n,i)=>e.jsx(E,{name:"Star",size:16,className:"text-yellow-400 fill-current"},i))}),e.jsxs("p",{className:"text-gray-700 mb-6 leading-relaxed",children:['"',r.comment,'"']}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ps,{src:r.avatar,alt:r.name,className:"w-12 h-12 rounded-full object-cover mr-4"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:r.name}),e.jsx("div",{className:"text-sm text-gray-600",children:r.location}),e.jsx("div",{className:"text-xs text-primary font-medium",children:r.moveType})]})]})]},r.id))})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-card",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 text-center mb-8",children:"Licensed & Certified"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map(r=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`w-16 h-16 ${r.color} rounded-full flex items-center justify-center mx-auto mb-4`,children:e.jsx(E,{name:r.icon,size:28})}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:r.name}),e.jsx("p",{className:"text-sm text-gray-600",children:r.description})]},r.id))}),e.jsx("div",{className:"mt-8 pt-8 border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{name:"Lock",size:20,className:"text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"SSL Secured"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{name:"Shield",size:20,className:"text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Data Protected"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{name:"CheckCircle",size:20,className:"text-purple-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Verified Business"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{name:"Phone",size:20,className:"text-orange-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"24/7 Support"})]})]})})]})]})})},D=je.forwardRef(({className:s,type:t="text",label:a,description:r,error:n,required:i=!1,id:l,...o},c)=>{const d=l||`input-${Math.random().toString(36).substr(2,9)}`,u="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50";return t==="checkbox"?e.jsx("input",{type:"checkbox",className:ie("h-4 w-4 rounded border border-input bg-background text-primary focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:c,id:d,...o}):t==="radio"?e.jsx("input",{type:"radio",className:ie("h-4 w-4 rounded-full border border-input bg-background text-primary focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:c,id:d,...o}):e.jsxs("div",{className:"space-y-2",children:[a&&e.jsxs("label",{htmlFor:d,className:ie("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",n?"text-destructive":"text-foreground"),children:[a,i&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsx("input",{type:t,className:ie(u,n&&"border-destructive focus-visible:ring-destructive",s),ref:c,id:d,...o}),r&&!n&&e.jsx("p",{className:"text-sm text-muted-foreground",children:r}),n&&e.jsx("p",{className:"text-sm text-destructive",children:n})]})});D.displayName="Input";const ii=()=>{const[s,t]=T.useState({name:"",email:"",phone:"",service:"",message:""}),[a,r]=T.useState(!1),n=c=>{const{name:d,value:u}=c.target;t(b=>({...b,[d]:u}))},i=async c=>{c.preventDefault(),r(!0),setTimeout(()=>{alert("Thank you for your inquiry! We will contact you within 24 hours."),t({name:"",email:"",phone:"",service:"",message:""}),r(!1)},2e3)},l=[{icon:"Phone",title:"Call Us",details:["+254 700 123 456","+254 733 987 654"],description:"Available 24/7 for emergencies"},{icon:"Mail",title:"Email Us",details:["info@moveeasepro.co.ke","support@moveeasepro.co.ke"],description:"We respond within 2 hours"},{icon:"MapPin",title:"Visit Us",details:["Westlands, Nairobi","Mombasa Road, Nairobi"],description:"Mon-Sat: 8AM-6PM"},{icon:"MessageCircle",title:"WhatsApp",details:["+254 700 123 456"],description:"Quick responses via WhatsApp"}],o=["Nairobi County","Mombasa County","Kisumu County","Nakuru County","Eldoret","Thika","Machakos","Kiambu"];return e.jsx("section",{className:"py-16 lg:py-20 bg-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Get Your Free Moving Quote"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Ready to move? Contact us today for a personalized quote and let our experts handle your relocation needs."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Request a Quote"}),e.jsxs("form",{onSubmit:i,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(D,{label:"Full Name",type:"text",name:"name",value:s.name,onChange:n,placeholder:"Enter your full name",required:!0}),e.jsx(D,{label:"Email Address",type:"email",name:"email",value:s.email,onChange:n,placeholder:"your.email@example.com",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(D,{label:"Phone Number",type:"tel",name:"phone",value:s.phone,onChange:n,placeholder:"+254 700 123 456",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Type"}),e.jsxs("select",{name:"service",value:s.service,onChange:n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select a service"}),e.jsx("option",{value:"residential",children:"Residential Moving"}),e.jsx("option",{value:"commercial",children:"Commercial Moving"}),e.jsx("option",{value:"packing",children:"Packing Services"}),e.jsx("option",{value:"storage",children:"Storage Solutions"}),e.jsx("option",{value:"long-distance",children:"Long Distance"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message"}),e.jsx("textarea",{name:"message",value:s.message,onChange:n,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent resize-none",placeholder:"Tell us about your moving requirements..."})]}),e.jsx(P,{type:"submit",variant:"default",size:"lg",fullWidth:!0,loading:a,iconName:"Send",iconPosition:"right",children:a?"Sending...":"Get Free Quote"})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(E,{name:"Info",size:20,className:"text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Quick Response Guarantee"}),e.jsx("p",{className:"text-sm text-blue-700",children:"We'll contact you within 2 hours during business hours or first thing the next business day."})]})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-8",children:"Contact Information"}),e.jsx("div",{className:"space-y-6 mb-8",children:l.map((c,d)=>e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(E,{name:c.icon,size:24,className:"text-primary"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:c.title}),c.details.map((u,b)=>e.jsx("p",{className:"text-gray-700 font-medium",children:u},b)),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:c.description})]})]},d))}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(E,{name:"MapPin",size:20,className:"text-primary mr-2"}),"Service Areas"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:o.map((c,d)=>e.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[e.jsx(E,{name:"Check",size:14,className:"text-green-500 mr-2"}),c]},d))})]}),e.jsx("div",{className:"mt-8 h-64 rounded-xl overflow-hidden shadow-card",children:e.jsx("iframe",{width:"100%",height:"100%",loading:"lazy",title:"MoveEase Pro Office Location",referrerPolicy:"no-referrer-when-downgrade",src:"https://www.google.com/maps?q=-1.2921,36.8219&z=14&output=embed",className:"border-0"})})]})]})]})})},li=()=>{const s=new Date().getFullYear(),t={services:[{name:"Residential Moving",href:"#"},{name:"Commercial Moving",href:"#"},{name:"Packing Services",href:"#"},{name:"Storage Solutions",href:"#"},{name:"Long Distance",href:"#"},{name:"Insurance Coverage",href:"#"}],company:[{name:"About Us",href:"#"},{name:"Our Team",href:"#"},{name:"Careers",href:"#"},{name:"Blog",href:"#"},{name:"Press",href:"#"},{name:"Partners",href:"#"}],support:[{name:"Help Center",href:"#"},{name:"Contact Us",href:"#"},{name:"Track Your Move",href:"#"},{name:"File a Claim",href:"#"},{name:"Moving Tips",href:"#"},{name:"FAQ",href:"#"}],legal:[{name:"Privacy Policy",href:"#"},{name:"Terms of Service",href:"#"},{name:"Cookie Policy",href:"#"},{name:"Refund Policy",href:"#"},{name:"Licensing",href:"#"},{name:"Insurance Info",href:"#"}]},a=[{name:"Facebook",icon:"Facebook",href:"#"},{name:"Twitter",icon:"Twitter",href:"#"},{name:"Instagram",icon:"Instagram",href:"#"},{name:"LinkedIn",icon:"Linkedin",href:"#"},{name:"YouTube",icon:"Youtube",href:"#"}],r=[{name:"M-Pesa",icon:"Smartphone"},{name:"Visa",icon:"CreditCard"},{name:"Mastercard",icon:"CreditCard"},{name:"Bank Transfer",icon:"Building2"}];return e.jsxs("footer",{className:"bg-gray-900 text-white",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-primary rounded-lg flex items-center justify-center",children:e.jsx(E,{name:"Truck",size:24,color:"white"})}),e.jsx("span",{className:"text-2xl font-bold",children:"MoveEase Pro"})]}),e.jsx("p",{className:"text-gray-300 mb-6 leading-relaxed",children:"Kenya's most trusted moving company, providing professional relocation services across the country. We make moving simple, safe, and stress-free."}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(E,{name:"Phone",size:18,className:"text-primary"}),e.jsx("span",{className:"text-gray-300",children:"+254 700 123 456"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(E,{name:"Mail",size:18,className:"text-primary"}),e.jsx("span",{className:"text-gray-300",children:"info@moveeasepro.co.ke"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(E,{name:"MapPin",size:18,className:"text-primary"}),e.jsx("span",{className:"text-gray-300",children:"Westlands, Nairobi, Kenya"})]})]}),e.jsx("div",{className:"flex space-x-4",children:a.map(n=>e.jsx("a",{href:n.href,className:"w-10 h-10 bg-gray-800 rounded-lg flex items-center justify-center hover:bg-primary transition-colors","aria-label":n.name,children:e.jsx(E,{name:n.icon,size:20})},n.name))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Services"}),e.jsx("ul",{className:"space-y-3",children:t.services.map(n=>e.jsx("li",{children:e.jsx("a",{href:n.href,className:"text-gray-300 hover:text-white transition-colors",children:n.name})},n.name))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Company"}),e.jsx("ul",{className:"space-y-3",children:t.company.map(n=>e.jsx("li",{children:e.jsx("a",{href:n.href,className:"text-gray-300 hover:text-white transition-colors",children:n.name})},n.name))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-6",children:"Support"}),e.jsx("ul",{className:"space-y-3",children:t.support.map(n=>e.jsx("li",{children:e.jsx("a",{href:n.href,className:"text-gray-300 hover:text-white transition-colors",children:n.name})},n.name))})]})]}),e.jsx("div",{className:"mt-12 pt-8 border-t border-gray-800",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Stay Updated"}),e.jsx("p",{className:"text-gray-300",children:"Get moving tips, special offers, and company updates delivered to your inbox."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("input",{type:"email",placeholder:"Enter your email",className:"flex-1 px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent text-white placeholder-gray-400"}),e.jsx("button",{className:"px-6 py-3 bg-primary hover:bg-primary/90 rounded-lg font-medium transition-colors whitespace-nowrap",children:"Subscribe"})]})]})})]}),e.jsx("div",{className:"border-t border-gray-800",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-center space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"text-gray-400 text-sm",children:[" ",s," MoveEase Pro. All rights reserved."]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-6",children:t.legal.map(n=>e.jsx("a",{href:n.href,className:"text-gray-400 hover:text-white text-sm transition-colors",children:n.name},n.name))}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"We Accept:"}),e.jsx("div",{className:"flex space-x-2",children:r.map(n=>e.jsx("div",{className:"w-8 h-8 bg-gray-800 rounded flex items-center justify-center",title:n.name,children:e.jsx(E,{name:n.icon,size:16,className:"text-gray-400"})},n.name))})]})]})})})]})},na=()=>e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx(er,{}),e.jsxs("main",{children:[e.jsx(ai,{}),e.jsx(ri,{}),e.jsx(ni,{}),e.jsx(ii,{})]}),e.jsx(li,{})]});var tr={exports:{}},oi="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ci=oi,di=ci;function sr(){}function ar(){}ar.resetWarningCache=sr;var mi=function(){function s(r,n,i,l,o,c){if(c!==di){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}s.isRequired=s;function t(){return s}var a={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:t,element:s,elementType:s,instanceOf:t,node:s,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ar,resetWarningCache:sr};return a.PropTypes=a,a};tr.exports=mi();var ui=tr.exports;const ue=ms(ui);function xi(s){return s&&typeof s=="object"&&"default"in s?s.default:s}var rr=T,pi=xi(rr);function ia(s,t,a){return t in s?Object.defineProperty(s,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[t]=a,s}function gi(s,t){s.prototype=Object.create(t.prototype),s.prototype.constructor=s,s.__proto__=t}var hi=!!(typeof window<"u"&&window.document&&window.document.createElement);function yi(s,t,a){if(typeof s!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof t!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof a<"u"&&typeof a!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function r(n){return n.displayName||n.name||"Component"}return function(i){if(typeof i!="function")throw new Error("Expected WrappedComponent to be a React component.");var l=[],o;function c(){o=s(l.map(function(u){return u.props})),d.canUseDOM?t(o):a&&(o=a(o))}var d=function(u){gi(b,u);function b(){return u.apply(this,arguments)||this}b.peek=function(){return o},b.rewind=function(){if(b.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var g=o;return o=void 0,l=[],g};var C=b.prototype;return C.UNSAFE_componentWillMount=function(){l.push(this),c()},C.componentDidUpdate=function(){c()},C.componentWillUnmount=function(){var g=l.indexOf(this);l.splice(g,1),c()},C.render=function(){return pi.createElement(i,this.props)},b}(rr.PureComponent);return ia(d,"displayName","SideEffect("+r(i)+")"),ia(d,"canUseDOM",hi),d}}var fi=yi;const bi=ms(fi);var vi=typeof Element<"u",ji=typeof Map=="function",Ni=typeof Set=="function",wi=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Qt(s,t){if(s===t)return!0;if(s&&t&&typeof s=="object"&&typeof t=="object"){if(s.constructor!==t.constructor)return!1;var a,r,n;if(Array.isArray(s)){if(a=s.length,a!=t.length)return!1;for(r=a;r--!==0;)if(!Qt(s[r],t[r]))return!1;return!0}var i;if(ji&&s instanceof Map&&t instanceof Map){if(s.size!==t.size)return!1;for(i=s.entries();!(r=i.next()).done;)if(!t.has(r.value[0]))return!1;for(i=s.entries();!(r=i.next()).done;)if(!Qt(r.value[1],t.get(r.value[0])))return!1;return!0}if(Ni&&s instanceof Set&&t instanceof Set){if(s.size!==t.size)return!1;for(i=s.entries();!(r=i.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(wi&&ArrayBuffer.isView(s)&&ArrayBuffer.isView(t)){if(a=s.length,a!=t.length)return!1;for(r=a;r--!==0;)if(s[r]!==t[r])return!1;return!0}if(s.constructor===RegExp)return s.source===t.source&&s.flags===t.flags;if(s.valueOf!==Object.prototype.valueOf&&typeof s.valueOf=="function"&&typeof t.valueOf=="function")return s.valueOf()===t.valueOf();if(s.toString!==Object.prototype.toString&&typeof s.toString=="function"&&typeof t.toString=="function")return s.toString()===t.toString();if(n=Object.keys(s),a=n.length,a!==Object.keys(t).length)return!1;for(r=a;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,n[r]))return!1;if(vi&&s instanceof Element)return!1;for(r=a;r--!==0;)if(!((n[r]==="_owner"||n[r]==="__v"||n[r]==="__o")&&s.$$typeof)&&!Qt(s[n[r]],t[n[r]]))return!1;return!0}return s!==s&&t!==t}var Si=function(t,a){try{return Qt(t,a)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const Ci=ms(Si);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var la=Object.getOwnPropertySymbols,Ei=Object.prototype.hasOwnProperty,Ti=Object.prototype.propertyIsEnumerable;function Pi(s){if(s==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(s)}function Ai(){try{if(!Object.assign)return!1;var s=new String("abc");if(s[5]="de",Object.getOwnPropertyNames(s)[0]==="5")return!1;for(var t={},a=0;a<10;a++)t["_"+String.fromCharCode(a)]=a;var r=Object.getOwnPropertyNames(t).map(function(i){return t[i]});if(r.join("")!=="0123456789")return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(i){n[i]=i}),Object.keys(Object.assign({},n)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Ii=Ai()?Object.assign:function(s,t){for(var a,r=Pi(s),n,i=1;i<arguments.length;i++){a=Object(arguments[i]);for(var l in a)Ei.call(a,l)&&(r[l]=a[l]);if(la){n=la(a);for(var o=0;o<n.length;o++)Ti.call(a,n[o])&&(r[n[o]]=a[n[o]])}}return r};const ki=ms(Ii);var pt={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},ee={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(ee).map(function(s){return ee[s]});var xe={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},ls={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Ft={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},Di=Object.keys(ls).reduce(function(s,t){return s[ls[t]]=t,s},{}),Ri=[ee.NOSCRIPT,ee.SCRIPT,ee.STYLE],$e="data-react-helmet",Oi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_i=function(s,t){if(!(s instanceof t))throw new TypeError("Cannot call a class as a function")},Li=function(){function s(t,a){for(var r=0;r<a.length;r++){var n=a[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,a,r){return a&&s(t.prototype,a),r&&s(t,r),t}}(),Ae=Object.assign||function(s){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(s[r]=a[r])}return s},Mi=function(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);s.prototype=Object.create(t&&t.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(s,t):s.__proto__=t)},oa=function(s,t){var a={};for(var r in s)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(s,r)&&(a[r]=s[r]);return a},Fi=function(s,t){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:s},Ls=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return a===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},Ui=function(t){var a=wt(t,ee.TITLE),r=wt(t,Ft.TITLE_TEMPLATE);if(r&&a)return r.replace(/%s/g,function(){return Array.isArray(a)?a.join(""):a});var n=wt(t,Ft.DEFAULT_TITLE);return a||n||void 0},Bi=function(t){return wt(t,Ft.ON_CHANGE_CLIENT_STATE)||function(){}},Ts=function(t,a){return a.filter(function(r){return typeof r[t]<"u"}).map(function(r){return r[t]}).reduce(function(r,n){return Ae({},r,n)},{})},zi=function(t,a){return a.filter(function(r){return typeof r[ee.BASE]<"u"}).map(function(r){return r[ee.BASE]}).reverse().reduce(function(r,n){if(!r.length)for(var i=Object.keys(n),l=0;l<i.length;l++){var o=i[l],c=o.toLowerCase();if(t.indexOf(c)!==-1&&n[c])return r.concat(n)}return r},[])},kt=function(t,a,r){var n={};return r.filter(function(i){return Array.isArray(i[t])?!0:(typeof i[t]<"u"&&qi("Helmet: "+t+' should be of type "Array". Instead found type "'+Oi(i[t])+'"'),!1)}).map(function(i){return i[t]}).reverse().reduce(function(i,l){var o={};l.filter(function(C){for(var w=void 0,g=Object.keys(C),p=0;p<g.length;p++){var x=g[p],m=x.toLowerCase();a.indexOf(m)!==-1&&!(w===xe.REL&&C[w].toLowerCase()==="canonical")&&!(m===xe.REL&&C[m].toLowerCase()==="stylesheet")&&(w=m),a.indexOf(x)!==-1&&(x===xe.INNER_HTML||x===xe.CSS_TEXT||x===xe.ITEM_PROP)&&(w=x)}if(!w||!C[w])return!1;var j=C[w].toLowerCase();return n[w]||(n[w]={}),o[w]||(o[w]={}),n[w][j]?!1:(o[w][j]=!0,!0)}).reverse().forEach(function(C){return i.push(C)});for(var c=Object.keys(o),d=0;d<c.length;d++){var u=c[d],b=ki({},n[u],o[u]);n[u]=b}return i},[]).reverse()},wt=function(t,a){for(var r=t.length-1;r>=0;r--){var n=t[r];if(n.hasOwnProperty(a))return n[a]}return null},Gi=function(t){return{baseTag:zi([xe.HREF,xe.TARGET],t),bodyAttributes:Ts(pt.BODY,t),defer:wt(t,Ft.DEFER),encode:wt(t,Ft.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Ts(pt.HTML,t),linkTags:kt(ee.LINK,[xe.REL,xe.HREF],t),metaTags:kt(ee.META,[xe.NAME,xe.CHARSET,xe.HTTPEQUIV,xe.PROPERTY,xe.ITEM_PROP],t),noscriptTags:kt(ee.NOSCRIPT,[xe.INNER_HTML],t),onChangeClientState:Bi(t),scriptTags:kt(ee.SCRIPT,[xe.SRC,xe.INNER_HTML],t),styleTags:kt(ee.STYLE,[xe.CSS_TEXT],t),title:Ui(t),titleAttributes:Ts(pt.TITLE,t)}},Ms=function(){var s=Date.now();return function(t){var a=Date.now();a-s>16?(s=a,t(a)):setTimeout(function(){Ms(t)},0)}}(),ca=function(t){return clearTimeout(t)},$i=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||Ms:global.requestAnimationFrame||Ms,Hi=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||ca:global.cancelAnimationFrame||ca,qi=function(t){return console&&typeof console.warn=="function"&&console.warn(t)},Dt=null,Vi=function(t){Dt&&Hi(Dt),t.defer?Dt=$i(function(){da(t,function(){Dt=null})}):(da(t),Dt=null)},da=function(t,a){var r=t.baseTag,n=t.bodyAttributes,i=t.htmlAttributes,l=t.linkTags,o=t.metaTags,c=t.noscriptTags,d=t.onChangeClientState,u=t.scriptTags,b=t.styleTags,C=t.title,w=t.titleAttributes;Fs(ee.BODY,n),Fs(ee.HTML,i),Ki(C,w);var g={baseTag:vt(ee.BASE,r),linkTags:vt(ee.LINK,l),metaTags:vt(ee.META,o),noscriptTags:vt(ee.NOSCRIPT,c),scriptTags:vt(ee.SCRIPT,u),styleTags:vt(ee.STYLE,b)},p={},x={};Object.keys(g).forEach(function(m){var j=g[m],S=j.newTags,y=j.oldTags;S.length&&(p[m]=S),y.length&&(x[m]=g[m].oldTags)}),a&&a(),d(t,p,x)},nr=function(t){return Array.isArray(t)?t.join(""):t},Ki=function(t,a){typeof t<"u"&&document.title!==t&&(document.title=nr(t)),Fs(ee.TITLE,a)},Fs=function(t,a){var r=document.getElementsByTagName(t)[0];if(r){for(var n=r.getAttribute($e),i=n?n.split(","):[],l=[].concat(i),o=Object.keys(a),c=0;c<o.length;c++){var d=o[c],u=a[d]||"";r.getAttribute(d)!==u&&r.setAttribute(d,u),i.indexOf(d)===-1&&i.push(d);var b=l.indexOf(d);b!==-1&&l.splice(b,1)}for(var C=l.length-1;C>=0;C--)r.removeAttribute(l[C]);i.length===l.length?r.removeAttribute($e):r.getAttribute($e)!==o.join(",")&&r.setAttribute($e,o.join(","))}},vt=function(t,a){var r=document.head||document.querySelector(ee.HEAD),n=r.querySelectorAll(t+"["+$e+"]"),i=Array.prototype.slice.call(n),l=[],o=void 0;return a&&a.length&&a.forEach(function(c){var d=document.createElement(t);for(var u in c)if(c.hasOwnProperty(u))if(u===xe.INNER_HTML)d.innerHTML=c.innerHTML;else if(u===xe.CSS_TEXT)d.styleSheet?d.styleSheet.cssText=c.cssText:d.appendChild(document.createTextNode(c.cssText));else{var b=typeof c[u]>"u"?"":c[u];d.setAttribute(u,b)}d.setAttribute($e,"true"),i.some(function(C,w){return o=w,d.isEqualNode(C)})?i.splice(o,1):l.push(d)}),i.forEach(function(c){return c.parentNode.removeChild(c)}),l.forEach(function(c){return r.appendChild(c)}),{oldTags:i,newTags:l}},ir=function(t){return Object.keys(t).reduce(function(a,r){var n=typeof t[r]<"u"?r+'="'+t[r]+'"':""+r;return a?a+" "+n:n},"")},Wi=function(t,a,r,n){var i=ir(r),l=nr(a);return i?"<"+t+" "+$e+'="true" '+i+">"+Ls(l,n)+"</"+t+">":"<"+t+" "+$e+'="true">'+Ls(l,n)+"</"+t+">"},Yi=function(t,a,r){return a.reduce(function(n,i){var l=Object.keys(i).filter(function(d){return!(d===xe.INNER_HTML||d===xe.CSS_TEXT)}).reduce(function(d,u){var b=typeof i[u]>"u"?u:u+'="'+Ls(i[u],r)+'"';return d?d+" "+b:b},""),o=i.innerHTML||i.cssText||"",c=Ri.indexOf(t)===-1;return n+"<"+t+" "+$e+'="true" '+l+(c?"/>":">"+o+"</"+t+">")},"")},lr=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(r,n){return r[ls[n]||n]=t[n],r},a)},Ji=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(r,n){return r[Di[n]||n]=t[n],r},a)},Qi=function(t,a,r){var n,i=(n={key:a},n[$e]=!0,n),l=lr(r,i);return[je.createElement(ee.TITLE,l,a)]},Zi=function(t,a){return a.map(function(r,n){var i,l=(i={key:n},i[$e]=!0,i);return Object.keys(r).forEach(function(o){var c=ls[o]||o;if(c===xe.INNER_HTML||c===xe.CSS_TEXT){var d=r.innerHTML||r.cssText;l.dangerouslySetInnerHTML={__html:d}}else l[c]=r[o]}),je.createElement(t,l)})},Xe=function(t,a,r){switch(t){case ee.TITLE:return{toComponent:function(){return Qi(t,a.title,a.titleAttributes)},toString:function(){return Wi(t,a.title,a.titleAttributes,r)}};case pt.BODY:case pt.HTML:return{toComponent:function(){return lr(a)},toString:function(){return ir(a)}};default:return{toComponent:function(){return Zi(t,a)},toString:function(){return Yi(t,a,r)}}}},or=function(t){var a=t.baseTag,r=t.bodyAttributes,n=t.encode,i=t.htmlAttributes,l=t.linkTags,o=t.metaTags,c=t.noscriptTags,d=t.scriptTags,u=t.styleTags,b=t.title,C=b===void 0?"":b,w=t.titleAttributes;return{base:Xe(ee.BASE,a,n),bodyAttributes:Xe(pt.BODY,r,n),htmlAttributes:Xe(pt.HTML,i,n),link:Xe(ee.LINK,l,n),meta:Xe(ee.META,o,n),noscript:Xe(ee.NOSCRIPT,c,n),script:Xe(ee.SCRIPT,d,n),style:Xe(ee.STYLE,u,n),title:Xe(ee.TITLE,{title:C,titleAttributes:w},n)}},Xi=function(t){var a,r;return r=a=function(n){Mi(i,n);function i(){return _i(this,i),Fi(this,n.apply(this,arguments))}return i.prototype.shouldComponentUpdate=function(o){return!Ci(this.props,o)},i.prototype.mapNestedChildrenToProps=function(o,c){if(!c)return null;switch(o.type){case ee.SCRIPT:case ee.NOSCRIPT:return{innerHTML:c};case ee.STYLE:return{cssText:c}}throw new Error("<"+o.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},i.prototype.flattenArrayTypeChildren=function(o){var c,d=o.child,u=o.arrayTypeChildren,b=o.newChildProps,C=o.nestedChildren;return Ae({},u,(c={},c[d.type]=[].concat(u[d.type]||[],[Ae({},b,this.mapNestedChildrenToProps(d,C))]),c))},i.prototype.mapObjectTypeChildren=function(o){var c,d,u=o.child,b=o.newProps,C=o.newChildProps,w=o.nestedChildren;switch(u.type){case ee.TITLE:return Ae({},b,(c={},c[u.type]=w,c.titleAttributes=Ae({},C),c));case ee.BODY:return Ae({},b,{bodyAttributes:Ae({},C)});case ee.HTML:return Ae({},b,{htmlAttributes:Ae({},C)})}return Ae({},b,(d={},d[u.type]=Ae({},C),d))},i.prototype.mapArrayTypeChildrenToProps=function(o,c){var d=Ae({},c);return Object.keys(o).forEach(function(u){var b;d=Ae({},d,(b={},b[u]=o[u],b))}),d},i.prototype.warnOnInvalidChildren=function(o,c){return!0},i.prototype.mapChildrenToProps=function(o,c){var d=this,u={};return je.Children.forEach(o,function(b){if(!(!b||!b.props)){var C=b.props,w=C.children,g=oa(C,["children"]),p=Ji(g);switch(d.warnOnInvalidChildren(b,w),b.type){case ee.LINK:case ee.META:case ee.NOSCRIPT:case ee.SCRIPT:case ee.STYLE:u=d.flattenArrayTypeChildren({child:b,arrayTypeChildren:u,newChildProps:p,nestedChildren:w});break;default:c=d.mapObjectTypeChildren({child:b,newProps:c,newChildProps:p,nestedChildren:w});break}}}),c=this.mapArrayTypeChildrenToProps(u,c),c},i.prototype.render=function(){var o=this.props,c=o.children,d=oa(o,["children"]),u=Ae({},d);return c&&(u=this.mapChildrenToProps(c,u)),je.createElement(t,u)},Li(i,null,[{key:"canUseDOM",set:function(o){t.canUseDOM=o}}]),i}(je.Component),a.propTypes={base:ue.object,bodyAttributes:ue.object,children:ue.oneOfType([ue.arrayOf(ue.node),ue.node]),defaultTitle:ue.string,defer:ue.bool,encodeSpecialCharacters:ue.bool,htmlAttributes:ue.object,link:ue.arrayOf(ue.object),meta:ue.arrayOf(ue.object),noscript:ue.arrayOf(ue.object),onChangeClientState:ue.func,script:ue.arrayOf(ue.object),style:ue.arrayOf(ue.object),title:ue.string,titleAttributes:ue.object,titleTemplate:ue.string},a.defaultProps={defer:!0,encodeSpecialCharacters:!0},a.peek=t.peek,a.rewind=function(){var n=t.rewind();return n||(n=or({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),n},r},el=function(){return null},tl=bi(Gi,Vi,or)(el),We=Xi(tl);We.renderStatic=We.rewind;const sl=({currentStep:s,totalSteps:t,stepTitles:a})=>{var n,i;const r=[{id:1,title:"Locations",icon:"MapPin"},{id:2,title:"Rooms",icon:"Home"},{id:3,title:"Services",icon:"Plus"},{id:4,title:"Summary",icon:"FileText"}];return e.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Moving Quote Calculator"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Step ",s," of ",t]})]}),e.jsx("div",{className:"hidden md:block",children:e.jsx("div",{className:"flex items-center justify-between",children:r.map((l,o)=>{const c=l.id<s,d=l.id===s;return l.id>s,e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center transition-all duration-200 ${c?"bg-green-500 text-white":d?"bg-primary text-white":"bg-gray-200 text-gray-500"}`,children:c?e.jsx(E,{name:"Check",size:20}):e.jsx(E,{name:l.icon,size:20})}),e.jsx("span",{className:`mt-2 text-sm font-medium ${d?"text-primary":c?"text-green-600":"text-gray-500"}`,children:l.title})]}),o<r.length-1&&e.jsx("div",{className:`flex-1 h-0.5 mx-4 transition-all duration-200 ${l.id<s?"bg-green-500":"bg-gray-200"}`})]},l.id)})})}),e.jsxs("div",{className:"md:hidden",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${s/t*100}%`}})}),e.jsxs("span",{className:"ml-3 text-sm font-medium text-primary",children:[Math.round(s/t*100),"%"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center mr-3 bg-primary text-white",children:e.jsx(E,{name:(n=r[s-1])==null?void 0:n.icon,size:16})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:(i=r[s-1])==null?void 0:i.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Step ",s," of ",t]})]})]})]})]})},al=({onLocationSelect:s,currentStep:t,isActive:a})=>{const[r,n]=T.useState(null),[i,l]=T.useState(""),[o,c]=T.useState(!1),[d,u]=T.useState(""),[b,C]=T.useState([]),w=["Nairobi, Kenya","Mombasa, Kenya","Kisumu, Kenya","Nakuru, Kenya","Eldoret, Kenya","Thika, Kenya","Malindi, Kenya","Kitale, Kenya","Garissa, Kenya","Kakamega, Kenya","Machakos, Kenya","Meru, Kenya","Nyeri, Kenya","Kericho, Kenya","Embu, Kenya"],g=()=>{if(c(!0),u(""),!navigator.geolocation){u("Geolocation is not supported by this browser"),c(!1);return}navigator.geolocation.getCurrentPosition(m=>{setTimeout(()=>{const j="Nairobi, Kenya";n(j),c(!1),s("current",j)},2e3)},m=>{u("Unable to detect location. Please enter manually."),c(!1)},{timeout:1e4})},p=m=>{if(l(m),m.length>2){const j=w.filter(S=>S.toLowerCase().includes(m.toLowerCase()));C(j.slice(0,5))}else C([])},x=m=>{l(m),C([]),s("destination",m)};return T.useEffect(()=>{a&&!r&&g()},[a]),a?e.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white font-semibold mr-3",children:t}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Select Locations"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[e.jsx(E,{name:"MapPin",size:16,className:"inline mr-2"}),"Current Location"]}),o?e.jsxs("div",{className:"flex items-center justify-center p-4 bg-blue-50 rounded-lg",children:[e.jsx(E,{name:"Loader2",size:20,className:"animate-spin text-primary mr-2"}),e.jsx("span",{className:"text-primary",children:"Detecting your location..."})]}):r?e.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{name:"CheckCircle",size:20,className:"text-green-600 mr-2"}),e.jsx("span",{className:"text-green-800 font-medium",children:r})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:g,iconName:"RefreshCw",iconPosition:"left",children:"Retry"})]}):e.jsxs("div",{className:"space-y-3",children:[d&&e.jsx("div",{className:"p-3 bg-red-50 rounded-lg",children:e.jsx("p",{className:"text-red-700 text-sm",children:d})}),e.jsx(P,{variant:"outline",onClick:g,iconName:"MapPin",iconPosition:"left",fullWidth:!0,children:"Detect Current Location"})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(D,{label:"Destination Location",type:"text",placeholder:"Enter destination city...",value:i,onChange:m=>p(m.target.value),className:"mb-2"}),b.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 z-10 bg-white border border-gray-200 rounded-lg shadow-elevated max-h-48 overflow-y-auto",children:b.map((m,j)=>e.jsx("button",{onClick:()=>x(m),className:"w-full text-left px-4 py-3 hover:bg-gray-50 transition-smooth border-b border-gray-100 last:border-b-0",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{name:"MapPin",size:16,className:"text-gray-400 mr-3"}),e.jsx("span",{className:"text-gray-900",children:m})]})},j))})]})}),r&&i&&e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{name:"Route",size:20,className:"text-blue-600 mr-2"}),e.jsx("span",{className:"text-blue-800 font-medium",children:"Estimated Distance"})]}),e.jsx("span",{className:"text-blue-900 font-semibold",children:"~45 km"})]})})]}):null},rl=({onRoomSelect:s,currentStep:t,isActive:a})=>{const[r,n]=T.useState({}),i=[{id:"bedroom",name:"Bedrooms",icon:"Bed",basePrice:2500,description:"Including wardrobes and furniture"},{id:"living_room",name:"Living Room",icon:"Sofa",basePrice:3e3,description:"Sofas, TV, and entertainment unit"},{id:"kitchen",name:"Kitchen",icon:"ChefHat",basePrice:2e3,description:"Appliances and kitchenware"},{id:"bathroom",name:"Bathrooms",icon:"Bath",basePrice:1e3,description:"Fixtures and accessories"},{id:"dining_room",name:"Dining Room",icon:"UtensilsCrossed",basePrice:1500,description:"Table, chairs, and dining items"},{id:"office",name:"Home Office",icon:"Briefcase",basePrice:2e3,description:"Desk, chair, and office equipment"}],l=(d,u)=>{const b=r[d]||0,C=Math.max(0,Math.min(10,b+u)),w={...r,[d]:C};C===0&&delete w[d],n(w),s(w)},o=()=>Object.values(r).reduce((d,u)=>d+u,0),c=()=>Object.entries(r).reduce((d,[u,b])=>{const C=i.find(w=>w.id===u);return d+(C?C.basePrice*b:0)},0);return a?e.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white font-semibold mr-3",children:t}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Select Rooms"})]}),o()>0&&e.jsxs("div",{className:"text-sm text-gray-600",children:[o()," room",o()!==1?"s":""," selected"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:i.map(d=>{const u=r[d.id]||0,b=u>0;return e.jsxs("div",{className:`border-2 rounded-xl p-4 transition-all duration-200 ${b?"border-primary bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center mr-3 ${b?"bg-primary text-white":"bg-gray-100 text-gray-600"}`,children:e.jsx(E,{name:d.icon,size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:d.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["KES ",d.basePrice.toLocaleString()]})]})]})}),e.jsx("p",{className:"text-xs text-gray-600 mb-4",children:d.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{variant:"outline",size:"icon",onClick:()=>l(d.id,-1),disabled:u===0,className:"w-8 h-8",children:e.jsx(E,{name:"Minus",size:14})}),e.jsx("span",{className:"w-8 text-center font-medium text-gray-900",children:u}),e.jsx(P,{variant:"outline",size:"icon",onClick:()=>l(d.id,1),disabled:u>=10,className:"w-8 h-8",children:e.jsx(E,{name:"Plus",size:14})})]}),b&&e.jsxs("div",{className:"text-sm font-medium text-primary",children:["KES ",(d.basePrice*u).toLocaleString()]})]})]},d.id)})}),o()>0&&e.jsx("div",{className:"p-4 bg-green-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{name:"Home",size:20,className:"text-green-600 mr-2"}),e.jsxs("span",{className:"text-green-800 font-medium",children:["Total Rooms: ",o()]})]}),e.jsxs("span",{className:"text-green-900 font-semibold text-lg",children:["KES ",c().toLocaleString()]})]})})]}):null},Ie=je.forwardRef(({className:s,id:t,checked:a,indeterminate:r=!1,disabled:n=!1,required:i=!1,label:l,description:o,error:c,size:d="default",...u},b)=>{const C=t||`checkbox-${Math.random().toString(36).substr(2,9)}`,w={sm:"h-4 w-4",default:"h-4 w-4",lg:"h-5 w-5"};return e.jsxs("div",{className:ie("flex items-start space-x-2",s),children:[e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("input",{type:"checkbox",ref:b,id:C,checked:a,disabled:n,required:i,className:"sr-only",...u}),e.jsxs("label",{htmlFor:C,className:ie("peer shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground cursor-pointer transition-colors",w[d],a&&"bg-primary text-primary-foreground border-primary",r&&"bg-primary text-primary-foreground border-primary",c&&"border-destructive",n&&"cursor-not-allowed opacity-50"),children:[a&&!r&&e.jsx(Fa,{className:"h-3 w-3 text-current flex items-center justify-center"}),r&&e.jsx(Wr,{className:"h-3 w-3 text-current flex items-center justify-center"})]})]}),(l||o||c)&&e.jsxs("div",{className:"flex-1 space-y-1",children:[l&&e.jsxs("label",{htmlFor:C,className:ie("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",c?"text-destructive":"text-foreground"),children:[l,i&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),o&&!c&&e.jsx("p",{className:"text-sm text-muted-foreground",children:o}),c&&e.jsx("p",{className:"text-sm text-destructive",children:c})]})]})});Ie.displayName="Checkbox";const cr=je.forwardRef(({className:s,children:t,label:a,description:r,error:n,required:i=!1,disabled:l=!1,...o},c)=>e.jsxs("fieldset",{ref:c,disabled:l,className:ie("space-y-3",s),...o,children:[a&&e.jsxs("legend",{className:ie("text-sm font-medium",n?"text-destructive":"text-foreground"),children:[a,i&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),r&&!n&&e.jsx("p",{className:"text-sm text-muted-foreground",children:r}),e.jsx("div",{className:"space-y-2",children:t}),n&&e.jsx("p",{className:"text-sm text-destructive",children:n})]}));cr.displayName="CheckboxGroup";Ie.Group=cr;const nl=({onServicesSelect:s,currentStep:t,isActive:a})=>{const[r,n]=T.useState({}),i=[{id:"packing",name:"Professional Packing",icon:"Package",price:5e3,description:"Complete packing service with quality materials",features:["Bubble wrap protection","Labeled boxes","Fragile item care"]},{id:"storage",name:"Temporary Storage",icon:"Warehouse",price:3e3,description:"Secure storage facility for up to 30 days",features:["Climate controlled","24/7 security","Easy access"]},{id:"insurance",name:"Moving Insurance",icon:"Shield",price:2e3,description:"Comprehensive coverage for your belongings",features:["Full replacement value","Damage protection","Peace of mind"]},{id:"assembly",name:"Furniture Assembly",icon:"Wrench",price:2500,description:"Professional assembly and disassembly service",features:["Expert technicians","All furniture types","Tool included"]},{id:"cleaning",name:"Post-Move Cleaning",icon:"Sparkles",price:4e3,description:"Deep cleaning of your old residence",features:["Professional cleaners","All rooms covered","Eco-friendly products"]},{id:"express",name:"Express Delivery",icon:"Zap",price:3500,description:"Priority moving with faster timeline",features:["Same day service","Dedicated team","Priority scheduling"]}],l=(d,u)=>{const b={...r,[d]:u};u||delete b[d],n(b),s(b)},o=()=>Object.keys(r).reduce((d,u)=>{const b=i.find(C=>C.id===u);return d+(b?b.price:0)},0),c=()=>Object.keys(r).length;return a?e.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white font-semibold mr-3",children:t}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Additional Services"})]}),c()>0&&e.jsxs("div",{className:"text-sm text-gray-600",children:[c()," service",c()!==1?"s":""," selected"]})]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Enhance your moving experience with our professional add-on services"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:i.map(d=>{const u=r[d.id];return e.jsxs("div",{className:`border-2 rounded-xl p-5 transition-all duration-200 cursor-pointer ${u?"border-primary bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>l(d.id,!u),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center mr-3 ${u?"bg-primary text-white":"bg-gray-100 text-gray-600"}`,children:e.jsx(E,{name:d.icon,size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:d.name}),e.jsxs("p",{className:"text-sm font-semibold text-primary",children:["KES ",d.price.toLocaleString()]})]})]}),e.jsx(Ie,{checked:u||!1,onChange:b=>l(d.id,b.target.checked),onClick:b=>b.stopPropagation()})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:d.description}),e.jsx("div",{className:"space-y-1",children:d.features.map((b,C)=>e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[e.jsx(E,{name:"Check",size:12,className:"text-green-500 mr-2"}),e.jsx("span",{children:b})]},C))})]},d.id)})}),c()>0&&e.jsx("div",{className:"p-4 bg-green-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{name:"Plus",size:20,className:"text-green-600 mr-2"}),e.jsxs("span",{className:"text-green-800 font-medium",children:["Additional Services (",c(),")"]})]}),e.jsxs("span",{className:"text-green-900 font-semibold text-lg",children:["KES ",o().toLocaleString()]})]})})]}):null},il=({locations:s,rooms:t,services:a,currentStep:r,isActive:n,onQuoteGenerated:i})=>{const[l,o]=T.useState({name:"",email:"",phone:""}),[c,d]=T.useState(!1),[u,b]=T.useState(!1),C=[{id:"bedroom",name:"Bedrooms",basePrice:2500},{id:"living_room",name:"Living Room",basePrice:3e3},{id:"kitchen",name:"Kitchen",basePrice:2e3},{id:"bathroom",name:"Bathrooms",basePrice:1e3},{id:"dining_room",name:"Dining Room",basePrice:1500},{id:"office",name:"Home Office",basePrice:2e3}],w=[{id:"packing",name:"Professional Packing",price:5e3},{id:"storage",name:"Temporary Storage",price:3e3},{id:"insurance",name:"Moving Insurance",price:2e3},{id:"assembly",name:"Furniture Assembly",price:2500},{id:"cleaning",name:"Post-Move Cleaning",price:4e3},{id:"express",name:"Express Delivery",price:3500}],g=()=>Object.entries(t||{}).reduce((f,[v,h])=>{const I=C.find(R=>R.id===v);return f+(I?I.basePrice*h:0)},0),p=()=>Object.keys(a||{}).reduce((f,v)=>{const h=w.find(I=>I.id===v);return f+(h?h.price:0)},0),x=()=>5e3,m=()=>2e3,j=()=>Math.round((g()+p())*.16),S=()=>x()+m()+g()+p()+j(),y=(f,v)=>{o(h=>({...h,[f]:v}))},A=async()=>{d(!0),setTimeout(()=>{d(!1),b(!0),i({customerInfo:l,locations:s,rooms:t,services:a,total:S(),quoteId:`MV-${Date.now()}`})},2e3)},N=()=>{const f=`Hi! I got a moving quote from MoveEase Pro:

From: ${(s==null?void 0:s.current)||"Not specified"}
To: ${(s==null?void 0:s.destination)||"Not specified"}
Total: KES ${S().toLocaleString()}

Quote ID: MV-${Date.now()}

Please contact me to proceed.`,v=`https://wa.me/?text=${encodeURIComponent(f)}`;window.open(v,"_blank")};return n?e.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center text-white font-semibold mr-3",children:r}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Quote Summary"})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("h3",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[e.jsx(E,{name:"MapPin",size:16,className:"mr-2"}),"Moving Route"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:"text-gray-600 w-16",children:"From:"}),e.jsx("span",{className:"font-medium",children:(s==null?void 0:s.current)||"Not specified"})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:"text-gray-600 w-16",children:"To:"}),e.jsx("span",{className:"font-medium",children:(s==null?void 0:s.destination)||"Not specified"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Cost Breakdown"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"Base Moving Fee"}),e.jsxs("span",{className:"font-medium",children:["KES ",x().toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"Distance Fee (~45 km)"}),e.jsxs("span",{className:"font-medium",children:["KES ",m().toLocaleString()]})]}),Object.entries(t||{}).map(([f,v])=>{const h=C.find(I=>I.id===f);return!h||v===0?null:e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsxs("span",{className:"text-gray-600",children:[h.name," (",v,"x)"]}),e.jsxs("span",{className:"font-medium",children:["KES ",(h.basePrice*v).toLocaleString()]})]},f)}),Object.keys(a||{}).map(f=>{const v=w.find(h=>h.id===f);return v?e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:v.name}),e.jsxs("span",{className:"font-medium",children:["KES ",v.price.toLocaleString()]})]},f):null}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:"VAT (16%)"}),e.jsxs("span",{className:"font-medium",children:["KES ",j().toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between py-3 border-t-2 border-primary",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Total Amount"}),e.jsxs("span",{className:"text-xl font-bold text-primary",children:["KES ",S().toLocaleString()]})]})]})]}),!u&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-4",children:"Your Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(D,{label:"Full Name",type:"text",placeholder:"Enter your name",value:l.name,onChange:f=>y("name",f.target.value),required:!0}),e.jsx(D,{label:"Phone Number",type:"tel",placeholder:"+254 700 000 000",value:l.phone,onChange:f=>y("phone",f.target.value),required:!0}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(D,{label:"Email Address",type:"email",placeholder:"your.email@example.com",value:l.email,onChange:f=>y("email",f.target.value),required:!0})})]})]}),e.jsx("div",{className:"space-y-3",children:u?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg text-center",children:[e.jsx(E,{name:"CheckCircle",size:24,className:"text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"text-green-800 font-medium",children:"Quote Generated Successfully!"}),e.jsxs("p",{className:"text-green-700 text-sm",children:["Quote ID: MV-",Date.now()]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx(P,{variant:"outline",onClick:N,iconName:"MessageCircle",iconPosition:"left",children:"Share via WhatsApp"}),e.jsx(P,{variant:"default",onClick:()=>window.location.href="/login",iconName:"Calendar",iconPosition:"left",children:"Book Now"})]})]}):e.jsx(P,{variant:"default",fullWidth:!0,onClick:A,loading:c,disabled:!l.name||!l.email||!l.phone,iconName:"FileText",iconPosition:"left",children:c?"Generating Quote...":"Generate Quote"})})]}):null},ll=({rooms:s,services:t,isVisible:a,onGetQuote:r})=>{const n=[{id:"bedroom",name:"Bedrooms",basePrice:2500},{id:"living_room",name:"Living Room",basePrice:3e3},{id:"kitchen",name:"Kitchen",basePrice:2e3},{id:"bathroom",name:"Bathrooms",basePrice:1e3},{id:"dining_room",name:"Dining Room",basePrice:1500},{id:"office",name:"Home Office",basePrice:2e3}],i=[{id:"packing",name:"Professional Packing",price:5e3},{id:"storage",name:"Temporary Storage",price:3e3},{id:"insurance",name:"Moving Insurance",price:2e3},{id:"assembly",name:"Furniture Assembly",price:2500},{id:"cleaning",name:"Post-Move Cleaning",price:4e3},{id:"express",name:"Express Delivery",price:3500}],l=()=>Object.entries(s||{}).reduce((g,[p,x])=>{const m=n.find(j=>j.id===p);return g+(m?m.basePrice*x:0)},0),o=()=>Object.keys(t||{}).reduce((g,p)=>{const x=i.find(m=>m.id===p);return g+(x?x.price:0)},0),c=()=>7e3,d=()=>c()+l()+o(),u=()=>Math.round(d()*.16),b=()=>d()+u(),C=()=>Object.values(s||{}).reduce((g,p)=>g+p,0),w=()=>Object.keys(t||{}).length;return a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden lg:block fixed right-6 top-24 w-80 z-30",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-elevated p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(E,{name:"Calculator",size:20,className:"text-primary mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Price Estimate"})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:C()}),e.jsx("div",{className:"text-xs text-gray-600",children:"Rooms"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:w()}),e.jsx("div",{className:"text-xs text-gray-600",children:"Services"})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Base & Distance"}),e.jsxs("span",{children:["KES ",c().toLocaleString()]})]}),l()>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Rooms"}),e.jsxs("span",{children:["KES ",l().toLocaleString()]})]}),o()>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Services"}),e.jsxs("span",{children:["KES ",o().toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"VAT (16%)"}),e.jsxs("span",{children:["KES ",u().toLocaleString()]})]}),e.jsxs("div",{className:"border-t pt-2 flex justify-between font-semibold text-lg",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{className:"text-primary",children:["KES ",b().toLocaleString()]})]})]})]}),e.jsx(P,{variant:"default",fullWidth:!0,onClick:r,iconName:"ArrowRight",iconPosition:"right",children:"Get Detailed Quote"}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"* Prices are estimates. Final quote may vary based on specific requirements."})})]})}),e.jsxs("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 z-50 bg-white border-t border-gray-200 shadow-modal p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:C()}),e.jsx("div",{className:"text-xs text-gray-600",children:"Rooms"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:w()}),e.jsx("div",{className:"text-xs text-gray-600",children:"Services"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-primary",children:["KES ",b().toLocaleString()]}),e.jsx("div",{className:"text-xs text-gray-600",children:"Total Estimate"})]})]}),e.jsx(P,{variant:"default",fullWidth:!0,onClick:r,iconName:"ArrowRight",iconPosition:"right",children:"Get Detailed Quote"})]})]}):null},ol=()=>{const[s,t]=T.useState(1),[a,r]=T.useState({}),[n,i]=T.useState({}),[l,o]=T.useState({}),[c,d]=T.useState(null),[u,b]=T.useState(!1),C=4,w=["Select Locations","Choose Rooms","Additional Services","Quote Summary"];T.useEffect(()=>{const N=Object.keys(n).length>0||Object.keys(l).length>0;b(N)},[n,l]);const g=(N,f)=>{r(v=>({...v,[N]:f}))},p=N=>{i(N)},x=N=>{o(N)},m=N=>{d(N)},j=()=>{switch(s){case 1:return a.current&&a.destination;case 2:return Object.keys(n).length>0;case 3:return!0;case 4:return!0;default:return!1}},S=()=>{s<C&&j()&&t(s+1)},y=()=>{s>1&&t(s-1)},A=()=>{t(4)};return e.jsxs(e.Fragment,{children:[e.jsxs(We,{children:[e.jsx("title",{children:"Cost Calculator - MoveEase Pro"}),e.jsx("meta",{name:"description",content:"Get instant, transparent pricing estimates for your moving needs with our interactive cost calculator."})]}),e.jsx(er,{}),e.jsxs("div",{className:"min-h-screen bg-gray-50 pt-16",children:[e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(sl,{currentStep:s,totalSteps:C,stepTitles:w}),e.jsxs("div",{className:"relative",children:[e.jsx(al,{onLocationSelect:g,currentStep:1,isActive:s===1}),e.jsx(rl,{onRoomSelect:p,currentStep:2,isActive:s===2}),e.jsx(nl,{onServicesSelect:x,currentStep:3,isActive:s===3}),e.jsx(il,{locations:a,rooms:n,services:l,currentStep:4,isActive:s===4,onQuoteGenerated:m})]}),s<4&&e.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 mb-20 lg:mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(P,{variant:"outline",onClick:y,disabled:s===1,iconName:"ChevronLeft",iconPosition:"left",children:"Previous"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[s<4&&j()&&e.jsx(P,{variant:"ghost",onClick:A,iconName:"FastForward",iconPosition:"left",className:"text-primary",children:"Skip to Quote"}),e.jsx(P,{variant:"default",onClick:S,disabled:!j(),iconName:"ChevronRight",iconPosition:"right",children:s===C?"Complete":"Next"})]})]}),!j()&&e.jsx("div",{className:"mt-4 p-3 bg-amber-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{name:"AlertCircle",size:16,className:"text-amber-600 mr-2"}),e.jsxs("span",{className:"text-amber-800 text-sm",children:[s===1&&"Please select both current and destination locations to continue.",s===2&&"Please select at least one room to continue."]})]})})]}),s===4&&e.jsx("div",{className:"text-center mb-6",children:e.jsx(P,{variant:"outline",onClick:()=>t(1),iconName:"RotateCcw",iconPosition:"left",children:"Start New Quote"})})]}),e.jsx(ll,{rooms:n,services:l,isVisible:u&&s<4,onGetQuote:A})]})]})},B=je.forwardRef(({className:s,options:t=[],value:a,defaultValue:r,placeholder:n="Select an option",multiple:i=!1,disabled:l=!1,required:o=!1,label:c,description:d,error:u,searchable:b=!1,clearable:C=!1,loading:w=!1,id:g,name:p,onChange:x,onOpenChange:m,...j},S)=>{const[y,A]=T.useState(!1),[N,f]=T.useState(""),v=g||`select-${Math.random().toString(36).substr(2,9)}`,h=b&&N?t.filter(M=>M.label.toLowerCase().includes(N.toLowerCase())||M.value&&M.value.toString().toLowerCase().includes(N.toLowerCase())):t,I=()=>{if(!a)return n;if(i){const z=t.filter(G=>a.includes(G.value));return z.length===0?n:z.length===1?z[0].label:`${z.length} items selected`}const M=t.find(z=>z.value===a);return M?M.label:n},R=()=>{if(!l){const M=!y;A(M),m==null||m(M),M||f("")}},L=M=>{if(i){const z=a||[],G=z.includes(M.value)?z.filter(se=>se!==M.value):[...z,M.value];x==null||x(G)}else x==null||x(M.value),A(!1),m==null||m(!1)},H=M=>{M.stopPropagation(),x==null||x(i?[]:"")},k=M=>{f(M.target.value)},U=M=>i?(a==null?void 0:a.includes(M))||!1:a===M,O=i?(a==null?void 0:a.length)>0:a!==void 0&&a!=="";return e.jsxs("div",{className:ie("relative",s),children:[c&&e.jsxs("label",{htmlFor:v,className:ie("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 mb-2 block",u?"text-destructive":"text-foreground"),children:[c,o&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{ref:S,id:v,type:"button",className:ie("flex h-10 w-full items-center justify-between rounded-md border border-input bg-white text-black px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",u&&"border-destructive focus:ring-destructive",!O&&"text-muted-foreground"),onClick:R,disabled:l,"aria-expanded":y,"aria-haspopup":"listbox",...j,children:[e.jsx("span",{className:"truncate",children:I()}),e.jsxs("div",{className:"flex items-center gap-1",children:[w&&e.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),C&&O&&!w&&e.jsx(P,{variant:"ghost",size:"icon",className:"h-4 w-4",onClick:H,children:e.jsx(Yr,{className:"h-3 w-3"})}),e.jsx(Jr,{className:ie("h-4 w-4 transition-transform",y&&"rotate-180")})]})]}),e.jsxs("select",{name:p,value:a||"",onChange:()=>{},className:"sr-only",tabIndex:-1,multiple:i,required:o,children:[e.jsx("option",{value:"",children:"Select..."}),t.map(M=>e.jsx("option",{value:M.value,children:M.label},M.value))]}),y&&e.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white text-black border border-border rounded-md shadow-md",children:[b&&e.jsx("div",{className:"p-2 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(Qr,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(D,{placeholder:"Search options...",value:N,onChange:k,className:"pl-8"})]})}),e.jsx("div",{className:"py-1 max-h-60 overflow-auto",children:h.length===0?e.jsx("div",{className:"px-3 py-2 text-sm text-muted-foreground",children:N?"No options found":"No options available"}):h.map(M=>e.jsxs("div",{className:ie("relative flex cursor-pointer select-none items-center rounded-sm px-3 py-2 text-sm outline-none hover:bg-accent hover:text-accent-foreground",U(M.value)&&"bg-primary text-primary-foreground",M.disabled&&"pointer-events-none opacity-50"),onClick:()=>!M.disabled&&L(M),children:[e.jsx("span",{className:"flex-1",children:M.label}),i&&U(M.value)&&e.jsx(Fa,{className:"h-4 w-4"}),M.description&&e.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:M.description})]},M.value))})]})]}),d&&!u&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:d}),u&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:u})]})});B.displayName="Select";const cl=({onFiltersChange:s,onClearFilters:t})=>{var o;const[a,r]=T.useState({search:"",status:"",dateFrom:"",dateTo:"",amountMin:"",amountMax:""}),n=[{value:"",label:"All Statuses"},{value:"paid",label:"Paid"},{value:"pending",label:"Pending"},{value:"overdue",label:"Overdue"},{value:"partial",label:"Partially Paid"},{value:"cancelled",label:"Cancelled"}],i=(c,d)=>{const u={...a,[c]:d};r(u),s(u)},l=()=>{r({search:"",status:"",dateFrom:"",dateTo:"",amountMin:"",amountMax:""}),t()};return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Filter Invoices"}),e.jsx(P,{variant:"ghost",size:"sm",onClick:l,iconName:"X",iconPosition:"left",children:"Clear All"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[e.jsx("div",{className:"xl:col-span-2",children:e.jsx(D,{type:"search",placeholder:"Search invoices, customers...",value:a.search,onChange:c=>i("search",c.target.value)})}),e.jsx(B,{placeholder:"Payment Status",options:n,value:a.status,onChange:c=>i("status",c)}),e.jsx(D,{type:"date",placeholder:"From Date",value:a.dateFrom,onChange:c=>i("dateFrom",c.target.value)}),e.jsx(D,{type:"date",placeholder:"To Date",value:a.dateTo,onChange:c=>i("dateTo",c.target.value)}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(D,{type:"number",placeholder:"Min KES",value:a.amountMin,onChange:c=>i("amountMin",c.target.value)}),e.jsx(D,{type:"number",placeholder:"Max KES",value:a.amountMax,onChange:c=>i("amountMax",c.target.value)})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[a.search&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:["Search: ",a.search,e.jsx("button",{onClick:()=>i("search",""),className:"ml-2 hover:text-blue-600",children:e.jsx(E,{name:"X",size:14})})]}),a.status&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-green-100 text-green-800",children:["Status: ",(o=n.find(c=>c.value===a.status))==null?void 0:o.label,e.jsx("button",{onClick:()=>i("status",""),className:"ml-2 hover:text-green-600",children:e.jsx(E,{name:"X",size:14})})]}),(a.dateFrom||a.dateTo)&&e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-purple-100 text-purple-800",children:["Date Range: ",a.dateFrom||"Start"," - ",a.dateTo||"End",e.jsx("button",{onClick:()=>{i("dateFrom",""),i("dateTo","")},className:"ml-2 hover:text-purple-600",children:e.jsx(E,{name:"X",size:14})})]})]})]})},dl=({invoices:s,onInvoiceSelect:t,selectedInvoices:a,onBulkAction:r,onInvoiceAction:n})=>{const[i,l]=T.useState(new Set),[o,c]=T.useState({key:"invoiceDate",direction:"desc"}),d=m=>{const j=new Set(i);j.has(m)?j.delete(m):j.add(m),l(j)},u=m=>{let j="asc";o.key===m&&o.direction==="asc"&&(j="desc"),c({key:m,direction:j})},b=m=>{const j={paid:{bg:"bg-green-100",text:"text-green-800",icon:"CheckCircle"},pending:{bg:"bg-yellow-100",text:"text-yellow-800",icon:"Clock"},overdue:{bg:"bg-red-100",text:"text-red-800",icon:"AlertCircle"},partial:{bg:"bg-blue-100",text:"text-blue-800",icon:"MinusCircle"},cancelled:{bg:"bg-gray-100",text:"text-gray-800",icon:"XCircle"}},S=j[m]||j.pending;return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${S.bg} ${S.text}`,children:[e.jsx(E,{name:S.icon,size:12,className:"mr-1"}),m.charAt(0).toUpperCase()+m.slice(1)]})},C=m=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:2}).format(m),w=m=>new Date(m).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}),g=m=>{t(m?s.map(j=>j.id):[])},p=s.length>0&&a.length===s.length,x=a.length>0&&a.length<s.length;return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Ie,{checked:p,indeterminate:x,onChange:m=>g(m.target.checked)}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:a.length>0?`${a.length} selected`:"Select all"})]}),a.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>r("sendReminder"),iconName:"Mail",iconPosition:"left",children:"Send Reminders"}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>r("export"),iconName:"Download",iconPosition:"left",children:"Export"})]})]})}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsx(Ie,{checked:p,indeterminate:x,onChange:m=>g(m.target.checked)})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>u("invoiceNumber"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Invoice #"}),e.jsx(E,{name:"ArrowUpDown",size:14})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>u("customerName"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Customer"}),e.jsx(E,{name:"ArrowUpDown",size:14})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>u("serviceDate"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Service Date"}),e.jsx(E,{name:"ArrowUpDown",size:14})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>u("totalAmount"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Amount"}),e.jsx(E,{name:"ArrowUpDown",size:14})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(m=>e.jsxs(je.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(Ie,{checked:a.includes(m.id),onChange:j=>{j.target.checked?t([...a,m.id]):t(a.filter(S=>S!==m.id))}})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>d(m.id),className:"mr-2 p-1 hover:bg-gray-100 rounded",children:e.jsx(E,{name:i.has(m.id)?"ChevronDown":"ChevronRight",size:16})}),e.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.invoiceNumber})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:e.jsx(E,{name:"User",size:20,className:"text-gray-600"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.customerName}),e.jsx("div",{className:"text-sm text-gray-500",children:m.customerEmail})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w(m.serviceDate)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:C(m.totalAmount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:b(m.paymentStatus)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C(m.outstandingBalance)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>n("view",m.id),iconName:"Eye"}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>n("edit",m.id),iconName:"Edit"}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>n("download",m.id),iconName:"Download"})]})})]}),i.has(m.id)&&e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-6 py-4 bg-gray-50",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Service Details"}),e.jsx("div",{className:"space-y-2",children:m.lineItems.map((j,S)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:j.description}),e.jsx("span",{className:"font-medium",children:C(j.amount)})]},S))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Payment History"}),e.jsx("div",{className:"space-y-2",children:m.paymentHistory.map((j,S)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:j.method}),e.jsx("div",{className:"text-xs text-gray-500",children:w(j.date)})]}),e.jsx("span",{className:"font-medium text-green-600",children:C(j.amount)})]},S))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Recent Communication"}),e.jsx("div",{className:"space-y-2",children:m.communicationLog.slice(0,3).map((j,S)=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{name:j.type==="email"?"Mail":"MessageCircle",size:12}),e.jsx("span",{className:"text-gray-600",children:j.subject})]}),e.jsx("div",{className:"text-xs text-gray-500 ml-5",children:w(j.date)})]},S))})]})]})})})]},m.id))})]})}),e.jsx("div",{className:"lg:hidden",children:s.map(m=>e.jsxs("div",{className:"border-b border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ie,{checked:a.includes(m.id),onChange:j=>{j.target.checked?t([...a,m.id]):t(a.filter(S=>S!==m.id))}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.invoiceNumber}),e.jsx("div",{className:"text-xs text-gray-500",children:m.customerName})]})]}),b(m.paymentStatus)]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Service Date"}),e.jsx("div",{className:"text-sm font-medium",children:w(m.serviceDate)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Amount"}),e.jsx("div",{className:"text-sm font-medium",children:C(m.totalAmount)})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["Balance: ",e.jsx("span",{className:"font-medium",children:C(m.outstandingBalance)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>n("view",m.id),iconName:"Eye"}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>n("edit",m.id),iconName:"Edit"})]})]})]},m.id))})]})},ml=({stats:s})=>{const t=n=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:2}).format(n),a=[{title:"Total Invoices",value:s.totalInvoices.toLocaleString(),icon:"FileText",color:"blue",change:"+12%",changeType:"positive"},{title:"Total Revenue",value:t(s.totalRevenue),icon:"DollarSign",color:"green",change:"+8.2%",changeType:"positive"},{title:"Outstanding Amount",value:t(s.outstandingAmount),icon:"AlertCircle",color:"red",change:"-5.1%",changeType:"negative"},{title:"Paid This Month",value:t(s.paidThisMonth),icon:"CheckCircle",color:"emerald",change:"+15.3%",changeType:"positive"}],r=n=>{const i={blue:{bg:"bg-blue-50",icon:"bg-blue-100 text-blue-600",text:"text-blue-600"},green:{bg:"bg-green-50",icon:"bg-green-100 text-green-600",text:"text-green-600"},red:{bg:"bg-red-50",icon:"bg-red-100 text-red-600",text:"text-red-600"},emerald:{bg:"bg-emerald-50",icon:"bg-emerald-100 text-emerald-600",text:"text-emerald-600"}};return i[n]||i.blue};return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:a.map((n,i)=>{const l=r(n.color);return e.jsx("div",{className:`${l.bg} rounded-lg p-6 border border-gray-200`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:n.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-2",children:n.value}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{name:n.changeType==="positive"?"TrendingUp":"TrendingDown",size:16,className:`mr-1 ${n.changeType==="positive"?"text-green-500":"text-red-500"}`}),e.jsx("span",{className:`text-sm font-medium ${n.changeType==="positive"?"text-green-600":"text-red-600"}`,children:n.change}),e.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"vs last month"})]})]}),e.jsx("div",{className:`${l.icon} p-3 rounded-lg`,children:e.jsx(E,{name:n.icon,size:24})})]})},i)})})},ul=({isOpen:s,onClose:t,invoice:a,onPaymentSubmit:r})=>{const[n,i]=T.useState({amount:"",method:"",reference:"",notes:""}),l=[{value:"mpesa",label:"M-Pesa"},{value:"bank_transfer",label:"Bank Transfer"},{value:"cash",label:"Cash"},{value:"cheque",label:"Cheque"},{value:"card",label:"Credit/Debit Card"}],o=(u,b)=>{i(C=>({...C,[u]:b}))},c=u=>{u.preventDefault(),r({invoiceId:a.id,...n,amount:parseFloat(n.amount),timestamp:new Date().toISOString()}),t()},d=u=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:2}).format(u);return!s||!a?null:e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-modal transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Record Payment"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-smooth",children:e.jsx(E,{name:"X",size:24})})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Invoice Number"}),e.jsx("p",{className:"font-medium",children:a.invoiceNumber})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Customer"}),e.jsx("p",{className:"font-medium",children:a.customerName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Amount"}),e.jsx("p",{className:"font-medium",children:d(a.totalAmount)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Outstanding Balance"}),e.jsx("p",{className:"font-medium text-red-600",children:d(a.outstandingBalance)})]})]})}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsx(D,{label:"Payment Amount (KES)",type:"number",step:"0.01",min:"0",max:a.outstandingBalance,value:n.amount,onChange:u=>o("amount",u.target.value),placeholder:"0.00",required:!0}),e.jsx(B,{label:"Payment Method",options:l,value:n.method,onChange:u=>o("method",u),placeholder:"Select payment method",required:!0}),e.jsx(D,{label:"Reference Number",type:"text",value:n.reference,onChange:u=>o("reference",u.target.value),placeholder:"Transaction/Reference ID",description:"M-Pesa code, bank reference, etc."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),e.jsx("textarea",{rows:3,value:n.notes,onChange:u=>o("notes",u.target.value),placeholder:"Additional payment notes...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-primary focus:border-primary"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600 mr-2",children:"Quick amounts:"}),e.jsx("button",{type:"button",onClick:()=>o("amount",(a.outstandingBalance/2).toString()),className:"px-3 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded-md transition-smooth",children:"50%"}),e.jsx("button",{type:"button",onClick:()=>o("amount",a.outstandingBalance.toString()),className:"px-3 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded-md transition-smooth",children:"Full Amount"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[e.jsx(P,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),e.jsx(P,{type:"submit",variant:"default",iconName:"CreditCard",iconPosition:"left",disabled:!n.amount||!n.method,children:"Record Payment"})]})]})]})]})})},xl=({selectedCount:s,onBulkAction:t,onClearSelection:a})=>{const[r,n]=T.useState(""),i=[{value:"",label:"Select action..."},{value:"sendReminder",label:"Send Payment Reminders"},{value:"markPaid",label:"Mark as Paid"},{value:"markOverdue",label:"Mark as Overdue"},{value:"export",label:"Export to PDF"},{value:"exportExcel",label:"Export to Excel"},{value:"delete",label:"Delete Invoices"}],l=()=>{r&&(t(r),n(""))};return s===0?null:e.jsx("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-40 lg:left-80 lg:transform-none",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-modal border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center",children:e.jsx(E,{name:"Check",size:16,color:"white"})}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[s," invoice",s!==1?"s":""," selected"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{options:i,value:r,onChange:n,placeholder:"Choose action",className:"min-w-48"}),e.jsx(P,{variant:"default",size:"sm",onClick:l,disabled:!r,iconName:"Play",iconPosition:"left",children:"Execute"})]}),e.jsxs("div",{className:"flex items-center space-x-2 border-l border-gray-200 pl-4",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>t("sendReminder"),iconName:"Mail",iconPosition:"left",children:"Send Reminders"}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>t("export"),iconName:"Download",iconPosition:"left",children:"Export"})]}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-smooth",title:"Clear selection",children:e.jsx(E,{name:"X",size:20})})]}),r&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"text-xs text-gray-600",children:[r==="sendReminder"&&"Send payment reminder emails to selected customers",r==="markPaid"&&"Mark selected invoices as fully paid",r==="markOverdue"&&"Mark selected invoices as overdue",r==="export"&&"Export selected invoices to PDF format",r==="exportExcel"&&"Export selected invoices to Excel spreadsheet",r==="delete"&&"Permanently delete selected invoices (cannot be undone)"]})})]})})},pl=()=>{const[s,t]=T.useState([]),[a,r]=T.useState([]),[n,i]=T.useState([]),[l,o]=T.useState(!1),[c,d]=T.useState(null),[u,b]=T.useState(1),[C]=T.useState(10),w=[{id:1,invoiceNumber:"INV-2024-001",customerName:"John Kamau",customerEmail:"john.kamau@email.com",serviceDate:"2024-01-15",invoiceDate:"2024-01-16",totalAmount:45e3,paidAmount:45e3,outstandingBalance:0,paymentStatus:"paid",lineItems:[{description:"3-bedroom house moving",amount:35e3},{description:"Packing materials",amount:5e3},{description:"Insurance coverage",amount:5e3}],paymentHistory:[{method:"M-Pesa",amount:45e3,date:"2024-01-20",reference:"QA12B3C4D5"}],communicationLog:[{type:"email",subject:"Invoice sent",date:"2024-01-16"},{type:"whatsapp",subject:"Payment confirmation",date:"2024-01-20"}]},{id:2,invoiceNumber:"INV-2024-002",customerName:"Mary Wanjiku",customerEmail:"mary.wanjiku@email.com",serviceDate:"2024-01-18",invoiceDate:"2024-01-19",totalAmount:28e3,paidAmount:15e3,outstandingBalance:13e3,paymentStatus:"partial",lineItems:[{description:"2-bedroom apartment moving",amount:25e3},{description:"Storage (1 week)",amount:3e3}],paymentHistory:[{method:"Bank Transfer",amount:15e3,date:"2024-01-22",reference:"BT789456123"}],communicationLog:[{type:"email",subject:"Invoice sent",date:"2024-01-19"},{type:"email",subject:"Payment reminder",date:"2024-01-25"}]},{id:3,invoiceNumber:"INV-2024-003",customerName:"Peter Ochieng",customerEmail:"peter.ochieng@email.com",serviceDate:"2024-01-20",invoiceDate:"2024-01-21",totalAmount:52e3,paidAmount:0,outstandingBalance:52e3,paymentStatus:"overdue",lineItems:[{description:"4-bedroom house moving",amount:42e3},{description:"Packing service",amount:8e3},{description:"Cleaning service",amount:2e3}],paymentHistory:[],communicationLog:[{type:"email",subject:"Invoice sent",date:"2024-01-21"},{type:"email",subject:"Payment reminder",date:"2024-01-28"},{type:"whatsapp",subject:"Overdue notice",date:"2024-02-05"}]},{id:4,invoiceNumber:"INV-2024-004",customerName:"Grace Njeri",customerEmail:"grace.njeri@email.com",serviceDate:"2024-01-22",invoiceDate:"2024-01-23",totalAmount:18e3,paidAmount:0,outstandingBalance:18e3,paymentStatus:"pending",lineItems:[{description:"1-bedroom apartment moving",amount:15e3},{description:"Insurance coverage",amount:3e3}],paymentHistory:[],communicationLog:[{type:"email",subject:"Invoice sent",date:"2024-01-23"}]},{id:5,invoiceNumber:"INV-2024-005",customerName:"David Mwangi",customerEmail:"david.mwangi@email.com",serviceDate:"2024-01-25",invoiceDate:"2024-01-26",totalAmount:0,paidAmount:0,outstandingBalance:0,paymentStatus:"cancelled",lineItems:[{description:"Office relocation (cancelled)",amount:75e3}],paymentHistory:[],communicationLog:[{type:"email",subject:"Invoice sent",date:"2024-01-26"},{type:"email",subject:"Service cancelled",date:"2024-01-27"}]}],g={totalInvoices:156,totalRevenue:245e4,outstandingAmount:485e3,paidThisMonth:125e4};T.useEffect(()=>{t(w),r(w)},[]);const p=f=>{let v=[...s];f.search&&(v=v.filter(h=>h.invoiceNumber.toLowerCase().includes(f.search.toLowerCase())||h.customerName.toLowerCase().includes(f.search.toLowerCase())||h.customerEmail.toLowerCase().includes(f.search.toLowerCase()))),f.status&&(v=v.filter(h=>h.paymentStatus===f.status)),f.dateFrom&&(v=v.filter(h=>new Date(h.serviceDate)>=new Date(f.dateFrom))),f.dateTo&&(v=v.filter(h=>new Date(h.serviceDate)<=new Date(f.dateTo))),f.amountMin&&(v=v.filter(h=>h.totalAmount>=parseFloat(f.amountMin))),f.amountMax&&(v=v.filter(h=>h.totalAmount<=parseFloat(f.amountMax))),r(v),b(1)},x=()=>{r(s),b(1)},m=(f,v)=>{const h=s.find(I=>I.id===v);switch(f){case"view":console.log("Viewing invoice:",v);break;case"edit":console.log("Editing invoice:",v);break;case"download":console.log("Downloading invoice:",v);break;case"recordPayment":d(h),o(!0);break}},j=f=>{switch(console.log(`Executing bulk action: ${f} on invoices:`,n),f){case"sendReminder":alert(`Sending payment reminders to ${n.length} customers`);break;case"export":alert(`Exporting ${n.length} invoices to PDF`);break;case"markPaid":alert(`Marking ${n.length} invoices as paid`);break;case"delete":confirm(`Are you sure you want to delete ${n.length} invoices?`)&&(alert("Invoices deleted successfully"),i([]));break}},S=f=>{console.log("Recording payment:",f),alert("Payment recorded successfully!"),t(v=>v.map(h=>{if(h.id===f.invoiceId){const I=h.paidAmount+f.amount,R=h.totalAmount-I;return{...h,paidAmount:I,outstandingBalance:R,paymentStatus:R===0?"paid":"partial",paymentHistory:[...h.paymentHistory,{method:f.method,amount:f.amount,date:f.timestamp,reference:f.reference}]}}return h}))},y=Math.ceil(a.length/C),A=(u-1)*C,N=a.slice(A,A+C);return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(nt,{}),e.jsxs("div",{className:"lg:ml-64 pb-16 lg:pb-0",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-6 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Invoice Management"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage billing, payments, and financial records"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(P,{variant:"outline",iconName:"Plus",iconPosition:"left",onClick:()=>console.log("Create new invoice"),children:"New Invoice"}),e.jsx(P,{variant:"default",iconName:"CreditCard",iconPosition:"left",onClick:()=>{if(n.length===1){const f=s.find(v=>v.id===n[0]);m("recordPayment",f.id)}else alert("Please select a single invoice to record payment")},disabled:n.length!==1,children:"Record Payment"})]})]})}),e.jsxs("div",{className:"px-4 py-6 sm:px-6 lg:px-8",children:[e.jsx(ml,{stats:g}),e.jsx(cl,{onFiltersChange:p,onClearFilters:x}),e.jsx(dl,{invoices:N,onInvoiceSelect:i,selectedInvoices:n,onBulkAction:j,onInvoiceAction:m}),y>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",A+1," to ",Math.min(A+C,a.length)," of ",a.length," results"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>b(f=>Math.max(f-1,1)),disabled:u===1,iconName:"ChevronLeft",iconPosition:"left",children:"Previous"}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,y)},(f,v)=>{const h=v+1;return e.jsx("button",{onClick:()=>b(h),className:`px-3 py-2 text-sm rounded-md transition-smooth ${u===h?"bg-primary text-white":"text-gray-700 hover:bg-gray-100"}`,children:h},h)})}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>b(f=>Math.min(f+1,y)),disabled:u===y,iconName:"ChevronRight",iconPosition:"right",children:"Next"})]})]})]})]}),e.jsx(xl,{selectedCount:n.length,onBulkAction:j,onClearSelection:()=>i([])}),e.jsx(ul,{isOpen:l,onClose:()=>{o(!1),d(null)},invoice:c,onPaymentSubmit:S})]})},gl=()=>e.jsx("header",{className:"w-full bg-white border-b border-gray-200 shadow-card",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs(dt,{to:"/landing-page",className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:e.jsx(E,{name:"Truck",size:20,color:"white"})}),e.jsx("span",{className:"text-xl font-semibold text-gray-900",children:"MoveEase Pro"})]}),e.jsxs(dt,{to:"/landing-page",className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium text-gray-700 hover:text-primary hover:bg-gray-50 rounded-lg transition-smooth",children:[e.jsx(E,{name:"ArrowLeft",size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Back to Home"}),e.jsx("span",{className:"sm:hidden",children:"Home"})]})]})})}),hl=()=>{const s=us(),[t,a]=T.useState({email:"",password:"",rememberMe:!1}),[r,n]=T.useState({}),[i,l]=T.useState(!1),[o,c]=T.useState(!1),[d,u]=T.useState(""),b={admin:{email:"admin@moveease.co.ke",password:"admin123"},customer:{email:"customer@example.com",password:"customer123"}},C=()=>{const m={};return t.email?/\S+@\S+\.\S+/.test(t.email)||(m.email="Please enter a valid email address"):m.email="Email is required",t.password?t.password.length<6&&(m.password="Password must be at least 6 characters"):m.password="Password is required",n(m),Object.keys(m).length===0},w=m=>{const{name:j,value:S,type:y,checked:A}=m.target;a(N=>({...N,[j]:y==="checkbox"?A:S})),r[j]&&n(N=>({...N,[j]:""})),d&&u("")},g=async m=>{m.preventDefault(),C()&&(l(!0),setTimeout(()=>{const{email:j,password:S}=t;j===b.admin.email&&S===b.admin.password?(localStorage.setItem("userType","admin"),localStorage.setItem("userEmail",j),t.rememberMe&&localStorage.setItem("rememberMe","true"),s("/admin-dashboard")):j===b.customer.email&&S===b.customer.password?(localStorage.setItem("userType","customer"),localStorage.setItem("userEmail",j),t.rememberMe&&localStorage.setItem("rememberMe","true"),s("/cost-calculator")):u("Invalid email or password. Please try again."),l(!1)},1500))},p=()=>{alert("Password reset link has been sent to your email address.")},x=()=>{l(!0),setTimeout(()=>{localStorage.setItem("userType","customer"),localStorage.setItem("userEmail","google.user@gmail.com"),s("/cost-calculator"),l(!1)},2e3)};return e.jsx("div",{className:"w-full max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-elevated p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-primary rounded-xl flex items-center justify-center mx-auto mb-4",children:e.jsx(E,{name:"Truck",size:32,color:"white"})}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-600",children:"Sign in to your MoveEase Pro account"})]}),d&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center space-x-3",children:[e.jsx(E,{name:"AlertCircle",size:20,className:"text-red-500 flex-shrink-0"}),e.jsx("p",{className:"text-red-700 text-sm",children:d})]}),e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Demo Credentials:"}),e.jsxs("div",{className:"text-xs text-blue-700 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Admin:"})," admin@moveease.co.ke / admin123"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Customer:"})," customer@example.com / customer123"]})]})]}),e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[e.jsx(D,{label:"Email Address",type:"email",name:"email",placeholder:"Enter your email",value:t.email,onChange:w,error:r.email,required:!0}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{label:"Password",type:o?"text":"password",name:"password",placeholder:"Enter your password",value:t.password,onChange:w,error:r.password,required:!0}),e.jsx("button",{type:"button",onClick:()=>c(!o),className:"absolute right-3 top-9 text-gray-500 hover:text-gray-700 transition-smooth",children:e.jsx(E,{name:o?"EyeOff":"Eye",size:20})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ie,{label:"Remember me",name:"rememberMe",checked:t.rememberMe,onChange:w}),e.jsx("button",{type:"button",onClick:p,className:"text-sm text-primary hover:text-blue-800 transition-smooth",children:"Forgot password?"})]}),e.jsx(P,{type:"submit",variant:"default",fullWidth:!0,loading:i,iconName:"LogIn",iconPosition:"right",children:i?"Signing In...":"Sign In"})]}),e.jsxs("div",{className:"my-6 flex items-center",children:[e.jsx("div",{className:"flex-1 border-t border-gray-200"}),e.jsx("span",{className:"px-4 text-sm text-gray-500",children:"or"}),e.jsx("div",{className:"flex-1 border-t border-gray-200"})]}),e.jsx(P,{variant:"outline",fullWidth:!0,onClick:x,disabled:i,className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),e.jsx("span",{children:"Continue with Google"})]})}),e.jsxs("div",{className:"text-center space-y-3",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx("button",{onClick:()=>s("/cost-calculator"),className:"text-primary hover:text-blue-800 font-medium transition-smooth",children:"Get Started"})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-4 text-sm text-gray-500",children:[e.jsx("button",{className:"hover:text-gray-700 transition-smooth",children:"Help Center"}),e.jsx("span",{children:""}),e.jsx("button",{className:"hover:text-gray-700 transition-smooth",children:"Contact Support"})]})]})]})})},yl=()=>e.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-primary to-blue-800 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute inset-0 bg-repeat",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`,backgroundSize:"60px 60px"}})}),e.jsx("div",{className:"relative z-10 flex flex-col justify-center px-12 py-16 text-white",children:e.jsxs("div",{className:"max-w-md",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Streamline Your Moving Business"}),e.jsx("p",{className:"text-lg text-blue-100 mb-8",children:"Manage quotes, invoices, and customer relationships all in one powerful platform designed for Kenyan moving companies."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-white bg-opacity-20 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("span",{className:"text-blue-100",children:"Automated cost calculations"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-white bg-opacity-20 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("span",{className:"text-blue-100",children:"M-Pesa payment integration"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-white bg-opacity-20 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("span",{className:"text-blue-100",children:"WhatsApp customer communication"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-white bg-opacity-20 rounded-lg flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("span",{className:"text-blue-100",children:"Complete business analytics"})]})]}),e.jsxs("div",{className:"mt-12 p-6 bg-white bg-opacity-10 rounded-xl backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(ps,{src:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=40&h=40&fit=crop&crop=face",alt:"Customer testimonial",className:"w-10 h-10 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:"James Mwangi"}),e.jsx("p",{className:"text-sm text-blue-200",children:"Swift Movers Kenya"})]})]}),e.jsx("p",{className:"text-blue-100 text-sm italic",children:'"MoveEase Pro transformed our business operations. The M-Pesa integration and automated quotes have increased our efficiency by 300%."'})]})]})}),e.jsx("div",{className:"absolute top-20 right-20 w-32 h-32 bg-white bg-opacity-5 rounded-full"}),e.jsx("div",{className:"absolute bottom-20 right-32 w-20 h-20 bg-white bg-opacity-5 rounded-full"}),e.jsx("div",{className:"absolute top-1/2 right-10 w-16 h-16 bg-white bg-opacity-5 rounded-full"})]}),fl=()=>(T.useEffect(()=>{const s=localStorage.getItem("userType");s==="admin"?window.location.href="/admin-dashboard":s==="customer"&&(window.location.href="/cost-calculator")},[]),e.jsxs(e.Fragment,{children:[e.jsxs(We,{children:[e.jsx("title",{children:"Sign In - MoveEase Pro | Secure Login Portal"}),e.jsx("meta",{name:"description",content:"Sign in to your MoveEase Pro account. Access your moving services dashboard, manage quotes, and track your moving projects securely."}),e.jsx("meta",{name:"keywords",content:"MoveEase Pro login, moving services login, Kenya moving company, secure sign in"}),e.jsx("meta",{property:"og:title",content:"Sign In - MoveEase Pro"}),e.jsx("meta",{property:"og:description",content:"Access your MoveEase Pro account to manage your moving services and business operations."}),e.jsx("meta",{property:"og:type",content:"website"})]}),e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsx(gl,{}),e.jsxs("div",{className:"flex-1 flex",children:[e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center px-4 py-12",children:e.jsx(hl,{})}),e.jsx(yl,{})]}),e.jsx("div",{className:"lg:hidden bg-white border-t border-gray-200 px-4 py-6",children:e.jsxs("div",{className:"text-center space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-6 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{children:"M-Pesa Integrated"})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),e.jsx("span",{children:"Secure Login"})]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[" ",new Date().getFullYear()," MoveEase Pro. All rights reserved."]})]})})]})]})),bl=({quote:s,isSelected:t,onClick:a})=>{const r=o=>{switch(o){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"approved":return"bg-green-100 text-green-800 border-green-200";case"rejected":return"bg-red-100 text-red-800 border-red-200";case"revision":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},n=o=>{switch(o){case"high":return e.jsx(E,{name:"AlertTriangle",size:16,className:"text-red-500"});case"medium":return e.jsx(E,{name:"Clock",size:16,className:"text-yellow-500"});case"low":return e.jsx(E,{name:"CheckCircle",size:16,className:"text-green-500"});default:return null}},i=o=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0,maximumFractionDigits:0}).format(o),l=o=>new Date(o).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"});return e.jsxs("div",{onClick:()=>a(s),className:`p-4 border rounded-lg cursor-pointer transition-smooth hover:shadow-card ${t?"border-primary bg-blue-50 shadow-card":"border-gray-200 bg-white hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 truncate",children:s.customerName}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Quote #",s.id]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-2",children:[n(s.urgency),e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ${r(s.status)}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-xs text-gray-600",children:[e.jsx(E,{name:"Calendar",size:14,className:"mr-2"}),e.jsxs("span",{children:["Service: ",l(s.serviceDate)]})]}),e.jsxs("div",{className:"flex items-center text-xs text-gray-600",children:[e.jsx(E,{name:"MapPin",size:14,className:"mr-2"}),e.jsxs("span",{className:"truncate",children:[s.fromLocation,"  ",s.toLocation]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-xs text-gray-600",children:[e.jsx(E,{name:"DollarSign",size:14,className:"mr-1"}),e.jsx("span",{className:"font-medium text-gray-900",children:i(s.estimatedValue)})]}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(s.createdAt).toLocaleDateString("en-GB")})]})]}),s.requiresApproval&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center text-xs text-amber-600",children:[e.jsx(E,{name:"AlertCircle",size:14,className:"mr-1"}),e.jsx("span",{children:"Requires Manager Approval"})]})})]})},vl=({filters:s,onFilterChange:t,onClearFilters:a})=>{const r=[{value:"all",label:"All Statuses"},{value:"pending",label:"Pending Review"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"},{value:"revision",label:"Needs Revision"}],n=[{value:"all",label:"All Priorities"},{value:"high",label:"High Priority"},{value:"medium",label:"Medium Priority"},{value:"low",label:"Low Priority"}],i=[{value:"newest",label:"Newest First"},{value:"oldest",label:"Oldest First"},{value:"value_high",label:"Highest Value"},{value:"value_low",label:"Lowest Value"},{value:"service_date",label:"Service Date"}],l=s.status!=="all"||s.urgency!=="all"||s.search!==""||s.dateRange.start!==""||s.dateRange.end!=="";return e.jsxs("div",{className:"bg-white border-b border-gray-200 p-4 space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(D,{type:"search",placeholder:"Search by customer name, quote ID, or location...",value:s.search,onChange:o=>t("search",o.target.value),className:"w-full"})}),e.jsx("div",{className:"w-full sm:w-48",children:e.jsx(B,{options:i,value:s.sortBy,onChange:o=>t("sortBy",o),placeholder:"Sort by..."})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(B,{label:"Status",options:r,value:s.status,onChange:o=>t("status",o)}),e.jsx(B,{label:"Priority",options:n,value:s.urgency,onChange:o=>t("urgency",o)}),e.jsx(D,{label:"From Date",type:"date",value:s.dateRange.start,onChange:o=>t("dateRange",{...s.dateRange,start:o.target.value})}),e.jsx(D,{label:"To Date",type:"date",value:s.dateRange.end,onChange:o=>t("dateRange",{...s.dateRange,end:o.target.value})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Showing filtered results"}),l&&e.jsx(P,{variant:"ghost",size:"sm",onClick:a,iconName:"X",iconPosition:"left",children:"Clear Filters"})]})]})},ma=({quote:s,onApprove:t,onReject:a,onRevision:r,onWhatsApp:n,onEmail:i})=>{const l=d=>{switch(d){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"approved":return"bg-green-100 text-green-800 border-green-200";case"rejected":return"bg-red-100 text-red-800 border-red-200";case"revision":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},o=d=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0,maximumFractionDigits:0}).format(d),c=d=>new Date(d).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"});return e.jsxs("div",{className:"bg-white border-b border-gray-200 p-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Quote #",s.id]}),e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${l(s.status)}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Customer:"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.customerName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Service Date:"}),e.jsx("p",{className:"font-medium text-gray-900",children:c(s.serviceDate)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Estimated Value:"}),e.jsx("p",{className:"font-medium text-gray-900",children:o(s.estimatedValue)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Created:"}),e.jsx("p",{className:"font-medium text-gray-900",children:c(s.createdAt)})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>n(s),iconName:"MessageCircle",iconPosition:"left",children:"WhatsApp"}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>i(s),iconName:"Mail",iconPosition:"left",children:"Email"})]}),s.status==="pending"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>r(s),iconName:"Edit",iconPosition:"left",children:"Request Revision"}),e.jsx(P,{variant:"destructive",size:"sm",onClick:()=>a(s),iconName:"X",iconPosition:"left",children:"Reject"}),e.jsx(P,{variant:"success",size:"sm",onClick:()=>t(s),iconName:"Check",iconPosition:"left",children:"Approve"})]}),s.status==="revision"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{variant:"destructive",size:"sm",onClick:()=>a(s),iconName:"X",iconPosition:"left",children:"Reject"}),e.jsx(P,{variant:"success",size:"sm",onClick:()=>t(s),iconName:"Check",iconPosition:"left",children:"Approve"})]})]})]}),s.requiresApproval&&s.status==="pending"&&e.jsx("div",{className:"mt-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{name:"AlertTriangle",size:16,className:"text-amber-600 mr-2"}),e.jsx("span",{className:"text-sm text-amber-800 font-medium",children:"This quote requires manager approval due to high value or special conditions"})]})})]})},ua=({quote:s})=>{const t=a=>a.startsWith("+254")?a.replace("+254","0"):a;return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(E,{name:"User",size:20,className:"mr-2"}),"Customer Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Full Name"}),e.jsx("p",{className:"text-sm text-gray-900 mt-1",children:s.customerName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email Address"}),e.jsx("p",{className:"text-sm text-gray-900 mt-1",children:s.customerEmail})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Phone Number"}),e.jsx("p",{className:"text-sm text-gray-900 mt-1",children:t(s.customerPhone)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Alternative Contact"}),e.jsx("p",{className:"text-sm text-gray-900 mt-1",children:s.alternativeContact||"Not provided"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"From Location"}),e.jsxs("div",{className:"mt-1",children:[e.jsx("p",{className:"text-sm text-gray-900",children:s.fromLocation}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s.fromAddress})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"To Location"}),e.jsxs("div",{className:"mt-1",children:[e.jsx("p",{className:"text-sm text-gray-900",children:s.toLocation}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s.toAddress})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Distance"}),e.jsxs("p",{className:"text-sm text-gray-900 mt-1",children:[s.distance," km"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Access Difficulty"}),e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${s.accessDifficulty==="easy"?"bg-green-100 text-green-800":s.accessDifficulty==="medium"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:s.accessDifficulty.charAt(0).toUpperCase()+s.accessDifficulty.slice(1)})})]})]})]}),s.specialInstructions&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Special Instructions"}),e.jsx("div",{className:"mt-2 p-3 bg-gray-50 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:s.specialInstructions})})]})]})},xa=({quote:s})=>{const t=n=>new Date(n).toLocaleDateString("en-GB",{weekday:"long",day:"2-digit",month:"2-digit",year:"numeric"}),a=n=>new Date(`2000-01-01T${n}`).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1}),r=n=>({bedroom:"Bed",living_room:"Sofa",kitchen:"ChefHat",bathroom:"Bath",office:"Briefcase",storage:"Archive",garage:"Car",other:"Home"})[n]||"Home";return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(E,{name:"Calendar",size:20,className:"mr-2"}),"Service Requirements"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Service Date"}),e.jsx("p",{className:"text-sm text-gray-900 mt-1",children:t(s.serviceDate)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Preferred Time"}),e.jsx("p",{className:"text-sm text-gray-900 mt-1",children:s.preferredTime?a(s.preferredTime):"Flexible"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Service Type"}),e.jsx("p",{className:"text-sm text-gray-900 mt-1 capitalize",children:s.serviceType})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Property Type"}),e.jsx("p",{className:"text-sm text-gray-900 mt-1 capitalize",children:s.propertyType})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Floor Level"}),e.jsxs("p",{className:"text-sm text-gray-900 mt-1",children:["From: ",s.fromFloor," | To: ",s.toFloor]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 mb-3 block",children:"Room Inventory"}),e.jsx("div",{className:"space-y-3",children:s.rooms.map((n,i)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{name:r(n.type),size:16,className:"text-gray-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 capitalize",children:n.type.replace("_"," ")}),n.size&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Size: ",n.size]})]})]}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[n.quantity," ",n.quantity===1?"room":"rooms"]})]},i))})]})]}),s.additionalServices&&s.additionalServices.length>0&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 mb-3 block",children:"Additional Services"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:s.additionalServices.map((n,i)=>e.jsxs("div",{className:"flex items-center p-3 bg-blue-50 rounded-lg",children:[e.jsx(E,{name:"Plus",size:16,className:"text-blue-600 mr-2"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n.name}),n.description&&e.jsx("p",{className:"text-xs text-gray-600",children:n.description})]})]},i))})]}),s.specialRequirements&&s.specialRequirements.length>0&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 mb-3 block",children:"Special Requirements"}),e.jsx("div",{className:"space-y-2",children:s.specialRequirements.map((n,i)=>e.jsxs("div",{className:"flex items-center p-2 bg-amber-50 rounded-lg",children:[e.jsx(E,{name:"AlertCircle",size:16,className:"text-amber-600 mr-2"}),e.jsx("p",{className:"text-sm text-gray-900",children:n})]},i))})]})]})},pa=({quote:s,onPriceUpdate:t})=>{const[a,r]=T.useState(!1),[n,i]=T.useState(s.pricingBreakdown),l=m=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0,maximumFractionDigits:0}).format(m),o=m=>m.reduce((j,S)=>j+S.quantity*S.unitPrice,0),c=()=>{const m=o(n);t({...s,pricingBreakdown:n,estimatedValue:m}),r(!1)},d=()=>{i(s.pricingBreakdown),r(!1)},u=(m,j,S)=>{const y=[...n];y[m]={...y[m],[j]:j==="quantity"||j==="unitPrice"?parseFloat(S)||0:S},i(y)},b=()=>{i([...n,{id:Date.now(),description:"New Item",quantity:1,unitPrice:0,category:"additional"}])},C=m=>{const j=n.filter((S,y)=>y!==m);i(j)},w=m=>({base:"Truck",distance:"Route",rooms:"Home",additional:"Plus",insurance:"Shield",storage:"Archive"})[m]||"DollarSign",g=m=>({base:"text-blue-600",distance:"text-green-600",rooms:"text-purple-600",additional:"text-orange-600",insurance:"text-red-600",storage:"text-gray-600"})[m]||"text-gray-600",p=a?n:s.pricingBreakdown,x=o(p);return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(E,{name:"Calculator",size:20,className:"mr-2"}),"Pricing Breakdown"]}),a?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{variant:"ghost",size:"sm",onClick:d,children:"Cancel"}),e.jsx(P,{variant:"default",size:"sm",onClick:c,iconName:"Check",iconPosition:"left",children:"Save Changes"})]}):e.jsx(P,{variant:"outline",size:"sm",onClick:()=>r(!0),iconName:"Edit",iconPosition:"left",children:"Edit Pricing"})]}),e.jsxs("div",{className:"space-y-3",children:[p.map((m,j)=>e.jsxs("div",{className:"flex items-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:`p-2 rounded-lg bg-white mr-4 ${g(m.category)}`,children:e.jsx(E,{name:w(m.category),size:16})}),e.jsx("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-4 gap-4 items-center",children:a?e.jsxs(e.Fragment,{children:[e.jsx(D,{value:m.description,onChange:S=>u(j,"description",S.target.value),placeholder:"Item description"}),e.jsx(D,{type:"number",value:m.quantity,onChange:S=>u(j,"quantity",S.target.value),placeholder:"Quantity",min:"0",step:"0.1"}),e.jsx(D,{type:"number",value:m.unitPrice,onChange:S=>u(j,"unitPrice",S.target.value),placeholder:"Unit price",min:"0",step:"1"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-900",children:l(m.quantity*m.unitPrice)}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>C(j),iconName:"Trash2",className:"text-red-600 hover:text-red-700"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:m.description}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:m.category})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Qty: ",m.quantity]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[l(m.unitPrice)," per unit"]}),e.jsx("div",{className:"font-medium text-gray-900 text-right",children:l(m.quantity*m.unitPrice)})]})})]},m.id||j)),a&&e.jsx(P,{variant:"outline",onClick:b,iconName:"Plus",iconPosition:"left",className:"w-full",children:"Add Item"})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:"Total Estimated Cost"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Including all services and fees"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-primary",children:l(x)}),a&&x!==s.estimatedValue&&e.jsxs("p",{className:"text-sm text-amber-600",children:["Original: ",l(s.estimatedValue)]})]})]})}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Route-Specific Factors"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(E,{name:"Route",size:16,className:"text-blue-600 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Distance"})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.distance," km"]})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(E,{name:"Clock",size:16,className:"text-green-600 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Est. Duration"})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.estimatedDuration," hours"]})]}),e.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(E,{name:"AlertTriangle",size:16,className:"text-amber-600 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Difficulty"})]}),e.jsx("p",{className:"text-sm text-gray-600 capitalize",children:s.accessDifficulty})]})]})]})]})},ga=({quote:s,onAddNote:t})=>{const[a,r]=T.useState(""),[n,i]=T.useState(!1),l=()=>{if(a.trim()){const u={id:Date.now(),content:a.trim(),author:"Current Admin",timestamp:new Date().toISOString(),type:"admin"};t(s.id,u),r(""),i(!1)}},o=u=>new Date(u).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),c=u=>{switch(u){case"admin":return"User";case"system":return"Settings";case"customer":return"MessageCircle";default:return"FileText"}},d=u=>{switch(u){case"admin":return"bg-blue-50 border-blue-200";case"system":return"bg-gray-50 border-gray-200";case"customer":return"bg-green-50 border-green-200";default:return"bg-gray-50 border-gray-200"}};return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(E,{name:"FileText",size:20,className:"mr-2"}),"Administrative Notes"]}),!n&&e.jsx(P,{variant:"outline",size:"sm",onClick:()=>i(!0),iconName:"Plus",iconPosition:"left",children:"Add Note"})]}),n&&e.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(D,{label:"Add Administrative Note",value:a,onChange:u=>r(u.target.value),placeholder:"Enter your note here...",className:"w-full"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{variant:"default",size:"sm",onClick:l,disabled:!a.trim(),iconName:"Check",iconPosition:"left",children:"Add Note"}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>{i(!1),r("")},children:"Cancel"})]})]})}),e.jsx("div",{className:"space-y-4",children:s.adminNotes&&s.adminNotes.length>0?s.adminNotes.map(u=>e.jsxs("div",{className:`p-4 rounded-lg border ${d(u.type)}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{name:c(u.type),size:16,className:"mr-2 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:u.author}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2 capitalize",children:["(",u.type,")"]})]}),e.jsx("span",{className:"text-xs text-gray-500",children:o(u.timestamp)})]}),e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:u.content})]},u.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(E,{name:"FileText",size:48,className:"mx-auto text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No administrative notes yet"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Add notes to track important information about this quote"})]})}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Audit Trail"}),e.jsx("div",{className:"space-y-2",children:s.auditTrail&&s.auditTrail.map((u,b)=>e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{name:"Clock",size:14,className:"text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:u.action}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["by ",u.user]})]}),e.jsx("span",{className:"text-xs text-gray-500",children:o(u.timestamp)})]},b))})]})]})},jl=({selectedQuotes:s,onBulkAction:t,onSelectAll:a,onClearSelection:r})=>{const[n,i]=T.useState(""),l=[{value:"",label:"Select bulk action..."},{value:"approve",label:"Approve Selected"},{value:"reject",label:"Reject Selected"},{value:"revision",label:"Request Revision"},{value:"export",label:"Export to CSV"},{value:"email",label:"Send Email Updates"}],o=()=>{n&&s.length>0&&(t(n,s),i(""))},c=u=>{switch(u){case"approve":return"Check";case"reject":return"X";case"revision":return"Edit";case"export":return"Download";case"email":return"Mail";default:return"Settings"}},d=u=>{switch(u){case"approve":return"success";case"reject":return"destructive";case"revision":return"outline";case"export":return"secondary";case"email":return"outline";default:return"default"}};return s.length===0?null:e.jsxs("div",{className:"bg-white border-b border-gray-200 p-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ie,{checked:s.length>0,indeterminate:s.length>0,onChange:a,className:"mr-2"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[s.length," quote",s.length!==1?"s":""," selected"]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:r,iconName:"X",iconPosition:"left",children:"Clear Selection"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-48",children:e.jsx(B,{options:l,value:n,onChange:i,placeholder:"Select action..."})}),e.jsx(P,{variant:d(n),onClick:o,disabled:!n,iconName:c(n),iconPosition:"left",children:"Apply"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-gray-100",children:[e.jsxs(P,{variant:"success",size:"sm",onClick:()=>t("approve",s),iconName:"Check",iconPosition:"left",children:["Approve All (",s.length,")"]}),e.jsxs(P,{variant:"destructive",size:"sm",onClick:()=>t("reject",s),iconName:"X",iconPosition:"left",children:["Reject All (",s.length,")"]}),e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>t("revision",s),iconName:"Edit",iconPosition:"left",children:["Request Revision (",s.length,")"]}),e.jsx(P,{variant:"secondary",size:"sm",onClick:()=>t("export",s),iconName:"Download",iconPosition:"left",children:"Export Selected"})]})]})},Nl=()=>{const[s,t]=T.useState(null),[a,r]=T.useState([]),[n,i]=T.useState([]),[l,o]=T.useState([]),[c,d]=T.useState({search:"",status:"all",urgency:"all",sortBy:"newest",dateRange:{start:"",end:""}}),u=[{id:"QT-2025-001",customerName:"Sarah Johnson",customerEmail:"sarah.johnson@email.com",customerPhone:"+254712345678",alternativeContact:"+254798765432",fromLocation:"Westlands, Nairobi",fromAddress:"Westlands Shopping Mall, Waiyaki Way",toLocation:"Karen, Nairobi",toAddress:"Karen Country Club, Karen Road",distance:15,accessDifficulty:"medium",serviceDate:"2025-02-15",preferredTime:"09:00",serviceType:"residential",propertyType:"apartment",fromFloor:"3rd Floor",toFloor:"Ground Floor",estimatedValue:45e3,estimatedDuration:6,status:"pending",urgency:"high",requiresApproval:!0,createdAt:"2025-01-20T10:30:00Z",rooms:[{type:"bedroom",quantity:2,size:"medium"},{type:"living_room",quantity:1,size:"large"},{type:"kitchen",quantity:1,size:"medium"},{type:"bathroom",quantity:2,size:"small"}],additionalServices:[{name:"Packing Service",description:"Professional packing of fragile items"},{name:"Insurance Coverage",description:"Full coverage up to KES 500,000"}],specialRequirements:["Handle piano with extra care","Disassemble and reassemble furniture"],specialInstructions:`Please be careful with the antique furniture in the living room.
The piano needs special handling and should be moved first.
Customer will be available from 8 AM onwards.`,pricingBreakdown:[{id:1,description:"Base Moving Service",quantity:1,unitPrice:25e3,category:"base"},{id:2,description:"Distance Charge (15km)",quantity:15,unitPrice:800,category:"distance"},{id:3,description:"Room Count (5 rooms)",quantity:5,unitPrice:2e3,category:"rooms"},{id:4,description:"Packing Service",quantity:1,unitPrice:8e3,category:"additional"},{id:5,description:"Insurance Coverage",quantity:1,unitPrice:2e3,category:"insurance"}],adminNotes:[{id:1,content:"Customer mentioned they have a valuable piano that needs special care. Recommended our premium moving team.",author:"John Admin",timestamp:"2025-01-20T11:00:00Z",type:"admin"},{id:2,content:"Quote automatically flagged for approval due to high value and special requirements.",author:"System",timestamp:"2025-01-20T10:31:00Z",type:"system"}],auditTrail:[{action:"Quote created",user:"System",timestamp:"2025-01-20T10:30:00Z"},{action:"Flagged for approval",user:"System",timestamp:"2025-01-20T10:31:00Z"},{action:"Admin note added",user:"John Admin",timestamp:"2025-01-20T11:00:00Z"}]},{id:"QT-2025-002",customerName:"Michael Ochieng",customerEmail:"michael.ochieng@gmail.com",customerPhone:"+254723456789",alternativeContact:null,fromLocation:"Kileleshwa, Nairobi",fromAddress:"Kileleshwa Shopping Center",toLocation:"Runda, Nairobi",toAddress:"Runda Estate, House No. 45",distance:8,accessDifficulty:"easy",serviceDate:"2025-02-10",preferredTime:"14:00",serviceType:"residential",propertyType:"house",fromFloor:"Ground Floor",toFloor:"Ground Floor",estimatedValue:28e3,estimatedDuration:4,status:"approved",urgency:"medium",requiresApproval:!1,createdAt:"2025-01-18T14:20:00Z",rooms:[{type:"bedroom",quantity:3,size:"medium"},{type:"living_room",quantity:1,size:"medium"},{type:"kitchen",quantity:1,size:"small"}],additionalServices:[{name:"Storage Service",description:"1 month temporary storage"}],specialRequirements:[],specialInstructions:"Customer prefers afternoon timing. Access is easy with parking available.",pricingBreakdown:[{id:1,description:"Base Moving Service",quantity:1,unitPrice:2e4,category:"base"},{id:2,description:"Distance Charge (8km)",quantity:8,unitPrice:600,category:"distance"},{id:3,description:"Room Count (5 rooms)",quantity:5,unitPrice:1200,category:"rooms"},{id:4,description:"Storage Service (1 month)",quantity:1,unitPrice:2200,category:"storage"}],adminNotes:[{id:1,content:"Standard residential move. Customer is flexible with timing.",author:"Jane Admin",timestamp:"2025-01-18T15:00:00Z",type:"admin"}],auditTrail:[{action:"Quote created",user:"System",timestamp:"2025-01-18T14:20:00Z"},{action:"Quote approved",user:"Jane Admin",timestamp:"2025-01-18T15:30:00Z"}]},{id:"QT-2025-003",customerName:"Grace Wanjiku",customerEmail:"grace.wanjiku@yahoo.com",customerPhone:"+254734567890",alternativeContact:"+254701234567",fromLocation:"Parklands, Nairobi",fromAddress:"Parklands Road, Apartment 12B",toLocation:"Thika, Kiambu",toAddress:"Thika Town, Blue Post Hotel Area",distance:45,accessDifficulty:"hard",serviceDate:"2025-02-20",preferredTime:"08:00",serviceType:"residential",propertyType:"apartment",fromFloor:"12th Floor",toFloor:"2nd Floor",estimatedValue:65e3,estimatedDuration:8,status:"revision",urgency:"low",requiresApproval:!0,createdAt:"2025-01-15T09:15:00Z",rooms:[{type:"bedroom",quantity:1,size:"small"},{type:"living_room",quantity:1,size:"small"},{type:"kitchen",quantity:1,size:"small"},{type:"office",quantity:1,size:"small"}],additionalServices:[{name:"Packing Service",description:"Full packing service"},{name:"Insurance Coverage",description:"Premium coverage"},{name:"Storage Service",description:"2 weeks temporary storage"}],specialRequirements:["Elevator access required","Long distance move preparation"],specialInstructions:`Long distance move to Thika.
Customer needs early morning start.
Elevator available but needs booking in advance.`,pricingBreakdown:[{id:1,description:"Base Moving Service",quantity:1,unitPrice:3e4,category:"base"},{id:2,description:"Long Distance (45km)",quantity:45,unitPrice:500,category:"distance"},{id:3,description:"Room Count (4 rooms)",quantity:4,unitPrice:1500,category:"rooms"},{id:4,description:"Full Packing Service",quantity:1,unitPrice:12e3,category:"additional"},{id:5,description:"Premium Insurance",quantity:1,unitPrice:3e3,category:"insurance"},{id:6,description:"Temporary Storage",quantity:1,unitPrice:4e3,category:"storage"}],adminNotes:[{id:1,content:"Customer requested revision on pricing. Long distance charges seem high to them.",author:"Mike Admin",timestamp:"2025-01-16T10:00:00Z",type:"admin"},{id:2,content:"Customer called to discuss elevator booking requirements.",author:"Customer Service",timestamp:"2025-01-17T14:30:00Z",type:"customer"}],auditTrail:[{action:"Quote created",user:"System",timestamp:"2025-01-15T09:15:00Z"},{action:"Revision requested",user:"Mike Admin",timestamp:"2025-01-16T10:30:00Z"},{action:"Customer contacted",user:"Customer Service",timestamp:"2025-01-17T14:30:00Z"}]}];T.useEffect(()=>{i(u),o(u),u.length>0&&t(u[0])},[]),T.useEffect(()=>{let N=[...n];c.search&&(N=N.filter(f=>f.customerName.toLowerCase().includes(c.search.toLowerCase())||f.id.toLowerCase().includes(c.search.toLowerCase())||f.fromLocation.toLowerCase().includes(c.search.toLowerCase())||f.toLocation.toLowerCase().includes(c.search.toLowerCase()))),c.status!=="all"&&(N=N.filter(f=>f.status===c.status)),c.urgency!=="all"&&(N=N.filter(f=>f.urgency===c.urgency)),c.dateRange.start&&(N=N.filter(f=>new Date(f.serviceDate)>=new Date(c.dateRange.start))),c.dateRange.end&&(N=N.filter(f=>new Date(f.serviceDate)<=new Date(c.dateRange.end))),N.sort((f,v)=>{switch(c.sortBy){case"newest":return new Date(v.createdAt)-new Date(f.createdAt);case"oldest":return new Date(f.createdAt)-new Date(v.createdAt);case"value_high":return v.estimatedValue-f.estimatedValue;case"value_low":return f.estimatedValue-v.estimatedValue;case"service_date":return new Date(f.serviceDate)-new Date(v.serviceDate);default:return 0}}),o(N)},[n,c]);const b=(N,f)=>{d(v=>({...v,[N]:f}))},C=()=>{d({search:"",status:"all",urgency:"all",sortBy:"newest",dateRange:{start:"",end:""}})},w=N=>{t(N)},g=(N,f)=>{const v=n.map(h=>{if(h.id===f.id){const I={...h};switch(N){case"approve":I.status="approved",I.auditTrail=[...I.auditTrail,{action:"Quote approved",user:"Current Admin",timestamp:new Date().toISOString()}];break;case"reject":I.status="rejected",I.auditTrail=[...I.auditTrail,{action:"Quote rejected",user:"Current Admin",timestamp:new Date().toISOString()}];break;case"revision":I.status="revision",I.auditTrail=[...I.auditTrail,{action:"Revision requested",user:"Current Admin",timestamp:new Date().toISOString()}];break}return I}return h});i(v),t(v.find(h=>h.id===f.id))},p=N=>{const f=`Hello ${N.customerName}, regarding your moving quote ${N.id}...`,v=`https://wa.me/${N.customerPhone.replace("+","")}?text=${encodeURIComponent(f)}`;window.open(v,"_blank")},x=N=>{const f=`Update on your moving quote ${N.id}`,v=`Dear ${N.customerName},

We have an update regarding your moving quote...`,h=`mailto:${N.customerEmail}?subject=${encodeURIComponent(f)}&body=${encodeURIComponent(v)}`;window.location.href=h},m=N=>{const f=n.map(v=>v.id===N.id?{...N,auditTrail:[...N.auditTrail,{action:"Pricing updated",user:"Current Admin",timestamp:new Date().toISOString()}]}:v);i(f),t(N)},j=(N,f)=>{const v=n.map(h=>h.id===N?{...h,adminNotes:[...h.adminNotes||[],f],auditTrail:[...h.auditTrail,{action:"Admin note added",user:f.author,timestamp:f.timestamp}]}:h);i(v),t(v.find(h=>h.id===N))},S=(N,f)=>{r(f?v=>[...v,N]:v=>v.filter(h=>h!==N))},y=()=>{a.length===l.length?r([]):r(l.map(N=>N.id))},A=(N,f)=>{const v=n.map(h=>{if(f.includes(h.id)){const I={...h};switch(N){case"approve":I.status="approved";break;case"reject":I.status="rejected";break;case"revision":I.status="revision";break;case"export":return console.log("Exporting quotes:",f),h;case"email":return console.log("Sending emails for quotes:",f),h}return I.auditTrail=[...I.auditTrail,{action:`Bulk ${N}`,user:"Current Admin",timestamp:new Date().toISOString()}],I}return h});i(v),r([])};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(nt,{}),e.jsx("div",{className:"lg:ml-64",children:e.jsxs("div",{className:"flex flex-col h-screen",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Quote Management"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Review and manage customer quote requests"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(P,{variant:"outline",iconName:"RefreshCw",iconPosition:"left",onClick:()=>window.location.reload(),children:"Refresh"}),e.jsx(P,{variant:"default",iconName:"Plus",iconPosition:"left",onClick:()=>window.location.href="/cost-calculator",children:"New Quote"})]})]})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"w-full lg:w-1/3 xl:w-1/4 border-r border-gray-200 bg-white flex flex-col",children:[e.jsx(vl,{filters:c,onFilterChange:b,onClearFilters:C}),a.length>0&&e.jsx(jl,{selectedQuotes:a,onBulkAction:A,onSelectAll:y,onClearSelection:()=>r([])}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:l.length>0?l.map(N=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-2 left-2 z-10",children:e.jsx(Ie,{checked:a.includes(N.id),onChange:f=>S(N.id,f.target.checked)})}),e.jsx(bl,{quote:N,isSelected:(s==null?void 0:s.id)===N.id,onClick:w})]},N.id)):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(E,{name:"FileText",size:48,className:"mx-auto text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No quotes found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Try adjusting your filters or create a new quote"})]})})]}),e.jsx("div",{className:"hidden lg:flex lg:w-2/3 xl:w-3/4 flex-col bg-gray-50",children:s?e.jsxs(e.Fragment,{children:[e.jsx(ma,{quote:s,onApprove:N=>g("approve",N),onReject:N=>g("reject",N),onRevision:N=>g("revision",N),onWhatsApp:p,onEmail:x}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[e.jsx(ua,{quote:s}),e.jsx(xa,{quote:s})]}),e.jsx(pa,{quote:s,onPriceUpdate:m}),e.jsx(ga,{quote:s,onAddNote:j})]})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(E,{name:"FileText",size:64,className:"mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Quote"}),e.jsx("p",{className:"text-gray-500",children:"Choose a quote from the list to view details and manage it"})]})})})]})]})}),s&&e.jsx("div",{className:"lg:hidden fixed inset-0 z-50 bg-white",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-3 flex items-center",children:e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>t(null),iconName:"ArrowLeft",iconPosition:"left",children:"Back to List"})}),e.jsx(ma,{quote:s,onApprove:N=>g("approve",N),onReject:N=>g("reject",N),onRevision:N=>g("revision",N),onWhatsApp:p,onEmail:x}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsx(ua,{quote:s}),e.jsx(xa,{quote:s}),e.jsx(pa,{quote:s,onPriceUpdate:m}),e.jsx(ga,{quote:s,onAddNote:j})]})]})}),e.jsx("div",{className:"lg:hidden h-16"})]})},Zt={company:{name:"MoveEase Pro",email:"info@moveeasepro.com",phone:"+254 700 123 456",address:"123 Business Street, Nairobi, Kenya",website:"https://moveeasepro.com",logo:null,primaryColor:"#1E40AF",secondaryColor:"#64748B",registrationNumber:"",taxNumber:"",businessLicense:""},communication:{sms:{enabled:!0,provider:"africastalking",apiKey:"",username:"",senderId:"MoveEase"},email:{enabled:!0,provider:"smtp",smtpHost:"",smtpPort:587,smtpUser:"",smtpPassword:"",fromEmail:"",fromName:"MoveEase Pro"}},seo:{metaTitle:"MoveEase Pro - Professional Moving Services",metaDescription:"Professional moving and relocation services in Kenya",metaKeywords:"moving, relocation, Kenya, professional",openGraph:{title:"",description:"",image:"",type:"website",locale:"en_US"},twitter:{card:"summary_large_image",site:"",creator:"",title:"",description:"",image:""},analytics:{googleAnalytics:"",googleTagManager:"",facebookPixel:"",hotjar:""}},localization:{country:"KE",language:"en-KE",timezone:"Africa/Nairobi",baseCurrency:"KES",dateFormat:"DD/MM/YYYY",timeFormat:"24h",firstDayOfWeek:"monday",etims:{enabled:!1,pinNumber:"",serialNumber:"",environment:"sandbox"}},paymentGateways:{mpesa:{enabled:!0,consumerKey:"",consumerSecret:"",environment:"sandbox",shortcode:"",passkey:""}},integrations:{googleCalendar:{enabled:!1,clientId:"",clientSecret:"",connected:!1},googleMaps:{enabled:!0,apiKey:"",connected:!1},googleDrive:{enabled:!1,clientId:"",clientSecret:"",connected:!1}},advancedFeatures:{qrCodes:{enabled:!0,includeInQuotes:!0,includeInInvoices:!0,includeInTracking:!0,logoOverlay:!1},aiChatbot:{enabled:!1,botName:"MoveBot",welcomeMessage:"Hello! How can I help you with your moving needs today?",autoBooking:!1},virtualTours:{enabled:!1,maxVideoSize:"100",allowedFormats:["mp4","mov","avi"],autoUploadToDrive:!0,shareableLinks:!0,expirationDays:"30"}},documentTemplates:{invoice:{layout:"modern",headerText:"INVOICE",footerText:"Thank you for your business!",showLogo:!0,primaryColor:"#1E40AF"},quote:{layout:"modern",headerText:"QUOTATION",footerText:"This quote is valid for 30 days",showLogo:!0,primaryColor:"#059669"},delivery:{layout:"minimal",headerText:"DELIVERY NOTE",footerText:"Goods delivered in good condition",showLogo:!0,primaryColor:"#7C3AED"}}},Pe={LOAD_SETTINGS:"LOAD_SETTINGS",UPDATE_SETTINGS:"UPDATE_SETTINGS",RESET_SETTINGS:"RESET_SETTINGS",IMPORT_SETTINGS:"IMPORT_SETTINGS",SET_LOADING:"SET_LOADING",SET_ERROR:"SET_ERROR"};function wl(s,t){switch(t.type){case Pe.LOAD_SETTINGS:return{...s,settings:{...Zt,...t.payload},loading:!1,error:null};case Pe.UPDATE_SETTINGS:const a={...s.settings,...t.payload};return{...s,settings:a,lastModified:new Date().toISOString()};case Pe.RESET_SETTINGS:return{...s,settings:Zt,lastModified:new Date().toISOString()};case Pe.IMPORT_SETTINGS:return{...s,settings:{...Zt,...t.payload},lastModified:new Date().toISOString()};case Pe.SET_LOADING:return{...s,loading:t.payload};case Pe.SET_ERROR:return{...s,error:t.payload,loading:!1};default:return s}}const Sl={settings:Zt,loading:!1,error:null,lastModified:null},dr=T.createContext();function Cl({children:s}){const[t,a]=T.useReducer(wl,Sl);T.useEffect(()=>{r()},[]),T.useEffect(()=>{t.lastModified&&n(t.settings)},[t.settings,t.lastModified]);const r=async()=>{try{a({type:Pe.SET_LOADING,payload:!0});const C=localStorage.getItem("moveease_settings");if(C){const w=JSON.parse(C);a({type:Pe.LOAD_SETTINGS,payload:w})}else a({type:Pe.LOAD_SETTINGS,payload:{}})}catch(C){console.error("Error loading settings:",C),a({type:Pe.SET_ERROR,payload:"Failed to load settings"})}},n=async C=>{try{localStorage.setItem("moveease_settings",JSON.stringify(C)),localStorage.setItem("moveease_settings_backup",JSON.stringify({settings:C,timestamp:new Date().toISOString()}))}catch(w){console.error("Error saving settings:",w),a({type:Pe.SET_ERROR,payload:"Failed to save settings"})}},b={...t,updateSettings:(C,w)=>{const g={...t.settings,[C]:{...t.settings[C],...w}};a({type:Pe.UPDATE_SETTINGS,payload:g})},updateNestedSettings:(C,w,g)=>{const p={...t.settings,[C]:{...t.settings[C],[w]:{...t.settings[C][w],...g}}};a({type:Pe.UPDATE_SETTINGS,payload:p})},resetSettings:()=>{a({type:Pe.RESET_SETTINGS})},exportSettings:()=>{const C={settings:t.settings,exportedAt:new Date().toISOString(),version:"1.0"},w=new Blob([JSON.stringify(C,null,2)],{type:"application/json"}),g=URL.createObjectURL(w),p=document.createElement("a");p.href=g,p.download=`moveease-settings-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(g)},importSettings:C=>new Promise((w,g)=>{const p=new FileReader;p.onload=x=>{try{const m=JSON.parse(x.target.result);m.settings?(a({type:Pe.IMPORT_SETTINGS,payload:m.settings}),w(m)):g(new Error("Invalid settings file format"))}catch{g(new Error("Failed to parse settings file"))}},p.onerror=()=>{g(new Error("Failed to read settings file"))},p.readAsText(C)}),validateSettings:()=>{const C={};return t.settings.company.name.trim()||(C.companyName="Company name is required"),t.settings.company.email.trim()||(C.companyEmail="Company email is required"),{isValid:Object.keys(C).length===0,errors:C}},loadSettings:r};return e.jsx(dr.Provider,{value:b,children:s})}function El(){const s=T.useContext(dr);if(!s)throw new Error("useSettings must be used within a SettingsProvider");return s}const ve=je.forwardRef(({className:s,label:t,description:a,error:r,required:n=!1,id:i,rows:l=3,resize:o="vertical",maxLength:c,showCharCount:d=!1,...u},b)=>{const C=i||`textarea-${Math.random().toString(36).substr(2,9)}`,w="flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",g={none:"resize-none",vertical:"resize-y",horizontal:"resize-x",both:"resize"},p=u.value?u.value.length:0,x=d||c;return e.jsxs("div",{className:"space-y-2",children:[t&&e.jsxs("label",{htmlFor:C,className:ie("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",r?"text-destructive":"text-foreground"),children:[t,n&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{ref:b,id:C,rows:l,maxLength:c,className:ie(w,g[o],r&&"border-destructive focus-visible:ring-destructive",s),...u}),x&&e.jsx("div",{className:"absolute bottom-2 right-2 text-xs text-muted-foreground bg-background px-1",children:c?`${p}/${c}`:p})]}),a&&!r&&e.jsx("p",{className:"text-sm text-muted-foreground",children:a}),r&&e.jsx("p",{className:"text-sm text-destructive",children:r})]})});ve.displayName="Textarea";const gs=je.forwardRef(({className:s,label:t,description:a,error:r,required:n=!1,id:i,accept:l,multiple:o=!1,maxSize:c=5*1024*1024,maxFiles:d=1,onFileSelect:u,onFileRemove:b,disabled:C=!1,showPreview:w=!0,dragAndDrop:g=!0,...p},x)=>{const[m,j]=T.useState([]),[S,y]=T.useState(!1),A=T.useRef(null),N=i||`file-upload-${Math.random().toString(36).substr(2,9)}`,f=O=>{if(O===0)return"0 Bytes";const M=1024,z=["Bytes","KB","MB","GB"],G=Math.floor(Math.log(O)/Math.log(M));return parseFloat((O/Math.pow(M,G)).toFixed(2))+" "+z[G]},v=O=>O.size>c?`File size exceeds ${f(c)}`:null,h=O=>{const M=Array.from(O),z=[],G=[];if(M.forEach(le=>{const Se=v(le);Se?G.push(`${le.name}: ${Se}`):z.push(le)}),G.length>0){console.error("File validation errors:",G);return}const se=o?[...m,...z].slice(0,d):z.slice(0,1);j(se),u==null||u(o?se:se[0])},I=O=>{const M=m.filter((z,G)=>G!==O);j(M),b==null||b(O),u==null||u(o?M:M[0]||null)},R=O=>{O.preventDefault(),!C&&g&&y(!0)},L=O=>{O.preventDefault(),y(!1)},H=O=>{if(O.preventDefault(),y(!1),!C&&g){const M=O.dataTransfer.files;h(M)}},k=()=>{var O;C||(O=A.current)==null||O.click()},U=O=>{const M=O.type;return M.startsWith("image/")?"Image":M.startsWith("video/")?"Video":M.startsWith("audio/")?"Music":M.includes("pdf")||M.includes("word")||M.includes("document")?"FileText":M.includes("excel")||M.includes("spreadsheet")?"FileSpreadsheet":"File"};return e.jsxs("div",{className:ie("space-y-2",s),children:[t&&e.jsxs("label",{htmlFor:N,className:ie("text-sm font-medium leading-none",r?"text-destructive":"text-foreground",C&&"opacity-50"),children:[t,n&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsx("input",{ref:A,type:"file",id:N,accept:l,multiple:o,disabled:C,onChange:O=>h(O.target.files),className:"hidden",...p}),e.jsx("div",{onDragOver:R,onDragLeave:L,onDrop:H,onClick:k,className:ie("relative border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors",S&&!C?"border-primary bg-primary/5":"border-gray-300 hover:border-gray-400",C&&"cursor-not-allowed opacity-50 bg-gray-50",r&&"border-destructive"),children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{name:"Upload",size:32,className:ie("mx-auto",S&&!C?"text-primary":"text-gray-400")}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:g?"Drop files here or click to browse":"Click to browse files"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l&&`Accepted formats: ${l}`,c&&`  Max size: ${f(c)}`,o&&d>1&&`  Max files: ${d}`]})]})]})}),w&&m.length>0&&e.jsx("div",{className:"space-y-2",children:m.map((O,M)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[e.jsx(E,{name:U(O),size:20,className:"text-gray-500 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:O.name}),e.jsx("p",{className:"text-xs text-gray-500",children:f(O.size)})]})]}),e.jsx(P,{variant:"ghost",size:"sm",iconName:"X",onClick:z=>{z.stopPropagation(),I(M)},disabled:C,className:"flex-shrink-0"})]},M))}),a&&!r&&e.jsx("p",{className:"text-sm text-muted-foreground",children:a}),r&&e.jsx("p",{className:"text-sm text-destructive",children:r})]})});gs.displayName="FileUpload";const St=je.forwardRef(({className:s,label:t,description:a,error:r,required:n=!1,id:i,value:l="#000000",onChange:o,disabled:c=!1,showInput:d=!0,presets:u=[],...b},C)=>{const[w,g]=T.useState(!1),p=i||`color-picker-${Math.random().toString(36).substr(2,9)}`,x=["#000000","#FFFFFF","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#FFC0CB","#A52A2A","#808080","#000080","#008000"],m=u.length>0?u:x,j=N=>{o==null||o(N)},S=N=>{const f=N.target.value;j(f)},y=N=>{j(N),g(!1)},A=N=>/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(N);return e.jsxs("div",{className:ie("space-y-2",s),children:[t&&e.jsxs("label",{htmlFor:p,className:ie("text-sm font-medium leading-none",r?"text-destructive":"text-foreground",c&&"opacity-50"),children:[t,n&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"relative",children:e.jsx("input",{ref:C,type:"color",id:p,value:A(l)?l:"#000000",onChange:S,disabled:c,className:ie("w-12 h-10 border border-input rounded cursor-pointer disabled:cursor-not-allowed disabled:opacity-50",r&&"border-destructive"),...b})}),d&&e.jsx("div",{className:"flex-1",children:e.jsx(D,{value:l,onChange:N=>j(N.target.value),placeholder:"#000000",disabled:c,error:l&&!A(l)?"Invalid hex color":void 0,className:"font-mono"})}),m.length>0&&e.jsx("button",{type:"button",onClick:()=>g(!w),disabled:c,className:ie("px-3 py-2 text-sm border border-input rounded hover:bg-accent hover:text-accent-foreground disabled:cursor-not-allowed disabled:opacity-50",w&&"bg-accent text-accent-foreground"),children:"Presets"})]}),w&&m.length>0&&e.jsx("div",{className:"p-3 border border-input rounded-lg bg-background shadow-sm",children:e.jsx("div",{className:"grid grid-cols-5 gap-2",children:m.map((N,f)=>e.jsx("button",{type:"button",onClick:()=>y(N),disabled:c,className:ie("w-8 h-8 rounded border-2 transition-all hover:scale-110 disabled:cursor-not-allowed disabled:opacity-50",l===N?"border-primary ring-2 ring-primary ring-offset-2":"border-gray-300 hover:border-gray-400"),style:{backgroundColor:N},title:N},f))})}),l&&A(l)&&e.jsx("div",{className:"text-xs text-muted-foreground",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{children:["HEX: ",l.toUpperCase()]}),e.jsxs("span",{children:["RGB: ",parseInt(l.slice(1,3),16),", ",parseInt(l.slice(3,5),16),", ",parseInt(l.slice(5,7),16)]})]})}),a&&!r&&e.jsx("p",{className:"text-sm text-muted-foreground",children:a}),r&&e.jsx("p",{className:"text-sm text-destructive",children:r})]})});St.displayName="ColorPicker";const Tl=({onSettingsChange:s})=>{const[t,a]=T.useState({companyName:"MoveEase Pro",companyAddress:"",companyPhone:"",companyEmail:"",companyWebsite:"",registrationNumber:"",licenseNumber:"",primaryColor:"#1E40AF",secondaryColor:"#64748B",accentColor:"#F59E0B"}),[r,n]=T.useState(null),[i,l]=T.useState(null),[o,c]=T.useState({}),[d,u]=T.useState(!1),b=(m,j)=>{a(S=>({...S,[m]:j})),s()},C=m=>{if(n(m),m){const j=new FileReader;j.onload=S=>{l(S.target.result)},j.readAsDataURL(m)}s()},w=()=>{n(null),l(null),s()},g=[{name:"Blue",primary:"#1E40AF",secondary:"#64748B",accent:"#F59E0B"},{name:"Green",primary:"#059669",secondary:"#64748B",accent:"#F59E0B"},{name:"Purple",primary:"#7C3AED",secondary:"#64748B",accent:"#F59E0B"},{name:"Red",primary:"#DC2626",secondary:"#64748B",accent:"#F59E0B"},{name:"Orange",primary:"#EA580C",secondary:"#64748B",accent:"#F59E0B"}],p=()=>{const m={};return t.companyName.trim()||(m.companyName="Company name is required"),t.companyEmail&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.companyEmail)&&(m.companyEmail="Please enter a valid email address"),t.companyWebsite&&!/^https?:\/\/.+/.test(t.companyWebsite)&&(m.companyWebsite="Please enter a valid URL (starting with http:// or https://)"),c(m),Object.keys(m).length===0},x=async()=>{if(p()){u(!0);try{await new Promise(m=>setTimeout(m,1e3)),console.log("Saving company branding settings:",{settings:t,logoFile:r})}catch(m){console.error("Error saving settings:",m)}finally{u(!1)}}};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Company Branding & Identity"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your company logo, details, and brand colors across the application."})]}),e.jsx(P,{onClick:x,loading:d,iconName:"Save",children:"Save Changes"})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Company Logo"}),e.jsx(gs,{label:"Upload Company Logo",accept:"image/*",maxSize:2*1024*1024,onFileSelect:C,onFileRemove:w,description:"Recommended: PNG or SVG format, max 2MB, 200x200px minimum"})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Company Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(D,{label:"Company Name",value:t.companyName,onChange:m=>b("companyName",m.target.value),placeholder:"Enter company name",required:!0,error:o.companyName}),e.jsx(D,{label:"Registration Number",value:t.registrationNumber,onChange:m=>b("registrationNumber",m.target.value),placeholder:"Company registration number"}),e.jsx(D,{label:"License Number",value:t.licenseNumber,onChange:m=>b("licenseNumber",m.target.value),placeholder:"Business license number"}),e.jsx(D,{label:"Phone Number",type:"tel",value:t.companyPhone,onChange:m=>b("companyPhone",m.target.value),placeholder:"+254 700 123 456"}),e.jsx(D,{label:"Email Address",type:"email",value:t.companyEmail,onChange:m=>b("companyEmail",m.target.value),placeholder:"info@company.com",error:o.companyEmail}),e.jsx(D,{label:"Website",type:"url",value:t.companyWebsite,onChange:m=>b("companyWebsite",m.target.value),placeholder:"https://www.company.com",error:o.companyWebsite})]}),e.jsx("div",{className:"mt-6",children:e.jsx(ve,{label:"Company Address",value:t.companyAddress,onChange:m=>b("companyAddress",m.target.value),placeholder:"Enter complete company address",rows:3})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Brand Colors"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Quick Color Presets"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:g.map(m=>e.jsxs("button",{onClick:()=>{b("primaryColor",m.primary),b("secondaryColor",m.secondary),b("accentColor",m.accent)},className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:m.primary}}),e.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:m.secondary}}),e.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:m.accent}})]}),e.jsx("span",{className:"text-sm",children:m.name})]},m.name))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(St,{label:"Primary Color",value:t.primaryColor,onChange:m=>b("primaryColor",m),presets:g.map(m=>m.primary)}),e.jsx(St,{label:"Secondary Color",value:t.secondaryColor,onChange:m=>b("secondaryColor",m),presets:g.map(m=>m.secondary)}),e.jsx(St,{label:"Accent Color",value:t.accentColor,onChange:m=>b("accentColor",m),presets:g.map(m=>m.accent)})]}),e.jsxs("div",{className:"mt-6 p-4 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Preview"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"px-4 py-2 rounded text-white text-sm font-medium",style:{backgroundColor:t.primaryColor},children:"Primary Button"}),e.jsx("div",{className:"px-4 py-2 rounded text-white text-sm font-medium",style:{backgroundColor:t.secondaryColor},children:"Secondary Button"}),e.jsx("div",{className:"px-4 py-2 rounded text-white text-sm font-medium",style:{backgroundColor:t.accentColor},children:"Accent Button"})]})]})]})]})},oe=je.forwardRef(({className:s,id:t,checked:a=!1,disabled:r=!1,required:n=!1,label:i,description:l,error:o,size:c="default",onChange:d,...u},b)=>{const C=t||`toggle-${Math.random().toString(36).substr(2,9)}`,w={sm:"h-4 w-7",default:"h-5 w-9",lg:"h-6 w-11"},g={sm:"h-3 w-3",default:"h-4 w-4",lg:"h-5 w-5"},p={sm:a?"translate-x-3":"translate-x-0",default:a?"translate-x-4":"translate-x-0",lg:a?"translate-x-5":"translate-x-0"};return e.jsxs("div",{className:ie("flex items-start space-x-3",s),children:[e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("input",{type:"checkbox",ref:b,id:C,checked:a,disabled:r,required:n,onChange:d,className:"sr-only",...u}),e.jsx("label",{htmlFor:C,className:ie("relative inline-flex items-center rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 cursor-pointer",w[c],a?"bg-primary":"bg-gray-200",r&&"cursor-not-allowed opacity-50",o&&"ring-2 ring-destructive"),children:e.jsx("span",{className:ie("pointer-events-none inline-block rounded-full bg-white shadow transform ring-0 transition duration-200 ease-in-out",g[c],p[c])})})]}),(i||l)&&e.jsxs("div",{className:"flex-1 min-w-0",children:[i&&e.jsxs("label",{htmlFor:C,className:ie("block text-sm font-medium cursor-pointer",o?"text-destructive":"text-foreground",r&&"cursor-not-allowed opacity-50"),children:[i,n&&e.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),l&&!o&&e.jsx("p",{className:ie("text-sm text-muted-foreground mt-1",r&&"opacity-50"),children:l}),o&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:o})]})]})});oe.displayName="Toggle";const Pl=({onSettingsChange:s})=>{const[t,a]=T.useState({smsEnabled:!1,smsProvider:"",smsApiKey:"",smsApiSecret:"",smsSenderName:"MoveEase",emailEnabled:!0,smtpHost:"",smtpPort:"587",smtpUsername:"",smtpPassword:"",smtpEncryption:"tls",emailFromName:"MoveEase Pro",emailFromAddress:"",bookingConfirmations:!0,statusUpdates:!0,paymentReminders:!0,marketingEmails:!1}),[r,n]=T.useState({}),[i,l]=T.useState(!1),[o,c]=T.useState({sms:!1,email:!1}),d=(x,m)=>{a(j=>({...j,[x]:m})),s()},u=[{value:"",label:"Select SMS Provider"},{value:"africastalking",label:"Africa's Talking"},{value:"twilio",label:"Twilio"},{value:"textlocal",label:"TextLocal"},{value:"bulksms",label:"BulkSMS"}],b=[{value:"none",label:"None"},{value:"tls",label:"TLS"},{value:"ssl",label:"SSL"}],C=()=>{const x={};return t.smsEnabled&&(t.smsProvider||(x.smsProvider="SMS provider is required"),t.smsApiKey||(x.smsApiKey="API key is required"),t.smsApiSecret||(x.smsApiSecret="API secret is required")),t.emailEnabled&&(t.smtpHost||(x.smtpHost="SMTP host is required"),t.smtpPort||(x.smtpPort="SMTP port is required"),t.smtpUsername||(x.smtpUsername="Username is required"),t.smtpPassword||(x.smtpPassword="Password is required"),t.emailFromAddress||(x.emailFromAddress="From email address is required"),t.emailFromAddress&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.emailFromAddress)&&(x.emailFromAddress="Please enter a valid email address")),n(x),Object.keys(x).length===0},w=async()=>{if(C()){l(!0);try{await new Promise(x=>setTimeout(x,1e3)),console.log("Saving communication settings:",t)}catch(x){console.error("Error saving settings:",x)}finally{l(!1)}}},g=async()=>{if(!t.smsProvider||!t.smsApiKey){alert("Please configure SMS settings first");return}c(x=>({...x,sms:!0}));try{await new Promise(x=>setTimeout(x,2e3)),alert("SMS connection test successful!")}catch{alert("SMS connection test failed")}finally{c(x=>({...x,sms:!1}))}},p=async()=>{if(!t.smtpHost||!t.smtpUsername){alert("Please configure email settings first");return}c(x=>({...x,email:!0}));try{await new Promise(x=>setTimeout(x,2e3)),alert("Email connection test successful!")}catch{alert("Email connection test failed")}finally{c(x=>({...x,email:!1}))}};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Communication Settings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure SMS and email settings for customer communications."})]}),e.jsx(P,{onClick:w,loading:i,iconName:"Save",children:"Save Changes"})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"SMS Configuration"}),e.jsx(oe,{checked:t.smsEnabled,onChange:x=>d("smsEnabled",x.target.checked),label:"Enable SMS"})]}),t.smsEnabled&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(B,{label:"SMS Provider",options:u,value:t.smsProvider,onChange:x=>d("smsProvider",x),required:!0,error:r.smsProvider}),e.jsx(D,{label:"Sender Name",value:t.smsSenderName,onChange:x=>d("smsSenderName",x.target.value),placeholder:"MoveEase",description:"Max 11 characters"}),e.jsx(D,{label:"API Key",type:"password",value:t.smsApiKey,onChange:x=>d("smsApiKey",x.target.value),placeholder:"Enter API key",error:r.smsApiKey}),e.jsx(D,{label:"API Secret",type:"password",value:t.smsApiSecret,onChange:x=>d("smsApiSecret",x.target.value),placeholder:"Enter API secret",error:r.smsApiSecret})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(P,{variant:"outline",iconName:"Send",onClick:g,loading:o.sms,disabled:!t.smsProvider||!t.smsApiKey,children:"Test SMS Connection"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Send a test SMS to verify configuration"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Email Configuration"}),e.jsx(oe,{checked:t.emailEnabled,onChange:x=>d("emailEnabled",x.target.checked),label:"Enable Email"})]}),t.emailEnabled&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(D,{label:"SMTP Host",value:t.smtpHost,onChange:x=>d("smtpHost",x.target.value),placeholder:"smtp.gmail.com",required:!0,error:r.smtpHost}),e.jsx(D,{label:"SMTP Port",type:"number",value:t.smtpPort,onChange:x=>d("smtpPort",x.target.value),placeholder:"587",required:!0,error:r.smtpPort}),e.jsx(D,{label:"Username",value:t.smtpUsername,onChange:x=>d("smtpUsername",x.target.value),placeholder:"your-email@gmail.com",required:!0,error:r.smtpUsername}),e.jsx(D,{label:"Password",type:"password",value:t.smtpPassword,onChange:x=>d("smtpPassword",x.target.value),placeholder:"Enter password or app password",required:!0,error:r.smtpPassword}),e.jsx(B,{label:"Encryption",options:b,value:t.smtpEncryption,onChange:x=>d("smtpEncryption",x),required:!0}),e.jsx("div",{})," ",e.jsx(D,{label:"From Name",value:t.emailFromName,onChange:x=>d("emailFromName",x.target.value),placeholder:"MoveEase Pro",required:!0}),e.jsx(D,{label:"From Email Address",type:"email",value:t.emailFromAddress,onChange:x=>d("emailFromAddress",x.target.value),placeholder:"noreply@moveeasepro.com",required:!0,error:r.emailFromAddress})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(P,{variant:"outline",iconName:"Mail",onClick:p,loading:o.email,disabled:!t.smtpHost||!t.smtpUsername,children:"Test Email Connection"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Send a test email to verify configuration"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Notification Preferences"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Booking Confirmations"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Send confirmation when bookings are created"})]}),e.jsx(Ie,{checked:t.bookingConfirmations,onChange:x=>d("bookingConfirmations",x.target.checked)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Status Updates"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Notify customers of booking status changes"})]}),e.jsx(Ie,{checked:t.statusUpdates,onChange:x=>d("statusUpdates",x.target.checked)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Payment Reminders"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Send reminders for pending payments"})]}),e.jsx(Ie,{checked:t.paymentReminders,onChange:x=>d("paymentReminders",x.target.checked)})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Marketing Emails"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Send promotional and marketing content"})]}),e.jsx(Ie,{checked:t.marketingEmails,onChange:x=>d("marketingEmails",x.target.checked)})]})]})]})]})},Al=({onSettingsChange:s})=>{const[t,a]=T.useState("invoice"),[r,n]=T.useState({invoice:{layout:"modern",headerText:"INVOICE",footerText:"Thank you for your business!",showLogo:!0,showCompanyDetails:!0,showPaymentTerms:!0,paymentTerms:"Payment due within 30 days",primaryColor:"#1E40AF",secondaryColor:"#64748B",fontSize:"medium",showNotes:!0,notesText:"Please retain this invoice for your records.",showSignature:!1,watermark:"",showWatermark:!1},quote:{layout:"modern",headerText:"QUOTATION",footerText:"This quote is valid for 30 days",showLogo:!0,showCompanyDetails:!0,showValidityPeriod:!0,validityPeriod:"30 days",primaryColor:"#059669",secondaryColor:"#64748B",fontSize:"medium",showNotes:!0,notesText:"All prices are subject to change without notice.",showSignature:!0,watermark:"QUOTE",showWatermark:!0},delivery:{layout:"minimal",headerText:"DELIVERY NOTE",footerText:"Goods delivered in good condition",showLogo:!0,showCompanyDetails:!0,showDeliveryInstructions:!0,deliveryInstructions:"Please inspect items upon delivery",primaryColor:"#7C3AED",secondaryColor:"#64748B",fontSize:"medium",showNotes:!0,notesText:"Customer signature required upon delivery.",showSignature:!0,watermark:"",showWatermark:!1}}),[i,l]=T.useState({}),[o,c]=T.useState(!1),[d,u]=T.useState("desktop"),b=[{id:"invoice",name:"Invoice Template",icon:"Receipt",color:"blue"},{id:"quote",name:"Quote Template",icon:"FileText",color:"green"},{id:"delivery",name:"Delivery Note Template",icon:"Truck",color:"purple"}],C=[{value:"modern",label:"Modern Layout",description:"Clean, contemporary design"},{value:"classic",label:"Classic Layout",description:"Traditional business format"},{value:"minimal",label:"Minimal Layout",description:"Simple, clean design"},{value:"professional",label:"Professional Layout",description:"Corporate style format"}],w=[{value:"small",label:"Small (10pt)"},{value:"medium",label:"Medium (12pt)"},{value:"large",label:"Large (14pt)"}],g=[{value:"desktop",label:"Desktop View"},{value:"mobile",label:"Mobile View"},{value:"print",label:"Print Preview"}],p=(N,f)=>{n(v=>({...v,[t]:{...v[t],[N]:f}})),s(),i[N]&&l(v=>({...v,[N]:void 0}))},x=()=>{const N={},f=r[t];return f.headerText.trim()||(N.headerText="Header text is required"),f.footerText.trim()||(N.footerText="Footer text is required"),l(N),Object.keys(N).length===0},m=async()=>{if(x()){c(!0);try{await new Promise(N=>setTimeout(N,1e3)),console.log("Saving document template settings:",r),alert("Document template settings saved successfully!")}catch(N){console.error("Error saving settings:",N),alert("Error saving settings. Please try again.")}finally{c(!1)}}},j=()=>{console.log(`Downloading ${t} template preview...`),alert(`${t.charAt(0).toUpperCase()+t.slice(1)} template preview would be downloaded as PDF`)},S=()=>{confirm("Are you sure you want to reset this template to default settings?")&&alert("Template reset to default settings")},y=r[t],A=b.find(N=>N.id===t);return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Document Templates"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Customize PDF templates for invoices, quotes, and delivery notes."})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(P,{variant:"outline",onClick:j,iconName:"Download",children:"Download Preview"}),e.jsx(P,{onClick:m,loading:o,iconName:"Save",children:"Save Changes"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Select Template"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:b.map(N=>e.jsxs("button",{onClick:()=>a(N.id),className:`p-4 rounded-lg border-2 transition-all ${t===N.id?"border-primary bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("div",{className:`p-2 rounded-lg ${N.color==="blue"?"bg-blue-100 text-blue-600":N.color==="green"?"bg-green-100 text-green-600":"bg-purple-100 text-purple-600"}`,children:e.jsx(E,{name:N.icon,size:20})}),e.jsx("span",{className:"font-medium text-gray-900",children:N.name})]}),e.jsxs("p",{className:"text-sm text-gray-600 text-left",children:[N.id==="invoice"&&"Professional invoice template with payment terms",N.id==="quote"&&"Quotation template with validity period",N.id==="delivery"&&"Delivery note with signature section"]})]},N.id))}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900",children:[A==null?void 0:A.name," Settings"]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:S,iconName:"RotateCcw",children:"Reset to Default"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-3",children:"Basic Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(B,{label:"Layout Style",options:C,value:y.layout,onChange:N=>p("layout",N)}),e.jsx(D,{label:"Header Text",value:y.headerText,onChange:N=>p("headerText",N.target.value),placeholder:"Enter header text",error:i.headerText,required:!0}),e.jsx(ve,{label:"Footer Text",value:y.footerText,onChange:N=>p("footerText",N.target.value),placeholder:"Enter footer text",rows:2,error:i.footerText,required:!0}),e.jsx(B,{label:"Font Size",options:w,value:y.fontSize,onChange:N=>p("fontSize",N)})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-3",children:"Display Options"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(oe,{checked:y.showLogo,onChange:N=>p("showLogo",N.target.checked),label:"Show Company Logo"}),e.jsx(oe,{checked:y.showCompanyDetails,onChange:N=>p("showCompanyDetails",N.target.checked),label:"Show Company Details"}),t==="invoice"&&e.jsx(oe,{checked:y.showPaymentTerms,onChange:N=>p("showPaymentTerms",N.target.checked),label:"Show Payment Terms"}),t==="quote"&&e.jsx(oe,{checked:y.showValidityPeriod,onChange:N=>p("showValidityPeriod",N.target.checked),label:"Show Validity Period"}),t==="delivery"&&e.jsx(oe,{checked:y.showDeliveryInstructions,onChange:N=>p("showDeliveryInstructions",N.target.checked),label:"Show Delivery Instructions"}),e.jsx(oe,{checked:y.showNotes,onChange:N=>p("showNotes",N.target.checked),label:"Show Notes Section"}),e.jsx(oe,{checked:y.showSignature,onChange:N=>p("showSignature",N.target.checked),label:"Show Signature Section"})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-900 mb-3",children:"Colors"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(St,{label:"Primary Color",value:y.primaryColor,onChange:N=>p("primaryColor",N)}),e.jsx(St,{label:"Secondary Color",value:y.secondaryColor,onChange:N=>p("secondaryColor",N)})]})]}),t==="invoice"&&y.showPaymentTerms&&e.jsx(ve,{label:"Payment Terms",value:y.paymentTerms,onChange:N=>p("paymentTerms",N.target.value),placeholder:"Enter payment terms",rows:2}),t==="quote"&&y.showValidityPeriod&&e.jsx(D,{label:"Validity Period",value:y.validityPeriod,onChange:N=>p("validityPeriod",N.target.value),placeholder:"e.g., 30 days"}),t==="delivery"&&y.showDeliveryInstructions&&e.jsx(ve,{label:"Delivery Instructions",value:y.deliveryInstructions,onChange:N=>p("deliveryInstructions",N.target.value),placeholder:"Enter delivery instructions",rows:2}),y.showNotes&&e.jsx(ve,{label:"Notes Text",value:y.notesText,onChange:N=>p("notesText",N.target.value),placeholder:"Enter notes text",rows:2}),e.jsxs("div",{children:[e.jsx(oe,{checked:y.showWatermark,onChange:N=>p("showWatermark",N.target.checked),label:"Show Watermark",description:"Add a watermark to the document"}),y.showWatermark&&e.jsx(D,{label:"Watermark Text",value:y.watermark,onChange:N=>p("watermark",N.target.value),placeholder:"Enter watermark text",className:"mt-3"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h5",{className:"font-medium text-gray-900",children:"Preview"}),e.jsx(B,{options:g,value:d,onChange:N=>u(N),className:"w-40"})]}),e.jsx("div",{className:`border border-gray-300 rounded-lg bg-white overflow-hidden ${d==="mobile"?"max-w-sm mx-auto":d==="print"?"shadow-lg":""}`,children:e.jsxs("div",{className:"p-6 space-y-4",style:{color:y.secondaryColor,fontSize:y.fontSize==="small"?"10px":y.fontSize==="large"?"14px":"12px"},children:[e.jsxs("div",{className:"text-center border-b pb-4",style:{borderColor:y.primaryColor},children:[y.showLogo&&e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded mx-auto mb-2 flex items-center justify-center",children:e.jsx(E,{name:"Image",size:24,className:"text-gray-400"})}),e.jsx("h1",{className:"text-2xl font-bold",style:{color:y.primaryColor},children:y.headerText}),y.showCompanyDetails&&e.jsxs("div",{className:"text-sm mt-2",children:[e.jsx("p",{children:"MoveEase Pro"}),e.jsx("p",{children:"123 Business Street, Nairobi"}),e.jsx("p",{children:"+254 700 123 456"})]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsxs("strong",{children:[t.charAt(0).toUpperCase()+t.slice(1)," #:"]})," 001"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Customer:"})," John Doe"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," 456 Client Ave"]})]})]}),e.jsx("div",{className:"border rounded",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{style:{backgroundColor:y.primaryColor,color:"white"},children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-left",children:"Item"}),e.jsx("th",{className:"p-2 text-right",children:"Qty"}),e.jsx("th",{className:"p-2 text-right",children:"Price"}),e.jsx("th",{className:"p-2 text-right",children:"Total"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-2",children:"Moving Service"}),e.jsx("td",{className:"p-2 text-right",children:"1"}),e.jsx("td",{className:"p-2 text-right",children:"KSh 50,000"}),e.jsx("td",{className:"p-2 text-right",children:"KSh 50,000"})]})})]})}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-lg font-bold",style:{color:y.primaryColor},children:"Total: KSh 50,000"})}),t==="invoice"&&y.showPaymentTerms&&e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"Payment Terms:"})," ",y.paymentTerms]}),t==="quote"&&y.showValidityPeriod&&e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"Valid for:"})," ",y.validityPeriod]}),t==="delivery"&&y.showDeliveryInstructions&&e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"Delivery Instructions:"})," ",y.deliveryInstructions]}),y.showNotes&&e.jsxs("div",{className:"text-sm",children:[e.jsx("strong",{children:"Notes:"})," ",y.notesText]}),y.showSignature&&e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"border-t border-gray-400 w-32 mb-1"}),e.jsx("p",{className:"text-xs",children:"Customer Signature"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"border-t border-gray-400 w-32 mb-1"}),e.jsx("p",{className:"text-xs",children:"Company Representative"})]})]}),e.jsx("div",{className:"text-center text-sm border-t pt-4 mt-4",style:{borderColor:y.primaryColor},children:y.footerText}),y.showWatermark&&y.watermark&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsx("div",{className:"text-6xl font-bold opacity-10 transform rotate-45",style:{color:y.primaryColor},children:y.watermark})})]})})]})]})]})]})]})},Il=({onSettingsChange:s})=>{const[t,a]=T.useState({country:"KE",language:"en-US",timezone:"Africa/Nairobi",baseCurrency:"KES",supportedCurrencies:["KES","USD","EUR"],enableMultiCurrency:!0,currencyDisplayFormat:"symbol",dateFormat:"DD/MM/YYYY",timeFormat:"24h",firstDayOfWeek:"monday",numberFormat:"en-US",currencyPosition:"before",etims:{enabled:!1,pinNumber:"",serialNumber:"",environment:"sandbox"},enableRTL:!1,enableTranslations:!1,defaultLocale:"en-KE"}),[r,n]=T.useState({}),[i,l]=T.useState(!1),[o,c]=T.useState("");T.useEffect(()=>{const v=Intl.DateTimeFormat().resolvedOptions().timeZone;c(v)},[]);const d=(v,h)=>{a(I=>({...I,[v]:h})),s(),r[v]&&n(I=>({...I,[v]:void 0}))},u=(v,h)=>{a(I=>({...I,etims:{...I.etims,[v]:h}})),s()},b=()=>{const v={};return t.country||(v.country="Country is required"),t.language||(v.language="Language is required"),t.timezone||(v.timezone="Timezone is required"),t.baseCurrency||(v.baseCurrency="Base currency is required"),t.etims.enabled&&(t.etims.pinNumber||(v.etimsPinNumber="PIN number is required"),t.etims.serialNumber||(v.etimsSerialNumber="Serial number is required")),n(v),Object.keys(v).length===0},C=async()=>{if(b()){l(!0);try{await new Promise(v=>setTimeout(v,1e3)),console.log("Saving localization settings:",t),alert("Localization settings saved successfully!")}catch(v){console.error("Error saving settings:",v),alert("Error saving settings. Please try again.")}finally{l(!1)}}},w=()=>{const v=Intl.DateTimeFormat().resolvedOptions().timeZone;d("timezone",v)},g=[{value:"KE",label:" Kenya"},{value:"UG",label:" Uganda"},{value:"TZ",label:" Tanzania"},{value:"US",label:" United States"},{value:"GB",label:" United Kingdom"},{value:"CA",label:" Canada"},{value:"AU",label:" Australia"},{value:"ZA",label:" South Africa"},{value:"NG",label:" Nigeria"},{value:"GH",label:" Ghana"}],p=[{value:"KES",label:"Kenyan Shilling (KES) - KSh"},{value:"USD",label:"US Dollar (USD) - $"},{value:"EUR",label:"Euro (EUR) - "},{value:"GBP",label:"British Pound (GBP) - "},{value:"UGX",label:"Ugandan Shilling (UGX) - USh"},{value:"TZS",label:"Tanzanian Shilling (TZS) - TSh"},{value:"ZAR",label:"South African Rand (ZAR) - R"},{value:"NGN",label:"Nigerian Naira (NGN) - "},{value:"GHS",label:"Ghanaian Cedi (GHS) - "},{value:"CAD",label:"Canadian Dollar (CAD) - C$"},{value:"AUD",label:"Australian Dollar (AUD) - A$"}],x=[{value:"en-US",label:"English (United States)"},{value:"en-GB",label:"English (United Kingdom)"},{value:"en-KE",label:"English (Kenya)"},{value:"sw-KE",label:"Swahili (Kenya)"},{value:"fr-FR",label:"French (France)"},{value:"es-ES",label:"Spanish (Spain)"},{value:"pt-PT",label:"Portuguese (Portugal)"},{value:"ar-SA",label:"Arabic (Saudi Arabia)"}],m=[{value:"Africa/Nairobi",label:"Africa/Nairobi (EAT +3)"},{value:"Africa/Lagos",label:"Africa/Lagos (WAT +1)"},{value:"Africa/Cairo",label:"Africa/Cairo (EET +2)"},{value:"Africa/Johannesburg",label:"Africa/Johannesburg (SAST +2)"},{value:"America/New_York",label:"America/New_York (EST -5)"},{value:"America/Los_Angeles",label:"America/Los_Angeles (PST -8)"},{value:"Europe/London",label:"Europe/London (GMT +0)"},{value:"Europe/Paris",label:"Europe/Paris (CET +1)"},{value:"Asia/Dubai",label:"Asia/Dubai (GST +4)"},{value:"Asia/Tokyo",label:"Asia/Tokyo (JST +9)"},{value:"Australia/Sydney",label:"Australia/Sydney (AEDT +11)"}],j=[{value:"DD/MM/YYYY",label:"DD/MM/YYYY (31/12/2024)"},{value:"MM/DD/YYYY",label:"MM/DD/YYYY (12/31/2024)"},{value:"YYYY-MM-DD",label:"YYYY-MM-DD (2024-12-31)"},{value:"DD-MM-YYYY",label:"DD-MM-YYYY (31-12-2024)"},{value:"MMM DD, YYYY",label:"MMM DD, YYYY (Dec 31, 2024)"}],S=[{value:"12h",label:"12-hour (2:30 PM)"},{value:"24h",label:"24-hour (14:30)"}],y=[{value:"sunday",label:"Sunday"},{value:"monday",label:"Monday"}],A=[{value:"symbol",label:"Symbol ($, , )"},{value:"code",label:"Code (USD, EUR, GBP)"},{value:"name",label:"Name (Dollar, Euro, Pound)"}],N=[{value:"before",label:"Before amount ($100)"},{value:"after",label:"After amount (100$)"}],f=[{value:"en-US",label:"US Format (1,234.56)"},{value:"en-GB",label:"UK Format (1,234.56)"},{value:"de-DE",label:"German Format (1.234,56)"},{value:"fr-FR",label:"French Format (1 234,56)"}];return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Localization & Regional Settings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure regional settings, currency, language, and tax compliance."})]}),e.jsx(P,{onClick:C,loading:i,iconName:"Save",children:"Save Changes"})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Regional Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(B,{label:"Country",options:g,value:t.country,onChange:v=>d("country",v),error:r.country,required:!0}),e.jsx(B,{label:"Language",options:x,value:t.language,onChange:v=>d("language",v),error:r.language,required:!0}),e.jsxs("div",{children:[e.jsx(B,{label:"Timezone",options:m,value:t.timezone,onChange:v=>d("timezone",v),error:r.timezone,required:!0}),o&&o!==t.timezone&&e.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[e.jsx(E,{name:"MapPin",size:16,className:"text-blue-500"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Detected: ",o]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:w,className:"text-blue-600 hover:text-blue-700",children:"Use Detected"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Currency Settings"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(B,{label:"Base Currency",options:p,value:t.baseCurrency,onChange:v=>d("baseCurrency",v),error:r.baseCurrency,required:!0}),e.jsx(B,{label:"Currency Display Format",options:A,value:t.currencyDisplayFormat,onChange:v=>d("currencyDisplayFormat",v)}),e.jsx(B,{label:"Currency Position",options:N,value:t.currencyPosition,onChange:v=>d("currencyPosition",v)}),e.jsx(B,{label:"Number Format",options:f,value:t.numberFormat,onChange:v=>d("numberFormat",v)})]}),e.jsx("div",{children:e.jsx(oe,{checked:t.enableMultiCurrency,onChange:v=>d("enableMultiCurrency",v.target.checked),label:"Enable Multi-Currency Support",description:"Allow customers to view prices in different currencies"})}),t.enableMultiCurrency&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supported Currencies"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:p.slice(0,8).map(v=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:t.supportedCurrencies.includes(v.value),onChange:h=>{const I=h.target.checked?[...t.supportedCurrencies,v.value]:t.supportedCurrencies.filter(R=>R!==v.value);d("supportedCurrencies",I)},className:"rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm",children:v.value})]},v.value))})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Date & Time Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(B,{label:"Date Format",options:j,value:t.dateFormat,onChange:v=>d("dateFormat",v)}),e.jsx(B,{label:"Time Format",options:S,value:t.timeFormat,onChange:v=>d("timeFormat",v)}),e.jsx(B,{label:"First Day of Week",options:y,value:t.firstDayOfWeek,onChange:v=>d("firstDayOfWeek",v)})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Localization Features"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(oe,{checked:t.enableRTL,onChange:v=>d("enableRTL",v.target.checked),label:"Enable Right-to-Left (RTL) Support",description:"Support for Arabic, Hebrew, and other RTL languages"}),e.jsx(oe,{checked:t.enableTranslations,onChange:v=>d("enableTranslations",v.target.checked),label:"Enable Multi-Language Translations",description:"Allow interface translation to multiple languages"}),t.enableTranslations&&e.jsx(D,{label:"Default Locale",value:t.defaultLocale,onChange:v=>d("defaultLocale",v.target.value),placeholder:"en-KE",description:"Default locale code for translations"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"eTIMS Configuration"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Electronic Tax Invoice Management System for Kenya Revenue Authority"})]}),e.jsx(oe,{checked:t.etims.enabled,onChange:v=>u("enabled",v.target.checked),label:"Enable eTIMS"})]}),t.etims.enabled&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(D,{label:"PIN Number",value:t.etims.pinNumber,onChange:v=>u("pinNumber",v.target.value),placeholder:"Enter KRA PIN",error:r.etimsPinNumber,required:!0}),e.jsx(D,{label:"Serial Number",value:t.etims.serialNumber,onChange:v=>u("serialNumber",v.target.value),placeholder:"Enter device serial number",error:r.etimsSerialNumber,required:!0}),e.jsx(B,{label:"Environment",options:[{value:"sandbox",label:"Sandbox (Testing)"},{value:"production",label:"Production (Live)"}],value:t.etims.environment,onChange:v=>u("environment",v)})]}),e.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(E,{name:"AlertTriangle",size:20,className:"text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-800",children:"Important Notice"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Ensure you have proper authorization from KRA before enabling eTIMS in production. Test thoroughly in sandbox environment first."})]})]})})]})]})]})},kl=({onSettingsChange:s})=>{var v;const[t,a]=T.useState("mpesa"),[r,n]=T.useState({mpesa:{enabled:!0,consumerKey:"",consumerSecret:"",environment:"sandbox",shortcode:"",passkey:"",callbackUrl:"",regions:["KE"],fees:{percentage:0,fixed:0},minAmount:1,maxAmount:3e5},airtelMoney:{enabled:!1,clientId:"",clientSecret:"",environment:"sandbox",merchantId:"",regions:["KE","UG","TZ"],fees:{percentage:0,fixed:0},minAmount:1,maxAmount:5e5},equitel:{enabled:!1,merchantId:"",apiKey:"",environment:"sandbox",businessNumber:"",regions:["KE"],fees:{percentage:0,fixed:0},minAmount:1,maxAmount:3e5},pesapal:{enabled:!1,consumerKey:"",consumerSecret:"",environment:"sandbox",ipnUrl:"",regions:["KE","UG","TZ","RW"],fees:{percentage:3.5,fixed:0},minAmount:10,maxAmount:1e6},paypal:{enabled:!1,clientId:"",clientSecret:"",environment:"sandbox",webhookId:"",regions:["US","GB","CA","AU","EU"],fees:{percentage:2.9,fixed:30},minAmount:1,maxAmount:1e4},tigoPesa:{enabled:!1,merchantCode:"",apiKey:"",environment:"sandbox",businessNumber:"",regions:["TZ"],fees:{percentage:0,fixed:0},minAmount:1,maxAmount:3e5},stripe:{enabled:!1,publishableKey:"",secretKey:"",environment:"sandbox",webhookSecret:"",regions:["US","GB","CA","AU","EU","KE"],fees:{percentage:2.9,fixed:30},minAmount:50,maxAmount:999999999},flutterwave:{enabled:!1,publicKey:"",secretKey:"",environment:"sandbox",encryptionKey:"",regions:["NG","KE","UG","TZ","GH","ZA"],fees:{percentage:1.4,fixed:0},minAmount:1,maxAmount:1e6}}),[i,l]=T.useState({}),[o,c]=T.useState(!1),[d,u]=T.useState({}),[b,C]=T.useState("KE"),w=[{id:"mpesa",name:"M-Pesa",icon:"Smartphone",color:"green",description:"Kenya's leading mobile money service",type:"Mobile Money",regions:["KE"]},{id:"airtelMoney",name:"Airtel Money",icon:"Smartphone",color:"red",description:"Mobile money across East Africa",type:"Mobile Money",regions:["KE","UG","TZ"]},{id:"equitel",name:"Equitel",icon:"Smartphone",color:"blue",description:"Equity Bank mobile money platform",type:"Mobile Money",regions:["KE"]},{id:"tigoPesa",name:"Tigo Pesa",icon:"Smartphone",color:"orange",description:"Tanzania mobile money service",type:"Mobile Money",regions:["TZ"]},{id:"pesapal",name:"PesaPal",icon:"CreditCard",color:"purple",description:"Multi-channel payment gateway",type:"Payment Gateway",regions:["KE","UG","TZ","RW"]},{id:"paypal",name:"PayPal",icon:"CreditCard",color:"blue",description:"Global digital payment platform",type:"Digital Wallet",regions:["US","GB","CA","AU","EU"]},{id:"stripe",name:"Stripe",icon:"CreditCard",color:"indigo",description:"Online payment processing platform",type:"Payment Processor",regions:["US","GB","CA","AU","EU","KE"]},{id:"flutterwave",name:"Flutterwave",icon:"CreditCard",color:"yellow",description:"African payment infrastructure",type:"Payment Gateway",regions:["NG","KE","UG","TZ","GH","ZA"]}],g=[{value:"KE",label:" Kenya"},{value:"UG",label:" Uganda"},{value:"TZ",label:" Tanzania"},{value:"RW",label:" Rwanda"},{value:"NG",label:" Nigeria"},{value:"GH",label:" Ghana"},{value:"ZA",label:" South Africa"},{value:"US",label:" United States"},{value:"GB",label:" United Kingdom"},{value:"CA",label:" Canada"},{value:"AU",label:" Australia"},{value:"EU",label:" European Union"}],p=(h,I)=>{n(R=>({...R,[h]:{...R[h],enabled:I}})),s()},x=(h,I,R)=>{n(H=>({...H,[h]:{...H[h],[I]:R}})),s();const L=`${h}_${I}`;i[L]&&l(H=>({...H,[L]:void 0}))},m=(h,I,R)=>{n(L=>({...L,[h]:{...L[h],fees:{...L[h].fees,[I]:parseFloat(R)||0}}})),s()},j=h=>{const I=r[h],R={};return I.enabled?(I.consumerKey!==void 0&&!I.consumerKey.trim()&&(R[`${h}_consumerKey`]="Consumer key is required"),I.consumerSecret!==void 0&&!I.consumerSecret.trim()&&(R[`${h}_consumerSecret`]="Consumer secret is required"),I.clientId!==void 0&&!I.clientId.trim()&&(R[`${h}_clientId`]="Client ID is required"),I.clientSecret!==void 0&&!I.clientSecret.trim()&&(R[`${h}_clientSecret`]="Client secret is required"),h==="mpesa"&&(I.shortcode.trim()||(R[`${h}_shortcode`]="Shortcode is required"),I.passkey.trim()||(R[`${h}_passkey`]="Passkey is required")),h==="stripe"&&(I.publishableKey.trim()||(R[`${h}_publishableKey`]="Publishable key is required"),I.secretKey.trim()||(R[`${h}_secretKey`]="Secret key is required")),l(L=>({...L,...R})),Object.keys(R).length===0):!0},S=async()=>{const h=Object.keys(r).filter(R=>r[R].enabled);let I=!0;for(const R of h)j(R)||(I=!1);if(I){c(!0);try{await new Promise(R=>setTimeout(R,1e3)),console.log("Saving payment gateway settings:",r),alert("Payment gateway settings saved successfully!")}catch(R){console.error("Error saving settings:",R),alert("Error saving settings. Please try again.")}finally{c(!1)}}},y=async h=>{var I,R;if(!j(h)){alert("Please fix configuration errors before testing");return}u(L=>({...L,[h]:!0}));try{await new Promise(L=>setTimeout(L,2e3)),alert(`${(I=w.find(L=>L.id===h))==null?void 0:I.name} connection test successful!`)}catch{alert(`${(R=w.find(H=>H.id===h))==null?void 0:R.name} connection test failed`)}finally{u(L=>({...L,[h]:!1}))}},A=w.filter(h=>h.regions.includes(b)),N=r[t],f=w.find(h=>h.id===t);return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Payment Gateway Integration"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure mobile money and payment gateway integrations by region."})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(B,{options:g,value:b,onChange:h=>C(h),className:"w-48"}),e.jsx(P,{onClick:S,loading:o,iconName:"Save",children:"Save Changes"})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(E,{name:"Info",size:20,className:"text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800",children:"Regional Payment Methods"}),e.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Showing payment methods available in ",(v=g.find(h=>h.value===b))==null?void 0:v.label,". Switch regions to configure different payment options."]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Available Payment Methods (",A.length,")"]}),e.jsx("div",{className:"space-y-3",children:A.map(h=>e.jsxs("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors ${t===h.id?"border-primary bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>a(h.id),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${h.color==="green"?"bg-green-100 text-green-600":h.color==="red"?"bg-red-100 text-red-600":h.color==="blue"?"bg-blue-100 text-blue-600":h.color==="purple"?"bg-purple-100 text-purple-600":h.color==="orange"?"bg-orange-100 text-orange-600":h.color==="indigo"?"bg-indigo-100 text-indigo-600":h.color==="yellow"?"bg-yellow-100 text-yellow-600":"bg-gray-100 text-gray-600"}`,children:e.jsx(E,{name:h.icon,size:16})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-sm",children:h.name}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${h.type==="Mobile Money"?"bg-green-100 text-green-700":h.type==="Payment Gateway"?"bg-blue-100 text-blue-700":h.type==="Digital Wallet"?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700"}`,children:h.type}),r[h.id].enabled&&e.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-green-100 text-green-700",children:"Enabled"})]})]})]}),e.jsx(oe,{checked:r[h.id].enabled,onChange:I=>p(h.id,I.target.checked),onClick:I=>I.stopPropagation()})]}),e.jsx("p",{className:"text-xs text-gray-600",children:h.description}),r[h.id].enabled&&e.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:e.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[e.jsxs("span",{children:["Fees: ",r[h.id].fees.percentage,"% + ",r[h.id].fees.fixed]}),e.jsxs("span",{children:["Limits: ",r[h.id].minAmount," - ",r[h.id].maxAmount.toLocaleString()]})]})})]},h.id))}),A.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(E,{name:"CreditCard",size:48,className:"text-gray-400 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Payment Methods Available"}),e.jsx("p",{className:"text-gray-600",children:"No payment methods are available for the selected region."})]})]}),e.jsx("div",{className:"lg:col-span-2 bg-white rounded-lg border border-gray-200 p-6",children:A.find(h=>h.id===t)?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${(f==null?void 0:f.color)==="green"?"bg-green-100 text-green-600":(f==null?void 0:f.color)==="red"?"bg-red-100 text-red-600":(f==null?void 0:f.color)==="blue"?"bg-blue-100 text-blue-600":(f==null?void 0:f.color)==="purple"?"bg-purple-100 text-purple-600":(f==null?void 0:f.color)==="orange"?"bg-orange-100 text-orange-600":(f==null?void 0:f.color)==="indigo"?"bg-indigo-100 text-indigo-600":(f==null?void 0:f.color)==="yellow"?"bg-yellow-100 text-yellow-600":"bg-gray-100 text-gray-600"}`,children:e.jsx(E,{name:f==null?void 0:f.icon,size:20})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[f==null?void 0:f.name," Configuration"]}),e.jsx("p",{className:"text-sm text-gray-600",children:f==null?void 0:f.description})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${N.enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:N.enabled?"Enabled":"Disabled"}),N.enabled&&e.jsx(P,{variant:"outline",size:"sm",iconName:"Zap",onClick:()=>y(t),loading:d[t],children:"Test Connection"})]})]}),N.enabled?e.jsxs("div",{className:"space-y-6",children:[e.jsx(B,{label:"Environment",options:[{value:"sandbox",label:"Sandbox (Testing)"},{value:"production",label:"Production (Live)"}],value:N.environment,onChange:h=>x(t,"environment",h)}),t==="mpesa"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(D,{label:"Consumer Key",type:"password",value:N.consumerKey,onChange:h=>x(t,"consumerKey",h.target.value),placeholder:"Enter consumer key",error:i[`${t}_consumerKey`],required:!0}),e.jsx(D,{label:"Consumer Secret",type:"password",value:N.consumerSecret,onChange:h=>x(t,"consumerSecret",h.target.value),placeholder:"Enter consumer secret",error:i[`${t}_consumerSecret`],required:!0}),e.jsx(D,{label:"Shortcode",value:N.shortcode,onChange:h=>x(t,"shortcode",h.target.value),placeholder:"Enter shortcode",error:i[`${t}_shortcode`],required:!0}),e.jsx(D,{label:"Passkey",type:"password",value:N.passkey,onChange:h=>x(t,"passkey",h.target.value),placeholder:"Enter passkey",error:i[`${t}_passkey`],required:!0}),e.jsx(D,{label:"Callback URL",value:N.callbackUrl,onChange:h=>x(t,"callbackUrl",h.target.value),placeholder:"https://yourdomain.com/callback",description:"URL to receive payment notifications"})]})}),t==="airtelMoney"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(D,{label:"Client ID",value:N.clientId,onChange:h=>x(t,"clientId",h.target.value),placeholder:"Enter client ID",error:i[`${t}_clientId`],required:!0}),e.jsx(D,{label:"Client Secret",type:"password",value:N.clientSecret,onChange:h=>x(t,"clientSecret",h.target.value),placeholder:"Enter client secret",error:i[`${t}_clientSecret`],required:!0}),e.jsx(D,{label:"Merchant ID",value:N.merchantId,onChange:h=>x(t,"merchantId",h.target.value),placeholder:"Enter merchant ID"})]}),t==="stripe"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(D,{label:"Publishable Key",value:N.publishableKey,onChange:h=>x(t,"publishableKey",h.target.value),placeholder:"pk_test_...",error:i[`${t}_publishableKey`],required:!0}),e.jsx(D,{label:"Secret Key",type:"password",value:N.secretKey,onChange:h=>x(t,"secretKey",h.target.value),placeholder:"sk_test_...",error:i[`${t}_secretKey`],required:!0}),e.jsx(D,{label:"Webhook Secret",type:"password",value:N.webhookSecret,onChange:h=>x(t,"webhookSecret",h.target.value),placeholder:"whsec_...",description:"For webhook signature verification"})]}),t==="paypal"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(D,{label:"Client ID",value:N.clientId,onChange:h=>x(t,"clientId",h.target.value),placeholder:"Enter PayPal client ID",error:i[`${t}_clientId`],required:!0}),e.jsx(D,{label:"Client Secret",type:"password",value:N.clientSecret,onChange:h=>x(t,"clientSecret",h.target.value),placeholder:"Enter PayPal client secret",error:i[`${t}_clientSecret`],required:!0}),e.jsx(D,{label:"Webhook ID",value:N.webhookId,onChange:h=>x(t,"webhookId",h.target.value),placeholder:"Enter webhook ID",description:"For webhook event verification"})]}),t==="flutterwave"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(D,{label:"Public Key",value:N.publicKey,onChange:h=>x(t,"publicKey",h.target.value),placeholder:"FLWPUBK_TEST-...",required:!0}),e.jsx(D,{label:"Secret Key",type:"password",value:N.secretKey,onChange:h=>x(t,"secretKey",h.target.value),placeholder:"FLWSECK_TEST-...",required:!0}),e.jsx(D,{label:"Encryption Key",type:"password",value:N.encryptionKey,onChange:h=>x(t,"encryptionKey",h.target.value),placeholder:"FLWSECK_TEST...",description:"For payload encryption"})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Fee Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(D,{label:"Percentage Fee (%)",type:"number",step:"0.01",min:"0",max:"100",value:N.fees.percentage,onChange:h=>m(t,"percentage",h.target.value),placeholder:"0.00"}),e.jsx(D,{label:"Fixed Fee",type:"number",step:"0.01",min:"0",value:N.fees.fixed,onChange:h=>m(t,"fixed",h.target.value),placeholder:"0.00"})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Transaction Limits"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(D,{label:"Minimum Amount",type:"number",min:"0",value:N.minAmount,onChange:h=>x(t,"minAmount",parseInt(h.target.value)||0),placeholder:"1"}),e.jsx(D,{label:"Maximum Amount",type:"number",min:"0",value:N.maxAmount,onChange:h=>x(t,"maxAmount",parseInt(h.target.value)||0),placeholder:"1000000"})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(E,{name:"CreditCard",size:48,className:"text-gray-400 mx-auto mb-4"}),e.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:[f==null?void 0:f.name," is Disabled"]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Enable this payment method to configure its settings."}),e.jsxs(P,{onClick:()=>p(t,!0),iconName:"Power",children:["Enable ",f==null?void 0:f.name]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(E,{name:"MapPin",size:48,className:"text-gray-400 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Payment Method Selected"}),e.jsx("p",{className:"text-gray-600",children:"This payment method is not available in the selected region."})]})})]})]})},Dl=({onSettingsChange:s})=>{const[t,a]=T.useState({metaTitle:"MoveEase Pro - Professional Moving Services",metaDescription:"Professional moving services in Kenya. Get instant quotes, track your move, and enjoy stress-free relocation with MoveEase Pro.",metaKeywords:"moving services, relocation, Kenya, Nairobi, professional movers",canonicalUrl:"https://moveeasepro.com",ogTitle:"",ogDescription:"",ogImage:"",ogType:"website",ogLocale:"en_US",twitterCard:"summary_large_image",twitterSite:"@moveeasepro",twitterCreator:"@moveeasepro",googleAnalyticsId:"",googleTagManagerId:"",facebookPixelId:"",hotjarId:"",enableSitemap:!0,enableRobotsTxt:!0,enableStructuredData:!0,enableBreadcrumbs:!0,facebookUrl:"",twitterUrl:"",linkedinUrl:"",instagramUrl:"",youtubeUrl:""}),[r,n]=T.useState({}),[i,l]=T.useState(!1),[o,c]=T.useState("google"),d=(p,x)=>{a(m=>({...m,[p]:x})),s(),r[p]&&n(m=>({...m,[p]:void 0}))},u=()=>{const p={};return t.metaTitle.trim()?t.metaTitle.length>60&&(p.metaTitle="Meta title should be under 60 characters"):p.metaTitle="Meta title is required",t.metaDescription.trim()?t.metaDescription.length>160&&(p.metaDescription="Meta description should be under 160 characters"):p.metaDescription="Meta description is required",["canonicalUrl","ogImage","facebookUrl","twitterUrl","linkedinUrl","instagramUrl","youtubeUrl"].forEach(m=>{t[m]&&!/^https?:\/\/.+/.test(t[m])&&(p[m]="Please enter a valid URL (starting with http:// or https://)")}),t.googleAnalyticsId&&!/^G-[A-Z0-9]+$/.test(t.googleAnalyticsId)&&(p.googleAnalyticsId="Invalid Google Analytics ID format (should be G-XXXXXXXXXX)"),t.googleTagManagerId&&!/^GTM-[A-Z0-9]+$/.test(t.googleTagManagerId)&&(p.googleTagManagerId="Invalid Google Tag Manager ID format (should be GTM-XXXXXXX)"),n(p),Object.keys(p).length===0},b=async()=>{if(u()){l(!0);try{await new Promise(p=>setTimeout(p,1e3)),console.log("Saving SEO & Marketing settings:",t),alert("SEO & Marketing settings saved successfully!")}catch(p){console.error("Error saving settings:",p),alert("Error saving settings. Please try again.")}finally{l(!1)}}},C=[{value:"summary",label:"Summary"},{value:"summary_large_image",label:"Summary Large Image"},{value:"app",label:"App"},{value:"player",label:"Player"}],w=[{value:"website",label:"Website"},{value:"article",label:"Article"},{value:"business.business",label:"Business"},{value:"profile",label:"Profile"}],g=[{value:"google",label:"Google Search"},{value:"facebook",label:"Facebook"},{value:"twitter",label:"Twitter"}];return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"SEO & Marketing Tools"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure SEO settings, social media, and marketing integrations."})]}),e.jsx(P,{onClick:b,loading:i,iconName:"Save",children:"Save Changes"})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic SEO Settings"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(D,{label:"Meta Title",value:t.metaTitle,onChange:p=>d("metaTitle",p.target.value),placeholder:"Enter meta title",description:`${t.metaTitle.length}/60 characters`,error:r.metaTitle,required:!0}),e.jsx(ve,{label:"Meta Description",value:t.metaDescription,onChange:p=>d("metaDescription",p.target.value),placeholder:"Enter meta description",rows:3,description:`${t.metaDescription.length}/160 characters`,error:r.metaDescription,required:!0}),e.jsx(D,{label:"Meta Keywords",value:t.metaKeywords,onChange:p=>d("metaKeywords",p.target.value),placeholder:"Enter keywords separated by commas",description:"Separate keywords with commas"}),e.jsx(D,{label:"Canonical URL",value:t.canonicalUrl,onChange:p=>d("canonicalUrl",p.target.value),placeholder:"https://moveeasepro.com",error:r.canonicalUrl,description:"The preferred URL for this page"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Open Graph (Facebook)"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(D,{label:"OG Title",value:t.ogTitle,onChange:p=>d("ogTitle",p.target.value),placeholder:"Leave empty to use meta title"}),e.jsx(B,{label:"OG Type",options:w,value:t.ogType,onChange:p=>d("ogType",p)})]}),e.jsx(ve,{label:"OG Description",value:t.ogDescription,onChange:p=>d("ogDescription",p.target.value),placeholder:"Leave empty to use meta description",rows:3}),e.jsx(D,{label:"OG Image URL",value:t.ogImage,onChange:p=>d("ogImage",p.target.value),placeholder:"https://example.com/image.jpg",description:"Recommended size: 1200x630px",error:r.ogImage}),e.jsx(D,{label:"OG Locale",value:t.ogLocale,onChange:p=>d("ogLocale",p.target.value),placeholder:"en_US",description:"Language and country code"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Twitter Cards"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(B,{label:"Card Type",options:C,value:t.twitterCard,onChange:p=>d("twitterCard",p)}),e.jsx(D,{label:"Twitter Site",value:t.twitterSite,onChange:p=>d("twitterSite",p.target.value),placeholder:"@yourusername",description:"Your Twitter username"})]}),e.jsx(D,{label:"Twitter Creator",value:t.twitterCreator,onChange:p=>d("twitterCreator",p.target.value),placeholder:"@creatorusername",description:"Content creator's Twitter username"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Analytics & Tracking"}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(D,{label:"Google Analytics ID",value:t.googleAnalyticsId,onChange:p=>d("googleAnalyticsId",p.target.value),placeholder:"G-XXXXXXXXXX",error:r.googleAnalyticsId,description:"Google Analytics 4 measurement ID"}),e.jsx(D,{label:"Google Tag Manager ID",value:t.googleTagManagerId,onChange:p=>d("googleTagManagerId",p.target.value),placeholder:"GTM-XXXXXXX",error:r.googleTagManagerId,description:"Container ID from GTM"}),e.jsx(D,{label:"Facebook Pixel ID",value:t.facebookPixelId,onChange:p=>d("facebookPixelId",p.target.value),placeholder:"123456789012345",description:"Facebook Ads pixel ID"}),e.jsx(D,{label:"Hotjar Site ID",value:t.hotjarId,onChange:p=>d("hotjarId",p.target.value),placeholder:"1234567",description:"Hotjar tracking site ID"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"SEO Features"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(oe,{checked:t.enableSitemap,onChange:p=>d("enableSitemap",p.target.checked),label:"Generate XML Sitemap",description:"Automatically generate and update sitemap.xml"}),e.jsx(oe,{checked:t.enableRobotsTxt,onChange:p=>d("enableRobotsTxt",p.target.checked),label:"Generate Robots.txt",description:"Create robots.txt file for search engines"}),e.jsx(oe,{checked:t.enableStructuredData,onChange:p=>d("enableStructuredData",p.target.checked),label:"Structured Data",description:"Add JSON-LD structured data markup"}),e.jsx(oe,{checked:t.enableBreadcrumbs,onChange:p=>d("enableBreadcrumbs",p.target.checked),label:"Breadcrumb Navigation",description:"Show breadcrumb navigation on pages"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Social Media Links"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(D,{label:"Facebook URL",value:t.facebookUrl,onChange:p=>d("facebookUrl",p.target.value),placeholder:"https://facebook.com/moveeasepro",error:r.facebookUrl}),e.jsx(D,{label:"Twitter URL",value:t.twitterUrl,onChange:p=>d("twitterUrl",p.target.value),placeholder:"https://twitter.com/moveeasepro",error:r.twitterUrl}),e.jsx(D,{label:"LinkedIn URL",value:t.linkedinUrl,onChange:p=>d("linkedinUrl",p.target.value),placeholder:"https://linkedin.com/company/moveeasepro",error:r.linkedinUrl}),e.jsx(D,{label:"Instagram URL",value:t.instagramUrl,onChange:p=>d("instagramUrl",p.target.value),placeholder:"https://instagram.com/moveeasepro",error:r.instagramUrl}),e.jsx(D,{label:"YouTube URL",value:t.youtubeUrl,onChange:p=>d("youtubeUrl",p.target.value),placeholder:"https://youtube.com/c/moveeasepro",error:r.youtubeUrl})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"SEO Preview"}),e.jsx(B,{options:g,value:o,onChange:p=>c(p),className:"w-48"})]}),o==="google"&&e.jsxs("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-50",children:[e.jsx("div",{className:"text-blue-600 text-lg font-medium hover:underline cursor-pointer",children:t.ogTitle||t.metaTitle||"Page Title"}),e.jsx("div",{className:"text-green-700 text-sm mt-1",children:t.canonicalUrl||"https://moveeasepro.com"}),e.jsx("div",{className:"text-gray-600 text-sm mt-2",children:t.ogDescription||t.metaDescription||"Meta description will appear here..."})]}),o==="facebook"&&e.jsxs("div",{className:"border border-gray-300 rounded-lg overflow-hidden bg-white max-w-lg",children:[t.ogImage&&e.jsxs("div",{className:"h-48 bg-gray-200 flex items-center justify-center",children:[e.jsx("img",{src:t.ogImage,alt:"OG Preview",className:"max-h-full max-w-full object-cover",onError:p=>{p.target.style.display="none",p.target.nextSibling.style.display="flex"}}),e.jsx("div",{className:"hidden items-center justify-center h-full text-gray-500",children:e.jsx(E,{name:"Image",size:48})})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200",children:[e.jsx("div",{className:"text-gray-500 text-xs uppercase mb-1",children:new URL(t.canonicalUrl||"https://moveeasepro.com").hostname}),e.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:t.ogTitle||t.metaTitle||"Page Title"}),e.jsx("div",{className:"text-gray-600 text-sm",children:t.ogDescription||t.metaDescription||"Meta description will appear here..."})]})]}),o==="twitter"&&e.jsxs("div",{className:"border border-gray-300 rounded-lg overflow-hidden bg-white max-w-lg",children:[t.ogImage&&t.twitterCard==="summary_large_image"&&e.jsxs("div",{className:"h-48 bg-gray-200 flex items-center justify-center",children:[e.jsx("img",{src:t.ogImage,alt:"Twitter Preview",className:"max-h-full max-w-full object-cover",onError:p=>{p.target.style.display="none",p.target.nextSibling.style.display="flex"}}),e.jsx("div",{className:"hidden items-center justify-center h-full text-gray-500",children:e.jsx(E,{name:"Image",size:48})})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200",children:[e.jsx("div",{className:"font-semibold text-gray-900 mb-1",children:t.ogTitle||t.metaTitle||"Page Title"}),e.jsx("div",{className:"text-gray-600 text-sm mb-2",children:t.ogDescription||t.metaDescription||"Meta description will appear here..."}),e.jsx("div",{className:"text-gray-500 text-xs",children:new URL(t.canonicalUrl||"https://moveeasepro.com").hostname})]})]})]})]})},Rl=({onSettingsChange:s})=>{const[t,a]=T.useState({googleCalendar:{enabled:!1,clientId:"",clientSecret:"",redirectUri:"",scopes:["calendar.readonly","calendar.events"],connected:!1,lastSync:null,autoSync:!0,syncInterval:"15"},googleMaps:{enabled:!0,apiKey:"",connected:!1,enabledAPIs:["maps","places","directions","geocoding"],restrictions:{domains:"",ips:"",androidApps:"",iosApps:""},mapStyle:"default",defaultZoom:10},googleDrive:{enabled:!1,clientId:"",clientSecret:"",redirectUri:"",scopes:["drive.file","drive.readonly"],connected:!1,folderStructure:"organized",autoUpload:!0,fileRetention:"365",allowedFileTypes:["pdf","jpg","png","mp4","mov"]},slack:{enabled:!1,webhookUrl:"",botToken:"",channel:"#general",connected:!1,notifications:{newBookings:!0,paymentReceived:!0,moveCompleted:!0}},zapier:{enabled:!1,webhookUrl:"",apiKey:"",connected:!1,triggers:["booking_created","payment_received","move_completed"]},mailchimp:{enabled:!1,apiKey:"",serverPrefix:"",listId:"",connected:!1,autoSubscribe:!0,doubleOptIn:!0}}),[r,n]=T.useState({}),[i,l]=T.useState(!1),[o,c]=T.useState({}),[d,u]=T.useState("googleCalendar"),b=[{id:"googleCalendar",name:"Google Calendar",icon:"Calendar",color:"blue",description:"Schedule and manage appointments",category:"Google Services"},{id:"googleMaps",name:"Google Maps",icon:"MapPin",color:"red",description:"Location services and route optimization",category:"Google Services"},{id:"googleDrive",name:"Google Drive",icon:"HardDrive",color:"green",description:"File storage and sharing",category:"Google Services"},{id:"slack",name:"Slack",icon:"MessageSquare",color:"purple",description:"Team communication and notifications",category:"Communication"},{id:"zapier",name:"Zapier",icon:"Zap",color:"orange",description:"Workflow automation",category:"Automation"},{id:"mailchimp",name:"Mailchimp",icon:"Mail",color:"yellow",description:"Email marketing and newsletters",category:"Marketing"}],C=(f,v)=>{a(h=>({...h,[f]:{...h[f],enabled:v}})),s()},w=(f,v,h)=>{a(R=>({...R,[f]:{...R[f],[v]:h}})),s();const I=`${f}_${v}`;r[I]&&n(R=>({...R,[I]:void 0}))},g=(f,v,h,I)=>{a(R=>({...R,[f]:{...R[f],[v]:{...R[f][v],[h]:I}}})),s()},p=(f,v,h)=>{a(I=>({...I,[f]:{...I[f],[v]:h.split(",").map(R=>R.trim()).filter(Boolean)}})),s()},x=f=>{const v=t[f],h={};return v.enabled?(v.clientId!==void 0&&!v.clientId.trim()&&(h[`${f}_clientId`]="Client ID is required"),v.clientSecret!==void 0&&!v.clientSecret.trim()&&(h[`${f}_clientSecret`]="Client secret is required"),v.apiKey!==void 0&&!v.apiKey.trim()&&(h[`${f}_apiKey`]="API key is required"),f==="slack"&&!v.webhookUrl.trim()&&(h[`${f}_webhookUrl`]="Webhook URL is required"),f==="mailchimp"&&(v.serverPrefix.trim()||(h[`${f}_serverPrefix`]="Server prefix is required"),v.listId.trim()||(h[`${f}_listId`]="List ID is required")),n(I=>({...I,...h})),Object.keys(h).length===0):!0},m=async()=>{const f=Object.keys(t).filter(h=>t[h].enabled);let v=!0;for(const h of f)x(h)||(v=!1);if(v){l(!0);try{await new Promise(h=>setTimeout(h,1e3)),console.log("Saving third-party integration settings:",t),alert("Third-party integration settings saved successfully!")}catch(h){console.error("Error saving settings:",h),alert("Error saving settings. Please try again.")}finally{l(!1)}}},j=async f=>{var v,h;if(!x(f)){alert("Please fix configuration errors before connecting");return}c(I=>({...I,[f]:!0}));try{await new Promise(I=>setTimeout(I,2e3)),a(I=>({...I,[f]:{...I[f],connected:!0,lastSync:new Date().toISOString()}})),alert(`${(v=b.find(I=>I.id===f))==null?void 0:v.name} connected successfully!`)}catch{alert(`Failed to connect ${(h=b.find(R=>R.id===f))==null?void 0:h.name}`)}finally{c(I=>({...I,[f]:!1}))}},S=f=>{var v;confirm(`Are you sure you want to disconnect ${(v=b.find(h=>h.id===f))==null?void 0:v.name}?`)&&a(h=>({...h,[f]:{...h[f],connected:!1,lastSync:null}}))},y=async f=>{var v,h;c(I=>({...I,[`${f}_sync`]:!0}));try{await new Promise(I=>setTimeout(I,1500)),a(I=>({...I,[f]:{...I[f],lastSync:new Date().toISOString()}})),alert(`${(v=b.find(I=>I.id===f))==null?void 0:v.name} synced successfully!`)}catch{alert(`Failed to sync ${(h=b.find(R=>R.id===f))==null?void 0:h.name}`)}finally{c(I=>({...I,[`${f}_sync`]:!1}))}},A=t[d],N=b.find(f=>f.id===d);return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Third-Party Integrations"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure Google APIs and other third-party service integrations."})]}),e.jsx(P,{onClick:m,loading:i,iconName:"Save",children:"Save Changes"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Available Integrations"}),["Google Services","Communication","Automation","Marketing"].map(f=>{const v=b.filter(h=>h.category===f);return v.length===0?null:e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:f}),e.jsx("div",{className:"space-y-2",children:v.map(h=>e.jsxs("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${d===h.id?"border-primary bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>u(h.id),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${h.color==="blue"?"bg-blue-100 text-blue-600":h.color==="red"?"bg-red-100 text-red-600":h.color==="green"?"bg-green-100 text-green-600":h.color==="purple"?"bg-purple-100 text-purple-600":h.color==="orange"?"bg-orange-100 text-orange-600":h.color==="yellow"?"bg-yellow-100 text-yellow-600":"bg-gray-100 text-gray-600"}`,children:e.jsx(E,{name:h.icon,size:16})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-sm",children:h.name}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[t[h.id].enabled&&e.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-green-100 text-green-700",children:"Enabled"}),t[h.id].connected&&e.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-700",children:"Connected"})]})]})]}),e.jsx(oe,{checked:t[h.id].enabled,onChange:I=>C(h.id,I.target.checked),onClick:I=>I.stopPropagation()})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-2",children:h.description})]},h.id))})]},f)})]}),e.jsx("div",{className:"lg:col-span-2 bg-white rounded-lg border border-gray-200 p-6",children:A.enabled?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${(N==null?void 0:N.color)==="blue"?"bg-blue-100 text-blue-600":(N==null?void 0:N.color)==="red"?"bg-red-100 text-red-600":(N==null?void 0:N.color)==="green"?"bg-green-100 text-green-600":(N==null?void 0:N.color)==="purple"?"bg-purple-100 text-purple-600":(N==null?void 0:N.color)==="orange"?"bg-orange-100 text-orange-600":(N==null?void 0:N.color)==="yellow"?"bg-yellow-100 text-yellow-600":"bg-gray-100 text-gray-600"}`,children:e.jsx(E,{name:N==null?void 0:N.icon,size:20})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[N==null?void 0:N.name," Configuration"]}),e.jsx("p",{className:"text-sm text-gray-600",children:N==null?void 0:N.description})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[A.connected&&e.jsxs("div",{className:"flex items-center text-green-600 text-sm",children:[e.jsx(E,{name:"CheckCircle",size:16,className:"mr-1"}),"Connected"]}),A.connected?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{variant:"outline",size:"sm",iconName:"RefreshCw",onClick:()=>y(d),loading:o[`${d}_sync`],children:"Sync"}),e.jsx(P,{variant:"outline",size:"sm",iconName:"Unlink",onClick:()=>S(d),children:"Disconnect"})]}):e.jsx(P,{iconName:"Link",onClick:()=>j(d),loading:o[d],children:"Connect"})]})]}),d==="googleCalendar"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(D,{label:"Client ID",value:A.clientId,onChange:f=>w("googleCalendar","clientId",f.target.value),placeholder:"Enter Google Calendar Client ID",error:r.googleCalendar_clientId,required:!0}),e.jsx(D,{label:"Client Secret",type:"password",value:A.clientSecret,onChange:f=>w("googleCalendar","clientSecret",f.target.value),placeholder:"Enter Client Secret",error:r.googleCalendar_clientSecret,required:!0}),e.jsx(D,{label:"Redirect URI",value:A.redirectUri,onChange:f=>w("googleCalendar","redirectUri",f.target.value),placeholder:"https://yourdomain.com/auth/callback",description:"OAuth redirect URI"}),e.jsx(B,{label:"Sync Interval",options:[{value:"5",label:"5 minutes"},{value:"15",label:"15 minutes"},{value:"30",label:"30 minutes"},{value:"60",label:"1 hour"}],value:A.syncInterval,onChange:f=>w("googleCalendar","syncInterval",f)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Calendar Scopes"}),e.jsx("div",{className:"space-y-2",children:["calendar.readonly","calendar.events","calendar.events.readonly"].map(f=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:A.scopes.includes(f),onChange:v=>{const h=v.target.checked?[...A.scopes,f]:A.scopes.filter(I=>I!==f);w("googleCalendar","scopes",h)},className:"rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm",children:f})]},f))})]}),e.jsx(oe,{checked:A.autoSync,onChange:f=>w("googleCalendar","autoSync",f.target.checked),label:"Auto Sync",description:"Automatically sync calendar events"}),A.lastSync&&e.jsxs("div",{className:"text-sm text-gray-600",children:["Last synced: ",new Date(A.lastSync).toLocaleString()]})]}),d==="googleMaps"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(D,{label:"API Key",type:"password",value:A.apiKey,onChange:f=>w("googleMaps","apiKey",f.target.value),placeholder:"Enter Google Maps API Key",error:r.googleMaps_apiKey,required:!0,description:"Enable Maps JavaScript API, Places API, and Directions API"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enabled APIs"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:["maps","places","directions","geocoding","distance_matrix","elevation"].map(f=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:A.enabledAPIs.includes(f),onChange:v=>{const h=v.target.checked?[...A.enabledAPIs,f]:A.enabledAPIs.filter(I=>I!==f);w("googleMaps","enabledAPIs",h)},className:"rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm capitalize",children:f.replace("_"," ")})]},f))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(B,{label:"Map Style",options:[{value:"default",label:"Default"},{value:"satellite",label:"Satellite"},{value:"terrain",label:"Terrain"},{value:"hybrid",label:"Hybrid"}],value:A.mapStyle,onChange:f=>w("googleMaps","mapStyle",f)}),e.jsx(D,{label:"Default Zoom Level",type:"number",min:"1",max:"20",value:A.defaultZoom,onChange:f=>w("googleMaps","defaultZoom",parseInt(f.target.value))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"API Restrictions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(D,{label:"Allowed Domains",value:A.restrictions.domains,onChange:f=>g("googleMaps","restrictions","domains",f.target.value),placeholder:"yourdomain.com, *.yourdomain.com",description:"Comma-separated list"}),e.jsx(D,{label:"Allowed IP Addresses",value:A.restrictions.ips,onChange:f=>g("googleMaps","restrictions","ips",f.target.value),placeholder:"192.168.1.1, 10.0.0.0/8",description:"Comma-separated list"})]})]})]}),d==="googleDrive"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(D,{label:"Client ID",value:A.clientId,onChange:f=>w("googleDrive","clientId",f.target.value),placeholder:"Enter Google Drive Client ID",error:r.googleDrive_clientId,required:!0}),e.jsx(D,{label:"Client Secret",type:"password",value:A.clientSecret,onChange:f=>w("googleDrive","clientSecret",f.target.value),placeholder:"Enter Client Secret",error:r.googleDrive_clientSecret,required:!0}),e.jsx(D,{label:"Redirect URI",value:A.redirectUri,onChange:f=>w("googleDrive","redirectUri",f.target.value),placeholder:"https://yourdomain.com/auth/callback"}),e.jsx(D,{label:"File Retention (Days)",type:"number",min:"1",value:A.fileRetention,onChange:f=>w("googleDrive","fileRetention",f.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Drive Scopes"}),e.jsx("div",{className:"space-y-2",children:["drive.file","drive.readonly","drive.metadata.readonly"].map(f=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:A.scopes.includes(f),onChange:v=>{const h=v.target.checked?[...A.scopes,f]:A.scopes.filter(I=>I!==f);w("googleDrive","scopes",h)},className:"rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm",children:f})]},f))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Allowed File Types"}),e.jsx(D,{value:A.allowedFileTypes.join(", "),onChange:f=>p("googleDrive","allowedFileTypes",f.target.value),placeholder:"pdf, jpg, png, mp4",description:"Comma-separated list"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(oe,{checked:A.autoUpload,onChange:f=>w("googleDrive","autoUpload",f.target.checked),label:"Auto Upload",description:"Automatically upload files to Google Drive"}),e.jsx(B,{label:"Folder Structure",options:[{value:"organized",label:"Organized by date/customer"},{value:"flat",label:"Flat structure"}],value:A.folderStructure,onChange:f=>w("googleDrive","folderStructure",f)})]})]}),d==="slack"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(D,{label:"Webhook URL",value:A.webhookUrl,onChange:f=>w("slack","webhookUrl",f.target.value),placeholder:"https://hooks.slack.com/services/...",error:r.slack_webhookUrl,required:!0}),e.jsx(D,{label:"Bot Token",type:"password",value:A.botToken,onChange:f=>w("slack","botToken",f.target.value),placeholder:"xoxb-...",description:"Optional: For advanced features"}),e.jsx(D,{label:"Default Channel",value:A.channel,onChange:f=>w("slack","channel",f.target.value),placeholder:"#general"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Notification Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(oe,{checked:A.notifications.newBookings,onChange:f=>g("slack","notifications","newBookings",f.target.checked),label:"New Bookings",description:"Notify when new bookings are created"}),e.jsx(oe,{checked:A.notifications.paymentReceived,onChange:f=>g("slack","notifications","paymentReceived",f.target.checked),label:"Payment Received",description:"Notify when payments are received"}),e.jsx(oe,{checked:A.notifications.moveCompleted,onChange:f=>g("slack","notifications","moveCompleted",f.target.checked),label:"Move Completed",description:"Notify when moves are completed"})]})]})]}),d==="zapier"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(D,{label:"Webhook URL",value:A.webhookUrl,onChange:f=>w("zapier","webhookUrl",f.target.value),placeholder:"https://hooks.zapier.com/hooks/catch/...",error:r.zapier_webhookUrl,required:!0}),e.jsx(D,{label:"API Key",type:"password",value:A.apiKey,onChange:f=>w("zapier","apiKey",f.target.value),placeholder:"Enter Zapier API key",description:"Optional: For advanced automation"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available Triggers"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:["booking_created","booking_updated","payment_received","move_completed","customer_created"].map(f=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:A.triggers.includes(f),onChange:v=>{const h=v.target.checked?[...A.triggers,f]:A.triggers.filter(I=>I!==f);w("zapier","triggers",h)},className:"rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"text-sm",children:f.replace("_"," ").replace(/\b\w/g,v=>v.toUpperCase())})]},f))})]})]}),d==="mailchimp"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(D,{label:"API Key",type:"password",value:A.apiKey,onChange:f=>w("mailchimp","apiKey",f.target.value),placeholder:"Enter Mailchimp API key",error:r.mailchimp_apiKey,required:!0}),e.jsx(D,{label:"Server Prefix",value:A.serverPrefix,onChange:f=>w("mailchimp","serverPrefix",f.target.value),placeholder:"us1, us2, etc.",error:r.mailchimp_serverPrefix,required:!0,description:"Found in your API key after the dash"}),e.jsx(D,{label:"List ID",value:A.listId,onChange:f=>w("mailchimp","listId",f.target.value),placeholder:"Enter audience/list ID",error:r.mailchimp_listId,required:!0})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(oe,{checked:A.autoSubscribe,onChange:f=>w("mailchimp","autoSubscribe",f.target.checked),label:"Auto Subscribe Customers",description:"Automatically add new customers to mailing list"}),e.jsx(oe,{checked:A.doubleOptIn,onChange:f=>w("mailchimp","doubleOptIn",f.target.checked),label:"Double Opt-in",description:"Require email confirmation before subscribing"})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(E,{name:"Settings",size:48,className:"text-gray-400 mx-auto mb-4"}),e.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:[N==null?void 0:N.name," is Disabled"]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Enable this integration to configure its settings."}),e.jsxs(P,{onClick:()=>C(d,!0),iconName:"Power",children:["Enable ",N==null?void 0:N.name]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Integration Status Overview"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:b.map(f=>{const v=t[f.id];return e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`p-1 rounded ${f.color==="blue"?"bg-blue-100 text-blue-600":f.color==="red"?"bg-red-100 text-red-600":f.color==="green"?"bg-green-100 text-green-600":f.color==="purple"?"bg-purple-100 text-purple-600":f.color==="orange"?"bg-orange-100 text-orange-600":f.color==="yellow"?"bg-yellow-100 text-yellow-600":"bg-gray-100 text-gray-600"}`,children:e.jsx(E,{name:f.icon,size:12})}),e.jsx("h4",{className:"font-medium text-sm",children:f.name})]}),e.jsx("div",{className:`w-3 h-3 rounded-full ${v.enabled&&v.connected?"bg-green-500":v.enabled?"bg-yellow-500":"bg-gray-300"}`})]}),e.jsx("p",{className:"text-xs text-gray-600",children:v.enabled&&v.connected?"Active and connected":v.enabled?"Enabled but not connected":"Disabled"}),v.lastSync&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Last sync: ",new Date(v.lastSync).toLocaleDateString()]})]},f.id)})})]})]})},Ol=()=>{const{settings:s,exportSettings:t,importSettings:a,resetSettings:r,validateSettings:n}=El(),[i,l]=T.useState(!1),[o,c]=T.useState(null),d=()=>{try{t(),alert("Settings exported successfully!")}catch(p){console.error("Export error:",p),alert("Failed to export settings. Please try again.")}},u=async p=>{if(p){l(!0),c(null);try{const x=await a(p);c({success:!0,message:`Settings imported successfully from ${x.exportedAt?new Date(x.exportedAt).toLocaleDateString():"unknown date"}`,data:x}),alert("Settings imported successfully!")}catch(x){console.error("Import error:",x),c({success:!1,message:x.message||"Failed to import settings",data:null}),alert(`Import failed: ${x.message}`)}finally{l(!1)}}},b=()=>{confirm("Are you sure you want to reset all settings to defaults? This action cannot be undone.")&&(r(),alert("Settings reset to defaults successfully!"))},C=()=>{const p=n();if(p.isValid)alert("All settings are valid!");else{const x=Object.values(p.errors).join(`
`);alert(`Settings validation failed:

${x}`)}},g=(()=>{const p={totalSections:Object.keys(s).length,enabledIntegrations:0,enabledFeatures:0,configuredGateways:0};return s.integrations&&(p.enabledIntegrations=Object.values(s.integrations).filter(x=>x.enabled).length),s.advancedFeatures&&(p.enabledFeatures=Object.values(s.advancedFeatures).filter(x=>x.enabled).length),s.paymentGateways&&(p.configuredGateways=Object.values(s.paymentGateways).filter(x=>x.enabled).length),p})();return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Settings Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Import, export, validate, and manage your application settings."})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Settings Overview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:g.totalSections}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Sections"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:g.enabledIntegrations}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Integrations"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:g.enabledFeatures}),e.jsx("div",{className:"text-sm text-gray-600",children:"Enabled Features"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:g.configuredGateways}),e.jsx("div",{className:"text-sm text-gray-600",children:"Payment Gateways"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(E,{name:"Download",size:24,className:"text-blue-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Export Settings"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Download your current settings as a JSON file"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-700",children:"Export your current settings configuration to backup or transfer to another instance. The exported file will include all your customizations, integrations, and preferences."}),e.jsx(P,{onClick:d,iconName:"Download",className:"w-full md:w-auto",children:"Export Settings"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(E,{name:"Upload",size:24,className:"text-green-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Import Settings"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Upload a settings file to restore configuration"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(E,{name:"AlertTriangle",size:20,className:"text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-800",children:"Important Notice"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Importing settings will overwrite your current configuration. Consider exporting your current settings first as a backup."})]})]})}),e.jsx(gs,{accept:".json",maxSize:1024*1024,onFileSelect:u,loading:i,description:"Select a JSON settings file to import"}),o&&e.jsx("div",{className:`p-4 rounded-lg border ${o.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(E,{name:o.success?"CheckCircle":"XCircle",size:20,className:o.success?"text-green-600":"text-red-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:`text-sm font-medium ${o.success?"text-green-800":"text-red-800"}`,children:o.success?"Import Successful":"Import Failed"}),e.jsx("p",{className:`text-sm mt-1 ${o.success?"text-green-700":"text-red-700"}`,children:o.message})]})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Settings Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{name:"CheckCircle",size:20,className:"text-blue-600"}),e.jsx("h4",{className:"font-medium text-gray-900",children:"Validate Settings"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Check your current settings for any configuration errors or missing required fields."}),e.jsx(P,{variant:"outline",onClick:C,iconName:"CheckCircle",className:"w-full",children:"Validate Configuration"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{name:"RotateCcw",size:20,className:"text-red-600"}),e.jsx("h4",{className:"font-medium text-gray-900",children:"Reset Settings"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Reset all settings to their default values. This action cannot be undone."}),e.jsx(P,{variant:"outline",onClick:b,iconName:"RotateCcw",className:"w-full border-red-300 text-red-700 hover:bg-red-50",children:"Reset to Defaults"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Settings Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Storage Location"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Settings are stored locally in your browser's localStorage. They persist across sessions but are specific to this browser and domain."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Backup Recommendation"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Regularly export your settings to create backups. This ensures you can restore your configuration if needed."})]})]}),e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(E,{name:"Info",size:20,className:"text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800",children:"Settings Format"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Settings files are in JSON format and include metadata about export date and version. Only import settings files from trusted sources."})]})]})})]})]})]})},ha=()=>{const[s,t]=T.useState("company"),[a,r]=T.useState(!1),n=[{id:"company",name:"Company Branding",icon:"Building2",description:"Logo, company details, brand colors",component:Tl},{id:"communication",name:"Communication",icon:"MessageSquare",description:"SMS & Email configuration",component:Pl},{id:"documents",name:"Document Templates",icon:"FileText",description:"PDF templates & layouts",component:Al},{id:"localization",name:"Localization",icon:"Globe",description:"Currency, language, timezone",component:Il},{id:"payments",name:"Payment Gateways",icon:"CreditCard",description:"Mobile money & payment methods",component:kl},{id:"seo",name:"SEO & Marketing",icon:"TrendingUp",description:"SEO settings & analytics",component:Dl},{id:"integrations",name:"Third-Party APIs",icon:"Plug",description:"Google APIs & integrations",component:Rl},{id:"management",name:"Settings Management",icon:"Database",description:"Import, export, backup & validation",component:Ol}],i=b=>{a&&!window.confirm("You have unsaved changes. Are you sure you want to leave this section?")||(t(b),r(!1))},l=()=>{console.log("Saving all settings..."),r(!1)},o=()=>{console.log("Exporting settings...")},c=()=>{console.log("Importing settings...")},d=n.find(b=>b.id===s),u=d==null?void 0:d.component;return e.jsxs(Cl,{children:[e.jsxs(We,{children:[e.jsx("title",{children:"Settings - MoveEase Pro"}),e.jsx("meta",{name:"description",content:"Configure your MoveEase Pro application settings and preferences."})]}),e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx(nt,{}),e.jsxs("div",{className:"flex-1 lg:ml-64",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure your application settings and preferences"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[a&&e.jsxs("div",{className:"flex items-center text-amber-600 text-sm",children:[e.jsx(E,{name:"AlertCircle",size:16,className:"mr-1"}),"Unsaved changes"]}),e.jsx(P,{variant:"outline",size:"sm",iconName:"Download",onClick:o,children:"Export"}),e.jsx(P,{variant:"outline",size:"sm",iconName:"Upload",onClick:c,children:"Import"}),e.jsx(P,{size:"sm",iconName:"Save",onClick:l,disabled:!a,children:"Save All"})]})]})}),e.jsxs("div",{className:"flex h-full",children:[e.jsx("nav",{className:"w-80 bg-white border-r border-gray-200 overflow-y-auto",children:e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"space-y-2",children:n.map(b=>e.jsx("button",{onClick:()=>i(b.id),className:`w-full text-left p-4 rounded-lg transition-colors ${s===b.id?"bg-primary text-white":"hover:bg-gray-50 text-gray-700"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(E,{name:b.icon,size:20,className:`mt-0.5 ${s===b.id?"text-white":"text-gray-400"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-sm",children:b.name}),e.jsx("p",{className:`text-xs mt-1 ${s===b.id?"text-blue-100":"text-gray-500"}`,children:b.description})]})]})},b.id))})})}),e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"p-6",children:u?e.jsx(u,{onSettingsChange:()=>r(!0)}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(E,{name:"Settings",size:48,className:"text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Settings Module Not Found"}),e.jsx("p",{className:"text-gray-600",children:"The selected settings module is not yet implemented."})]})})})]})]})]})]})},Le={INDIVIDUAL:"individual",CORPORATE:"corporate",VIP:"vip"},me={ACTIVE:"active",INACTIVE:"inactive",SUSPENDED:"suspended",PROSPECT:"prospect"},Lt={HOME:"home",WORK:"work"},rt={EMAIL:"email",SMS:"sms",PHONE:"phone",WHATSAPP:"whatsapp"},st={RESIDENTIAL_MOVE:"residential_move",OFFICE_MOVE:"office_move",PACKING:"packing",ASSEMBLY:"assembly"},ct={QUOTED:"quoted",BOOKED:"booked",IN_PROGRESS:"in_progress",COMPLETED:"completed",CANCELLED:"cancelled"},ya={id:"",customerNumber:"",type:Le.INDIVIDUAL,status:me.ACTIVE,personalInfo:{title:"",firstName:"",lastName:"",middleName:"",dateOfBirth:null,gender:"",nationality:"",idNumber:"",passportNumber:"",profilePhoto:null},contactInfo:{primaryPhone:"",secondaryPhone:"",email:"",alternateEmail:"",whatsappNumber:"",preferredContactMethod:rt.EMAIL,preferredContactTime:"anytime"},addresses:[{id:"",type:Lt.HOME,isPrimary:!0,street:"",apartment:"",city:"",state:"",postalCode:"",country:"Kenya",coordinates:{latitude:null,longitude:null},accessInstructions:"",isActive:!0}],corporateInfo:{companyName:"",registrationNumber:"",taxNumber:"",industry:"",companySize:"",website:"",contactPerson:{name:"",title:"",phone:"",email:""}},emergencyContacts:[{id:"",name:"",relationship:"",phone:"",email:"",address:""}],preferences:{preferredServices:[],specialRequirements:"",accessibilityNeeds:"",petInformation:"",valuableItems:"",packingPreferences:{selfPack:!1,partialPack:!1,fullPack:!1},insurancePreferences:{basicCoverage:!0,fullCoverage:!1,customCoverage:!1},communicationPreferences:{smsUpdates:!0,emailUpdates:!0,whatsappUpdates:!1,callUpdates:!1}},moveHistory:[{id:"",moveNumber:"",date:null,serviceType:st.RESIDENTIAL_MOVE,status:ct.COMPLETED,origin:{address:"",coordinates:{latitude:null,longitude:null}},destination:{address:"",coordinates:{latitude:null,longitude:null}},items:[],totalValue:0,finalCost:0,rating:null,feedback:"",assignedStaff:[],completionDate:null}],financialInfo:{creditLimit:0,outstandingBalance:0,totalSpent:0,averageOrderValue:0,paymentMethods:[{id:"",type:"mpesa",details:{phoneNumber:"",cardLast4:"",bankName:"",accountNumber:""},isDefault:!1,isActive:!0}],billingAddress:null},segmentation:{tier:"standard",loyaltyPoints:0,lifetimeValue:0,riskScore:"low",churnProbability:"low",lastServiceDate:null,serviceFrequency:"occasional"},communications:[{id:"",type:"email",direction:"outbound",subject:"",content:"",timestamp:null,staffMember:"",status:"sent",relatedMove:null}],documents:[{id:"",name:"",type:"contract",url:"",uploadDate:null,uploadedBy:"",relatedMove:null,isActive:!0}],notes:[{id:"",content:"",type:"general",createdBy:"",createdAt:null,isPrivate:!1}],tags:[],systemInfo:{createdAt:null,createdBy:"",updatedAt:null,updatedBy:"",lastLoginAt:null,source:"direct",referredBy:null,assignedSalesRep:"",assignedAccountManager:""},privacy:{marketingConsent:!1,dataProcessingConsent:!0,thirdPartySharing:!1,communicationConsent:{email:!0,sms:!0,phone:!1,whatsapp:!1}}},Wt={required:["firstName","lastName","primaryPhone","email"],email:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,phone:/^(\+254|0)[17]\d{8}$/,idNumber:/^\d{8}$/},_l=[{id:"cust_1703123456789_abc123def",customerNumber:"CUST1001",type:Le.INDIVIDUAL,status:me.ACTIVE,personalInfo:{title:"Mr",firstName:"John",lastName:"Kamau",middleName:"Mwangi",dateOfBirth:"1985-03-15",gender:"male",nationality:"Kenyan",idNumber:"12345678",passportNumber:"",profilePhoto:null},contactInfo:{primaryPhone:"+254712345678",secondaryPhone:"+254722345678",email:"john.kamau@email.com",alternateEmail:"",whatsappNumber:"+254712345678",preferredContactMethod:rt.EMAIL,preferredContactTime:"evening"},addresses:[{id:"addr_1",type:Lt.HOME,isPrimary:!0,street:"123 Kiambu Road",apartment:"Apt 4B",city:"Nairobi",state:"Nairobi County",postalCode:"00100",country:"Kenya",coordinates:{latitude:-1.2921,longitude:36.8219},accessInstructions:"Blue gate, ring bell twice",isActive:!0}],corporateInfo:{companyName:"",registrationNumber:"",taxNumber:"",industry:"",companySize:"",website:"",contactPerson:{name:"",title:"",phone:"",email:""}},emergencyContacts:[{id:"emerg_1",name:"Mary Kamau",relationship:"spouse",phone:"+254733456789",email:"mary.kamau@email.com",address:"123 Kiambu Road, Nairobi"}],preferences:{preferredServices:[st.RESIDENTIAL_MOVE,st.PACKING],specialRequirements:"Handle fragile items with care",accessibilityNeeds:"",petInformation:"One small dog",valuableItems:"Antique furniture, electronics",packingPreferences:{selfPack:!1,partialPack:!0,fullPack:!1},insurancePreferences:{basicCoverage:!0,fullCoverage:!1,customCoverage:!1},communicationPreferences:{smsUpdates:!0,emailUpdates:!0,whatsappUpdates:!1,callUpdates:!1}},moveHistory:[{id:"move_1",moveNumber:"MV2024001",date:"2024-01-15T00:00:00.000Z",serviceType:st.RESIDENTIAL_MOVE,status:ct.COMPLETED,origin:{address:"456 Westlands Avenue, Nairobi",coordinates:{latitude:-1.2634,longitude:36.8078}},destination:{address:"123 Kiambu Road, Nairobi",coordinates:{latitude:-1.2921,longitude:36.8219}},items:["3-bedroom furniture","Kitchen appliances","Personal belongings"],totalValue:5e5,finalCost:45e3,rating:5,feedback:"Excellent service! Very professional team.",assignedStaff:["staff_001","staff_002"],completionDate:"2024-01-15T16:30:00.000Z"}],financialInfo:{creditLimit:1e5,outstandingBalance:0,totalSpent:45e3,averageOrderValue:45e3,paymentMethods:[{id:"pm_1",type:"mpesa",details:{phoneNumber:"+254712345678"},isDefault:!0,isActive:!0}],billingAddress:"addr_1"},segmentation:{tier:"gold",loyaltyPoints:450,lifetimeValue:45e3,riskScore:"low",churnProbability:"low",lastServiceDate:"2024-01-15T00:00:00.000Z",serviceFrequency:"occasional"},communications:[{id:"comm_1",type:"email",direction:"outbound",subject:"Move Completion Confirmation",content:"Thank you for choosing MoveEase Pro. Your move has been completed successfully.",timestamp:"2024-01-15T17:00:00.000Z",staffMember:"Customer Service",status:"delivered",relatedMove:"move_1"}],documents:[],notes:[{id:"note_1",content:"Customer prefers morning moves. Very satisfied with previous service.",type:"general",createdBy:"Sales Rep",createdAt:"2024-01-16T09:00:00.000Z",isPrivate:!1}],tags:["satisfied-customer","repeat-customer","referral-source"],systemInfo:{createdAt:"2023-12-01T10:00:00.000Z",createdBy:"system",updatedAt:"2024-01-16T09:00:00.000Z",updatedBy:"system",lastLoginAt:null,source:"referral",referredBy:null,assignedSalesRep:"sales_001",assignedAccountManager:"am_001"},privacy:{marketingConsent:!0,dataProcessingConsent:!0,thirdPartySharing:!1,communicationConsent:{email:!0,sms:!0,phone:!1,whatsapp:!1}}},{id:"cust_1703123456790_def456ghi",customerNumber:"CUST1002",type:Le.CORPORATE,status:me.ACTIVE,personalInfo:{title:"Ms",firstName:"Sarah",lastName:"Wanjiku",middleName:"",dateOfBirth:"1990-07-22",gender:"female",nationality:"Kenyan",idNumber:"23456789",passportNumber:"",profilePhoto:null},contactInfo:{primaryPhone:"+254723456789",secondaryPhone:"",email:"sarah.wanjiku@techcorp.co.ke",alternateEmail:"swanjiku@gmail.com",whatsappNumber:"+254723456789",preferredContactMethod:rt.EMAIL,preferredContactTime:"anytime"},addresses:[{id:"addr_2",type:Lt.WORK,isPrimary:!0,street:"789 Moi Avenue",apartment:"5th Floor, Suite 502",city:"Nairobi",state:"Nairobi County",postalCode:"00200",country:"Kenya",coordinates:{latitude:-1.2841,longitude:36.8155},accessInstructions:"Use main elevator, security clearance required",isActive:!0}],corporateInfo:{companyName:"TechCorp Solutions Ltd",registrationNumber:"PVT-123456/2020",taxNumber:"A123456789P",industry:"Information Technology",companySize:"medium",website:"https://techcorp.co.ke",contactPerson:{name:"Sarah Wanjiku",title:"Office Manager",phone:"+254723456789",email:"sarah.wanjiku@techcorp.co.ke"}},emergencyContacts:[{id:"emerg_2",name:"David Wanjiku",relationship:"sibling",phone:"+254734567890",email:"david.wanjiku@email.com",address:"Karen, Nairobi"}],preferences:{preferredServices:[st.OFFICE_MOVE,st.PACKING,st.ASSEMBLY],specialRequirements:"IT equipment requires special handling",accessibilityNeeds:"",petInformation:"",valuableItems:"Servers, computers, office equipment",packingPreferences:{selfPack:!1,partialPack:!1,fullPack:!0},insurancePreferences:{basicCoverage:!1,fullCoverage:!0,customCoverage:!1},communicationPreferences:{smsUpdates:!0,emailUpdates:!0,whatsappUpdates:!0,callUpdates:!0}},moveHistory:[{id:"move_2",moveNumber:"MV2024002",date:"2024-02-01T00:00:00.000Z",serviceType:st.OFFICE_MOVE,status:ct.COMPLETED,origin:{address:"456 Kimathi Street, Nairobi",coordinates:{latitude:-1.2864,longitude:36.823}},destination:{address:"789 Moi Avenue, Nairobi",coordinates:{latitude:-1.2841,longitude:36.8155}},items:["Office furniture","IT equipment","Filing cabinets","Conference room setup"],totalValue:2e6,finalCost:12e4,rating:4,feedback:"Good service, but could improve on time management.",assignedStaff:["staff_003","staff_004","staff_005"],completionDate:"2024-02-02T18:00:00.000Z"}],financialInfo:{creditLimit:5e5,outstandingBalance:0,totalSpent:12e4,averageOrderValue:12e4,paymentMethods:[{id:"pm_2",type:"bank_transfer",details:{bankName:"KCB Bank",accountNumber:"****1234"},isDefault:!0,isActive:!0}],billingAddress:"addr_2"},segmentation:{tier:"platinum",loyaltyPoints:1200,lifetimeValue:12e4,riskScore:"low",churnProbability:"low",lastServiceDate:"2024-02-02T00:00:00.000Z",serviceFrequency:"regular"},communications:[{id:"comm_2",type:"email",direction:"inbound",subject:"Office Move Inquiry",content:"We need to relocate our office. Can you provide a quote?",timestamp:"2024-01-20T14:30:00.000Z",staffMember:"Sales Team",status:"read",relatedMove:null}],documents:[],notes:[{id:"note_2",content:"Corporate client with potential for regular business. Handle with priority.",type:"important",createdBy:"Account Manager",createdAt:"2024-01-21T10:00:00.000Z",isPrivate:!1}],tags:["corporate-client","high-value","regular-business"],systemInfo:{createdAt:"2024-01-20T14:30:00.000Z",createdBy:"system",updatedAt:"2024-02-03T09:00:00.000Z",updatedBy:"system",lastLoginAt:null,source:"online",referredBy:null,assignedSalesRep:"sales_002",assignedAccountManager:"am_002"},privacy:{marketingConsent:!0,dataProcessingConsent:!0,thirdPartySharing:!1,communicationConsent:{email:!0,sms:!0,phone:!0,whatsapp:!0}}},{id:"cust_1703123456791_ghi789jkl",customerNumber:"CUST1003",type:Le.INDIVIDUAL,status:me.PROSPECT,personalInfo:{title:"Dr",firstName:"Grace",lastName:"Nyong'o",middleName:"Akinyi",dateOfBirth:"1982-11-08",gender:"female",nationality:"Kenyan",idNumber:"34567890",passportNumber:"",profilePhoto:null},contactInfo:{primaryPhone:"+254734567890",secondaryPhone:"",email:"grace.nyongo@hospital.co.ke",alternateEmail:"",whatsappNumber:"+254734567890",preferredContactMethod:rt.PHONE,preferredContactTime:"afternoon"},addresses:[{id:"addr_3",type:Lt.HOME,isPrimary:!0,street:"321 Lavington Green",apartment:"",city:"Nairobi",state:"Nairobi County",postalCode:"00100",country:"Kenya",coordinates:{latitude:-1.2667,longitude:36.7833},accessInstructions:"Gated community, call on arrival",isActive:!0}],corporateInfo:{companyName:"",registrationNumber:"",taxNumber:"",industry:"",companySize:"",website:"",contactPerson:{name:"",title:"",phone:"",email:""}},emergencyContacts:[{id:"emerg_3",name:"Peter Nyong'o",relationship:"spouse",phone:"+254745678901",email:"peter.nyongo@email.com",address:"321 Lavington Green, Nairobi"}],preferences:{preferredServices:[st.RESIDENTIAL_MOVE],specialRequirements:"Medical equipment requires careful handling",accessibilityNeeds:"",petInformation:"",valuableItems:"Medical books, equipment",packingPreferences:{selfPack:!0,partialPack:!1,fullPack:!1},insurancePreferences:{basicCoverage:!0,fullCoverage:!1,customCoverage:!1},communicationPreferences:{smsUpdates:!1,emailUpdates:!0,whatsappUpdates:!1,callUpdates:!0}},moveHistory:[],financialInfo:{creditLimit:0,outstandingBalance:0,totalSpent:0,averageOrderValue:0,paymentMethods:[],billingAddress:null},segmentation:{tier:"bronze",loyaltyPoints:0,lifetimeValue:0,riskScore:"low",churnProbability:"medium",lastServiceDate:null,serviceFrequency:"one-time"},communications:[{id:"comm_3",type:"phone",direction:"inbound",subject:"Moving Inquiry",content:"Called to inquire about residential moving services. Interested in quote.",timestamp:"2024-02-10T11:15:00.000Z",staffMember:"Customer Service",status:"completed",relatedMove:null}],documents:[],notes:[{id:"note_3",content:"Potential customer. Follow up needed for quote preparation.",type:"follow_up",createdBy:"Sales Rep",createdAt:"2024-02-10T11:30:00.000Z",isPrivate:!1}],tags:["prospect","medical-professional","follow-up-needed"],systemInfo:{createdAt:"2024-02-10T11:15:00.000Z",createdBy:"system",updatedAt:"2024-02-10T11:30:00.000Z",updatedBy:"system",lastLoginAt:null,source:"direct",referredBy:null,assignedSalesRep:"sales_001",assignedAccountManager:""},privacy:{marketingConsent:!1,dataProcessingConsent:!0,thirdPartySharing:!1,communicationConsent:{email:!0,sms:!1,phone:!0,whatsapp:!1}}}],Ll=()=>{try{const s=localStorage.getItem("moveease_customers");return!s||JSON.parse(s).length===0?(localStorage.setItem("moveease_customers",JSON.stringify(_l)),console.log("Sample customer data loaded successfully"),!0):(console.log("Customer data already exists"),!1)}catch(s){return console.error("Error loading sample customers:",s),!1}};class Ml{constructor(){Ll(),this.customers=this.loadCustomers(),this.nextCustomerNumber=this.getNextCustomerNumber()}loadCustomers(){try{const t=localStorage.getItem("moveease_customers");return t?JSON.parse(t):[]}catch(t){return console.error("Error loading customers:",t),[]}}saveCustomers(){try{return localStorage.setItem("moveease_customers",JSON.stringify(this.customers)),!0}catch(t){return console.error("Error saving customers:",t),!1}}getNextCustomerNumber(){return this.customers.reduce((a,r)=>{const n=parseInt(r.customerNumber.replace("CUST",""));return n>a?n:a},1e3)+1}generateCustomerId(){return"cust_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}validateCustomer(t){var r,n,i;const a={};return Wt.required.forEach(l=>{const o=this.getNestedValue(t,l);(!o||typeof o=="string"&&!o.trim())&&(a[l]=`${l} is required`)}),(r=t.contactInfo)!=null&&r.email&&(Wt.email.test(t.contactInfo.email)||(a.email="Invalid email format")),(n=t.contactInfo)!=null&&n.primaryPhone&&(Wt.phone.test(t.contactInfo.primaryPhone)||(a.primaryPhone="Invalid phone number format")),(i=t.personalInfo)!=null&&i.idNumber&&(Wt.idNumber.test(t.personalInfo.idNumber)||(a.idNumber="Invalid ID number format")),{isValid:Object.keys(a).length===0,errors:a}}getNestedValue(t,a){return a.split(".").reduce((r,n)=>r==null?void 0:r[n],t)}async createCustomer(t){try{const a=this.validateCustomer(t);if(!a.isValid)throw new Error(`Validation failed: ${JSON.stringify(a.errors)}`);if(this.customers.find(i=>{var l,o;return i.contactInfo.email===((l=t.contactInfo)==null?void 0:l.email)||i.contactInfo.primaryPhone===((o=t.contactInfo)==null?void 0:o.primaryPhone)}))throw new Error("Customer with this email or phone already exists");const n={...ya,id:this.generateCustomerId(),customerNumber:`CUST${this.nextCustomerNumber.toString().padStart(4,"0")}`,...t,systemInfo:{...ya.systemInfo,createdAt:new Date().toISOString(),createdBy:"system",updatedAt:new Date().toISOString(),updatedBy:"system"}};return this.customers.push(n),this.nextCustomerNumber++,this.saveCustomers(),{success:!0,data:n,message:"Customer created successfully"}}catch(a){return{success:!1,error:a.message,message:"Failed to create customer"}}}getCustomerById(t){try{const a=this.customers.find(r=>r.id===t);if(!a)throw new Error("Customer not found");return{success:!0,data:a}}catch(a){return{success:!1,error:a.message}}}getCustomerByNumber(t){try{const a=this.customers.find(r=>r.customerNumber===t);if(!a)throw new Error("Customer not found");return{success:!0,data:a}}catch(a){return{success:!1,error:a.message}}}async updateCustomer(t,a){try{const r=this.customers.findIndex(l=>l.id===t);if(r===-1)throw new Error("Customer not found");const n={...this.customers[r],...a},i=this.validateCustomer(n);if(!i.isValid)throw new Error(`Validation failed: ${JSON.stringify(i.errors)}`);return this.customers[r]={...this.customers[r],...a,systemInfo:{...this.customers[r].systemInfo,updatedAt:new Date().toISOString(),updatedBy:"system"}},this.saveCustomers(),{success:!0,data:this.customers[r],message:"Customer updated successfully"}}catch(r){return{success:!1,error:r.message,message:"Failed to update customer"}}}async deleteCustomer(t){try{const a=this.customers.findIndex(r=>r.id===t);if(a===-1)throw new Error("Customer not found");return this.customers[a].status=me.INACTIVE,this.customers[a].systemInfo.updatedAt=new Date().toISOString(),this.customers[a].systemInfo.updatedBy="system",this.saveCustomers(),{success:!0,message:"Customer deleted successfully"}}catch(a){return{success:!1,error:a.message,message:"Failed to delete customer"}}}getCustomers(t={}){try{let a=[...this.customers];if(t.status&&(a=a.filter(c=>c.status===t.status)),t.type&&(a=a.filter(c=>c.type===t.type)),t.tier&&(a=a.filter(c=>c.segmentation.tier===t.tier)),t.search){const c=t.search.toLowerCase();a=a.filter(d=>d.personalInfo.firstName.toLowerCase().includes(c)||d.personalInfo.lastName.toLowerCase().includes(c)||d.contactInfo.email.toLowerCase().includes(c)||d.contactInfo.primaryPhone.includes(c)||d.customerNumber.toLowerCase().includes(c))}t.sortBy&&a.sort((c,d)=>{const u=this.getNestedValue(c,t.sortBy),b=this.getNestedValue(d,t.sortBy);return t.sortOrder==="desc"?b>u?1:-1:u>b?1:-1});const r=t.page||1,n=t.limit||10,i=(r-1)*n,l=i+n;return{success:!0,data:a.slice(i,l),pagination:{page:r,limit:n,total:a.length,totalPages:Math.ceil(a.length/n),hasNext:l<a.length,hasPrev:r>1}}}catch(a){return{success:!1,error:a.message,message:"Failed to fetch customers"}}}searchCustomers(t){return this.getCustomers({search:t})}getCustomerStats(){try{const t={total:this.customers.length,active:this.customers.filter(a=>a.status===me.ACTIVE).length,inactive:this.customers.filter(a=>a.status===me.INACTIVE).length,prospects:this.customers.filter(a=>a.status===me.PROSPECT).length,vip:this.customers.filter(a=>a.type==="vip").length,corporate:this.customers.filter(a=>a.type==="corporate").length,individual:this.customers.filter(a=>a.type==="individual").length,totalLifetimeValue:this.customers.reduce((a,r)=>a+(r.segmentation.lifetimeValue||0),0),averageLifetimeValue:0};return t.averageLifetimeValue=t.total>0?t.totalLifetimeValue/t.total:0,{success:!0,data:t}}catch(t){return{success:!1,error:t.message}}}addMoveToHistory(t,a){try{const r=this.customers.findIndex(i=>i.id===t);if(r===-1)throw new Error("Customer not found");const n={id:"move_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),...a,date:a.date||new Date().toISOString()};return this.customers[r].moveHistory.push(n),this.saveCustomers(),{success:!0,data:n,message:"Move added to customer history"}}catch(r){return{success:!1,error:r.message}}}addCommunication(t,a){try{const r=this.customers.findIndex(i=>i.id===t);if(r===-1)throw new Error("Customer not found");const n={id:"comm_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),...a,timestamp:new Date().toISOString()};return this.customers[r].communications.push(n),this.saveCustomers(),{success:!0,data:n,message:"Communication record added"}}catch(r){return{success:!1,error:r.message}}}exportCustomers(t="json"){try{const a=this.customers.map(r=>({customerNumber:r.customerNumber,name:`${r.personalInfo.firstName} ${r.personalInfo.lastName}`,email:r.contactInfo.email,phone:r.contactInfo.primaryPhone,type:r.type,status:r.status,tier:r.segmentation.tier,lifetimeValue:r.segmentation.lifetimeValue,totalMoves:r.moveHistory.length,createdAt:r.systemInfo.createdAt}));if(t==="csv"){const r=Object.keys(a[0]||{});return{success:!0,data:[r.join(","),...a.map(i=>r.map(l=>`"${i[l]||""}"`).join(","))].join(`
`),filename:`customers_export_${new Date().toISOString().split("T")[0]}.csv`}}return{success:!0,data:JSON.stringify(a,null,2),filename:`customers_export_${new Date().toISOString().split("T")[0]}.json`}}catch(a){return{success:!1,error:a.message}}}}const et=new Ml,re={SET_LOADING:"SET_LOADING",SET_ERROR:"SET_ERROR",SET_CUSTOMERS:"SET_CUSTOMERS",SET_CURRENT_CUSTOMER:"SET_CURRENT_CUSTOMER",SET_CUSTOMER_STATS:"SET_CUSTOMER_STATS",SET_FILTERS:"SET_FILTERS",SET_PAGINATION:"SET_PAGINATION",ADD_CUSTOMER:"ADD_CUSTOMER",UPDATE_CUSTOMER:"UPDATE_CUSTOMER",DELETE_CUSTOMER:"DELETE_CUSTOMER",CLEAR_ERROR:"CLEAR_ERROR"},Fl={customers:[],currentCustomer:null,customerStats:{total:0,active:0,inactive:0,prospects:0,vip:0,corporate:0,individual:0,totalLifetimeValue:0,averageLifetimeValue:0},filters:{status:"",type:"",tier:"",search:"",sortBy:"systemInfo.createdAt",sortOrder:"desc"},pagination:{page:1,limit:10,total:0,totalPages:0,hasNext:!1,hasPrev:!1},loading:!1,error:null};function Ul(s,t){var a,r;switch(t.type){case re.SET_LOADING:return{...s,loading:t.payload,error:t.payload?null:s.error};case re.SET_ERROR:return{...s,error:t.payload,loading:!1};case re.CLEAR_ERROR:return{...s,error:null};case re.SET_CUSTOMERS:return{...s,customers:t.payload,loading:!1,error:null};case re.SET_CURRENT_CUSTOMER:return{...s,currentCustomer:t.payload};case re.SET_CUSTOMER_STATS:return{...s,customerStats:t.payload};case re.SET_FILTERS:return{...s,filters:{...s.filters,...t.payload}};case re.SET_PAGINATION:return{...s,pagination:t.payload};case re.ADD_CUSTOMER:return{...s,customers:[t.payload,...s.customers],customerStats:{...s.customerStats,total:s.customerStats.total+1,[t.payload.status]:s.customerStats[t.payload.status]+1,[t.payload.type]:s.customerStats[t.payload.type]+1}};case re.UPDATE_CUSTOMER:return{...s,customers:s.customers.map(n=>n.id===t.payload.id?t.payload:n),currentCustomer:((a=s.currentCustomer)==null?void 0:a.id)===t.payload.id?t.payload:s.currentCustomer};case re.DELETE_CUSTOMER:return{...s,customers:s.customers.filter(n=>n.id!==t.payload),currentCustomer:((r=s.currentCustomer)==null?void 0:r.id)===t.payload?null:s.currentCustomer};default:return s}}const mr=T.createContext();function Bl({children:s}){const[t,a]=T.useReducer(Ul,Fl);T.useEffect(()=>{r(),n()},[]),T.useEffect(()=>{r()},[t.filters,t.pagination.page,t.pagination.limit]);const r=async()=>{a({type:re.SET_LOADING,payload:!0});try{const j=await et.getCustomers({...t.filters,page:t.pagination.page,limit:t.pagination.limit});j.success?(a({type:re.SET_CUSTOMERS,payload:j.data}),a({type:re.SET_PAGINATION,payload:j.pagination})):a({type:re.SET_ERROR,payload:j.error})}catch(j){a({type:re.SET_ERROR,payload:j.message})}},n=async()=>{try{const j=await et.getCustomerStats();j.success&&a({type:re.SET_CUSTOMER_STATS,payload:j.data})}catch(j){console.error("Error loading customer stats:",j)}},i=async j=>{a({type:re.SET_LOADING,payload:!0});try{const S=await et.createCustomer(j);return S.success?(a({type:re.ADD_CUSTOMER,payload:S.data}),await n(),S):(a({type:re.SET_ERROR,payload:S.error}),S)}catch(S){const y=S.message;return a({type:re.SET_ERROR,payload:y}),{success:!1,error:y}}finally{a({type:re.SET_LOADING,payload:!1})}},l=async(j,S)=>{a({type:re.SET_LOADING,payload:!0});try{const y=await et.updateCustomer(j,S);return y.success?(a({type:re.UPDATE_CUSTOMER,payload:y.data}),await n(),y):(a({type:re.SET_ERROR,payload:y.error}),y)}catch(y){const A=y.message;return a({type:re.SET_ERROR,payload:A}),{success:!1,error:A}}finally{a({type:re.SET_LOADING,payload:!1})}},o=async j=>{a({type:re.SET_LOADING,payload:!0});try{const S=await et.deleteCustomer(j);return S.success?(a({type:re.DELETE_CUSTOMER,payload:j}),await n(),S):(a({type:re.SET_ERROR,payload:S.error}),S)}catch(S){const y=S.message;return a({type:re.SET_ERROR,payload:y}),{success:!1,error:y}}finally{a({type:re.SET_LOADING,payload:!1})}},c=async j=>{try{const S=await et.getCustomerById(j);return S.success&&a({type:re.SET_CURRENT_CUSTOMER,payload:S.data}),S}catch(S){return{success:!1,error:S.message}}},m={...t,createCustomer:i,updateCustomer:l,deleteCustomer:o,getCustomerById:c,searchCustomers:async j=>{a({type:re.SET_FILTERS,payload:{search:j}})},setFilters:j=>{a({type:re.SET_FILTERS,payload:j})},setPagination:j=>{a({type:re.SET_PAGINATION,payload:{...t.pagination,...j}})},clearCurrentCustomer:()=>{a({type:re.SET_CURRENT_CUSTOMER,payload:null})},clearError:()=>{a({type:re.CLEAR_ERROR})},addMoveToHistory:async(j,S)=>{try{const y=await et.addMoveToHistory(j,S);return y.success&&(await c(j),await n()),y}catch(y){return{success:!1,error:y.message}}},addCommunication:async(j,S)=>{try{const y=await et.addCommunication(j,S);return y.success&&await c(j),y}catch(y){return{success:!1,error:y.message}}},exportCustomers:async(j="json")=>{try{const S=await et.exportCustomers(j);if(S.success){const y=new Blob([S.data],{type:j==="csv"?"text/csv":"application/json"}),A=URL.createObjectURL(y),N=document.createElement("a");N.href=A,N.download=S.filename,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(A)}return S}catch(S){return{success:!1,error:S.message}}},loadCustomers:r,loadCustomerStats:n};return e.jsx(mr.Provider,{value:m,children:s})}function Ks(){const s=T.useContext(mr);if(!s)throw new Error("useCustomers must be used within a CustomerProvider");return s}const Ge={BRONZE:"bronze",SILVER:"silver",GOLD:"gold",PLATINUM:"platinum",DIAMOND:"diamond"},Ct={EMAIL:"email",PHONE:"phone",SMS:"sms",WHATSAPP:"whatsapp",IN_PERSON:"in_person",WEBSITE:"website",SOCIAL_MEDIA:"social_media",REFERRAL:"referral"},Xt={INQUIRY:"inquiry",QUOTE_REQUEST:"quote_request",BOOKING:"booking",COMPLAINT:"complaint",FEEDBACK:"feedback",FOLLOW_UP:"follow_up",MARKETING:"marketing",SUPPORT:"support",BILLING:"billing",REMINDER:"reminder"},Oe={PENDING:"pending",IN_PROGRESS:"in_progress",COMPLETED:"completed",ESCALATED:"escalated",CLOSED:"closed"},es={RESIDENTIAL_MOVE:"residential_move",OFFICE_MOVE:"office_move",INTERNATIONAL_MOVE:"international_move",STORAGE:"storage",PACKING:"packing",UNPACKING:"unpacking",ASSEMBLY:"assembly",CLEANING:"cleaning",INSURANCE:"insurance",CONSULTATION:"consultation"},Be={QUOTED:"quoted",BOOKED:"booked",CONFIRMED:"confirmed",IN_PROGRESS:"in_progress",COMPLETED:"completed",CANCELLED:"cancelled",RESCHEDULED:"rescheduled"},zl={id:"",customerId:"",type:Xt.INQUIRY,channel:Ct.EMAIL,direction:"inbound",subject:"",content:"",attachments:[],contactPerson:{name:"",email:"",phone:"",role:""},assignedTo:"",assignedBy:"",assignedAt:null,status:Oe.PENDING,priority:"medium",tags:[],responseRequired:!0,responseDeadline:null,responseTime:null,firstResponseTime:null,relatedQuoteId:"",relatedMoveId:"",relatedServiceId:"",followUpRequired:!1,followUpDate:null,followUpNotes:"",satisfactionRating:null,satisfactionFeedback:"",createdAt:null,updatedAt:null,createdBy:"",updatedBy:"",readAt:null,clickedLinks:[],bounced:!1,delivered:!0},Gl={id:"",customerId:"",serviceNumber:"",category:es.RESIDENTIAL_MOVE,title:"",description:"",status:Be.QUOTED,requestDate:null,quotedDate:null,scheduledDate:null,completedDate:null,origin:{address:"",coordinates:{latitude:null,longitude:null},accessNotes:"",contactPerson:{name:"",phone:""}},destination:{address:"",coordinates:{latitude:null,longitude:null},accessNotes:"",contactPerson:{name:"",phone:""}},items:[],specialRequirements:"",estimatedVolume:0,estimatedWeight:0,estimatedDuration:0,quotedAmount:0,finalAmount:0,currency:"KSH",paymentStatus:"pending",paymentMethod:"",assignedStaff:[],teamLead:"",vehiclesUsed:[],equipmentUsed:[],packingMaterials:[],qualityScore:null,customerRating:null,customerFeedback:"",internalNotes:"",issues:[{id:"",description:"",severity:"low",reportedAt:null,resolvedAt:null,resolution:"",reportedBy:""}],insuranceCoverage:{enabled:!1,provider:"",policyNumber:"",coverageAmount:0,premium:0},claims:[],beforePhotos:[],afterPhotos:[],documents:[],createdAt:null,updatedAt:null,createdBy:"",updatedBy:""},$l={customerId:"",totalServices:0,totalSpent:0,averageOrderValue:0,lifetimeValue:0,preferredServices:[],seasonalPatterns:{},frequencyPattern:"one-time",totalCommunications:0,averageResponseTime:0,preferredChannel:Ct.EMAIL,communicationFrequency:0,averageRating:0,npsScore:null,satisfactionTrend:"stable",complaintCount:0,complimentCount:0,loyaltyPoints:0,loyaltyTier:Ge.BRONZE,referralCount:0,referralValue:0,riskScore:"low",churnProbability:0,paymentRisk:"low",lastServiceDate:null,daysSinceLastService:0,engagementScore:0,nextServicePrediction:{probability:0,estimatedDate:null,estimatedValue:0,recommendedServices:[]},segment:"new",segmentScore:0,creditLimit:0,outstandingBalance:0,paymentHistory:{onTimePayments:0,latePayments:0,averagePaymentDelay:0},lastCalculated:null,calculatedBy:"system"},Hl={customerId:"",insights:[{id:"",type:"behavioral",category:"service_preference",title:"",description:"",confidence:0,impact:"medium",actionable:!0,recommendations:[],createdAt:null}],recommendations:[{id:"",type:"service",title:"",description:"",priority:"medium",estimatedImpact:"",estimatedRevenue:0,effort:"low",deadline:null,status:"pending"}],alerts:[{id:"",type:"churn_risk",severity:"medium",message:"",triggeredAt:null,acknowledged:!1,acknowledgedBy:"",acknowledgedAt:null}],opportunities:[{id:"",type:"upsell",title:"",description:"",estimatedValue:0,probability:0,timeframe:"30_days",status:"identified"}],lastUpdated:null,updatedBy:"system"},ql={customerId:"",currentStage:"awareness",stageHistory:[{stage:"",enteredAt:null,exitedAt:null,duration:0,touchpoints:[]}],touchpoints:[{id:"",type:"communication",channel:Ct.EMAIL,description:"",timestamp:null,outcome:"",notes:""}],milestones:[{id:"",name:"first_service",description:"Customer completed their first service",achievedAt:null,value:0}],totalTouchpoints:0,averageTimeBetweenTouchpoints:0,conversionRate:0,lastUpdated:null};class Vl{constructor(){this.communications=this.loadCommunications(),this.serviceHistory=this.loadServiceHistory(),this.customerAnalytics=this.loadCustomerAnalytics(),this.customerInsights=this.loadCustomerInsights(),this.customerJourneys=this.loadCustomerJourneys(),this.initializeSampleData()}loadCommunications(){try{const t=localStorage.getItem("moveease_communications");return t?JSON.parse(t):[]}catch(t){return console.error("Error loading communications:",t),[]}}loadServiceHistory(){try{const t=localStorage.getItem("moveease_service_history");return t?JSON.parse(t):[]}catch(t){return console.error("Error loading service history:",t),[]}}loadCustomerAnalytics(){try{const t=localStorage.getItem("moveease_customer_analytics");return t?JSON.parse(t):[]}catch(t){return console.error("Error loading customer analytics:",t),[]}}loadCustomerInsights(){try{const t=localStorage.getItem("moveease_customer_insights");return t?JSON.parse(t):[]}catch(t){return console.error("Error loading customer insights:",t),[]}}loadCustomerJourneys(){try{const t=localStorage.getItem("moveease_customer_journeys");return t?JSON.parse(t):[]}catch(t){return console.error("Error loading customer journeys:",t),[]}}saveCommunications(){try{return localStorage.setItem("moveease_communications",JSON.stringify(this.communications)),!0}catch(t){return console.error("Error saving communications:",t),!1}}saveServiceHistory(){try{return localStorage.setItem("moveease_service_history",JSON.stringify(this.serviceHistory)),!0}catch(t){return console.error("Error saving service history:",t),!1}}saveCustomerAnalytics(){try{return localStorage.setItem("moveease_customer_analytics",JSON.stringify(this.customerAnalytics)),!0}catch(t){return console.error("Error saving customer analytics:",t),!1}}saveCustomerInsights(){try{return localStorage.setItem("moveease_customer_insights",JSON.stringify(this.customerInsights)),!0}catch(t){return console.error("Error saving customer insights:",t),!1}}saveCustomerJourneys(){try{return localStorage.setItem("moveease_customer_journeys",JSON.stringify(this.customerJourneys)),!0}catch(t){return console.error("Error saving customer journeys:",t),!1}}generateId(t="adv"){return`${t}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}async createCommunication(t){try{const a={...zl,id:this.generateId("comm"),...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"system"};return this.communications.push(a),this.saveCommunications(),await this.updateCustomerJourney(a.customerId,{type:"communication",channel:a.channel,description:a.subject,timestamp:a.createdAt,outcome:"neutral"}),{success:!0,data:a,message:"Communication created successfully"}}catch(a){return{success:!1,error:a.message,message:"Failed to create communication"}}}getCustomerCommunications(t,a={}){try{let r=this.communications.filter(n=>n.customerId===t);return a.type&&(r=r.filter(n=>n.type===a.type)),a.status&&(r=r.filter(n=>n.status===a.status)),a.channel&&(r=r.filter(n=>n.channel===a.channel)),r.sort((n,i)=>new Date(i.createdAt)-new Date(n.createdAt)),{success:!0,data:r}}catch(r){return{success:!1,error:r.message}}}async updateCommunicationStatus(t,a,r=""){try{const n=this.communications.findIndex(i=>i.id===t);if(n===-1)throw new Error("Communication not found");return this.communications[n]={...this.communications[n],status:a,updatedAt:new Date().toISOString(),updatedBy:"system"},r&&(this.communications[n].content+=`

Update: ${r}`),this.saveCommunications(),{success:!0,message:"Communication status updated successfully"}}catch(n){return{success:!1,error:n.message}}}async createServiceRecord(t){try{const a={...Gl,id:this.generateId("service"),serviceNumber:this.generateServiceNumber(),...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"system"};return this.serviceHistory.push(a),this.saveServiceHistory(),await this.updateCustomerAnalytics(a.customerId),await this.updateCustomerJourney(a.customerId,{type:"service",channel:"in_person",description:`${a.category} - ${a.title}`,timestamp:a.createdAt,outcome:"positive"}),{success:!0,data:a,message:"Service record created successfully"}}catch(a){return{success:!1,error:a.message,message:"Failed to create service record"}}}generateServiceNumber(){const t=new Date().getFullYear(),a=this.serviceHistory.filter(r=>new Date(r.createdAt).getFullYear()===t).length+1;return`SRV${t}${a.toString().padStart(4,"0")}`}getCustomerServiceHistory(t){try{return{success:!0,data:this.serviceHistory.filter(r=>r.customerId===t).sort((r,n)=>new Date(n.createdAt)-new Date(r.createdAt))}}catch(a){return{success:!1,error:a.message}}}async calculateCustomerAnalytics(t){try{const a=this.serviceHistory.filter(S=>S.customerId===t),r=this.communications.filter(S=>S.customerId===t),n=a.length,i=a.reduce((S,y)=>S+(y.finalAmount||y.quotedAmount||0),0),l=n>0?i/n:0,o={};a.forEach(S=>{o[S.category]=(o[S.category]||0)+1});const c=Object.entries(o).sort(([,S],[,y])=>y-S).slice(0,3).map(([S])=>S),d=r.length,u=r.filter(S=>S.responseTime).map(S=>S.responseTime),b=u.length>0?u.reduce((S,y)=>S+y,0)/u.length:0,C=a.filter(S=>S.customerRating).map(S=>S.customerRating),w=C.length>0?C.reduce((S,y)=>S+y,0)/C.length:0,g=Math.floor(i/1e3),p=this.calculateLoyaltyTier(g),x=a.length>0?Math.floor((new Date-new Date(a[0].completedDate||a[0].createdAt))/(1e3*60*60*24)):0,m=this.calculateRiskScore({daysSinceLastService:x,averageRating:w,totalServices:n,communicationFrequency:d});return{success:!0,data:{...$l,customerId:t,totalServices:n,totalSpent:i,averageOrderValue:l,lifetimeValue:i,preferredServices:c,totalCommunications:d,averageResponseTime:b,averageRating:w,loyaltyPoints:g,loyaltyTier:p,daysSinceLastService:x,riskScore:m,lastCalculated:new Date().toISOString()}}}catch(a){return{success:!1,error:a.message}}}calculateLoyaltyTier(t){return t>=2500?Ge.PLATINUM:t>=1e3?Ge.GOLD:t>=500?Ge.SILVER:t>=100?Ge.BRONZE:"starter"}calculateRiskScore({daysSinceLastService:t,averageRating:a,totalServices:r,communicationFrequency:n}){let i=0;return t>365?i+=3:t>180?i+=2:t>90&&(i+=1),a<3?i+=3:a<4&&(i+=1),r>0&&r<2&&(i+=1),n>10&&(i+=1),i>=4?"high":i>=2?"medium":"low"}async updateCustomerAnalytics(t){try{const a=await this.calculateCustomerAnalytics(t);if(!a.success)throw new Error(a.error);const r=this.customerAnalytics.findIndex(n=>n.customerId===t);return r>=0?this.customerAnalytics[r]=a.data:this.customerAnalytics.push(a.data),this.saveCustomerAnalytics(),await this.generateCustomerInsights(t,a.data),{success:!0,data:a.data}}catch(a){return{success:!1,error:a.message}}}async generateCustomerInsights(t,a){try{const r=[],n=[],i=[],l=[];if(a.lifetimeValue>1e5&&r.push({id:this.generateId("insight"),type:"financial",category:"high_value",title:"High-Value Customer",description:`This customer has spent KSh ${a.lifetimeValue.toLocaleString()} and should receive VIP treatment.`,confidence:.9,impact:"high",actionable:!0,recommendations:["Assign dedicated account manager","Offer premium services","Priority scheduling"],createdAt:new Date().toISOString()}),a.riskScore==="high"&&(r.push({id:this.generateId("insight"),type:"risk",category:"churn_risk",title:"Churn Risk Detected",description:"Customer shows signs of potential churn based on service patterns and engagement.",confidence:.7,impact:"high",actionable:!0,recommendations:["Schedule follow-up call","Offer special discount","Request feedback"],createdAt:new Date().toISOString()}),i.push({id:this.generateId("alert"),type:"churn_risk",severity:"high",message:`Customer ${t} is at high risk of churning`,triggeredAt:new Date().toISOString(),acknowledged:!1})),a.averageOrderValue>0&&a.totalServices>=2){const d=a.averageOrderValue*1.5;l.push({id:this.generateId("opportunity"),type:"upsell",title:"Premium Service Upsell",description:"Customer has history of multiple services and may be interested in premium offerings",estimatedValue:d,probability:.6,timeframe:"90_days",status:"identified"})}a.loyaltyPoints>0&&a.loyaltyTier!==Ge.PLATINUM&&n.push({id:this.generateId("recommendation"),type:"retention",title:"Loyalty Program Engagement",description:`Customer has ${a.loyaltyPoints} loyalty points. Promote tier benefits and next tier requirements.`,priority:"medium",estimatedImpact:"Increased customer retention and repeat business",effort:"low",status:"pending"});const o={...Hl,customerId:t,insights:r,recommendations:n,alerts:i,opportunities:l,lastUpdated:new Date().toISOString()},c=this.customerInsights.findIndex(d=>d.customerId===t);return c>=0?this.customerInsights[c]=o:this.customerInsights.push(o),this.saveCustomerInsights(),{success:!0,data:o}}catch(r){return{success:!1,error:r.message}}}async updateCustomerJourney(t,a){try{let r=this.customerJourneys.findIndex(n=>n.customerId===t);if(r===-1){const n={...ql,customerId:t,currentStage:"awareness",touchpoints:[a],totalTouchpoints:1,lastUpdated:new Date().toISOString()};this.customerJourneys.push(n)}else this.customerJourneys[r].touchpoints.push(a),this.customerJourneys[r].totalTouchpoints+=1,this.customerJourneys[r].lastUpdated=new Date().toISOString();return this.saveCustomerJourneys(),{success:!0,message:"Customer journey updated successfully"}}catch(r){return{success:!1,error:r.message}}}getCustomerInsights(t){try{return{success:!0,data:this.customerInsights.find(r=>r.customerId===t)||null}}catch(a){return{success:!1,error:a.message}}}getCustomerAnalytics(t){try{return{success:!0,data:this.customerAnalytics.find(r=>r.customerId===t)||null}}catch(a){return{success:!1,error:a.message}}}getCustomerJourney(t){try{return{success:!0,data:this.customerJourneys.find(r=>r.customerId===t)||null}}catch(a){return{success:!1,error:a.message}}}getAllCustomerInsights(){try{return{success:!0,data:{summary:{totalCustomers:this.customerInsights.length,highRiskCustomers:this.customerInsights.filter(a=>a.alerts.some(r=>r.type==="churn_risk"&&r.severity==="high")).length,totalOpportunities:this.customerInsights.reduce((a,r)=>a+r.opportunities.length,0),totalOpportunityValue:this.customerInsights.reduce((a,r)=>a+r.opportunities.reduce((n,i)=>n+i.estimatedValue,0),0),pendingRecommendations:this.customerInsights.reduce((a,r)=>a+r.recommendations.filter(n=>n.status==="pending").length,0)},insights:this.customerInsights}}}catch(t){return{success:!1,error:t.message}}}exportCustomerData(t,a="json"){try{const r=this.customerAnalytics.find(d=>d.customerId===t),n=this.customerInsights.find(d=>d.customerId===t),i=this.customerJourneys.find(d=>d.customerId===t),l=this.communications.filter(d=>d.customerId===t),o=this.serviceHistory.filter(d=>d.customerId===t),c={customerId:t,analytics:r,insights:n,journey:i,communications:l,services:o,exportedAt:new Date().toISOString()};return a==="csv"?{success:!0,data:[["Metric","Value"],["Total Services",(r==null?void 0:r.totalServices)||0],["Total Spent",(r==null?void 0:r.totalSpent)||0],["Average Order Value",(r==null?void 0:r.averageOrderValue)||0],["Loyalty Points",(r==null?void 0:r.loyaltyPoints)||0],["Loyalty Tier",(r==null?void 0:r.loyaltyTier)||"N/A"],["Risk Score",(r==null?void 0:r.riskScore)||"N/A"],["Average Rating",(r==null?void 0:r.averageRating)||0],["Total Communications",(r==null?void 0:r.totalCommunications)||0]].map(b=>b.join(",")).join(`
`),filename:`customer_${t}_analytics_${new Date().toISOString().split("T")[0]}.csv`}:{success:!0,data:JSON.stringify(c,null,2),filename:`customer_${t}_complete_${new Date().toISOString().split("T")[0]}.json`}}catch(r){return{success:!1,error:r.message}}}initializeSampleData(){this.communications.length===0&&this.serviceHistory.length===0&&this.createSampleData()}createSampleData(){const t=["cust_001","cust_002","cust_003"],a=[{id:this.generateId("comm"),customerId:"cust_001",type:"inquiry",channel:"email",direction:"inbound",subject:"Moving Quote Request",content:"Hi, I need a quote for moving from Nairobi to Mombasa. 3-bedroom house.",contactPerson:{name:"John Doe",email:"john.doe@email.com",phone:"+254712345678",role:"Primary Contact"},status:"completed",priority:"medium",responseRequired:!0,responseTime:120,createdAt:new Date(Date.now()-6048e5).toISOString(),updatedAt:new Date(Date.now()-6048e5).toISOString(),createdBy:"system"},{id:this.generateId("comm"),customerId:"cust_001",type:"follow_up",channel:"phone",direction:"outbound",subject:"Quote Follow-up Call",content:"Called to discuss the moving quote and answer questions about our services.",contactPerson:{name:"John Doe",email:"john.doe@email.com",phone:"+254712345678",role:"Primary Contact"},status:"completed",priority:"medium",responseRequired:!1,createdAt:new Date(Date.now()-432e6).toISOString(),updatedAt:new Date(Date.now()-432e6).toISOString(),createdBy:"system"}],r=[{id:this.generateId("service"),customerId:"cust_001",serviceNumber:"SRV20240001",category:"residential_move",title:"Nairobi to Mombasa Residential Move",description:"Complete household move including packing, transportation, and unpacking services.",status:"completed",requestDate:new Date(Date.now()-30*24*60*60*1e3).toISOString(),quotedDate:new Date(Date.now()-28*24*60*60*1e3).toISOString(),scheduledDate:new Date(Date.now()-25*24*60*60*1e3).toISOString(),completedDate:new Date(Date.now()-25*24*60*60*1e3).toISOString(),origin:{address:"Westlands, Nairobi",coordinates:{latitude:-1.2676,longitude:36.8108},contactPerson:{name:"John Doe",phone:"+254712345678"}},destination:{address:"Nyali, Mombasa",coordinates:{latitude:-4.0435,longitude:39.7348},contactPerson:{name:"John Doe",phone:"+254712345678"}},quotedAmount:85e3,finalAmount:85e3,currency:"KSH",paymentStatus:"paid",paymentMethod:"mpesa",estimatedDuration:8,customerRating:5,customerFeedback:"Excellent service! Very professional team.",createdAt:new Date(Date.now()-30*24*60*60*1e3).toISOString(),updatedAt:new Date(Date.now()-25*24*60*60*1e3).toISOString(),createdBy:"system"},{id:this.generateId("service"),customerId:"cust_002",serviceNumber:"SRV20240002",category:"office_move",title:"Office Relocation - CBD to Westlands",description:"Corporate office move including IT equipment and furniture.",status:"completed",requestDate:new Date(Date.now()-45*24*60*60*1e3).toISOString(),quotedDate:new Date(Date.now()-43*24*60*60*1e3).toISOString(),scheduledDate:new Date(Date.now()-40*24*60*60*1e3).toISOString(),completedDate:new Date(Date.now()-40*24*60*60*1e3).toISOString(),origin:{address:"CBD, Nairobi",coordinates:{latitude:-1.2921,longitude:36.8219},contactPerson:{name:"Jane Smith",phone:"+254723456789"}},destination:{address:"Westlands, Nairobi",coordinates:{latitude:-1.2676,longitude:36.8108},contactPerson:{name:"Jane Smith",phone:"+254723456789"}},quotedAmount:12e4,finalAmount:115e3,currency:"KSH",paymentStatus:"paid",paymentMethod:"bank_transfer",estimatedDuration:12,customerRating:4,customerFeedback:"Good service, minor delays but overall satisfied.",createdAt:new Date(Date.now()-45*24*60*60*1e3).toISOString(),updatedAt:new Date(Date.now()-40*24*60*60*1e3).toISOString(),createdBy:"system"}];this.communications=a,this.serviceHistory=r,this.saveCommunications(),this.saveServiceHistory(),t.forEach(n=>{this.updateCustomerAnalytics(n)})}}const Re=new Vl,Q={SET_LOADING:"SET_LOADING",SET_ERROR:"SET_ERROR",SET_COMMUNICATIONS:"SET_COMMUNICATIONS",SET_SERVICE_HISTORY:"SET_SERVICE_HISTORY",SET_CUSTOMER_ANALYTICS:"SET_CUSTOMER_ANALYTICS",SET_CUSTOMER_INSIGHTS:"SET_CUSTOMER_INSIGHTS",SET_CUSTOMER_JOURNEY:"SET_CUSTOMER_JOURNEY",SET_CURRENT_CUSTOMER:"SET_CURRENT_CUSTOMER",ADD_COMMUNICATION:"ADD_COMMUNICATION",UPDATE_COMMUNICATION:"UPDATE_COMMUNICATION",ADD_SERVICE:"ADD_SERVICE",UPDATE_SERVICE:"UPDATE_SERVICE",UPDATE_ANALYTICS:"UPDATE_ANALYTICS",UPDATE_INSIGHTS:"UPDATE_INSIGHTS",CLEAR_ERROR:"CLEAR_ERROR"},Kl={currentCustomerId:null,communications:[],serviceHistory:[],customerAnalytics:null,customerInsights:null,customerJourney:null,allInsightsSummary:{totalCustomers:0,highRiskCustomers:0,totalOpportunities:0,totalOpportunityValue:0,pendingRecommendations:0},loading:!1,error:null};function Wl(s,t){switch(t.type){case Q.SET_LOADING:return{...s,loading:t.payload,error:t.payload?null:s.error};case Q.SET_ERROR:return{...s,error:t.payload,loading:!1};case Q.CLEAR_ERROR:return{...s,error:null};case Q.SET_CURRENT_CUSTOMER:return{...s,currentCustomerId:t.payload};case Q.SET_COMMUNICATIONS:return{...s,communications:t.payload,loading:!1,error:null};case Q.SET_SERVICE_HISTORY:return{...s,serviceHistory:t.payload,loading:!1,error:null};case Q.SET_CUSTOMER_ANALYTICS:return{...s,customerAnalytics:t.payload};case Q.SET_CUSTOMER_INSIGHTS:return{...s,customerInsights:t.payload};case Q.SET_CUSTOMER_JOURNEY:return{...s,customerJourney:t.payload};case Q.ADD_COMMUNICATION:return{...s,communications:[t.payload,...s.communications]};case Q.UPDATE_COMMUNICATION:return{...s,communications:s.communications.map(a=>a.id===t.payload.id?t.payload:a)};case Q.ADD_SERVICE:return{...s,serviceHistory:[t.payload,...s.serviceHistory]};case Q.UPDATE_SERVICE:return{...s,serviceHistory:s.serviceHistory.map(a=>a.id===t.payload.id?t.payload:a)};case Q.UPDATE_ANALYTICS:return{...s,customerAnalytics:t.payload};case Q.UPDATE_INSIGHTS:return{...s,customerInsights:t.payload};default:return s}}const ur=T.createContext();function Yl({children:s}){const[t,a]=T.useReducer(Wl,Kl),r=async w=>{a({type:Q.SET_CURRENT_CUSTOMER,payload:w}),w?await n(w):(a({type:Q.SET_COMMUNICATIONS,payload:[]}),a({type:Q.SET_SERVICE_HISTORY,payload:[]}),a({type:Q.SET_CUSTOMER_ANALYTICS,payload:null}),a({type:Q.SET_CUSTOMER_INSIGHTS,payload:null}),a({type:Q.SET_CUSTOMER_JOURNEY,payload:null}))},n=async w=>{a({type:Q.SET_LOADING,payload:!0});try{const g=await Re.getCustomerCommunications(w);g.success&&a({type:Q.SET_COMMUNICATIONS,payload:g.data});const p=await Re.getCustomerServiceHistory(w);p.success&&a({type:Q.SET_SERVICE_HISTORY,payload:p.data});const x=await Re.getCustomerAnalytics(w);x.success&&a({type:Q.SET_CUSTOMER_ANALYTICS,payload:x.data});const m=await Re.getCustomerInsights(w);m.success&&a({type:Q.SET_CUSTOMER_INSIGHTS,payload:m.data});const j=await Re.getCustomerJourney(w);j.success&&a({type:Q.SET_CUSTOMER_JOURNEY,payload:j.data})}catch(g){a({type:Q.SET_ERROR,payload:g.message})}finally{a({type:Q.SET_LOADING,payload:!1})}},i=async w=>{a({type:Q.SET_LOADING,payload:!0});try{const g=await Re.createCommunication(w);return g.success?(a({type:Q.ADD_COMMUNICATION,payload:g.data}),t.currentCustomerId&&await c(t.currentCustomerId),g):(a({type:Q.SET_ERROR,payload:g.error}),g)}catch(g){const p=g.message;return a({type:Q.SET_ERROR,payload:p}),{success:!1,error:p}}finally{a({type:Q.SET_LOADING,payload:!1})}},l=async(w,g,p="")=>{try{const x=await Re.updateCommunicationStatus(w,g,p);if(x.success){if(t.currentCustomerId){const m=await Re.getCustomerCommunications(t.currentCustomerId);m.success&&a({type:Q.SET_COMMUNICATIONS,payload:m.data})}return x}else return a({type:Q.SET_ERROR,payload:x.error}),x}catch(x){return{success:!1,error:x.message}}},o=async w=>{a({type:Q.SET_LOADING,payload:!0});try{const g=await Re.createServiceRecord(w);return g.success?(a({type:Q.ADD_SERVICE,payload:g.data}),t.currentCustomerId&&await c(t.currentCustomerId),g):(a({type:Q.SET_ERROR,payload:g.error}),g)}catch(g){const p=g.message;return a({type:Q.SET_ERROR,payload:p}),{success:!1,error:p}}finally{a({type:Q.SET_LOADING,payload:!1})}},c=async w=>{try{const g=await Re.updateCustomerAnalytics(w);if(g.success){a({type:Q.UPDATE_ANALYTICS,payload:g.data});const p=await Re.getCustomerInsights(w);p.success&&a({type:Q.UPDATE_INSIGHTS,payload:p.data})}return g}catch(g){return{success:!1,error:g.message}}},C={...t,setCurrentCustomer:r,loadCustomerData:n,createCommunication:i,updateCommunicationStatus:l,createServiceRecord:o,refreshCustomerAnalytics:c,getAllInsightsSummary:async()=>{try{return await Re.getAllCustomerInsights()}catch(w){return{success:!1,error:w.message}}},exportCustomerData:async(w,g="json")=>{try{const p=await Re.exportCustomerData(w,g);if(p.success){const x=new Blob([p.data],{type:g==="csv"?"text/csv":"application/json"}),m=URL.createObjectURL(x),j=document.createElement("a");j.href=m,j.download=p.filename,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(m)}return p}catch(p){return{success:!1,error:p.message}}},clearError:()=>{a({type:Q.CLEAR_ERROR})}};return e.jsx(ur.Provider,{value:C,children:s})}function hs(){const s=T.useContext(ur);if(!s)throw new Error("useCustomerAdvanced must be used within a CustomerAdvancedProvider");return s}const Jl=({onCustomerSelect:s,onCreateCustomer:t})=>{const{customers:a,loading:r,error:n,filters:i,pagination:l,customerStats:o,setFilters:c,setPagination:d,searchCustomers:u,deleteCustomer:b,exportCustomers:C,clearError:w}=Ks(),[g,p]=T.useState([]),[x,m]=T.useState(!1),j=k=>{const U=k.target.value;c({search:U})},S=(k,U)=>{c({[k]:U})},y=k=>{d({page:k})},A=k=>{s&&s(k)},N=async k=>{if(confirm("Are you sure you want to delete this customer?")){const U=await b(k);U.success?alert("Customer deleted successfully"):alert(`Error: ${U.error}`)}},f=k=>{k.target.checked?p(a.map(U=>U.id)):p([])},v=(k,U)=>{p(U?[...g,k]:g.filter(O=>O!==k))},h=async k=>{const U=await C(k);U.success||alert(`Export failed: ${U.error}`)},I=k=>`${k.personalInfo.firstName} ${k.personalInfo.lastName}`,R=k=>k.charAt(0).toUpperCase()+k.slice(1),L=k=>{switch(k){case me.ACTIVE:return"text-green-600 bg-green-100";case me.INACTIVE:return"text-gray-600 bg-gray-100";case me.SUSPENDED:return"text-red-600 bg-red-100";case me.PROSPECT:return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},H=k=>{switch(k){case"platinum":return"text-purple-600 bg-purple-100";case"gold":return"text-yellow-600 bg-yellow-100";case"silver":return"text-gray-600 bg-gray-100";case"bronze":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}};return n?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{name:"AlertCircle",size:20,className:"text-red-600 mr-2"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-800 font-medium",children:"Error Loading Customers"}),e.jsx("p",{className:"text-red-600 text-sm mt-1",children:n})]}),e.jsx(P,{variant:"outline",size:"sm",onClick:w,className:"ml-auto",children:"Retry"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Customer Management"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(P,{variant:"outline",iconName:"Download",onClick:()=>h("csv"),children:"Export CSV"}),e.jsx(P,{variant:"outline",iconName:"Download",onClick:()=>h("json"),children:"Export JSON"}),e.jsx(P,{iconName:"Plus",onClick:t,children:"Add Customer"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:o.total}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:o.active}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:o.inactive}),e.jsx("div",{className:"text-sm text-gray-600",children:"Inactive"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:o.prospects}),e.jsx("div",{className:"text-sm text-gray-600",children:"Prospects"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:o.vip}),e.jsx("div",{className:"text-sm text-gray-600",children:"VIP"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:o.corporate}),e.jsx("div",{className:"text-sm text-gray-600",children:"Corporate"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:o.individual}),e.jsx("div",{className:"text-sm text-gray-600",children:"Individual"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["KSh ",o.averageLifetimeValue.toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Avg LTV"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsx(D,{placeholder:"Search customers...",value:i.search,onChange:j,iconName:"Search"})}),e.jsx(P,{variant:"outline",iconName:"Filter",onClick:()=>m(!x),children:"Filters"})]}),x&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 pt-4 border-t border-gray-200",children:[e.jsx(B,{label:"Status",options:[{value:"",label:"All Statuses"},{value:me.ACTIVE,label:"Active"},{value:me.INACTIVE,label:"Inactive"},{value:me.SUSPENDED,label:"Suspended"},{value:me.PROSPECT,label:"Prospect"}],value:i.status,onChange:k=>S("status",k)}),e.jsx(B,{label:"Type",options:[{value:"",label:"All Types"},{value:Le.INDIVIDUAL,label:"Individual"},{value:Le.CORPORATE,label:"Corporate"},{value:Le.VIP,label:"VIP"}],value:i.type,onChange:k=>S("type",k)}),e.jsx(B,{label:"Tier",options:[{value:"",label:"All Tiers"},{value:"bronze",label:"Bronze"},{value:"silver",label:"Silver"},{value:"gold",label:"Gold"},{value:"platinum",label:"Platinum"}],value:i.tier,onChange:k=>S("tier",k)}),e.jsx(B,{label:"Sort By",options:[{value:"systemInfo.createdAt",label:"Date Created"},{value:"personalInfo.firstName",label:"First Name"},{value:"personalInfo.lastName",label:"Last Name"},{value:"segmentation.lifetimeValue",label:"Lifetime Value"},{value:"moveHistory.length",label:"Total Moves"}],value:i.sortBy,onChange:k=>S("sortBy",k)})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",checked:g.length===a.length&&a.length>0,onChange:f,className:"rounded border-gray-300 text-primary focus:ring-primary"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tier"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Moves"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"LTV"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(E,{name:"Loader2",size:24,className:"animate-spin text-gray-400 mr-2"}),e.jsx("span",{className:"text-gray-600",children:"Loading customers..."})]})})}):a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx(E,{name:"Users",size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No customers found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding your first customer."}),e.jsx(P,{className:"mt-4",iconName:"Plus",onClick:t,children:"Add Customer"})]})})}):a.map(k=>e.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>A(k),children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:g.includes(k.id),onChange:U=>v(k.id,U.target.checked),onClick:U=>U.stopPropagation(),className:"rounded border-gray-300 text-primary focus:ring-primary"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[k.personalInfo.firstName.charAt(0),k.personalInfo.lastName.charAt(0)]})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:I(k)}),e.jsx("div",{className:"text-sm text-gray-500",children:k.customerNumber})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:k.contactInfo.email}),e.jsx("div",{className:"text-sm text-gray-500",children:k.contactInfo.primaryPhone})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-900",children:R(k.type)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${L(k.status)}`,children:k.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${H(k.segmentation.tier)}`,children:k.segmentation.tier})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k.moveHistory.length}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["KSh ",k.segmentation.lifetimeValue.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(P,{variant:"ghost",size:"sm",iconName:"Eye",onClick:U=>{U.stopPropagation(),A(k)}}),e.jsx(P,{variant:"ghost",size:"sm",iconName:"Trash2",onClick:U=>{U.stopPropagation(),N(k.id)},className:"text-red-600 hover:text-red-700"})]})})]},k.id))})]})}),l.totalPages>1&&e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx(P,{variant:"outline",onClick:()=>y(l.page-1),disabled:!l.hasPrev,children:"Previous"}),e.jsx(P,{variant:"outline",onClick:()=>y(l.page+1),disabled:!l.hasNext,children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:(l.page-1)*l.limit+1})," ","to"," ",e.jsx("span",{className:"font-medium",children:Math.min(l.page*l.limit,l.total)})," ","of"," ",e.jsx("span",{className:"font-medium",children:l.total})," ","results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>y(l.page-1),disabled:!l.hasPrev,className:"rounded-l-md",children:"Previous"}),Array.from({length:l.totalPages},(k,U)=>U+1).filter(k=>k===1||k===l.totalPages||Math.abs(k-l.page)<=2).map((k,U,O)=>e.jsxs(je.Fragment,{children:[U>0&&O[U-1]!==k-1&&e.jsx("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:"..."}),e.jsx(P,{variant:k===l.page?"default":"outline",size:"sm",onClick:()=>y(k),className:"border-l-0",children:k})]},k)),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>y(l.page+1),disabled:!l.hasNext,className:"rounded-r-md border-l-0",children:"Next"})]})})]})]})]})]})},fa=({customer:s,onSave:t,onCancel:a,mode:r="create"})=>{const{createCustomer:n,updateCustomer:i,loading:l}=Ks(),[o,c]=T.useState({type:Le.INDIVIDUAL,status:me.ACTIVE,personalInfo:{title:"",firstName:"",lastName:"",middleName:"",dateOfBirth:"",gender:"",nationality:"Kenyan",idNumber:"",passportNumber:"",profilePhoto:null},contactInfo:{primaryPhone:"",secondaryPhone:"",email:"",alternateEmail:"",whatsappNumber:"",preferredContactMethod:rt.EMAIL,preferredContactTime:"anytime"},addresses:[{type:Lt.HOME,isPrimary:!0,street:"",apartment:"",city:"",state:"",postalCode:"",country:"Kenya",accessInstructions:"",isActive:!0}],corporateInfo:{companyName:"",registrationNumber:"",taxNumber:"",industry:"",companySize:"",website:"",contactPerson:{name:"",title:"",phone:"",email:""}},emergencyContacts:[{name:"",relationship:"",phone:"",email:"",address:""}],preferences:{preferredServices:[],specialRequirements:"",accessibilityNeeds:"",petInformation:"",valuableItems:"",packingPreferences:{selfPack:!1,partialPack:!1,fullPack:!1},insurancePreferences:{basicCoverage:!0,fullCoverage:!1,customCoverage:!1},communicationPreferences:{smsUpdates:!0,emailUpdates:!0,whatsappUpdates:!1,callUpdates:!1}},privacy:{marketingConsent:!1,dataProcessingConsent:!0,thirdPartySharing:!1,communicationConsent:{email:!0,sms:!0,phone:!1,whatsapp:!1}}}),[d,u]=T.useState({}),[b,C]=T.useState("basic");T.useEffect(()=>{s&&r==="edit"&&c(s)},[s,r]);const w=(y,A,N)=>{c(v=>({...v,[y]:{...v[y],[A]:N}}));const f=`${y}.${A}`;d[f]&&u(v=>({...v,[f]:void 0}))},g=()=>{const y={};return o.personalInfo.firstName.trim()||(y["personalInfo.firstName"]="First name is required"),o.personalInfo.lastName.trim()||(y["personalInfo.lastName"]="Last name is required"),o.contactInfo.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.contactInfo.email)||(y["contactInfo.email"]="Invalid email format"):y["contactInfo.email"]="Email is required",o.contactInfo.primaryPhone.trim()||(y["contactInfo.primaryPhone"]="Primary phone is required"),o.type===Le.CORPORATE&&!o.corporateInfo.companyName.trim()&&(y["corporateInfo.companyName"]="Company name is required for corporate customers"),u(y),Object.keys(y).length===0},p=async y=>{if(y.preventDefault(),!!g())try{let A;r==="create"?A=await n(o):A=await i(s.id,o),A.success?t(A.data):alert(`Error: ${A.error}`)}catch(A){alert(`Error: ${A.message}`)}},x=[{id:"basic",label:"Basic Info",icon:"User"},{id:"contact",label:"Contact",icon:"Phone"},{id:"address",label:"Addresses",icon:"MapPin"},{id:"corporate",label:"Corporate",icon:"Building"},{id:"emergency",label:"Emergency",icon:"AlertTriangle"},{id:"preferences",label:"Preferences",icon:"Settings"},{id:"privacy",label:"Privacy",icon:"Shield"}],m=[{value:"",label:"Select Title"},{value:"Mr",label:"Mr"},{value:"Mrs",label:"Mrs"},{value:"Ms",label:"Ms"},{value:"Dr",label:"Dr"},{value:"Prof",label:"Prof"}],j=[{value:"",label:"Select Gender"},{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Other"}],S=[{value:"anytime",label:"Anytime"},{value:"morning",label:"Morning (8AM - 12PM)"},{value:"afternoon",label:"Afternoon (12PM - 6PM)"},{value:"evening",label:"Evening (6PM - 10PM)"}];return e.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r==="create"?"Add New Customer":"Edit Customer"}),e.jsx("p",{className:"text-gray-600 mt-1",children:r==="create"?"Enter customer information to create a new customer record":"Update customer information"})]}),e.jsx(P,{variant:"ghost",iconName:"X",onClick:a})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:x.map(y=>e.jsxs("button",{onClick:()=>C(y.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${b===y.id?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(E,{name:y.icon,size:16}),e.jsx("span",{children:y.label})]},y.id))})}),e.jsxs("form",{onSubmit:p,className:"p-6",children:[b==="basic"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(B,{label:"Customer Type",options:[{value:Le.INDIVIDUAL,label:"Individual"},{value:Le.CORPORATE,label:"Corporate"},{value:Le.VIP,label:"VIP"}],value:o.type,onChange:y=>w("","type",y),required:!0}),e.jsx(B,{label:"Status",options:[{value:me.ACTIVE,label:"Active"},{value:me.INACTIVE,label:"Inactive"},{value:me.PROSPECT,label:"Prospect"},{value:me.SUSPENDED,label:"Suspended"}],value:o.status,onChange:y=>w("","status",y),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(B,{label:"Title",options:m,value:o.personalInfo.title,onChange:y=>w("personalInfo","title",y)}),e.jsx(D,{label:"First Name",value:o.personalInfo.firstName,onChange:y=>w("personalInfo","firstName",y.target.value),error:d["personalInfo.firstName"],required:!0}),e.jsx(D,{label:"Middle Name",value:o.personalInfo.middleName,onChange:y=>w("personalInfo","middleName",y.target.value)}),e.jsx(D,{label:"Last Name",value:o.personalInfo.lastName,onChange:y=>w("personalInfo","lastName",y.target.value),error:d["personalInfo.lastName"],required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(D,{label:"Date of Birth",type:"date",value:o.personalInfo.dateOfBirth,onChange:y=>w("personalInfo","dateOfBirth",y.target.value)}),e.jsx(B,{label:"Gender",options:j,value:o.personalInfo.gender,onChange:y=>w("personalInfo","gender",y)}),e.jsx(D,{label:"Nationality",value:o.personalInfo.nationality,onChange:y=>w("personalInfo","nationality",y.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(D,{label:"ID Number",value:o.personalInfo.idNumber,onChange:y=>w("personalInfo","idNumber",y.target.value),placeholder:"12345678"}),e.jsx(D,{label:"Passport Number",value:o.personalInfo.passportNumber,onChange:y=>w("personalInfo","passportNumber",y.target.value)})]}),e.jsx(gs,{label:"Profile Photo",accept:"image/*",maxSize:2*1024*1024,onFileSelect:y=>w("personalInfo","profilePhoto",y),description:"Upload a profile photo (max 2MB)"})]}),b==="contact"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(D,{label:"Primary Phone",value:o.contactInfo.primaryPhone,onChange:y=>w("contactInfo","primaryPhone",y.target.value),error:d["contactInfo.primaryPhone"],placeholder:"+254 700 123 456",required:!0}),e.jsx(D,{label:"Secondary Phone",value:o.contactInfo.secondaryPhone,onChange:y=>w("contactInfo","secondaryPhone",y.target.value),placeholder:"+254 700 123 456"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(D,{label:"Email Address",type:"email",value:o.contactInfo.email,onChange:y=>w("contactInfo","email",y.target.value),error:d["contactInfo.email"],required:!0}),e.jsx(D,{label:"Alternate Email",type:"email",value:o.contactInfo.alternateEmail,onChange:y=>w("contactInfo","alternateEmail",y.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(D,{label:"WhatsApp Number",value:o.contactInfo.whatsappNumber,onChange:y=>w("contactInfo","whatsappNumber",y.target.value),placeholder:"+254 700 123 456"}),e.jsx(B,{label:"Preferred Contact Method",options:[{value:rt.EMAIL,label:"Email"},{value:rt.SMS,label:"SMS"},{value:rt.PHONE,label:"Phone"},{value:rt.WHATSAPP,label:"WhatsApp"}],value:o.contactInfo.preferredContactMethod,onChange:y=>w("contactInfo","preferredContactMethod",y)})]}),e.jsx(B,{label:"Preferred Contact Time",options:S,value:o.contactInfo.preferredContactTime,onChange:y=>w("contactInfo","preferredContactTime",y)})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200 mt-8",children:[e.jsx(P,{type:"button",variant:"outline",onClick:a,children:"Cancel"}),e.jsx(P,{type:"submit",loading:l,iconName:"Save",children:r==="create"?"Create Customer":"Update Customer"})]})]})]})},Ql=({customer:s})=>{var g;const{customerAnalytics:t,customerInsights:a,customerJourney:r,refreshCustomerAnalytics:n,exportCustomerData:i,loading:l}=hs(),[o,c]=T.useState(!1);T.useEffect(()=>{s!=null&&s.id&&d()},[s==null?void 0:s.id]);const d=async()=>{if(s!=null&&s.id){c(!0);try{await n(s.id)}catch(p){console.error("Error refreshing analytics:",p)}finally{c(!1)}}},u=async p=>{const x=await i(s.id,p);x.success||alert(`Export failed: ${x.error}`)},b=p=>`KSh ${p.toLocaleString()}`,C=p=>{switch(p){case Ge.PLATINUM:return"text-purple-600 bg-purple-100";case Ge.GOLD:return"text-yellow-600 bg-yellow-100";case Ge.SILVER:return"text-gray-600 bg-gray-100";case Ge.BRONZE:return"text-orange-600 bg-orange-100";default:return"text-blue-600 bg-blue-100"}},w=p=>{switch(p){case"high":return"text-red-600 bg-red-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}};return s?l&&!t?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(E,{name:"Loader2",size:48,className:"text-gray-400 mx-auto mb-4 animate-spin"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Loading Analytics"}),e.jsx("p",{className:"text-gray-600",children:"Calculating customer insights and analytics..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Customer Analytics"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Insights and analytics for ",s.name]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(P,{variant:"outline",iconName:"RefreshCw",onClick:d,loading:o,size:"sm",children:"Refresh"}),e.jsx(P,{variant:"outline",iconName:"Download",onClick:()=>u("json"),size:"sm",children:"Export JSON"}),e.jsx(P,{variant:"outline",iconName:"Download",onClick:()=>u("csv"),size:"sm",children:"Export CSV"})]})]}),t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.totalServices}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Services"})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:b(t.totalSpent)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Spent"})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:b(t.averageOrderValue)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Avg Order Value"})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:t.loyaltyPoints}),e.jsx("div",{className:"text-sm text-gray-600",children:"Loyalty Points"})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:t.averageRating.toFixed(1)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Avg Rating"})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:t.daysSinceLastService}),e.jsx("div",{className:"text-sm text-gray-600",children:"Days Since Last Service"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Loyalty Status"}),e.jsx(E,{name:"Award",size:24,className:"text-yellow-500"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Current Tier"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${C(t.loyaltyTier)}`,children:t.loyaltyTier.toUpperCase()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Points"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.loyaltyPoints})]}),t.loyaltyTier!==Ge.PLATINUM&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Progress to next tier"}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-500 h-2 rounded-full",style:{width:`${Math.min(100,t.loyaltyPoints/1e3*100)}%`}})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Risk Assessment"}),e.jsx(E,{name:"AlertTriangle",size:24,className:"text-orange-500"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Risk Level"}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(t.riskScore)}`,children:t.riskScore.toUpperCase()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Engagement Score"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.engagementScore||"N/A"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Last Activity"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[t.daysSinceLastService," days ago"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Communication"}),e.jsx(E,{name:"MessageSquare",size:24,className:"text-blue-500"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Communications"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.totalCommunications})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Avg Response Time"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.averageResponseTime>0?`${Math.round(t.averageResponseTime/60)} hours`:"N/A"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Preferred Channel"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:((g=t.preferredChannel)==null?void 0:g.replace("_"," "))||"N/A"})]})]})]})]}),t.preferredServices&&t.preferredServices.length>0&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Service Preferences"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:t.preferredServices.slice(0,3).map((p,x)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${x===0?"bg-yellow-100 text-yellow-800":x===1?"bg-gray-100 text-gray-800":"bg-orange-100 text-orange-800"}`,children:x+1}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:p.replace("_"," ").replace(/\b\w/g,m=>m.toUpperCase())})]},p))})]}),a&&e.jsxs("div",{className:"space-y-6",children:[a.alerts&&a.alerts.length>0&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Active Alerts"}),e.jsx("div",{className:"space-y-3",children:a.alerts.map(p=>e.jsx("div",{className:`p-3 rounded-lg border-l-4 ${p.severity==="high"?"bg-red-50 border-red-400":p.severity==="medium"?"bg-yellow-50 border-yellow-400":"bg-blue-50 border-blue-400"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${p.severity==="high"?"text-red-800":p.severity==="medium"?"text-yellow-800":"text-blue-800"}`,children:p.message}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:new Date(p.triggeredAt).toLocaleDateString()})]}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${p.severity==="high"?"bg-red-100 text-red-800":p.severity==="medium"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:p.severity.toUpperCase()})]})},p.id))})]}),a.opportunities&&a.opportunities.length>0&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Opportunities"}),e.jsx("div",{className:"space-y-3",children:a.opportunities.map(p=>e.jsx("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:p.title}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:p.description}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Estimated Value: ",b(p.estimatedValue)," | Probability: ",Math.round(p.probability*100),"%"]})]}),e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:p.type.toUpperCase()})]})},p.id))})]}),a.recommendations&&a.recommendations.length>0&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recommendations"}),e.jsx("div",{className:"space-y-3",children:a.recommendations.map(p=>e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:p.title}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:p.description}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Priority: ",p.priority," | Effort: ",p.effort]})]}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${p.priority==="high"?"bg-red-100 text-red-800":p.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:p.priority.toUpperCase()})]})},p.id))})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(E,{name:"BarChart3",size:48,className:"text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Analytics Available"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Analytics will be generated once the customer has service history."}),e.jsx(P,{iconName:"RefreshCw",onClick:d,loading:o,children:"Generate Analytics"})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(E,{name:"BarChart3",size:48,className:"text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Customer Selected"}),e.jsx("p",{className:"text-gray-600",children:"Select a customer to view their analytics and insights."})]})},Zl=({customer:s})=>{const{communications:t,createCommunication:a,updateCommunicationStatus:r,loading:n}=hs(),[i,l]=T.useState(!1),[o,c]=T.useState({type:Xt.INQUIRY,channel:Ct.EMAIL,direction:"inbound",subject:"",content:"",priority:"medium",responseRequired:!0,contactPerson:{name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",role:"Primary Contact"}}),[d,u]=T.useState({type:"",status:"",channel:""}),b=(y,A)=>{if(y.includes(".")){const[N,f]=y.split(".");c(v=>({...v,[N]:{...v[N],[f]:A}}))}else c(N=>({...N,[y]:A}))},C=async y=>{if(y.preventDefault(),!(s!=null&&s.id)){alert("Please select a customer first");return}const A={...o,customerId:s.id},N=await a(A);N.success?(l(!1),c({type:Xt.INQUIRY,channel:Ct.EMAIL,direction:"inbound",subject:"",content:"",priority:"medium",responseRequired:!0,contactPerson:{name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",role:"Primary Contact"}})):alert(`Error: ${N.error}`)},w=async(y,A)=>{const N=await r(y,A);N.success||alert(`Error: ${N.error}`)},g=t.filter(y=>!(d.type&&y.type!==d.type||d.status&&y.status!==d.status||d.channel&&y.channel!==d.channel)),p=y=>{switch(y){case Oe.PENDING:return"text-yellow-600 bg-yellow-100";case Oe.IN_PROGRESS:return"text-blue-600 bg-blue-100";case Oe.COMPLETED:return"text-green-600 bg-green-100";case Oe.ESCALATED:return"text-red-600 bg-red-100";case Oe.CLOSED:return"text-gray-600 bg-gray-100";default:return"text-gray-600 bg-gray-100"}},x=y=>{switch(y){case"urgent":return"text-red-600 bg-red-100";case"high":return"text-orange-600 bg-orange-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},m=Object.values(Xt).map(y=>({value:y,label:y.replace("_"," ").replace(/\b\w/g,A=>A.toUpperCase())})),j=Object.values(Ct).map(y=>({value:y,label:y.replace("_"," ").replace(/\b\w/g,A=>A.toUpperCase())})),S=Object.values(Oe).map(y=>({value:y,label:y.replace("_"," ").replace(/\b\w/g,A=>A.toUpperCase())}));return s?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Communications"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage all communications with ",s.name]})]}),e.jsx(P,{iconName:"Plus",onClick:()=>l(!0),children:"New Communication"})]}),i&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"New Communication"}),e.jsx(P,{variant:"ghost",iconName:"X",onClick:()=>l(!1)})]}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(B,{label:"Type",options:m,value:o.type,onChange:y=>b("type",y),required:!0}),e.jsx(B,{label:"Channel",options:j,value:o.channel,onChange:y=>b("channel",y),required:!0}),e.jsx(B,{label:"Priority",options:[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}],value:o.priority,onChange:y=>b("priority",y),required:!0})]}),e.jsx(D,{label:"Subject",value:o.subject,onChange:y=>b("subject",y.target.value),placeholder:"Communication subject...",required:!0}),e.jsx(ve,{label:"Content",value:o.content,onChange:y=>b("content",y.target.value),placeholder:"Communication details...",rows:4,required:!0}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(D,{label:"Contact Person",value:o.contactPerson.name,onChange:y=>b("contactPerson.name",y.target.value),placeholder:"Contact person name"}),e.jsx(D,{label:"Contact Email",type:"email",value:o.contactPerson.email,onChange:y=>b("contactPerson.email",y.target.value),placeholder:"Contact email"})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:o.responseRequired,onChange:y=>b("responseRequired",y.target.checked),className:"rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Response Required"})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(P,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(P,{type:"submit",loading:n,iconName:"Send",children:"Create Communication"})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(B,{label:"Filter by Type",options:[{value:"",label:"All Types"},...m],value:d.type,onChange:y=>u(A=>({...A,type:y}))}),e.jsx(B,{label:"Filter by Status",options:[{value:"",label:"All Statuses"},...S],value:d.status,onChange:y=>u(A=>({...A,status:y}))}),e.jsx(B,{label:"Filter by Channel",options:[{value:"",label:"All Channels"},...j],value:d.channel,onChange:y=>u(A=>({...A,channel:y}))}),e.jsx("div",{className:"flex items-end",children:e.jsx(P,{variant:"outline",onClick:()=>u({type:"",status:"",channel:""}),className:"w-full",children:"Clear Filters"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200",children:n?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(E,{name:"Loader2",size:24,className:"animate-spin text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Loading communications..."})]}):g.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(E,{name:"MessageSquare",size:48,className:"text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Communications Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:t.length===0?"Start by creating the first communication with this customer.":"No communications match your current filters."}),t.length===0&&e.jsx(P,{iconName:"Plus",onClick:()=>l(!0),children:"Create First Communication"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:g.map(y=>e.jsx("div",{className:"p-6 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:y.subject}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${p(y.status)}`,children:y.status.replace("_"," ").toUpperCase()}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${x(y.priority)}`,children:y.priority.toUpperCase()})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-3",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(E,{name:"Calendar",size:16,className:"mr-1"}),new Date(y.createdAt).toLocaleDateString()]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(E,{name:"MessageSquare",size:16,className:"mr-1"}),y.channel.replace("_"," ")]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(E,{name:"Tag",size:16,className:"mr-1"}),y.type.replace("_"," ")]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(E,{name:y.direction==="inbound"?"ArrowDown":"ArrowUp",size:16,className:"mr-1"}),y.direction]})]}),e.jsx("p",{className:"text-gray-700 mb-3",children:y.content}),y.contactPerson.name&&e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Contact:"})," ",y.contactPerson.name,y.contactPerson.email&&` (${y.contactPerson.email})`]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[y.status===Oe.PENDING&&e.jsx(P,{variant:"outline",size:"sm",onClick:()=>w(y.id,Oe.IN_PROGRESS),children:"Start"}),y.status===Oe.IN_PROGRESS&&e.jsx(P,{variant:"outline",size:"sm",onClick:()=>w(y.id,Oe.COMPLETED),children:"Complete"}),y.status===Oe.COMPLETED&&e.jsx(P,{variant:"outline",size:"sm",onClick:()=>w(y.id,Oe.CLOSED),children:"Close"}),e.jsx(P,{variant:"ghost",size:"sm",iconName:"MoreHorizontal"})]})]})},y.id))})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(E,{name:"MessageSquare",size:48,className:"text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Customer Selected"}),e.jsx("p",{className:"text-gray-600",children:"Select a customer to view and manage communications."})]})},Xl=({customer:s})=>{const{serviceHistory:t,createServiceRecord:a,loading:r}=hs(),[n,i]=T.useState(!1),[l,o]=T.useState({category:es.RESIDENTIAL_MOVE,title:"",description:"",status:Be.QUOTED,requestDate:new Date().toISOString().split("T")[0],scheduledDate:"",quotedAmount:"",origin:{address:"",contactPerson:{name:"",phone:""}},destination:{address:"",contactPerson:{name:"",phone:""}},specialRequirements:"",estimatedDuration:""}),[c,d]=T.useState({category:"",status:"",year:new Date().getFullYear().toString()}),u=(m,j)=>{if(m.includes(".")){const S=m.split(".");if(S.length===2){const[y,A]=S;o(N=>({...N,[y]:{...N[y],[A]:j}}))}else if(S.length===3){const[y,A,N]=S;o(f=>({...f,[y]:{...f[y],[A]:{...f[y][A],[N]:j}}}))}}else o(S=>({...S,[m]:j}))},b=async m=>{if(m.preventDefault(),!(s!=null&&s.id)){alert("Please select a customer first");return}const j={...l,customerId:s.id,quotedAmount:parseFloat(l.quotedAmount)||0,estimatedDuration:parseFloat(l.estimatedDuration)||0},S=await a(j);S.success?(i(!1),o({category:es.RESIDENTIAL_MOVE,title:"",description:"",status:Be.QUOTED,requestDate:new Date().toISOString().split("T")[0],scheduledDate:"",quotedAmount:"",origin:{address:"",contactPerson:{name:"",phone:""}},destination:{address:"",contactPerson:{name:"",phone:""}},specialRequirements:"",estimatedDuration:""})):alert(`Error: ${S.error}`)},C=t.filter(m=>!(c.category&&m.category!==c.category||c.status&&m.status!==c.status||c.year&&new Date(m.requestDate).getFullYear().toString()!==c.year)),w=m=>{switch(m){case Be.QUOTED:return"text-blue-600 bg-blue-100";case Be.BOOKED:return"text-purple-600 bg-purple-100";case Be.CONFIRMED:return"text-indigo-600 bg-indigo-100";case Be.IN_PROGRESS:return"text-yellow-600 bg-yellow-100";case Be.COMPLETED:return"text-green-600 bg-green-100";case Be.CANCELLED:return"text-red-600 bg-red-100";case Be.RESCHEDULED:return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}},g=m=>`KSh ${m.toLocaleString()}`,p=Object.values(es).map(m=>({value:m,label:m.replace("_"," ").replace(/\b\w/g,j=>j.toUpperCase())})),x=Object.values(Be).map(m=>({value:m,label:m.replace("_"," ").replace(/\b\w/g,j=>j.toUpperCase())}));return s?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Service History"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Complete service history for ",s.name]})]}),e.jsx(P,{iconName:"Plus",onClick:()=>i(!0),children:"New Service Record"})]}),n&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"New Service Record"}),e.jsx(P,{variant:"ghost",iconName:"X",onClick:()=>i(!1)})]}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(B,{label:"Service Category",options:p,value:l.category,onChange:m=>u("category",m),required:!0}),e.jsx(B,{label:"Status",options:x,value:l.status,onChange:m=>u("status",m),required:!0}),e.jsx(D,{label:"Quoted Amount (KSh)",type:"number",value:l.quotedAmount,onChange:m=>u("quotedAmount",m.target.value),placeholder:"0",min:"0"})]}),e.jsx(D,{label:"Service Title",value:l.title,onChange:m=>u("title",m.target.value),placeholder:"Brief description of the service...",required:!0}),e.jsx(ve,{label:"Description",value:l.description,onChange:m=>u("description",m.target.value),placeholder:"Detailed service description...",rows:3}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(D,{label:"Request Date",type:"date",value:l.requestDate,onChange:m=>u("requestDate",m.target.value),required:!0}),e.jsx(D,{label:"Scheduled Date",type:"date",value:l.scheduledDate,onChange:m=>u("scheduledDate",m.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Origin Location"}),e.jsx(D,{label:"Address",value:l.origin.address,onChange:m=>u("origin.address",m.target.value),placeholder:"Origin address..."}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(D,{label:"Contact Name",value:l.origin.contactPerson.name,onChange:m=>u("origin.contactPerson.name",m.target.value),placeholder:"Contact name"}),e.jsx(D,{label:"Contact Phone",value:l.origin.contactPerson.phone,onChange:m=>u("origin.contactPerson.phone",m.target.value),placeholder:"Phone number"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Destination Location"}),e.jsx(D,{label:"Address",value:l.destination.address,onChange:m=>u("destination.address",m.target.value),placeholder:"Destination address..."}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(D,{label:"Contact Name",value:l.destination.contactPerson.name,onChange:m=>u("destination.contactPerson.name",m.target.value),placeholder:"Contact name"}),e.jsx(D,{label:"Contact Phone",value:l.destination.contactPerson.phone,onChange:m=>u("destination.contactPerson.phone",m.target.value),placeholder:"Phone number"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsx(D,{label:"Estimated Duration (hours)",type:"number",value:l.estimatedDuration,onChange:m=>u("estimatedDuration",m.target.value),placeholder:"0",min:"0",step:"0.5"})}),e.jsx(ve,{label:"Special Requirements",value:l.specialRequirements,onChange:m=>u("specialRequirements",m.target.value),placeholder:"Any special requirements or notes...",rows:2}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(P,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(P,{type:"submit",loading:r,iconName:"Save",children:"Create Service Record"})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(B,{label:"Filter by Category",options:[{value:"",label:"All Categories"},...p],value:c.category,onChange:m=>d(j=>({...j,category:m}))}),e.jsx(B,{label:"Filter by Status",options:[{value:"",label:"All Statuses"},...x],value:c.status,onChange:m=>d(j=>({...j,status:m}))}),e.jsx(B,{label:"Filter by Year",options:[{value:"2024",label:"2024"},{value:"2023",label:"2023"},{value:"2022",label:"2022"}],value:c.year,onChange:m=>d(j=>({...j,year:m}))}),e.jsx("div",{className:"flex items-end",children:e.jsx(P,{variant:"outline",onClick:()=>d({category:"",status:"",year:new Date().getFullYear().toString()}),className:"w-full",children:"Clear Filters"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200",children:r?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(E,{name:"Loader2",size:24,className:"animate-spin text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Loading service history..."})]}):C.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(E,{name:"History",size:48,className:"text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Service Records Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:t.length===0?"Start by creating the first service record for this customer.":"No service records match your current filters."}),t.length===0&&e.jsx(P,{iconName:"Plus",onClick:()=>i(!0),children:"Create First Service Record"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:C.map(m=>e.jsx("div",{className:"p-6 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:m.title}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(m.status)}`,children:m.status.replace("_"," ").toUpperCase()}),m.serviceNumber&&e.jsxs("span",{className:"text-sm text-gray-500",children:["#",m.serviceNumber]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-3",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(E,{name:"Calendar",size:16,className:"mr-1"}),new Date(m.requestDate).toLocaleDateString()]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(E,{name:"Tag",size:16,className:"mr-1"}),m.category.replace("_"," ")]}),m.quotedAmount>0&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(E,{name:"DollarSign",size:16,className:"mr-1"}),g(m.quotedAmount)]}),m.estimatedDuration>0&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(E,{name:"Clock",size:16,className:"mr-1"}),m.estimatedDuration,"h"]})]}),m.description&&e.jsx("p",{className:"text-gray-700 mb-3",children:m.description}),(m.origin.address||m.destination.address)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[m.origin.address&&e.jsxs("div",{children:[e.jsx("strong",{children:"From:"})," ",m.origin.address]}),m.destination.address&&e.jsxs("div",{children:[e.jsx("strong",{children:"To:"})," ",m.destination.address]})]}),m.specialRequirements&&e.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:[e.jsx("strong",{children:"Special Requirements:"})," ",m.specialRequirements]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx(P,{variant:"ghost",size:"sm",iconName:"Eye",children:"View"}),e.jsx(P,{variant:"ghost",size:"sm",iconName:"Edit",children:"Edit"}),e.jsx(P,{variant:"ghost",size:"sm",iconName:"MoreHorizontal"})]})]})},m.id))})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(E,{name:"History",size:48,className:"text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Customer Selected"}),e.jsx("p",{className:"text-gray-600",children:"Select a customer to view their service history."})]})},eo=({customer:s,onEdit:t,onBack:a})=>{const{addMoveToHistory:r,addCommunication:n}=Ks(),{setCurrentCustomer:i}=hs(),[l,o]=T.useState("overview"),[c,d]=T.useState(!1),[u,b]=T.useState(!1);if(T.useEffect(()=>(s!=null&&s.id&&i(s.id),()=>{i(null)}),[s==null?void 0:s.id,i]),!s)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx(E,{name:"Users",size:48,className:"text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Customer Selected"}),e.jsx("p",{className:"text-gray-600",children:"Please select a customer to view details."})]});const C=()=>`${s.personalInfo.firstName} ${s.personalInfo.lastName}`,w=m=>{switch(m){case me.ACTIVE:return"text-green-600 bg-green-100";case me.INACTIVE:return"text-gray-600 bg-gray-100";case me.SUSPENDED:return"text-red-600 bg-red-100";case me.PROSPECT:return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},g=m=>{switch(m){case"platinum":return"text-purple-600 bg-purple-100";case"gold":return"text-yellow-600 bg-yellow-100";case"silver":return"text-gray-600 bg-gray-100";case"bronze":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}},p=m=>{switch(m){case ct.COMPLETED:return"text-green-600 bg-green-100";case ct.IN_PROGRESS:return"text-blue-600 bg-blue-100";case ct.BOOKED:return"text-purple-600 bg-purple-100";case ct.QUOTED:return"text-yellow-600 bg-yellow-100";case ct.CANCELLED:return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},x=[{id:"overview",label:"Overview",icon:"User"},{id:"analytics",label:"Analytics",icon:"BarChart3"},{id:"communications",label:"Communications",icon:"MessageSquare"},{id:"services",label:"Service History",icon:"History"},{id:"moves",label:"Move History",icon:"Truck"},{id:"documents",label:"Documents",icon:"FileText"},{id:"notes",label:"Notes",icon:"StickyNote"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-gray-300 flex items-center justify-center",children:e.jsxs("span",{className:"text-xl font-medium text-gray-700",children:[s.personalInfo.firstName.charAt(0),s.personalInfo.lastName.charAt(0)]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:C()}),e.jsx("p",{className:"text-gray-600",children:s.customerNumber}),e.jsxs("div",{className:"flex items-center space-x-3 mt-2",children:[e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(s.status)}`,children:s.status}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${g(s.segmentation.tier)}`,children:s.segmentation.tier}),e.jsx("span",{className:"text-sm text-gray-600",children:s.type.charAt(0).toUpperCase()+s.type.slice(1)})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(P,{variant:"outline",iconName:"Edit",onClick:()=>t(s),children:"Edit Customer"}),e.jsx(P,{iconName:"Plus",onClick:()=>d(!0),children:"New Move"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mt-6 pt-6 border-t border-gray-200",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.moveHistory.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Moves"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["KSh ",s.segmentation.lifetimeValue.toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Lifetime Value"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:s.segmentation.loyaltyPoints}),e.jsx("div",{className:"text-sm text-gray-600",children:"Loyalty Points"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:s.communications.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Communications"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:x.map(m=>e.jsxs("button",{onClick:()=>o(m.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${l===m.id?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(E,{name:m.icon,size:16}),e.jsx("span",{children:m.label})]},m.id))})}),e.jsxs("div",{className:"p-6",children:[l==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Personal Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Full Name:"}),e.jsxs("span",{className:"font-medium",children:[s.personalInfo.title," ",C()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Date of Birth:"}),e.jsx("span",{className:"font-medium",children:s.personalInfo.dateOfBirth?new Date(s.personalInfo.dateOfBirth).toLocaleDateString():"Not provided"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Gender:"}),e.jsx("span",{className:"font-medium",children:s.personalInfo.gender||"Not specified"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Nationality:"}),e.jsx("span",{className:"font-medium",children:s.personalInfo.nationality})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ID Number:"}),e.jsx("span",{className:"font-medium",children:s.personalInfo.idNumber||"Not provided"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Contact Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Primary Phone:"}),e.jsx("span",{className:"font-medium",children:s.contactInfo.primaryPhone})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Email:"}),e.jsx("span",{className:"font-medium",children:s.contactInfo.email})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Secondary Phone:"}),e.jsx("span",{className:"font-medium",children:s.contactInfo.secondaryPhone||"Not provided"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"WhatsApp:"}),e.jsx("span",{className:"font-medium",children:s.contactInfo.whatsappNumber||"Not provided"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Preferred Contact:"}),e.jsx("span",{className:"font-medium",children:s.contactInfo.preferredContactMethod})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Addresses"}),e.jsx("div",{className:"space-y-4",children:s.addresses.map((m,j)=>e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-medium text-gray-900",children:[m.type.charAt(0).toUpperCase()+m.type.slice(1)," Address"]}),m.isPrimary&&e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-600",children:"Primary"})]}),e.jsxs("p",{className:"text-gray-600",children:[m.street,m.apartment&&`, ${m.apartment}`,e.jsx("br",{}),m.city,", ",m.state," ",m.postalCode,e.jsx("br",{}),m.country]}),m.accessInstructions&&e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:[e.jsx("strong",{children:"Access Instructions:"})," ",m.accessInstructions]})]},j))})]}),s.type===Le.CORPORATE&&s.corporateInfo.companyName&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Corporate Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Company Name:"}),e.jsx("span",{className:"font-medium",children:s.corporateInfo.companyName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Registration Number:"}),e.jsx("span",{className:"font-medium",children:s.corporateInfo.registrationNumber||"Not provided"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Tax Number:"}),e.jsx("span",{className:"font-medium",children:s.corporateInfo.taxNumber||"Not provided"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Industry:"}),e.jsx("span",{className:"font-medium",children:s.corporateInfo.industry||"Not specified"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Company Size:"}),e.jsx("span",{className:"font-medium",children:s.corporateInfo.companySize||"Not specified"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Website:"}),e.jsx("span",{className:"font-medium",children:s.corporateInfo.website||"Not provided"})]})]})]})]})]}),l==="analytics"&&e.jsx(Ql,{customer:s}),l==="communications"&&e.jsx(Zl,{customer:s}),l==="services"&&e.jsx(Xl,{customer:s}),l==="moves"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Move History"}),e.jsx(P,{iconName:"Plus",onClick:()=>d(!0),children:"Add Move"})]}),s.moveHistory.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(E,{name:"Truck",size:48,className:"text-gray-400 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Move History"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This customer hasn't had any moves yet."}),e.jsx(P,{iconName:"Plus",onClick:()=>d(!0),children:"Add First Move"})]}):e.jsx("div",{className:"space-y-4",children:s.moveHistory.map((m,j)=>{var S,y,A;return e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:m.moveNumber||`Move #${j+1}`}),e.jsx("p",{className:"text-sm text-gray-600",children:m.date?new Date(m.date).toLocaleDateString():"Date not set"})]}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${p(m.status)}`,children:m.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Service Type:"}),e.jsx("span",{className:"ml-2 font-medium",children:m.serviceType})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Final Cost:"}),e.jsxs("span",{className:"ml-2 font-medium",children:["KSh ",((S=m.finalCost)==null?void 0:S.toLocaleString())||"Not set"]})]})]}),((y=m.origin)==null?void 0:y.address)&&e.jsxs("div",{className:"mt-3 text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"From:"}),e.jsx("span",{className:"ml-2",children:m.origin.address})]}),((A=m.destination)==null?void 0:A.address)&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"To:"}),e.jsx("span",{className:"ml-2",children:m.destination.address})]}),m.feedback&&e.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Feedback:"}),e.jsx("p",{className:"text-sm mt-1",children:m.feedback}),m.rating&&e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("span",{className:"text-sm text-gray-600 mr-2",children:"Rating:"}),e.jsx("div",{className:"flex",children:[1,2,3,4,5].map(N=>e.jsx(E,{name:"Star",size:16,className:N<=m.rating?"text-yellow-400 fill-current":"text-gray-300"},N))})]})]})]},j)})})]}),l==="documents"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Documents"}),e.jsx(P,{iconName:"Upload",children:"Upload Document"})]}),s.documents.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(E,{name:"FileText",size:48,className:"text-gray-400 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Documents"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No documents uploaded for this customer yet."}),e.jsx(P,{iconName:"Upload",children:"Upload First Document"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.documents.map((m,j)=>e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(E,{name:"FileText",size:20,className:"text-gray-500"}),e.jsx("span",{className:"font-medium text-gray-900",children:m.name})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Type: ",m.type]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Uploaded: ",m.uploadDate?new Date(m.uploadDate).toLocaleDateString():"Unknown"]}),e.jsxs("div",{className:"mt-3 flex space-x-2",children:[e.jsx(P,{size:"sm",variant:"outline",children:"View"}),e.jsx(P,{size:"sm",variant:"outline",children:"Download"})]})]},j))})]}),l==="notes"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Notes"}),e.jsx(P,{iconName:"Plus",children:"Add Note"})]}),s.notes.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(E,{name:"StickyNote",size:48,className:"text-gray-400 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Notes"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No notes added for this customer yet."}),e.jsx(P,{iconName:"Plus",children:"Add First Note"})]}):e.jsx("div",{className:"space-y-4",children:s.notes.map((m,j)=>e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${m.type==="important"?"bg-red-100 text-red-600":m.type==="warning"?"bg-yellow-100 text-yellow-600":m.type==="follow_up"?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:m.type}),e.jsx("span",{className:"text-sm text-gray-500",children:m.createdAt?new Date(m.createdAt).toLocaleDateString():"No date"})]}),e.jsx("p",{className:"text-gray-700",children:m.content}),m.createdBy&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["By: ",m.createdBy]})]},j))})]})]})]})]})},to=()=>{const[s,t]=T.useState("list"),[a,r]=T.useState(null),n=()=>{r(null),t("create")},i=u=>{r(u),t("edit")},l=u=>{r(u),t("details")},o=u=>{r(u),t("details")},c=()=>{r(null),t("list")},d=()=>{switch(s){case"create":return e.jsx(fa,{mode:"create",onSave:o,onCancel:c});case"edit":return e.jsx(fa,{customer:a,mode:"edit",onSave:o,onCancel:c});case"details":return e.jsx(eo,{customer:a,onEdit:i,onBack:c});default:return e.jsx(Jl,{onCustomerSelect:l,onCreateCustomer:n})}};return e.jsx(Bl,{children:e.jsxs(Yl,{children:[e.jsxs(We,{children:[e.jsx("title",{children:"Customer Management - MoveEase Pro"}),e.jsx("meta",{name:"description",content:"Manage your customers, track their move history, and maintain customer relationships"})]}),e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"flex h-screen",children:[e.jsx(nt,{}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[s!=="list"&&e.jsxs("button",{onClick:c,className:"flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Customers"]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[s==="list"&&"Customer Management",s==="create"&&"Add New Customer",s==="edit"&&"Edit Customer",s==="details"&&"Customer Details"]}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[s==="list"&&"Manage your customers and track their move history",s==="create"&&"Create a new customer record",s==="edit"&&"Update customer information",s==="details"&&a&&`${a.personalInfo.firstName} ${a.personalInfo.lastName} - ${a.customerNumber}`]})]})]}),s==="details"&&a&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>i(a),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit Customer"]}),e.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"New Move"]})]})]})}),e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"p-6",children:d()})})]})]})})]})})},ye={ADMIN:"admin",MANAGER:"manager",SUPERVISOR:"supervisor",TEAM_LEAD:"team_lead",DRIVER:"driver",MOVER:"mover",PACKER:"packer",CUSTOMER_SERVICE:"customer_service",SALES_REP:"sales_rep",ACCOUNTANT:"accountant",HR_OFFICER:"hr_officer",CLEANER:"cleaner",SECURITY:"security"},ce={ACTIVE:"active",INACTIVE:"inactive",ON_LEAVE:"on_leave",SUSPENDED:"suspended",TERMINATED:"terminated",PROBATION:"probation"},gt={FULL_TIME:"full_time",PART_TIME:"part_time",CONTRACT:"contract",CASUAL:"casual",INTERN:"intern"},Mt={OPERATIONS:"operations",SALES:"sales",CUSTOMER_SERVICE:"customer_service",FINANCE:"finance",HR:"hr",ADMIN:"admin",SECURITY:"security",MAINTENANCE:"maintenance"},ts={FULL_DAY:"full_day",FLEXIBLE:"flexible"},so={ANNUAL:"annual"},ss={MONTHLY:"monthly"},as={MPESA:"mpesa"},Ps={id:"",employeeNumber:"",status:ce.ACTIVE,personalInfo:{title:"",firstName:"",lastName:"",middleName:"",dateOfBirth:null,gender:"",nationality:"Kenyan",idNumber:"",passportNumber:"",profilePhoto:null,maritalStatus:"",religion:"",nextOfKin:{name:"",relationship:"",phone:"",email:"",address:""}},contactInfo:{primaryPhone:"",secondaryPhone:"",email:"",alternateEmail:"",whatsappNumber:"",address:{street:"",apartment:"",city:"",state:"",postalCode:"",country:"Kenya",coordinates:{latitude:null,longitude:null}}},employmentInfo:{role:ye.MOVER,department:Mt.OPERATIONS,employmentType:gt.FULL_TIME,hireDate:null,probationEndDate:null,contractEndDate:null,reportingManager:"",workLocation:"",jobDescription:"",responsibilities:[],skills:[],certifications:[]},payrollInfo:{basicSalary:0,currency:"KSH",payrollFrequency:ss.MONTHLY,paymentMethod:as.MPESA,mpesaNumber:"",bankDetails:{bankName:"",accountNumber:"",branchCode:"",swiftCode:""},taxNumber:"",nhifNumber:"",nssfNumber:"",allowances:[{id:"",name:"",amount:0,frequency:"monthly",taxable:!0}],deductions:[{id:"",name:"",amount:0,frequency:"monthly",startDate:null,endDate:null,balance:0}]},scheduleInfo:{shiftType:ts.FULL_DAY,workingDays:["monday","tuesday","wednesday","thursday","friday"],startTime:"08:00",endTime:"17:00",breakDuration:60,overtimeRate:1.5,weeklyHours:40,flexibleSchedule:!1},performanceInfo:{currentRating:0,lastReviewDate:null,nextReviewDate:null,goals:[{id:"",title:"",description:"",targetDate:null,status:"pending",progress:0}],achievements:[{id:"",title:"",description:"",date:null,category:""}],disciplinaryActions:[{id:"",type:"",reason:"",date:null,description:"",actionTaken:"",issuedBy:""}]},attendanceInfo:{totalWorkingDays:0,daysPresent:0,daysAbsent:0,lateArrivals:0,earlyDepartures:0,overtimeHours:0,attendanceRate:0,punctualityRate:0},leaveInfo:{annualLeaveEntitlement:21,annualLeaveUsed:0,annualLeaveBalance:21,sickLeaveUsed:0,otherLeaveUsed:0,leaveHistory:[{id:"",type:so.ANNUAL,startDate:null,endDate:null,days:0,reason:"",status:"pending",approvedBy:"",appliedDate:null,approvalDate:null}]},trainingInfo:{completedTrainings:[{id:"",name:"",provider:"",completionDate:null,certificateUrl:"",expiryDate:null,score:null}],ongoingTrainings:[{id:"",name:"",provider:"",startDate:null,expectedCompletionDate:null,progress:0}],requiredTrainings:[{id:"",name:"",dueDate:null,priority:"high"}]},documents:[{id:"",name:"",type:"contract",url:"",uploadDate:null,uploadedBy:"",expiryDate:null,isActive:!0}],accessControl:{permissions:[],canAccessCustomers:!1,canAccessFinance:!1,canAccessReports:!1,canManageStaff:!1,canProcessPayroll:!1,lastLoginAt:null,loginAttempts:0,accountLocked:!1,passwordLastChanged:null,twoFactorEnabled:!1},emergencyInfo:{medicalConditions:"",allergies:"",medications:"",bloodType:"",emergencyContact:{name:"",relationship:"",phone:"",email:"",address:""},hospitalPreference:"",insuranceProvider:"",insuranceNumber:""},systemInfo:{createdAt:null,createdBy:"",updatedAt:null,updatedBy:"",onboardingCompleted:!1,onboardingDate:null,offboardingDate:null,offboardingReason:"",notes:[{id:"",content:"",type:"general",createdBy:"",createdAt:null,isPrivate:!0}]}},Yt={required:["firstName","lastName","primaryPhone","email","role","department"],email:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,phone:/^(\+254|0)[17]\d{8}$/,idNumber:/^\d{8}$/},ba={[ye.ADMIN]:["manage_all_staff","process_payroll","access_all_reports","manage_system_settings","access_all_customers","manage_finances"],[ye.MANAGER]:["manage_department_staff","approve_leave","access_department_reports","access_all_customers","view_payroll_reports"],[ye.SUPERVISOR]:["manage_team_staff","approve_overtime","access_team_reports","access_assigned_customers"],[ye.TEAM_LEAD]:["view_team_staff","assign_tasks","access_team_performance","access_assigned_customers"],[ye.HR_OFFICER]:["manage_all_staff","process_payroll","manage_leave","access_hr_reports","manage_training"],[ye.ACCOUNTANT]:["process_payroll","manage_finances","access_financial_reports","manage_deductions"],[ye.SALES_REP]:["access_assigned_customers","manage_quotes","view_sales_reports"],[ye.CUSTOMER_SERVICE]:["access_all_customers","manage_communications","view_service_reports"],[ye.DRIVER]:["access_assigned_moves","update_move_status","view_schedule"],[ye.MOVER]:["access_assigned_moves","update_move_status","view_schedule"],[ye.PACKER]:["access_assigned_moves","update_packing_status","view_schedule"]},ao=[{id:"staff_1703123456789_abc123def",employeeNumber:"EMP1001",status:ce.ACTIVE,personalInfo:{title:"Mr",firstName:"James",lastName:"Mwangi",middleName:"Kariuki",dateOfBirth:"1988-05-20",gender:"male",nationality:"Kenyan",idNumber:"28765432",passportNumber:"",profilePhoto:null,maritalStatus:"married",religion:"Christian",nextOfKin:{name:"Grace Mwangi",relationship:"spouse",phone:"+254722123456",email:"grace.mwangi@email.com",address:"456 Thika Road, Nairobi"}},contactInfo:{primaryPhone:"+254712123456",secondaryPhone:"+254722123456",email:"james.mwangi@moveease.co.ke",alternateEmail:"jmwangi@gmail.com",whatsappNumber:"+254712123456",address:{street:"456 Thika Road",apartment:"House 12B",city:"Nairobi",state:"Nairobi County",postalCode:"00100",country:"Kenya",coordinates:{latitude:-1.2921,longitude:36.8219}}},employmentInfo:{role:ye.MANAGER,department:Mt.OPERATIONS,employmentType:gt.FULL_TIME,hireDate:"2022-01-15T00:00:00.000Z",probationEndDate:"2022-04-15T00:00:00.000Z",contractEndDate:null,reportingManager:"",workLocation:"Head Office - Nairobi",jobDescription:"Oversee daily operations, manage moving teams, ensure quality service delivery",responsibilities:["Manage operations team","Coordinate moves and logistics","Ensure customer satisfaction","Monitor team performance","Handle escalations"],skills:["Team Management","Logistics","Customer Service","Problem Solving"],certifications:["Operations Management Certificate","First Aid Certificate"]},payrollInfo:{basicSalary:85e3,currency:"KSH",payrollFrequency:ss.MONTHLY,paymentMethod:as.MPESA,mpesaNumber:"+254712123456",bankDetails:{bankName:"Equity Bank",accountNumber:"1234567890",branchCode:"068",swiftCode:"EQBLKENA"},taxNumber:"A123456789P",nhifNumber:"NH123456",nssfNumber:"NS123456",allowances:[{id:"allow_1",name:"Transport Allowance",amount:15e3,frequency:"monthly",taxable:!0},{id:"allow_2",name:"Housing Allowance",amount:25e3,frequency:"monthly",taxable:!0}],deductions:[{id:"ded_1",name:"Staff Loan",amount:5e3,frequency:"monthly",startDate:"2024-01-01T00:00:00.000Z",endDate:"2024-12-31T00:00:00.000Z",balance:35e3}]},scheduleInfo:{shiftType:ts.FULL_DAY,workingDays:["monday","tuesday","wednesday","thursday","friday"],startTime:"08:00",endTime:"17:00",breakDuration:60,overtimeRate:1.5,weeklyHours:40,flexibleSchedule:!1},performanceInfo:{currentRating:4.2,lastReviewDate:"2024-01-15T00:00:00.000Z",nextReviewDate:"2024-07-15T00:00:00.000Z",goals:[{id:"goal_1",title:"Improve Customer Satisfaction",description:"Achieve 95% customer satisfaction rating",targetDate:"2024-06-30T00:00:00.000Z",status:"in_progress",progress:75}],achievements:[{id:"ach_1",title:"Employee of the Month",description:"Outstanding performance in January 2024",date:"2024-01-31T00:00:00.000Z",category:"recognition"}],disciplinaryActions:[]},attendanceInfo:{totalWorkingDays:22,daysPresent:21,daysAbsent:1,lateArrivals:2,earlyDepartures:0,overtimeHours:8,attendanceRate:95.5,punctualityRate:90.9},leaveInfo:{annualLeaveEntitlement:21,annualLeaveUsed:5,annualLeaveBalance:16,sickLeaveUsed:2,otherLeaveUsed:0,leaveHistory:[{id:"leave_1",type:"annual",startDate:"2024-01-20T00:00:00.000Z",endDate:"2024-01-24T00:00:00.000Z",days:5,reason:"Family vacation",status:"approved",approvedBy:"HR Manager",appliedDate:"2024-01-10T00:00:00.000Z",approvalDate:"2024-01-12T00:00:00.000Z"}]},trainingInfo:{completedTrainings:[{id:"train_1",name:"Customer Service Excellence",provider:"Kenya Institute of Management",completionDate:"2023-06-15T00:00:00.000Z",certificateUrl:"",expiryDate:null,score:85}],ongoingTrainings:[],requiredTrainings:[{id:"req_train_1",name:"Safety Training Update",dueDate:"2024-06-30T00:00:00.000Z",priority:"high"}]},documents:[],accessControl:{permissions:["manage_department_staff","approve_leave","access_department_reports","access_all_customers","view_payroll_reports"],canAccessCustomers:!0,canAccessFinance:!1,canAccessReports:!0,canManageStaff:!0,canProcessPayroll:!1,lastLoginAt:"2024-02-15T08:30:00.000Z",loginAttempts:0,accountLocked:!1,passwordLastChanged:"2024-01-01T00:00:00.000Z",twoFactorEnabled:!1},emergencyInfo:{medicalConditions:"",allergies:"",medications:"",bloodType:"O+",emergencyContact:{name:"Grace Mwangi",relationship:"spouse",phone:"+254722123456",email:"grace.mwangi@email.com",address:"456 Thika Road, Nairobi"},hospitalPreference:"Nairobi Hospital",insuranceProvider:"AAR Insurance",insuranceNumber:"AAR123456"},systemInfo:{createdAt:"2022-01-15T00:00:00.000Z",createdBy:"HR System",updatedAt:"2024-02-15T00:00:00.000Z",updatedBy:"HR System",onboardingCompleted:!0,onboardingDate:"2022-01-20T00:00:00.000Z",offboardingDate:null,offboardingReason:"",notes:[{id:"note_1",content:"Excellent team player with strong leadership skills",type:"general",createdBy:"HR Manager",createdAt:"2024-01-15T00:00:00.000Z",isPrivate:!0}]}},{id:"staff_1703123456790_def456ghi",employeeNumber:"EMP1002",status:ce.ACTIVE,personalInfo:{title:"Ms",firstName:"Mary",lastName:"Wanjiku",middleName:"Njeri",dateOfBirth:"1992-08-12",gender:"female",nationality:"Kenyan",idNumber:"32165498",passportNumber:"",profilePhoto:null,maritalStatus:"single",religion:"Christian",nextOfKin:{name:"Peter Wanjiku",relationship:"father",phone:"+254733456789",email:"peter.wanjiku@email.com",address:"Kiambu, Kenya"}},contactInfo:{primaryPhone:"+254723456789",secondaryPhone:"+254733456789",email:"mary.wanjiku@moveease.co.ke",alternateEmail:"mwanjiku@gmail.com",whatsappNumber:"+254723456789",address:{street:"789 Ngong Road",apartment:"Apt 5C",city:"Nairobi",state:"Nairobi County",postalCode:"00100",country:"Kenya",coordinates:{latitude:-1.3032,longitude:36.7073}}},employmentInfo:{role:ye.CUSTOMER_SERVICE,department:Mt.CUSTOMER_SERVICE,employmentType:gt.FULL_TIME,hireDate:"2023-03-01T00:00:00.000Z",probationEndDate:"2023-06-01T00:00:00.000Z",contractEndDate:null,reportingManager:"staff_1703123456789_abc123def",workLocation:"Head Office - Nairobi",jobDescription:"Handle customer inquiries, process bookings, provide excellent customer service",responsibilities:["Answer customer calls and emails","Process move bookings","Handle customer complaints","Maintain customer records","Follow up on service delivery"],skills:["Customer Service","Communication","Problem Solving","Computer Skills"],certifications:["Customer Service Certificate"]},payrollInfo:{basicSalary:45e3,currency:"KSH",payrollFrequency:ss.MONTHLY,paymentMethod:as.MPESA,mpesaNumber:"+254723456789",bankDetails:{bankName:"KCB Bank",accountNumber:"9876543210",branchCode:"001",swiftCode:"KCBLKENX"},taxNumber:"A987654321P",nhifNumber:"NH987654",nssfNumber:"NS987654",allowances:[{id:"allow_3",name:"Transport Allowance",amount:8e3,frequency:"monthly",taxable:!0},{id:"allow_4",name:"Communication Allowance",amount:3e3,frequency:"monthly",taxable:!0}],deductions:[]},scheduleInfo:{shiftType:ts.FULL_DAY,workingDays:["monday","tuesday","wednesday","thursday","friday"],startTime:"08:00",endTime:"17:00",breakDuration:60,overtimeRate:1.5,weeklyHours:40,flexibleSchedule:!1},performanceInfo:{currentRating:4,lastReviewDate:"2023-09-01T00:00:00.000Z",nextReviewDate:"2024-03-01T00:00:00.000Z",goals:[{id:"goal_2",title:"Reduce Response Time",description:"Respond to customer inquiries within 2 hours",targetDate:"2024-05-31T00:00:00.000Z",status:"in_progress",progress:60}],achievements:[],disciplinaryActions:[]},attendanceInfo:{totalWorkingDays:22,daysPresent:22,daysAbsent:0,lateArrivals:1,earlyDepartures:0,overtimeHours:4,attendanceRate:100,punctualityRate:95.5},leaveInfo:{annualLeaveEntitlement:21,annualLeaveUsed:3,annualLeaveBalance:18,sickLeaveUsed:0,otherLeaveUsed:0,leaveHistory:[]},trainingInfo:{completedTrainings:[{id:"train_2",name:"Customer Service Basics",provider:"MoveEase Training Center",completionDate:"2023-03-15T00:00:00.000Z",certificateUrl:"",expiryDate:null,score:92}],ongoingTrainings:[{id:"ongoing_1",name:"Advanced Communication Skills",provider:"Kenya Institute of Management",startDate:"2024-02-01T00:00:00.000Z",expectedCompletionDate:"2024-04-30T00:00:00.000Z",progress:40}],requiredTrainings:[]},documents:[],accessControl:{permissions:["access_all_customers","manage_communications","view_service_reports"],canAccessCustomers:!0,canAccessFinance:!1,canAccessReports:!1,canManageStaff:!1,canProcessPayroll:!1,lastLoginAt:"2024-02-15T09:15:00.000Z",loginAttempts:0,accountLocked:!1,passwordLastChanged:"2023-12-01T00:00:00.000Z",twoFactorEnabled:!1},emergencyInfo:{medicalConditions:"",allergies:"Peanuts",medications:"",bloodType:"A+",emergencyContact:{name:"Peter Wanjiku",relationship:"father",phone:"+254733456789",email:"peter.wanjiku@email.com",address:"Kiambu, Kenya"},hospitalPreference:"Kenyatta National Hospital",insuranceProvider:"NHIF",insuranceNumber:"NHIF987654"},systemInfo:{createdAt:"2023-03-01T00:00:00.000Z",createdBy:"HR System",updatedAt:"2024-02-15T00:00:00.000Z",updatedBy:"HR System",onboardingCompleted:!0,onboardingDate:"2023-03-05T00:00:00.000Z",offboardingDate:null,offboardingReason:"",notes:[]}},{id:"staff_1703123456791_ghi789jkl",employeeNumber:"EMP1003",status:ce.ACTIVE,personalInfo:{title:"Mr",firstName:"David",lastName:"Otieno",middleName:"Ochieng",dateOfBirth:"1985-11-30",gender:"male",nationality:"Kenyan",idNumber:"25987654",passportNumber:"",profilePhoto:null,maritalStatus:"married",religion:"Christian",nextOfKin:{name:"Susan Otieno",relationship:"spouse",phone:"+254744567890",email:"susan.otieno@email.com",address:"Kisumu, Kenya"}},contactInfo:{primaryPhone:"+254734567890",secondaryPhone:"+254744567890",email:"david.otieno@moveease.co.ke",alternateEmail:"dotieno@gmail.com",whatsappNumber:"+254734567890",address:{street:"321 Mombasa Road",apartment:"House 8A",city:"Nairobi",state:"Nairobi County",postalCode:"00100",country:"Kenya",coordinates:{latitude:-1.3197,longitude:36.8312}}},employmentInfo:{role:ye.DRIVER,department:Mt.OPERATIONS,employmentType:gt.FULL_TIME,hireDate:"2021-06-01T00:00:00.000Z",probationEndDate:"2021-09-01T00:00:00.000Z",contractEndDate:null,reportingManager:"staff_1703123456789_abc123def",workLocation:"Field Operations",jobDescription:"Drive company vehicles, transport moving teams and equipment, ensure safe delivery",responsibilities:["Drive company trucks safely","Transport moving teams to job sites","Assist with loading and unloading","Maintain vehicle cleanliness","Report vehicle issues promptly"],skills:["Professional Driving","Vehicle Maintenance","Safety Compliance","Customer Service"],certifications:["Commercial Driving License","Defensive Driving Certificate"]},payrollInfo:{basicSalary:38e3,currency:"KSH",payrollFrequency:ss.MONTHLY,paymentMethod:as.MPESA,mpesaNumber:"+254734567890",bankDetails:{bankName:"Cooperative Bank",accountNumber:"5432167890",branchCode:"011",swiftCode:"KCOOKENA"},taxNumber:"A456789123P",nhifNumber:"NH456789",nssfNumber:"NS456789",allowances:[{id:"allow_5",name:"Transport Allowance",amount:1e4,frequency:"monthly",taxable:!0},{id:"allow_6",name:"Fuel Allowance",amount:5e3,frequency:"monthly",taxable:!0}],deductions:[]},scheduleInfo:{shiftType:ts.FLEXIBLE,workingDays:["monday","tuesday","wednesday","thursday","friday","saturday"],startTime:"07:00",endTime:"18:00",breakDuration:60,overtimeRate:1.5,weeklyHours:48,flexibleSchedule:!0},performanceInfo:{currentRating:4.5,lastReviewDate:"2023-06-01T00:00:00.000Z",nextReviewDate:"2024-06-01T00:00:00.000Z",goals:[{id:"goal_3",title:"Zero Accidents",description:"Maintain perfect safety record for the year",targetDate:"2024-12-31T00:00:00.000Z",status:"in_progress",progress:90}],achievements:[{id:"ach_2",title:"Safe Driver Award",description:"3 years without accidents",date:"2024-01-01T00:00:00.000Z",category:"award"}],disciplinaryActions:[]},attendanceInfo:{totalWorkingDays:26,daysPresent:25,daysAbsent:1,lateArrivals:0,earlyDepartures:0,overtimeHours:12,attendanceRate:96.2,punctualityRate:100},leaveInfo:{annualLeaveEntitlement:21,annualLeaveUsed:7,annualLeaveBalance:14,sickLeaveUsed:1,otherLeaveUsed:0,leaveHistory:[]},trainingInfo:{completedTrainings:[{id:"train_3",name:"Defensive Driving Course",provider:"AA Kenya",completionDate:"2023-08-15T00:00:00.000Z",certificateUrl:"",expiryDate:"2025-08-15T00:00:00.000Z",score:95}],ongoingTrainings:[],requiredTrainings:[]},documents:[],accessControl:{permissions:["access_assigned_moves","update_move_status","view_schedule"],canAccessCustomers:!1,canAccessFinance:!1,canAccessReports:!1,canManageStaff:!1,canProcessPayroll:!1,lastLoginAt:"2024-02-15T07:30:00.000Z",loginAttempts:0,accountLocked:!1,passwordLastChanged:"2023-11-01T00:00:00.000Z",twoFactorEnabled:!1},emergencyInfo:{medicalConditions:"",allergies:"",medications:"",bloodType:"B+",emergencyContact:{name:"Susan Otieno",relationship:"spouse",phone:"+254744567890",email:"susan.otieno@email.com",address:"Kisumu, Kenya"},hospitalPreference:"Aga Khan Hospital",insuranceProvider:"Jubilee Insurance",insuranceNumber:"JUB456789"},systemInfo:{createdAt:"2021-06-01T00:00:00.000Z",createdBy:"HR System",updatedAt:"2024-02-15T00:00:00.000Z",updatedBy:"HR System",onboardingCompleted:!0,onboardingDate:"2021-06-05T00:00:00.000Z",offboardingDate:null,offboardingReason:"",notes:[{id:"note_2",content:"Reliable driver with excellent safety record",type:"general",createdBy:"Operations Manager",createdAt:"2024-01-01T00:00:00.000Z",isPrivate:!0}]}}],ro=()=>{try{const s=localStorage.getItem("moveease_staff");return!s||JSON.parse(s).length===0?(localStorage.setItem("moveease_staff",JSON.stringify(ao)),console.log("Sample staff data loaded successfully"),!0):(console.log("Staff data already exists"),!1)}catch(s){return console.error("Error loading sample staff:",s),!1}};class no{constructor(){ro(),this.staff=this.loadStaff(),this.nextEmployeeNumber=this.getNextEmployeeNumber()}loadStaff(){try{const t=localStorage.getItem("moveease_staff");return t?JSON.parse(t):[]}catch(t){return console.error("Error loading staff:",t),[]}}saveStaff(){try{return localStorage.setItem("moveease_staff",JSON.stringify(this.staff)),!0}catch(t){return console.error("Error saving staff:",t),!1}}getNextEmployeeNumber(){return this.staff.reduce((a,r)=>{const n=parseInt(r.employeeNumber.replace("EMP",""));return n>a?n:a},1e3)+1}generateStaffId(){return"staff_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}validateStaff(t){var r,n,i;const a={};return Yt.required.forEach(l=>{const o=this.getNestedValue(t,l);(!o||typeof o=="string"&&!o.trim())&&(a[l]=`${l} is required`)}),(r=t.contactInfo)!=null&&r.email&&(Yt.email.test(t.contactInfo.email)||(a.email="Invalid email format")),(n=t.contactInfo)!=null&&n.primaryPhone&&(Yt.phone.test(t.contactInfo.primaryPhone)||(a.primaryPhone="Invalid phone number format")),(i=t.personalInfo)!=null&&i.idNumber&&(Yt.idNumber.test(t.personalInfo.idNumber)||(a.idNumber="Invalid ID number format")),{isValid:Object.keys(a).length===0,errors:a}}getNestedValue(t,a){return a.split(".").reduce((r,n)=>r==null?void 0:r[n],t)}async createStaff(t){var a;try{const r=this.validateStaff(t);if(!r.isValid)throw new Error(`Validation failed: ${JSON.stringify(r.errors)}`);if(this.staff.find(l=>{var o,c;return l.contactInfo.email===((o=t.contactInfo)==null?void 0:o.email)||l.contactInfo.primaryPhone===((c=t.contactInfo)==null?void 0:c.primaryPhone)}))throw new Error("Staff member with this email or phone already exists");const i={...Ps,id:this.generateStaffId(),employeeNumber:`EMP${this.nextEmployeeNumber.toString().padStart(4,"0")}`,...t,accessControl:{...Ps.accessControl,permissions:ba[(a=t.employmentInfo)==null?void 0:a.role]||[]},systemInfo:{...Ps.systemInfo,createdAt:new Date().toISOString(),createdBy:"system",updatedAt:new Date().toISOString(),updatedBy:"system"}};return this.staff.push(i),this.nextEmployeeNumber++,this.saveStaff(),{success:!0,data:i,message:"Staff member created successfully"}}catch(r){return{success:!1,error:r.message,message:"Failed to create staff member"}}}getStaffById(t){try{const a=this.staff.find(r=>r.id===t);if(!a)throw new Error("Staff member not found");return{success:!0,data:a}}catch(a){return{success:!1,error:a.message}}}getStaffByEmployeeNumber(t){try{const a=this.staff.find(r=>r.employeeNumber===t);if(!a)throw new Error("Staff member not found");return{success:!0,data:a}}catch(a){return{success:!1,error:a.message}}}async updateStaff(t,a){var r;try{const n=this.staff.findIndex(o=>o.id===t);if(n===-1)throw new Error("Staff member not found");const i={...this.staff[n],...a},l=this.validateStaff(i);if(!l.isValid)throw new Error(`Validation failed: ${JSON.stringify(l.errors)}`);return(r=a.employmentInfo)!=null&&r.role&&(a.accessControl={...this.staff[n].accessControl,permissions:ba[a.employmentInfo.role]||[]}),this.staff[n]={...this.staff[n],...a,systemInfo:{...this.staff[n].systemInfo,updatedAt:new Date().toISOString(),updatedBy:"system"}},this.saveStaff(),{success:!0,data:this.staff[n],message:"Staff member updated successfully"}}catch(n){return{success:!1,error:n.message,message:"Failed to update staff member"}}}async deleteStaff(t){try{const a=this.staff.findIndex(r=>r.id===t);if(a===-1)throw new Error("Staff member not found");return this.staff[a].status=ce.TERMINATED,this.staff[a].systemInfo.updatedAt=new Date().toISOString(),this.staff[a].systemInfo.updatedBy="system",this.staff[a].systemInfo.offboardingDate=new Date().toISOString(),this.saveStaff(),{success:!0,message:"Staff member deleted successfully"}}catch(a){return{success:!1,error:a.message,message:"Failed to delete staff member"}}}getStaff(t={}){try{let a=[...this.staff];if(t.status&&(a=a.filter(c=>c.status===t.status)),t.role&&(a=a.filter(c=>c.employmentInfo.role===t.role)),t.department&&(a=a.filter(c=>c.employmentInfo.department===t.department)),t.employmentType&&(a=a.filter(c=>c.employmentInfo.employmentType===t.employmentType)),t.search){const c=t.search.toLowerCase();a=a.filter(d=>d.personalInfo.firstName.toLowerCase().includes(c)||d.personalInfo.lastName.toLowerCase().includes(c)||d.contactInfo.email.toLowerCase().includes(c)||d.contactInfo.primaryPhone.includes(c)||d.employeeNumber.toLowerCase().includes(c))}t.sortBy&&a.sort((c,d)=>{const u=this.getNestedValue(c,t.sortBy),b=this.getNestedValue(d,t.sortBy);return t.sortOrder==="desc"?b>u?1:-1:u>b?1:-1});const r=t.page||1,n=t.limit||10,i=(r-1)*n,l=i+n;return{success:!0,data:a.slice(i,l),pagination:{page:r,limit:n,total:a.length,totalPages:Math.ceil(a.length/n),hasNext:l<a.length,hasPrev:r>1}}}catch(a){return{success:!1,error:a.message,message:"Failed to fetch staff"}}}getStaffByDepartment(t){return this.getStaff({department:t})}getStaffByRole(t){return this.getStaff({role:t})}getStaffStats(){try{const t={total:this.staff.length,active:this.staff.filter(a=>a.status===ce.ACTIVE).length,inactive:this.staff.filter(a=>a.status===ce.INACTIVE).length,onLeave:this.staff.filter(a=>a.status===ce.ON_LEAVE).length,probation:this.staff.filter(a=>a.status===ce.PROBATION).length,byDepartment:{},byRole:{},byEmploymentType:{},totalSalaryBudget:0,averageSalary:0};return this.staff.forEach(a=>{const r=a.employmentInfo.department;t.byDepartment[r]=(t.byDepartment[r]||0)+1;const n=a.employmentInfo.role;t.byRole[n]=(t.byRole[n]||0)+1;const i=a.employmentInfo.employmentType;t.byEmploymentType[i]=(t.byEmploymentType[i]||0)+1,t.totalSalaryBudget+=a.payrollInfo.basicSalary||0}),t.averageSalary=t.total>0?t.totalSalaryBudget/t.total:0,{success:!0,data:t}}catch(t){return{success:!1,error:t.message}}}addLeaveRequest(t,a){try{const r=this.staff.findIndex(i=>i.id===t);if(r===-1)throw new Error("Staff member not found");const n={id:"leave_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),...a,appliedDate:new Date().toISOString(),status:"pending"};return this.staff[r].leaveInfo.leaveHistory.push(n),this.saveStaff(),{success:!0,data:n,message:"Leave request submitted successfully"}}catch(r){return{success:!1,error:r.message}}}updateLeaveRequest(t,a,r,n){try{const i=this.staff.findIndex(o=>o.id===t);if(i===-1)throw new Error("Staff member not found");const l=this.staff[i].leaveInfo.leaveHistory.findIndex(o=>o.id===a);if(l===-1)throw new Error("Leave request not found");if(this.staff[i].leaveInfo.leaveHistory[l].status=r,this.staff[i].leaveInfo.leaveHistory[l].approvedBy=n,this.staff[i].leaveInfo.leaveHistory[l].approvalDate=new Date().toISOString(),r==="approved"){const o=this.staff[i].leaveInfo.leaveHistory[l];o.type==="annual"?(this.staff[i].leaveInfo.annualLeaveUsed+=o.days,this.staff[i].leaveInfo.annualLeaveBalance-=o.days):o.type==="sick"?this.staff[i].leaveInfo.sickLeaveUsed+=o.days:this.staff[i].leaveInfo.otherLeaveUsed+=o.days}return this.saveStaff(),{success:!0,message:`Leave request ${r} successfully`}}catch(i){return{success:!1,error:i.message}}}addTraining(t,a){try{const r=this.staff.findIndex(i=>i.id===t);if(r===-1)throw new Error("Staff member not found");const n={id:"training_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),...a};return a.status==="completed"?this.staff[r].trainingInfo.completedTrainings.push(n):this.staff[r].trainingInfo.ongoingTrainings.push(n),this.saveStaff(),{success:!0,data:n,message:"Training record added successfully"}}catch(r){return{success:!1,error:r.message}}}exportStaff(t="json"){try{const a=this.staff.map(r=>({employeeNumber:r.employeeNumber,name:`${r.personalInfo.firstName} ${r.personalInfo.lastName}`,email:r.contactInfo.email,phone:r.contactInfo.primaryPhone,role:r.employmentInfo.role,department:r.employmentInfo.department,status:r.status,hireDate:r.employmentInfo.hireDate,basicSalary:r.payrollInfo.basicSalary,paymentMethod:r.payrollInfo.paymentMethod}));if(t==="csv"){const r=Object.keys(a[0]||{});return{success:!0,data:[r.join(","),...a.map(i=>r.map(l=>`"${i[l]||""}"`).join(","))].join(`
`),filename:`staff_export_${new Date().toISOString().split("T")[0]}.csv`}}return{success:!0,data:JSON.stringify(a,null,2),filename:`staff_export_${new Date().toISOString().split("T")[0]}.json`}}catch(a){return{success:!1,error:a.message}}}hasPermission(t,a){try{const r=this.staff.find(n=>n.id===t);return r?r.accessControl.permissions.includes(a):!1}catch{return!1}}getStaffForPayroll(t=new Date){try{return{success:!0,data:this.staff.filter(r=>r.status===ce.ACTIVE||r.status===ce.ON_LEAVE).map(r=>({id:r.id,employeeNumber:r.employeeNumber,name:`${r.personalInfo.firstName} ${r.personalInfo.lastName}`,department:r.employmentInfo.department,role:r.employmentInfo.role,basicSalary:r.payrollInfo.basicSalary,allowances:r.payrollInfo.allowances,deductions:r.payrollInfo.deductions,paymentMethod:r.payrollInfo.paymentMethod,mpesaNumber:r.payrollInfo.mpesaNumber,bankDetails:r.payrollInfo.bankDetails,taxNumber:r.payrollInfo.taxNumber}))}}catch(a){return{success:!1,error:a.message}}}}const Ve=new no;function xr(s,t){return function(){return s.apply(t,arguments)}}const{toString:io}=Object.prototype,{getPrototypeOf:Ws}=Object,{iterator:ys,toStringTag:pr}=Symbol,fs=(s=>t=>{const a=io.call(t);return s[a]||(s[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),He=s=>(s=s.toLowerCase(),t=>fs(t)===s),bs=s=>t=>typeof t===s,{isArray:Pt}=Array,Ut=bs("undefined");function Bt(s){return s!==null&&!Ut(s)&&s.constructor!==null&&!Ut(s.constructor)&&ke(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const gr=He("ArrayBuffer");function lo(s){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(s):t=s&&s.buffer&&gr(s.buffer),t}const oo=bs("string"),ke=bs("function"),hr=bs("number"),zt=s=>s!==null&&typeof s=="object",co=s=>s===!0||s===!1,rs=s=>{if(fs(s)!=="object")return!1;const t=Ws(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(pr in s)&&!(ys in s)},mo=s=>{if(!zt(s)||Bt(s))return!1;try{return Object.keys(s).length===0&&Object.getPrototypeOf(s)===Object.prototype}catch{return!1}},uo=He("Date"),xo=He("File"),po=He("Blob"),go=He("FileList"),ho=s=>zt(s)&&ke(s.pipe),yo=s=>{let t;return s&&(typeof FormData=="function"&&s instanceof FormData||ke(s.append)&&((t=fs(s))==="formdata"||t==="object"&&ke(s.toString)&&s.toString()==="[object FormData]"))},fo=He("URLSearchParams"),[bo,vo,jo,No]=["ReadableStream","Request","Response","Headers"].map(He),wo=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Gt(s,t,{allOwnKeys:a=!1}={}){if(s===null||typeof s>"u")return;let r,n;if(typeof s!="object"&&(s=[s]),Pt(s))for(r=0,n=s.length;r<n;r++)t.call(null,s[r],r,s);else{if(Bt(s))return;const i=a?Object.getOwnPropertyNames(s):Object.keys(s),l=i.length;let o;for(r=0;r<l;r++)o=i[r],t.call(null,s[o],o,s)}}function yr(s,t){if(Bt(s))return null;t=t.toLowerCase();const a=Object.keys(s);let r=a.length,n;for(;r-- >0;)if(n=a[r],t===n.toLowerCase())return n;return null}const xt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,fr=s=>!Ut(s)&&s!==xt;function Us(){const{caseless:s}=fr(this)&&this||{},t={},a=(r,n)=>{const i=s&&yr(t,n)||n;rs(t[i])&&rs(r)?t[i]=Us(t[i],r):rs(r)?t[i]=Us({},r):Pt(r)?t[i]=r.slice():t[i]=r};for(let r=0,n=arguments.length;r<n;r++)arguments[r]&&Gt(arguments[r],a);return t}const So=(s,t,a,{allOwnKeys:r}={})=>(Gt(t,(n,i)=>{a&&ke(n)?s[i]=xr(n,a):s[i]=n},{allOwnKeys:r}),s),Co=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),Eo=(s,t,a,r)=>{s.prototype=Object.create(t.prototype,r),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:t.prototype}),a&&Object.assign(s.prototype,a)},To=(s,t,a,r)=>{let n,i,l;const o={};if(t=t||{},s==null)return t;do{for(n=Object.getOwnPropertyNames(s),i=n.length;i-- >0;)l=n[i],(!r||r(l,s,t))&&!o[l]&&(t[l]=s[l],o[l]=!0);s=a!==!1&&Ws(s)}while(s&&(!a||a(s,t))&&s!==Object.prototype);return t},Po=(s,t,a)=>{s=String(s),(a===void 0||a>s.length)&&(a=s.length),a-=t.length;const r=s.indexOf(t,a);return r!==-1&&r===a},Ao=s=>{if(!s)return null;if(Pt(s))return s;let t=s.length;if(!hr(t))return null;const a=new Array(t);for(;t-- >0;)a[t]=s[t];return a},Io=(s=>t=>s&&t instanceof s)(typeof Uint8Array<"u"&&Ws(Uint8Array)),ko=(s,t)=>{const r=(s&&s[ys]).call(s);let n;for(;(n=r.next())&&!n.done;){const i=n.value;t.call(s,i[0],i[1])}},Do=(s,t)=>{let a;const r=[];for(;(a=s.exec(t))!==null;)r.push(a);return r},Ro=He("HTMLFormElement"),Oo=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,r,n){return r.toUpperCase()+n}),va=(({hasOwnProperty:s})=>(t,a)=>s.call(t,a))(Object.prototype),_o=He("RegExp"),br=(s,t)=>{const a=Object.getOwnPropertyDescriptors(s),r={};Gt(a,(n,i)=>{let l;(l=t(n,i,s))!==!1&&(r[i]=l||n)}),Object.defineProperties(s,r)},Lo=s=>{br(s,(t,a)=>{if(ke(s)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const r=s[a];if(ke(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},Mo=(s,t)=>{const a={},r=n=>{n.forEach(i=>{a[i]=!0})};return Pt(s)?r(s):r(String(s).split(t)),a},Fo=()=>{},Uo=(s,t)=>s!=null&&Number.isFinite(s=+s)?s:t;function Bo(s){return!!(s&&ke(s.append)&&s[pr]==="FormData"&&s[ys])}const zo=s=>{const t=new Array(10),a=(r,n)=>{if(zt(r)){if(t.indexOf(r)>=0)return;if(Bt(r))return r;if(!("toJSON"in r)){t[n]=r;const i=Pt(r)?[]:{};return Gt(r,(l,o)=>{const c=a(l,n+1);!Ut(c)&&(i[o]=c)}),t[n]=void 0,i}}return r};return a(s,0)},Go=He("AsyncFunction"),$o=s=>s&&(zt(s)||ke(s))&&ke(s.then)&&ke(s.catch),vr=((s,t)=>s?setImmediate:t?((a,r)=>(xt.addEventListener("message",({source:n,data:i})=>{n===xt&&i===a&&r.length&&r.shift()()},!1),n=>{r.push(n),xt.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",ke(xt.postMessage)),Ho=typeof queueMicrotask<"u"?queueMicrotask.bind(xt):typeof process<"u"&&process.nextTick||vr,qo=s=>s!=null&&ke(s[ys]),_={isArray:Pt,isArrayBuffer:gr,isBuffer:Bt,isFormData:yo,isArrayBufferView:lo,isString:oo,isNumber:hr,isBoolean:co,isObject:zt,isPlainObject:rs,isEmptyObject:mo,isReadableStream:bo,isRequest:vo,isResponse:jo,isHeaders:No,isUndefined:Ut,isDate:uo,isFile:xo,isBlob:po,isRegExp:_o,isFunction:ke,isStream:ho,isURLSearchParams:fo,isTypedArray:Io,isFileList:go,forEach:Gt,merge:Us,extend:So,trim:wo,stripBOM:Co,inherits:Eo,toFlatObject:To,kindOf:fs,kindOfTest:He,endsWith:Po,toArray:Ao,forEachEntry:ko,matchAll:Do,isHTMLForm:Ro,hasOwnProperty:va,hasOwnProp:va,reduceDescriptors:br,freezeMethods:Lo,toObjectSet:Mo,toCamelCase:Oo,noop:Fo,toFiniteNumber:Uo,findKey:yr,global:xt,isContextDefined:fr,isSpecCompliantForm:Bo,toJSONObject:zo,isAsyncFn:Go,isThenable:$o,setImmediate:vr,asap:Ho,isIterable:qo};function te(s,t,a,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",t&&(this.code=t),a&&(this.config=a),r&&(this.request=r),n&&(this.response=n,this.status=n.status?n.status:null)}_.inherits(te,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_.toJSONObject(this.config),code:this.code,status:this.status}}});const jr=te.prototype,Nr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{Nr[s]={value:s}});Object.defineProperties(te,Nr);Object.defineProperty(jr,"isAxiosError",{value:!0});te.from=(s,t,a,r,n,i)=>{const l=Object.create(jr);return _.toFlatObject(s,l,function(c){return c!==Error.prototype},o=>o!=="isAxiosError"),te.call(l,s.message,t,a,r,n),l.cause=s,l.name=s.name,i&&Object.assign(l,i),l};const Vo=null;function Bs(s){return _.isPlainObject(s)||_.isArray(s)}function wr(s){return _.endsWith(s,"[]")?s.slice(0,-2):s}function ja(s,t,a){return s?s.concat(t).map(function(n,i){return n=wr(n),!a&&i?"["+n+"]":n}).join(a?".":""):t}function Ko(s){return _.isArray(s)&&!s.some(Bs)}const Wo=_.toFlatObject(_,{},null,function(t){return/^is[A-Z]/.test(t)});function vs(s,t,a){if(!_.isObject(s))throw new TypeError("target must be an object");t=t||new FormData,a=_.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,x){return!_.isUndefined(x[p])});const r=a.metaTokens,n=a.visitor||u,i=a.dots,l=a.indexes,c=(a.Blob||typeof Blob<"u"&&Blob)&&_.isSpecCompliantForm(t);if(!_.isFunction(n))throw new TypeError("visitor must be a function");function d(g){if(g===null)return"";if(_.isDate(g))return g.toISOString();if(_.isBoolean(g))return g.toString();if(!c&&_.isBlob(g))throw new te("Blob is not supported. Use a Buffer instead.");return _.isArrayBuffer(g)||_.isTypedArray(g)?c&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,p,x){let m=g;if(g&&!x&&typeof g=="object"){if(_.endsWith(p,"{}"))p=r?p:p.slice(0,-2),g=JSON.stringify(g);else if(_.isArray(g)&&Ko(g)||(_.isFileList(g)||_.endsWith(p,"[]"))&&(m=_.toArray(g)))return p=wr(p),m.forEach(function(S,y){!(_.isUndefined(S)||S===null)&&t.append(l===!0?ja([p],y,i):l===null?p:p+"[]",d(S))}),!1}return Bs(g)?!0:(t.append(ja(x,p,i),d(g)),!1)}const b=[],C=Object.assign(Wo,{defaultVisitor:u,convertValue:d,isVisitable:Bs});function w(g,p){if(!_.isUndefined(g)){if(b.indexOf(g)!==-1)throw Error("Circular reference detected in "+p.join("."));b.push(g),_.forEach(g,function(m,j){(!(_.isUndefined(m)||m===null)&&n.call(t,m,_.isString(j)?j.trim():j,p,C))===!0&&w(m,p?p.concat(j):[j])}),b.pop()}}if(!_.isObject(s))throw new TypeError("data must be an object");return w(s),t}function Na(s){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Ys(s,t){this._pairs=[],s&&vs(s,this,t)}const Sr=Ys.prototype;Sr.append=function(t,a){this._pairs.push([t,a])};Sr.toString=function(t){const a=t?function(r){return t.call(this,r,Na)}:Na;return this._pairs.map(function(n){return a(n[0])+"="+a(n[1])},"").join("&")};function Yo(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Cr(s,t,a){if(!t)return s;const r=a&&a.encode||Yo;_.isFunction(a)&&(a={serialize:a});const n=a&&a.serialize;let i;if(n?i=n(t,a):i=_.isURLSearchParams(t)?t.toString():new Ys(t,a).toString(r),i){const l=s.indexOf("#");l!==-1&&(s=s.slice(0,l)),s+=(s.indexOf("?")===-1?"?":"&")+i}return s}class wa{constructor(){this.handlers=[]}use(t,a,r){return this.handlers.push({fulfilled:t,rejected:a,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){_.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Er={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Jo=typeof URLSearchParams<"u"?URLSearchParams:Ys,Qo=typeof FormData<"u"?FormData:null,Zo=typeof Blob<"u"?Blob:null,Xo={isBrowser:!0,classes:{URLSearchParams:Jo,FormData:Qo,Blob:Zo},protocols:["http","https","file","blob","url","data"]},Js=typeof window<"u"&&typeof document<"u",zs=typeof navigator=="object"&&navigator||void 0,ec=Js&&(!zs||["ReactNative","NativeScript","NS"].indexOf(zs.product)<0),tc=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",sc=Js&&window.location.href||"http://localhost",ac=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Js,hasStandardBrowserEnv:ec,hasStandardBrowserWebWorkerEnv:tc,navigator:zs,origin:sc},Symbol.toStringTag,{value:"Module"})),Ee={...ac,...Xo};function rc(s,t){return vs(s,new Ee.classes.URLSearchParams,{visitor:function(a,r,n,i){return Ee.isNode&&_.isBuffer(a)?(this.append(r,a.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function nc(s){return _.matchAll(/\w+|\[(\w*)]/g,s).map(t=>t[0]==="[]"?"":t[1]||t[0])}function ic(s){const t={},a=Object.keys(s);let r;const n=a.length;let i;for(r=0;r<n;r++)i=a[r],t[i]=s[i];return t}function Tr(s){function t(a,r,n,i){let l=a[i++];if(l==="__proto__")return!0;const o=Number.isFinite(+l),c=i>=a.length;return l=!l&&_.isArray(n)?n.length:l,c?(_.hasOwnProp(n,l)?n[l]=[n[l],r]:n[l]=r,!o):((!n[l]||!_.isObject(n[l]))&&(n[l]=[]),t(a,r,n[l],i)&&_.isArray(n[l])&&(n[l]=ic(n[l])),!o)}if(_.isFormData(s)&&_.isFunction(s.entries)){const a={};return _.forEachEntry(s,(r,n)=>{t(nc(r),n,a,0)}),a}return null}function lc(s,t,a){if(_.isString(s))try{return(t||JSON.parse)(s),_.trim(s)}catch(r){if(r.name!=="SyntaxError")throw r}return(a||JSON.stringify)(s)}const $t={transitional:Er,adapter:["xhr","http","fetch"],transformRequest:[function(t,a){const r=a.getContentType()||"",n=r.indexOf("application/json")>-1,i=_.isObject(t);if(i&&_.isHTMLForm(t)&&(t=new FormData(t)),_.isFormData(t))return n?JSON.stringify(Tr(t)):t;if(_.isArrayBuffer(t)||_.isBuffer(t)||_.isStream(t)||_.isFile(t)||_.isBlob(t)||_.isReadableStream(t))return t;if(_.isArrayBufferView(t))return t.buffer;if(_.isURLSearchParams(t))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return rc(t,this.formSerializer).toString();if((o=_.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return vs(o?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||n?(a.setContentType("application/json",!1),lc(t)):t}],transformResponse:[function(t){const a=this.transitional||$t.transitional,r=a&&a.forcedJSONParsing,n=this.responseType==="json";if(_.isResponse(t)||_.isReadableStream(t))return t;if(t&&_.isString(t)&&(r&&!this.responseType||n)){const l=!(a&&a.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(o){if(l)throw o.name==="SyntaxError"?te.from(o,te.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ee.classes.FormData,Blob:Ee.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};_.forEach(["delete","get","head","post","put","patch"],s=>{$t.headers[s]={}});const oc=_.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),cc=s=>{const t={};let a,r,n;return s&&s.split(`
`).forEach(function(l){n=l.indexOf(":"),a=l.substring(0,n).trim().toLowerCase(),r=l.substring(n+1).trim(),!(!a||t[a]&&oc[a])&&(a==="set-cookie"?t[a]?t[a].push(r):t[a]=[r]:t[a]=t[a]?t[a]+", "+r:r)}),t},Sa=Symbol("internals");function Rt(s){return s&&String(s).trim().toLowerCase()}function ns(s){return s===!1||s==null?s:_.isArray(s)?s.map(ns):String(s)}function dc(s){const t=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=a.exec(s);)t[r[1]]=r[2];return t}const mc=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function As(s,t,a,r,n){if(_.isFunction(r))return r.call(this,t,a);if(n&&(t=a),!!_.isString(t)){if(_.isString(r))return t.indexOf(r)!==-1;if(_.isRegExp(r))return r.test(t)}}function uc(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,a,r)=>a.toUpperCase()+r)}function xc(s,t){const a=_.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(s,r+a,{value:function(n,i,l){return this[r].call(this,t,n,i,l)},configurable:!0})})}let De=class{constructor(t){t&&this.set(t)}set(t,a,r){const n=this;function i(o,c,d){const u=Rt(c);if(!u)throw new Error("header name must be a non-empty string");const b=_.findKey(n,u);(!b||n[b]===void 0||d===!0||d===void 0&&n[b]!==!1)&&(n[b||c]=ns(o))}const l=(o,c)=>_.forEach(o,(d,u)=>i(d,u,c));if(_.isPlainObject(t)||t instanceof this.constructor)l(t,a);else if(_.isString(t)&&(t=t.trim())&&!mc(t))l(cc(t),a);else if(_.isObject(t)&&_.isIterable(t)){let o={},c,d;for(const u of t){if(!_.isArray(u))throw TypeError("Object iterator must return a key-value pair");o[d=u[0]]=(c=o[d])?_.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}l(o,a)}else t!=null&&i(a,t,r);return this}get(t,a){if(t=Rt(t),t){const r=_.findKey(this,t);if(r){const n=this[r];if(!a)return n;if(a===!0)return dc(n);if(_.isFunction(a))return a.call(this,n,r);if(_.isRegExp(a))return a.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,a){if(t=Rt(t),t){const r=_.findKey(this,t);return!!(r&&this[r]!==void 0&&(!a||As(this,this[r],r,a)))}return!1}delete(t,a){const r=this;let n=!1;function i(l){if(l=Rt(l),l){const o=_.findKey(r,l);o&&(!a||As(r,r[o],o,a))&&(delete r[o],n=!0)}}return _.isArray(t)?t.forEach(i):i(t),n}clear(t){const a=Object.keys(this);let r=a.length,n=!1;for(;r--;){const i=a[r];(!t||As(this,this[i],i,t,!0))&&(delete this[i],n=!0)}return n}normalize(t){const a=this,r={};return _.forEach(this,(n,i)=>{const l=_.findKey(r,i);if(l){a[l]=ns(n),delete a[i];return}const o=t?uc(i):String(i).trim();o!==i&&delete a[i],a[o]=ns(n),r[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const a=Object.create(null);return _.forEach(this,(r,n)=>{r!=null&&r!==!1&&(a[n]=t&&_.isArray(r)?r.join(", "):r)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,a])=>t+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...a){const r=new this(t);return a.forEach(n=>r.set(n)),r}static accessor(t){const r=(this[Sa]=this[Sa]={accessors:{}}).accessors,n=this.prototype;function i(l){const o=Rt(l);r[o]||(xc(n,l),r[o]=!0)}return _.isArray(t)?t.forEach(i):i(t),this}};De.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);_.reduceDescriptors(De.prototype,({value:s},t)=>{let a=t[0].toUpperCase()+t.slice(1);return{get:()=>s,set(r){this[a]=r}}});_.freezeMethods(De);function Is(s,t){const a=this||$t,r=t||a,n=De.from(r.headers);let i=r.data;return _.forEach(s,function(o){i=o.call(a,i,n.normalize(),t?t.status:void 0)}),n.normalize(),i}function Pr(s){return!!(s&&s.__CANCEL__)}function At(s,t,a){te.call(this,s??"canceled",te.ERR_CANCELED,t,a),this.name="CanceledError"}_.inherits(At,te,{__CANCEL__:!0});function Ar(s,t,a){const r=a.config.validateStatus;!a.status||!r||r(a.status)?s(a):t(new te("Request failed with status code "+a.status,[te.ERR_BAD_REQUEST,te.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function pc(s){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return t&&t[1]||""}function gc(s,t){s=s||10;const a=new Array(s),r=new Array(s);let n=0,i=0,l;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=r[i];l||(l=d),a[n]=c,r[n]=d;let b=i,C=0;for(;b!==n;)C+=a[b++],b=b%s;if(n=(n+1)%s,n===i&&(i=(i+1)%s),d-l<t)return;const w=u&&d-u;return w?Math.round(C*1e3/w):void 0}}function hc(s,t){let a=0,r=1e3/t,n,i;const l=(d,u=Date.now())=>{a=u,n=null,i&&(clearTimeout(i),i=null),s(...d)};return[(...d)=>{const u=Date.now(),b=u-a;b>=r?l(d,u):(n=d,i||(i=setTimeout(()=>{i=null,l(n)},r-b)))},()=>n&&l(n)]}const os=(s,t,a=3)=>{let r=0;const n=gc(50,250);return hc(i=>{const l=i.loaded,o=i.lengthComputable?i.total:void 0,c=l-r,d=n(c),u=l<=o;r=l;const b={loaded:l,total:o,progress:o?l/o:void 0,bytes:c,rate:d||void 0,estimated:d&&o&&u?(o-l)/d:void 0,event:i,lengthComputable:o!=null,[t?"download":"upload"]:!0};s(b)},a)},Ca=(s,t)=>{const a=s!=null;return[r=>t[0]({lengthComputable:a,total:s,loaded:r}),t[1]]},Ea=s=>(...t)=>_.asap(()=>s(...t)),yc=Ee.hasStandardBrowserEnv?((s,t)=>a=>(a=new URL(a,Ee.origin),s.protocol===a.protocol&&s.host===a.host&&(t||s.port===a.port)))(new URL(Ee.origin),Ee.navigator&&/(msie|trident)/i.test(Ee.navigator.userAgent)):()=>!0,fc=Ee.hasStandardBrowserEnv?{write(s,t,a,r,n,i){const l=[s+"="+encodeURIComponent(t)];_.isNumber(a)&&l.push("expires="+new Date(a).toGMTString()),_.isString(r)&&l.push("path="+r),_.isString(n)&&l.push("domain="+n),i===!0&&l.push("secure"),document.cookie=l.join("; ")},read(s){const t=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(s){this.write(s,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function bc(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function vc(s,t){return t?s.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):s}function Ir(s,t,a){let r=!bc(t);return s&&(r||a==!1)?vc(s,t):t}const Ta=s=>s instanceof De?{...s}:s;function yt(s,t){t=t||{};const a={};function r(d,u,b,C){return _.isPlainObject(d)&&_.isPlainObject(u)?_.merge.call({caseless:C},d,u):_.isPlainObject(u)?_.merge({},u):_.isArray(u)?u.slice():u}function n(d,u,b,C){if(_.isUndefined(u)){if(!_.isUndefined(d))return r(void 0,d,b,C)}else return r(d,u,b,C)}function i(d,u){if(!_.isUndefined(u))return r(void 0,u)}function l(d,u){if(_.isUndefined(u)){if(!_.isUndefined(d))return r(void 0,d)}else return r(void 0,u)}function o(d,u,b){if(b in t)return r(d,u);if(b in s)return r(void 0,d)}const c={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(d,u,b)=>n(Ta(d),Ta(u),b,!0)};return _.forEach(Object.keys({...s,...t}),function(u){const b=c[u]||n,C=b(s[u],t[u],u);_.isUndefined(C)&&b!==o||(a[u]=C)}),a}const kr=s=>{const t=yt({},s);let{data:a,withXSRFToken:r,xsrfHeaderName:n,xsrfCookieName:i,headers:l,auth:o}=t;t.headers=l=De.from(l),t.url=Cr(Ir(t.baseURL,t.url,t.allowAbsoluteUrls),s.params,s.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let c;if(_.isFormData(a)){if(Ee.hasStandardBrowserEnv||Ee.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((c=l.getContentType())!==!1){const[d,...u]=c?c.split(";").map(b=>b.trim()).filter(Boolean):[];l.setContentType([d||"multipart/form-data",...u].join("; "))}}if(Ee.hasStandardBrowserEnv&&(r&&_.isFunction(r)&&(r=r(t)),r||r!==!1&&yc(t.url))){const d=n&&i&&fc.read(i);d&&l.set(n,d)}return t},jc=typeof XMLHttpRequest<"u",Nc=jc&&function(s){return new Promise(function(a,r){const n=kr(s);let i=n.data;const l=De.from(n.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:d}=n,u,b,C,w,g;function p(){w&&w(),g&&g(),n.cancelToken&&n.cancelToken.unsubscribe(u),n.signal&&n.signal.removeEventListener("abort",u)}let x=new XMLHttpRequest;x.open(n.method.toUpperCase(),n.url,!0),x.timeout=n.timeout;function m(){if(!x)return;const S=De.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),A={data:!o||o==="text"||o==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:S,config:s,request:x};Ar(function(f){a(f),p()},function(f){r(f),p()},A),x=null}"onloadend"in x?x.onloadend=m:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(m)},x.onabort=function(){x&&(r(new te("Request aborted",te.ECONNABORTED,s,x)),x=null)},x.onerror=function(){r(new te("Network Error",te.ERR_NETWORK,s,x)),x=null},x.ontimeout=function(){let y=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const A=n.transitional||Er;n.timeoutErrorMessage&&(y=n.timeoutErrorMessage),r(new te(y,A.clarifyTimeoutError?te.ETIMEDOUT:te.ECONNABORTED,s,x)),x=null},i===void 0&&l.setContentType(null),"setRequestHeader"in x&&_.forEach(l.toJSON(),function(y,A){x.setRequestHeader(A,y)}),_.isUndefined(n.withCredentials)||(x.withCredentials=!!n.withCredentials),o&&o!=="json"&&(x.responseType=n.responseType),d&&([C,g]=os(d,!0),x.addEventListener("progress",C)),c&&x.upload&&([b,w]=os(c),x.upload.addEventListener("progress",b),x.upload.addEventListener("loadend",w)),(n.cancelToken||n.signal)&&(u=S=>{x&&(r(!S||S.type?new At(null,s,x):S),x.abort(),x=null)},n.cancelToken&&n.cancelToken.subscribe(u),n.signal&&(n.signal.aborted?u():n.signal.addEventListener("abort",u)));const j=pc(n.url);if(j&&Ee.protocols.indexOf(j)===-1){r(new te("Unsupported protocol "+j+":",te.ERR_BAD_REQUEST,s));return}x.send(i||null)})},wc=(s,t)=>{const{length:a}=s=s?s.filter(Boolean):[];if(t||a){let r=new AbortController,n;const i=function(d){if(!n){n=!0,o();const u=d instanceof Error?d:this.reason;r.abort(u instanceof te?u:new At(u instanceof Error?u.message:u))}};let l=t&&setTimeout(()=>{l=null,i(new te(`timeout ${t} of ms exceeded`,te.ETIMEDOUT))},t);const o=()=>{s&&(l&&clearTimeout(l),l=null,s.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),s=null)};s.forEach(d=>d.addEventListener("abort",i));const{signal:c}=r;return c.unsubscribe=()=>_.asap(o),c}},Sc=function*(s,t){let a=s.byteLength;if(a<t){yield s;return}let r=0,n;for(;r<a;)n=r+t,yield s.slice(r,n),r=n},Cc=async function*(s,t){for await(const a of Ec(s))yield*Sc(a,t)},Ec=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const t=s.getReader();try{for(;;){const{done:a,value:r}=await t.read();if(a)break;yield r}}finally{await t.cancel()}},Pa=(s,t,a,r)=>{const n=Cc(s,t);let i=0,l,o=c=>{l||(l=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await n.next();if(d){o(),c.close();return}let b=u.byteLength;if(a){let C=i+=b;a(C)}c.enqueue(new Uint8Array(u))}catch(d){throw o(d),d}},cancel(c){return o(c),n.return()}},{highWaterMark:2})},js=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Dr=js&&typeof ReadableStream=="function",Tc=js&&(typeof TextEncoder=="function"?(s=>t=>s.encode(t))(new TextEncoder):async s=>new Uint8Array(await new Response(s).arrayBuffer())),Rr=(s,...t)=>{try{return!!s(...t)}catch{return!1}},Pc=Dr&&Rr(()=>{let s=!1;const t=new Request(Ee.origin,{body:new ReadableStream,method:"POST",get duplex(){return s=!0,"half"}}).headers.has("Content-Type");return s&&!t}),Aa=64*1024,Gs=Dr&&Rr(()=>_.isReadableStream(new Response("").body)),cs={stream:Gs&&(s=>s.body)};js&&(s=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!cs[t]&&(cs[t]=_.isFunction(s[t])?a=>a[t]():(a,r)=>{throw new te(`Response type '${t}' is not supported`,te.ERR_NOT_SUPPORT,r)})})})(new Response);const Ac=async s=>{if(s==null)return 0;if(_.isBlob(s))return s.size;if(_.isSpecCompliantForm(s))return(await new Request(Ee.origin,{method:"POST",body:s}).arrayBuffer()).byteLength;if(_.isArrayBufferView(s)||_.isArrayBuffer(s))return s.byteLength;if(_.isURLSearchParams(s)&&(s=s+""),_.isString(s))return(await Tc(s)).byteLength},Ic=async(s,t)=>{const a=_.toFiniteNumber(s.getContentLength());return a??Ac(t)},kc=js&&(async s=>{let{url:t,method:a,data:r,signal:n,cancelToken:i,timeout:l,onDownloadProgress:o,onUploadProgress:c,responseType:d,headers:u,withCredentials:b="same-origin",fetchOptions:C}=kr(s);d=d?(d+"").toLowerCase():"text";let w=wc([n,i&&i.toAbortSignal()],l),g;const p=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let x;try{if(c&&Pc&&a!=="get"&&a!=="head"&&(x=await Ic(u,r))!==0){let A=new Request(t,{method:"POST",body:r,duplex:"half"}),N;if(_.isFormData(r)&&(N=A.headers.get("content-type"))&&u.setContentType(N),A.body){const[f,v]=Ca(x,os(Ea(c)));r=Pa(A.body,Aa,f,v)}}_.isString(b)||(b=b?"include":"omit");const m="credentials"in Request.prototype;g=new Request(t,{...C,signal:w,method:a.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:m?b:void 0});let j=await fetch(g,C);const S=Gs&&(d==="stream"||d==="response");if(Gs&&(o||S&&p)){const A={};["status","statusText","headers"].forEach(h=>{A[h]=j[h]});const N=_.toFiniteNumber(j.headers.get("content-length")),[f,v]=o&&Ca(N,os(Ea(o),!0))||[];j=new Response(Pa(j.body,Aa,f,()=>{v&&v(),p&&p()}),A)}d=d||"text";let y=await cs[_.findKey(cs,d)||"text"](j,s);return!S&&p&&p(),await new Promise((A,N)=>{Ar(A,N,{data:y,headers:De.from(j.headers),status:j.status,statusText:j.statusText,config:s,request:g})})}catch(m){throw p&&p(),m&&m.name==="TypeError"&&/Load failed|fetch/i.test(m.message)?Object.assign(new te("Network Error",te.ERR_NETWORK,s,g),{cause:m.cause||m}):te.from(m,m&&m.code,s,g)}}),$s={http:Vo,xhr:Nc,fetch:kc};_.forEach($s,(s,t)=>{if(s){try{Object.defineProperty(s,"name",{value:t})}catch{}Object.defineProperty(s,"adapterName",{value:t})}});const Ia=s=>`- ${s}`,Dc=s=>_.isFunction(s)||s===null||s===!1,Or={getAdapter:s=>{s=_.isArray(s)?s:[s];const{length:t}=s;let a,r;const n={};for(let i=0;i<t;i++){a=s[i];let l;if(r=a,!Dc(a)&&(r=$s[(l=String(a)).toLowerCase()],r===void 0))throw new te(`Unknown adapter '${l}'`);if(r)break;n[l||"#"+i]=r}if(!r){const i=Object.entries(n).map(([o,c])=>`adapter ${o} `+(c===!1?"is not supported by the environment":"is not available in the build"));let l=t?i.length>1?`since :
`+i.map(Ia).join(`
`):" "+Ia(i[0]):"as no adapter specified";throw new te("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return r},adapters:$s};function ks(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new At(null,s)}function ka(s){return ks(s),s.headers=De.from(s.headers),s.data=Is.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),Or.getAdapter(s.adapter||$t.adapter)(s).then(function(r){return ks(s),r.data=Is.call(s,s.transformResponse,r),r.headers=De.from(r.headers),r},function(r){return Pr(r)||(ks(s),r&&r.response&&(r.response.data=Is.call(s,s.transformResponse,r.response),r.response.headers=De.from(r.response.headers))),Promise.reject(r)})}const _r="1.11.0",Ns={};["object","boolean","number","function","string","symbol"].forEach((s,t)=>{Ns[s]=function(r){return typeof r===s||"a"+(t<1?"n ":" ")+s}});const Da={};Ns.transitional=function(t,a,r){function n(i,l){return"[Axios v"+_r+"] Transitional option '"+i+"'"+l+(r?". "+r:"")}return(i,l,o)=>{if(t===!1)throw new te(n(l," has been removed"+(a?" in "+a:"")),te.ERR_DEPRECATED);return a&&!Da[l]&&(Da[l]=!0,console.warn(n(l," has been deprecated since v"+a+" and will be removed in the near future"))),t?t(i,l,o):!0}};Ns.spelling=function(t){return(a,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function Rc(s,t,a){if(typeof s!="object")throw new te("options must be an object",te.ERR_BAD_OPTION_VALUE);const r=Object.keys(s);let n=r.length;for(;n-- >0;){const i=r[n],l=t[i];if(l){const o=s[i],c=o===void 0||l(o,i,s);if(c!==!0)throw new te("option "+i+" must be "+c,te.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new te("Unknown option "+i,te.ERR_BAD_OPTION)}}const is={assertOptions:Rc,validators:Ns},Ke=is.validators;let ht=class{constructor(t){this.defaults=t||{},this.interceptors={request:new wa,response:new wa}}async request(t,a){try{return await this._request(t,a)}catch(r){if(r instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(t,a){typeof t=="string"?(a=a||{},a.url=t):a=t||{},a=yt(this.defaults,a);const{transitional:r,paramsSerializer:n,headers:i}=a;r!==void 0&&is.assertOptions(r,{silentJSONParsing:Ke.transitional(Ke.boolean),forcedJSONParsing:Ke.transitional(Ke.boolean),clarifyTimeoutError:Ke.transitional(Ke.boolean)},!1),n!=null&&(_.isFunction(n)?a.paramsSerializer={serialize:n}:is.assertOptions(n,{encode:Ke.function,serialize:Ke.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),is.assertOptions(a,{baseUrl:Ke.spelling("baseURL"),withXsrfToken:Ke.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let l=i&&_.merge(i.common,i[a.method]);i&&_.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),a.headers=De.concat(l,i);const o=[];let c=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(a)===!1||(c=c&&p.synchronous,o.unshift(p.fulfilled,p.rejected))});const d=[];this.interceptors.response.forEach(function(p){d.push(p.fulfilled,p.rejected)});let u,b=0,C;if(!c){const g=[ka.bind(this),void 0];for(g.unshift(...o),g.push(...d),C=g.length,u=Promise.resolve(a);b<C;)u=u.then(g[b++],g[b++]);return u}C=o.length;let w=a;for(b=0;b<C;){const g=o[b++],p=o[b++];try{w=g(w)}catch(x){p.call(this,x);break}}try{u=ka.call(this,w)}catch(g){return Promise.reject(g)}for(b=0,C=d.length;b<C;)u=u.then(d[b++],d[b++]);return u}getUri(t){t=yt(this.defaults,t);const a=Ir(t.baseURL,t.url,t.allowAbsoluteUrls);return Cr(a,t.params,t.paramsSerializer)}};_.forEach(["delete","get","head","options"],function(t){ht.prototype[t]=function(a,r){return this.request(yt(r||{},{method:t,url:a,data:(r||{}).data}))}});_.forEach(["post","put","patch"],function(t){function a(r){return function(i,l,o){return this.request(yt(o||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}ht.prototype[t]=a(),ht.prototype[t+"Form"]=a(!0)});let Oc=class Lr{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(i){a=i});const r=this;this.promise.then(n=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](n);r._listeners=null}),this.promise.then=n=>{let i;const l=new Promise(o=>{r.subscribe(o),i=o}).then(n);return l.cancel=function(){r.unsubscribe(i)},l},t(function(i,l,o){r.reason||(r.reason=new At(i,l,o),a(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const a=this._listeners.indexOf(t);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const t=new AbortController,a=r=>{t.abort(r)};return this.subscribe(a),t.signal.unsubscribe=()=>this.unsubscribe(a),t.signal}static source(){let t;return{token:new Lr(function(n){t=n}),cancel:t}}};function _c(s){return function(a){return s.apply(null,a)}}function Lc(s){return _.isObject(s)&&s.isAxiosError===!0}const Hs={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Hs).forEach(([s,t])=>{Hs[t]=s});function Mr(s){const t=new ht(s),a=xr(ht.prototype.request,t);return _.extend(a,ht.prototype,t,{allOwnKeys:!0}),_.extend(a,t,null,{allOwnKeys:!0}),a.create=function(n){return Mr(yt(s,n))},a}const fe=Mr($t);fe.Axios=ht;fe.CanceledError=At;fe.CancelToken=Oc;fe.isCancel=Pr;fe.VERSION=_r;fe.toFormData=vs;fe.AxiosError=te;fe.Cancel=fe.CanceledError;fe.all=function(t){return Promise.all(t)};fe.spread=_c;fe.isAxiosError=Lc;fe.mergeConfig=yt;fe.AxiosHeaders=De;fe.formToJSON=s=>Tr(_.isHTMLForm(s)?new FormData(s):s);fe.getAdapter=Or.getAdapter;fe.HttpStatusCode=Hs;fe.default=fe;const{Axios:im,AxiosError:lm,CanceledError:om,isCancel:cm,CancelToken:dm,VERSION:mm,all:um,Cancel:xm,isAxiosError:pm,spread:gm,toFormData:hm,AxiosHeaders:ym,HttpStatusCode:fm,formToJSON:bm,getAdapter:vm,mergeConfig:jm}=fe;var ot={};class Mc{constructor(){this.config={consumerKey:ot.VITE_MPESA_CONSUMER_KEY||"your_consumer_key",consumerSecret:ot.VITE_MPESA_CONSUMER_SECRET||"your_consumer_secret",environment:ot.VITE_MPESA_ENVIRONMENT||"sandbox",shortcode:ot.VITE_MPESA_SHORTCODE||"174379",initiatorName:ot.VITE_MPESA_INITIATOR_NAME||"testapi",securityCredential:ot.VITE_MPESA_SECURITY_CREDENTIAL||"your_security_credential",queueTimeOutURL:ot.VITE_MPESA_QUEUE_TIMEOUT_URL||"https://your-domain.com/mpesa/timeout",resultURL:ot.VITE_MPESA_RESULT_URL||"https://your-domain.com/mpesa/result"},this.baseURL=this.config.environment==="production"?"https://api.safaricom.co.ke":"https://sandbox.safaricom.co.ke",this.endpoints={auth:"/oauth/v1/generate?grant_type=client_credentials",b2c:"/mpesa/b2c/v1/paymentrequest",accountBalance:"/mpesa/accountbalance/v1/query",transactionStatus:"/mpesa/transactionstatus/v1/query"},this.paymentHistory=this.loadPaymentHistory()}loadPaymentHistory(){try{const t=localStorage.getItem("moveease_mpesa_payments");return t?JSON.parse(t):[]}catch(t){return console.error("Error loading payment history:",t),[]}}savePaymentHistory(){try{return localStorage.setItem("moveease_mpesa_payments",JSON.stringify(this.paymentHistory)),!0}catch(t){return console.error("Error saving payment history:",t),!1}}async generateAccessToken(){var t,a;try{const r=Buffer.from(`${this.config.consumerKey}:${this.config.consumerSecret}`).toString("base64"),n=await fe.get(`${this.baseURL}${this.endpoints.auth}`,{headers:{Authorization:`Basic ${r}`,"Content-Type":"application/json"}});return{success:!0,token:n.data.access_token,expiresIn:n.data.expires_in}}catch(r){return console.error("Error generating access token:",r),{success:!1,error:((a=(t=r.response)==null?void 0:t.data)==null?void 0:a.errorMessage)||r.message}}}formatPhoneNumber(t){let a=t.replace(/\D/g,"");return a.startsWith("254")?a:a.startsWith("0")?"254"+a.substring(1):a.startsWith("7")||a.startsWith("1")?"254"+a:a}isValidMpesaNumber(t){const a=this.formatPhoneNumber(t);return/^254[17]\d{8}$/.test(a)}generateTransactionRef(){const t=Date.now(),a=Math.random().toString(36).substr(2,6).toUpperCase();return`SAL${t}${a}`}async sendB2CPayment(t){try{if(!t.phoneNumber||!t.amount||!t.employeeId)throw new Error("Missing required payment data");const a=this.formatPhoneNumber(t.phoneNumber);if(!this.isValidMpesaNumber(a))throw new Error("Invalid M-Pesa phone number");const r=parseFloat(t.amount);if(r<10||r>15e4)throw new Error("Amount must be between KSh 10 and KSh 150,000");const n=await this.generateAccessToken();if(!n.success)throw new Error(`Failed to get access token: ${n.error}`);const i=this.generateTransactionRef(),l={InitiatorName:this.config.initiatorName,SecurityCredential:this.config.securityCredential,CommandID:"SalaryPayment",Amount:Math.round(r),PartyA:this.config.shortcode,PartyB:a,Remarks:t.remarks||`Salary payment for ${t.employeeName}`,QueueTimeOutURL:this.config.queueTimeOutURL,ResultURL:this.config.resultURL,Occasion:t.occasion||"Salary Payment"},o=await this.simulateB2CPayment(l,i),c={id:"payment_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),transactionRef:i,employeeId:t.employeeId,employeeName:t.employeeName,employeeNumber:t.employeeNumber,phoneNumber:a,amount:r,currency:"KSH",commandID:"SalaryPayment",status:"pending",initiatedAt:new Date().toISOString(),completedAt:null,mpesaReceiptNumber:null,responseCode:o.ResponseCode,responseDescription:o.ResponseDescription,conversationID:o.ConversationID,originatorConversationID:o.OriginatorConversationID,remarks:l.Remarks,occasion:l.Occasion,retryCount:0,lastRetryAt:null,failureReason:null};return this.paymentHistory.push(c),this.savePaymentHistory(),{success:!0,data:c,message:"Payment initiated successfully"}}catch(a){return console.error("B2C Payment Error:",a),{success:!1,error:a.message,message:"Failed to initiate payment"}}}async simulateB2CPayment(t,a){return await new Promise(r=>setTimeout(r,1e3)),{ConversationID:"AG_"+Date.now()+"_"+Math.random().toString(36).substr(2,10),OriginatorConversationID:a,ResponseCode:"0",ResponseDescription:"Accept the service request successfully."}}async processBulkPayroll(t){try{const a={successful:[],failed:[],total:t.length,totalAmount:0,successfulAmount:0,failedAmount:0},r=5,n=[];for(let o=0;o<t.length;o+=r)n.push(t.slice(o,o+r));for(const o of n){const c=o.map(async d=>{try{const u={employeeId:d.id,employeeName:d.name,employeeNumber:d.employeeNumber,phoneNumber:d.mpesaNumber,amount:d.netSalary,remarks:`Salary payment for ${d.name} - ${new Date().toLocaleDateString()}`,occasion:"Monthly Salary"},b=await this.sendB2CPayment(u);b.success?(a.successful.push({employee:d,payment:b.data}),a.successfulAmount+=d.netSalary):(a.failed.push({employee:d,error:b.error}),a.failedAmount+=d.netSalary),a.totalAmount+=d.netSalary}catch(u){a.failed.push({employee:d,error:u.message}),a.failedAmount+=d.netSalary,a.totalAmount+=d.netSalary}});await Promise.all(c),n.indexOf(o)<n.length-1&&await new Promise(d=>setTimeout(d,2e3))}const i={id:"bulk_payment_"+Date.now(),processedAt:new Date().toISOString(),totalEmployees:a.total,successfulPayments:a.successful.length,failedPayments:a.failed.length,totalAmount:a.totalAmount,successfulAmount:a.successfulAmount,failedAmount:a.failedAmount,results:a},l=this.loadBulkPaymentHistory();return l.push(i),localStorage.setItem("moveease_bulk_payments",JSON.stringify(l)),{success:!0,data:i,message:`Bulk payroll processed: ${a.successful.length} successful, ${a.failed.length} failed`}}catch(a){return console.error("Bulk Payroll Error:",a),{success:!1,error:a.message,message:"Failed to process bulk payroll"}}}loadBulkPaymentHistory(){try{const t=localStorage.getItem("moveease_bulk_payments");return t?JSON.parse(t):[]}catch(t){return console.error("Error loading bulk payment history:",t),[]}}async checkTransactionStatus(t){try{const a=await this.generateAccessToken();if(!a.success)throw new Error(`Failed to get access token: ${a.error}`);return{success:!0,data:await this.simulateStatusCheck(t)}}catch(a){return console.error("Transaction Status Error:",a),{success:!1,error:a.message}}}async simulateStatusCheck(t){await new Promise(n=>setTimeout(n,500));const a=["completed","pending","failed"],r=a[Math.floor(Math.random()*a.length)];return{transactionId:t,status:r,mpesaReceiptNumber:r==="completed"?"MPE"+Date.now():null,completedAt:r==="completed"?new Date().toISOString():null}}getPaymentHistory(t={}){try{let a=[...this.paymentHistory];t.employeeId&&(a=a.filter(c=>c.employeeId===t.employeeId)),t.status&&(a=a.filter(c=>c.status===t.status)),t.dateFrom&&(a=a.filter(c=>new Date(c.initiatedAt)>=new Date(t.dateFrom))),t.dateTo&&(a=a.filter(c=>new Date(c.initiatedAt)<=new Date(t.dateTo))),a.sort((c,d)=>new Date(d.initiatedAt)-new Date(c.initiatedAt));const r=t.page||1,n=t.limit||20,i=(r-1)*n,l=i+n;return{success:!0,data:a.slice(i,l),pagination:{page:r,limit:n,total:a.length,totalPages:Math.ceil(a.length/n),hasNext:l<a.length,hasPrev:r>1}}}catch(a){return{success:!1,error:a.message}}}getPaymentStats(){try{const t={totalPayments:this.paymentHistory.length,successfulPayments:this.paymentHistory.filter(a=>a.status==="completed").length,pendingPayments:this.paymentHistory.filter(a=>a.status==="pending").length,failedPayments:this.paymentHistory.filter(a=>a.status==="failed").length,totalAmount:this.paymentHistory.reduce((a,r)=>a+r.amount,0),successfulAmount:this.paymentHistory.filter(a=>a.status==="completed").reduce((a,r)=>a+r.amount,0),averagePayment:0,lastPaymentDate:null};if(t.averagePayment=t.totalPayments>0?t.totalAmount/t.totalPayments:0,this.paymentHistory.length>0){const a=[...this.paymentHistory].sort((r,n)=>new Date(n.initiatedAt)-new Date(r.initiatedAt));t.lastPaymentDate=a[0].initiatedAt}return{success:!0,data:t}}catch(t){return{success:!1,error:t.message}}}async retryPayment(t){try{const a=this.paymentHistory.findIndex(i=>i.id===t);if(a===-1)throw new Error("Payment record not found");const r=this.paymentHistory[a];if(r.status!=="failed")throw new Error("Only failed payments can be retried");r.retryCount+=1,r.lastRetryAt=new Date().toISOString(),r.status="pending";const n=await this.sendB2CPayment({employeeId:r.employeeId,employeeName:r.employeeName,employeeNumber:r.employeeNumber,phoneNumber:r.phoneNumber,amount:r.amount,remarks:r.remarks+` (Retry ${r.retryCount})`,occasion:r.occasion});return n.success?this.paymentHistory[a]={...r,...n.data,retryCount:r.retryCount,lastRetryAt:r.lastRetryAt}:(r.status="failed",r.failureReason=n.error),this.savePaymentHistory(),n}catch(a){return{success:!1,error:a.message}}}exportPaymentHistory(t="json"){try{const a=this.paymentHistory.map(r=>({transactionRef:r.transactionRef,employeeName:r.employeeName,employeeNumber:r.employeeNumber,phoneNumber:r.phoneNumber,amount:r.amount,status:r.status,initiatedAt:r.initiatedAt,completedAt:r.completedAt,mpesaReceiptNumber:r.mpesaReceiptNumber,remarks:r.remarks}));if(t==="csv"){const r=Object.keys(a[0]||{});return{success:!0,data:[r.join(","),...a.map(i=>r.map(l=>`"${i[l]||""}"`).join(","))].join(`
`),filename:`mpesa_payments_${new Date().toISOString().split("T")[0]}.csv`}}return{success:!0,data:JSON.stringify(a,null,2),filename:`mpesa_payments_${new Date().toISOString().split("T")[0]}.json`}}catch(a){return{success:!1,error:a.message}}}}const jt=new Mc,J={SET_LOADING:"SET_LOADING",SET_ERROR:"SET_ERROR",SET_STAFF:"SET_STAFF",SET_CURRENT_STAFF:"SET_CURRENT_STAFF",SET_STAFF_STATS:"SET_STAFF_STATS",SET_FILTERS:"SET_FILTERS",SET_PAGINATION:"SET_PAGINATION",ADD_STAFF:"ADD_STAFF",UPDATE_STAFF:"UPDATE_STAFF",DELETE_STAFF:"DELETE_STAFF",SET_PAYMENT_HISTORY:"SET_PAYMENT_HISTORY",SET_PAYMENT_STATS:"SET_PAYMENT_STATS",CLEAR_ERROR:"CLEAR_ERROR"},Fc={staff:[],currentStaff:null,staffStats:{total:0,active:0,inactive:0,onLeave:0,probation:0,byDepartment:{},byRole:{},byEmploymentType:{},totalSalaryBudget:0,averageSalary:0},filters:{status:"",role:"",department:"",employmentType:"",search:"",sortBy:"systemInfo.createdAt",sortOrder:"desc"},pagination:{page:1,limit:10,total:0,totalPages:0,hasNext:!1,hasPrev:!1},paymentHistory:[],paymentStats:{totalPayments:0,successfulPayments:0,pendingPayments:0,failedPayments:0,totalAmount:0,successfulAmount:0,averagePayment:0,lastPaymentDate:null},loading:!1,error:null};function Uc(s,t){var a,r;switch(t.type){case J.SET_LOADING:return{...s,loading:t.payload,error:t.payload?null:s.error};case J.SET_ERROR:return{...s,error:t.payload,loading:!1};case J.CLEAR_ERROR:return{...s,error:null};case J.SET_STAFF:return{...s,staff:t.payload,loading:!1,error:null};case J.SET_CURRENT_STAFF:return{...s,currentStaff:t.payload};case J.SET_STAFF_STATS:return{...s,staffStats:t.payload};case J.SET_FILTERS:return{...s,filters:{...s.filters,...t.payload}};case J.SET_PAGINATION:return{...s,pagination:t.payload};case J.ADD_STAFF:return{...s,staff:[t.payload,...s.staff],staffStats:{...s.staffStats,total:s.staffStats.total+1,[t.payload.status]:(s.staffStats[t.payload.status]||0)+1}};case J.UPDATE_STAFF:return{...s,staff:s.staff.map(n=>n.id===t.payload.id?t.payload:n),currentStaff:((a=s.currentStaff)==null?void 0:a.id)===t.payload.id?t.payload:s.currentStaff};case J.DELETE_STAFF:return{...s,staff:s.staff.filter(n=>n.id!==t.payload),currentStaff:((r=s.currentStaff)==null?void 0:r.id)===t.payload?null:s.currentStaff};case J.SET_PAYMENT_HISTORY:return{...s,paymentHistory:t.payload};case J.SET_PAYMENT_STATS:return{...s,paymentStats:t.payload};default:return s}}const Fr=T.createContext();function Bc({children:s}){const[t,a]=T.useReducer(Uc,Fc);T.useEffect(()=>{r(),n(),i(),l()},[]),T.useEffect(()=>{(t.filters||t.pagination.page||t.pagination.limit)&&r()},[t.filters,t.pagination.page,t.pagination.limit]);const r=async()=>{a({type:J.SET_LOADING,payload:!0});try{const v=await Ve.getStaff({...t.filters,page:t.pagination.page,limit:t.pagination.limit});v.success?(a({type:J.SET_STAFF,payload:v.data}),a({type:J.SET_PAGINATION,payload:v.pagination})):a({type:J.SET_ERROR,payload:v.error})}catch(v){a({type:J.SET_ERROR,payload:v.message})}},n=async()=>{try{const v=await Ve.getStaffStats();v.success&&a({type:J.SET_STAFF_STATS,payload:v.data})}catch(v){console.error("Error loading staff stats:",v)}},i=async()=>{try{const v=await jt.getPaymentHistory();v.success&&a({type:J.SET_PAYMENT_HISTORY,payload:v.data})}catch(v){console.error("Error loading payment history:",v)}},l=async()=>{try{const v=await jt.getPaymentStats();v.success&&a({type:J.SET_PAYMENT_STATS,payload:v.data})}catch(v){console.error("Error loading payment stats:",v)}},o=async v=>{a({type:J.SET_LOADING,payload:!0});try{const h=await Ve.createStaff(v);return h.success?(a({type:J.ADD_STAFF,payload:h.data}),await n(),h):(a({type:J.SET_ERROR,payload:h.error}),h)}catch(h){const I=h.message;return a({type:J.SET_ERROR,payload:I}),{success:!1,error:I}}finally{a({type:J.SET_LOADING,payload:!1})}},c=async(v,h)=>{a({type:J.SET_LOADING,payload:!0});try{const I=await Ve.updateStaff(v,h);return I.success?(a({type:J.UPDATE_STAFF,payload:I.data}),await n(),I):(a({type:J.SET_ERROR,payload:I.error}),I)}catch(I){const R=I.message;return a({type:J.SET_ERROR,payload:R}),{success:!1,error:R}}finally{a({type:J.SET_LOADING,payload:!1})}},d=async v=>{a({type:J.SET_LOADING,payload:!0});try{const h=await Ve.deleteStaff(v);return h.success?(a({type:J.DELETE_STAFF,payload:v}),await n(),h):(a({type:J.SET_ERROR,payload:h.error}),h)}catch(h){const I=h.message;return a({type:J.SET_ERROR,payload:I}),{success:!1,error:I}}finally{a({type:J.SET_LOADING,payload:!1})}},u=async v=>{try{const h=await Ve.getStaffById(v);return h.success&&a({type:J.SET_CURRENT_STAFF,payload:h.data}),h}catch(h){return{success:!1,error:h.message}}},f={...t,createStaff:o,updateStaff:c,deleteStaff:d,getStaffById:u,setFilters:v=>{a({type:J.SET_FILTERS,payload:v})},setPagination:v=>{a({type:J.SET_PAGINATION,payload:{...t.pagination,...v}})},clearCurrentStaff:()=>{a({type:J.SET_CURRENT_STAFF,payload:null})},clearError:()=>{a({type:J.CLEAR_ERROR})},addLeaveRequest:async(v,h)=>{try{const I=await Ve.addLeaveRequest(v,h);return I.success&&await u(v),I}catch(I){return{success:!1,error:I.message}}},updateLeaveRequest:async(v,h,I,R)=>{try{const L=await Ve.updateLeaveRequest(v,h,I,R);return L.success&&await u(v),L}catch(L){return{success:!1,error:L.message}}},addTraining:async(v,h)=>{try{const I=await Ve.addTraining(v,h);return I.success&&await u(v),I}catch(I){return{success:!1,error:I.message}}},processPayment:async v=>{a({type:J.SET_LOADING,payload:!0});try{const h=await jt.sendB2CPayment(v);return h.success&&(await i(),await l()),h}catch(h){return{success:!1,error:h.message}}finally{a({type:J.SET_LOADING,payload:!1})}},processBulkPayroll:async v=>{a({type:J.SET_LOADING,payload:!0});try{const h=await jt.processBulkPayroll(v);return h.success&&(await i(),await l()),h}catch(h){return{success:!1,error:h.message}}finally{a({type:J.SET_LOADING,payload:!1})}},retryPayment:async v=>{try{const h=await jt.retryPayment(v);return h.success&&(await i(),await l()),h}catch(h){return{success:!1,error:h.message}}},exportStaff:async(v="json")=>{try{const h=await Ve.exportStaff(v);if(h.success){const I=new Blob([h.data],{type:v==="csv"?"text/csv":"application/json"}),R=URL.createObjectURL(I),L=document.createElement("a");L.href=R,L.download=h.filename,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(R)}return h}catch(h){return{success:!1,error:h.message}}},exportPaymentHistory:async(v="json")=>{try{const h=await jt.exportPaymentHistory(v);if(h.success){const I=new Blob([h.data],{type:v==="csv"?"text/csv":"application/json"}),R=URL.createObjectURL(I),L=document.createElement("a");L.href=R,L.download=h.filename,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(R)}return h}catch(h){return{success:!1,error:h.message}}},loadStaff:r,loadStaffStats:n,loadPaymentHistory:i,loadPaymentStats:l};return e.jsx(Fr.Provider,{value:f,children:s})}function Ht(){const s=T.useContext(Fr);if(!s)throw new Error("useStaff must be used within a StaffProvider");return s}const zc=({onStaffSelect:s,onCreateStaff:t,onProcessPayroll:a})=>{const{staff:r,loading:n,error:i,filters:l,pagination:o,staffStats:c,setFilters:d,setPagination:u,deleteStaff:b,exportStaff:C,clearError:w}=Ht(),[g,p]=T.useState([]),[x,m]=T.useState(!1),j=O=>{const M=O.target.value;d({search:M})},S=(O,M)=>{d({[O]:M})},y=O=>{u({page:O})},A=O=>{s&&s(O)},N=async O=>{if(confirm("Are you sure you want to delete this staff member?")){const M=await b(O);M.success?alert("Staff member deleted successfully"):alert(`Error: ${M.error}`)}},f=O=>{O.target.checked?p(r.map(M=>M.id)):p([])},v=(O,M)=>{p(M?[...g,O]:g.filter(z=>z!==O))},h=async O=>{const M=await C(O);M.success||alert(`Export failed: ${M.error}`)},I=()=>{if(g.length===0){alert("Please select staff members for payroll processing");return}const O=r.filter(M=>g.includes(M.id));a(O)},R=O=>`${O.personalInfo.firstName} ${O.personalInfo.lastName}`,L=O=>O.split("_").map(M=>M.charAt(0).toUpperCase()+M.slice(1)).join(" "),H=O=>O.split("_").map(M=>M.charAt(0).toUpperCase()+M.slice(1)).join(" "),k=O=>{switch(O){case ce.ACTIVE:return"text-green-600 bg-green-100";case ce.INACTIVE:return"text-gray-600 bg-gray-100";case ce.ON_LEAVE:return"text-blue-600 bg-blue-100";case ce.SUSPENDED:return"text-red-600 bg-red-100";case ce.PROBATION:return"text-yellow-600 bg-yellow-100";case ce.TERMINATED:return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},U=O=>{switch(O){case ye.ADMIN:return"text-purple-600 bg-purple-100";case ye.MANAGER:return"text-blue-600 bg-blue-100";case ye.SUPERVISOR:return"text-indigo-600 bg-indigo-100";case ye.TEAM_LEAD:return"text-cyan-600 bg-cyan-100";default:return"text-gray-600 bg-gray-100"}};return i?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{name:"AlertCircle",size:20,className:"text-red-600 mr-2"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-800 font-medium",children:"Error Loading Staff"}),e.jsx("p",{className:"text-red-600 text-sm mt-1",children:i})]}),e.jsx(P,{variant:"outline",size:"sm",onClick:w,className:"ml-auto",children:"Retry"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Staff Management"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[g.length>0&&e.jsxs(P,{variant:"outline",iconName:"CreditCard",onClick:I,children:["Process Payroll (",g.length,")"]}),e.jsx(P,{variant:"outline",iconName:"Download",onClick:()=>h("csv"),children:"Export CSV"}),e.jsx(P,{variant:"outline",iconName:"Download",onClick:()=>h("json"),children:"Export JSON"}),e.jsx(P,{iconName:"Plus",onClick:t,children:"Add Staff"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:c.total}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Staff"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:c.active}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:c.onLeave}),e.jsx("div",{className:"text-sm text-gray-600",children:"On Leave"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:c.probation}),e.jsx("div",{className:"text-sm text-gray-600",children:"Probation"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["KSh ",c.totalSalaryBudget.toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Budget"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:["KSh ",Math.round(c.averageSalary).toLocaleString()]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Avg Salary"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsx(D,{placeholder:"Search staff...",value:l.search,onChange:j,iconName:"Search"})}),e.jsx(P,{variant:"outline",iconName:"Filter",onClick:()=>m(!x),children:"Filters"})]}),x&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 pt-4 border-t border-gray-200",children:[e.jsx(B,{label:"Status",options:[{value:"",label:"All Statuses"},{value:ce.ACTIVE,label:"Active"},{value:ce.INACTIVE,label:"Inactive"},{value:ce.ON_LEAVE,label:"On Leave"},{value:ce.SUSPENDED,label:"Suspended"},{value:ce.PROBATION,label:"Probation"}],value:l.status,onChange:O=>S("status",O)}),e.jsx(B,{label:"Role",options:[{value:"",label:"All Roles"},...Object.values(ye).map(O=>({value:O,label:L(O)}))],value:l.role,onChange:O=>S("role",O)}),e.jsx(B,{label:"Department",options:[{value:"",label:"All Departments"},...Object.values(Mt).map(O=>({value:O,label:H(O)}))],value:l.department,onChange:O=>S("department",O)}),e.jsx(B,{label:"Employment Type",options:[{value:"",label:"All Types"},...Object.values(gt).map(O=>({value:O,label:L(O)}))],value:l.employmentType,onChange:O=>S("employmentType",O)}),e.jsx(B,{label:"Sort By",options:[{value:"systemInfo.createdAt",label:"Date Hired"},{value:"personalInfo.firstName",label:"First Name"},{value:"personalInfo.lastName",label:"Last Name"},{value:"payrollInfo.basicSalary",label:"Salary"},{value:"employmentInfo.role",label:"Role"}],value:l.sortBy,onChange:O=>S("sortBy",O)})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",checked:g.length===r.length&&r.length>0,onChange:f,className:"rounded border-gray-300 text-primary focus:ring-primary"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Salary"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Method"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(E,{name:"Loader2",size:24,className:"animate-spin text-gray-400 mr-2"}),e.jsx("span",{className:"text-gray-600",children:"Loading staff..."})]})})}):r.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx(E,{name:"Users",size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No staff found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding your first staff member."}),e.jsx(P,{className:"mt-4",iconName:"Plus",onClick:t,children:"Add Staff Member"})]})})}):r.map(O=>e.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>A(O),children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:g.includes(O.id),onChange:M=>v(O.id,M.target.checked),onClick:M=>M.stopPropagation(),className:"rounded border-gray-300 text-primary focus:ring-primary"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[O.personalInfo.firstName.charAt(0),O.personalInfo.lastName.charAt(0)]})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:R(O)}),e.jsx("div",{className:"text-sm text-gray-500",children:O.employeeNumber})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:O.contactInfo.email}),e.jsx("div",{className:"text-sm text-gray-500",children:O.contactInfo.primaryPhone})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${U(O.employmentInfo.role)}`,children:L(O.employmentInfo.role)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-900",children:H(O.employmentInfo.department)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${k(O.status)}`,children:O.status.replace("_"," ")})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["KSh ",O.payrollInfo.basicSalary.toLocaleString()]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{name:O.payrollInfo.paymentMethod==="mpesa"?"Smartphone":"CreditCard",size:16,className:"text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm text-gray-900",children:O.payrollInfo.paymentMethod==="mpesa"?"M-Pesa":"Bank Transfer"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(P,{variant:"ghost",size:"sm",iconName:"Eye",onClick:M=>{M.stopPropagation(),A(O)}}),e.jsx(P,{variant:"ghost",size:"sm",iconName:"Trash2",onClick:M=>{M.stopPropagation(),N(O.id)},className:"text-red-600 hover:text-red-700"})]})})]},O.id))})]})}),o.totalPages>1&&e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx(P,{variant:"outline",onClick:()=>y(o.page-1),disabled:!o.hasPrev,children:"Previous"}),e.jsx(P,{variant:"outline",onClick:()=>y(o.page+1),disabled:!o.hasNext,children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:(o.page-1)*o.limit+1})," ","to"," ",e.jsx("span",{className:"font-medium",children:Math.min(o.page*o.limit,o.total)})," ","of"," ",e.jsx("span",{className:"font-medium",children:o.total})," ","results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>y(o.page-1),disabled:!o.hasPrev,className:"rounded-l-md",children:"Previous"}),Array.from({length:o.totalPages},(O,M)=>M+1).filter(O=>O===1||O===o.totalPages||Math.abs(O-o.page)<=2).map((O,M,z)=>e.jsxs(je.Fragment,{children:[M>0&&z[M-1]!==O-1&&e.jsx("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:"..."}),e.jsx(P,{variant:O===o.page?"default":"outline",size:"sm",onClick:()=>y(O),className:"border-l-0",children:O})]},O)),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>y(o.page+1),disabled:!o.hasNext,className:"rounded-r-md border-l-0",children:"Next"})]})})]})]})]})]})},Ra=({staff:s,onSave:t,onCancel:a,mode:r="create"})=>{var m,j,S,y,A,N,f,v,h,I,R,L,H,k,U,O,M,z,G,se,le,Se,pe,ge,Ue,Ye,he,mt,Je,Qe,it;const{createStaff:n,updateStaff:i,loading:l}=Ht(),[o,c]=T.useState({personalInfo:{firstName:((m=s==null?void 0:s.personalInfo)==null?void 0:m.firstName)||"",lastName:((j=s==null?void 0:s.personalInfo)==null?void 0:j.lastName)||"",middleName:((S=s==null?void 0:s.personalInfo)==null?void 0:S.middleName)||"",dateOfBirth:((y=s==null?void 0:s.personalInfo)==null?void 0:y.dateOfBirth)||"",gender:((A=s==null?void 0:s.personalInfo)==null?void 0:A.gender)||"",nationality:((N=s==null?void 0:s.personalInfo)==null?void 0:N.nationality)||"Kenyan",idNumber:((f=s==null?void 0:s.personalInfo)==null?void 0:f.idNumber)||"",phoneNumber:((v=s==null?void 0:s.personalInfo)==null?void 0:v.phoneNumber)||"",email:((h=s==null?void 0:s.personalInfo)==null?void 0:h.email)||"",address:((I=s==null?void 0:s.personalInfo)==null?void 0:I.address)||""},employmentInfo:{employeeId:((R=s==null?void 0:s.employmentInfo)==null?void 0:R.employeeId)||"",role:((L=s==null?void 0:s.employmentInfo)==null?void 0:L.role)||ye.MOVER,department:((H=s==null?void 0:s.employmentInfo)==null?void 0:H.department)||"",employmentType:((k=s==null?void 0:s.employmentInfo)==null?void 0:k.employmentType)||gt.FULL_TIME,startDate:((U=s==null?void 0:s.employmentInfo)==null?void 0:U.startDate)||"",status:((O=s==null?void 0:s.employmentInfo)==null?void 0:O.status)||ce.ACTIVE,supervisor:((M=s==null?void 0:s.employmentInfo)==null?void 0:M.supervisor)||"",workLocation:((z=s==null?void 0:s.employmentInfo)==null?void 0:z.workLocation)||""},compensation:{baseSalary:((G=s==null?void 0:s.compensation)==null?void 0:G.baseSalary)||0,currency:((se=s==null?void 0:s.compensation)==null?void 0:se.currency)||"KES",payFrequency:((le=s==null?void 0:s.compensation)==null?void 0:le.payFrequency)||"monthly",allowances:((Se=s==null?void 0:s.compensation)==null?void 0:Se.allowances)||[],benefits:((pe=s==null?void 0:s.compensation)==null?void 0:pe.benefits)||[]},bankingInfo:{bankName:((ge=s==null?void 0:s.bankingInfo)==null?void 0:ge.bankName)||"",accountNumber:((Ue=s==null?void 0:s.bankingInfo)==null?void 0:Ue.accountNumber)||"",branchCode:((Ye=s==null?void 0:s.bankingInfo)==null?void 0:Ye.branchCode)||"",mpesaNumber:((he=s==null?void 0:s.bankingInfo)==null?void 0:he.mpesaNumber)||""},emergencyContact:{name:((mt=s==null?void 0:s.emergencyContact)==null?void 0:mt.name)||"",relationship:((Je=s==null?void 0:s.emergencyContact)==null?void 0:Je.relationship)||"",phoneNumber:((Qe=s==null?void 0:s.emergencyContact)==null?void 0:Qe.phoneNumber)||"",address:((it=s==null?void 0:s.emergencyContact)==null?void 0:it.address)||""},notes:(s==null?void 0:s.notes)||""}),[d,u]=T.useState({}),b=(F,K,de)=>{c(qe=>({...qe,[F]:{...qe[F],[K]:de}})),d[`${F}.${K}`]&&u(qe=>({...qe,[`${F}.${K}`]:null}))},C=()=>{const F={};return o.personalInfo.firstName||(F["personalInfo.firstName"]="First name is required"),o.personalInfo.lastName||(F["personalInfo.lastName"]="Last name is required"),o.personalInfo.email||(F["personalInfo.email"]="Email is required"),o.personalInfo.phoneNumber||(F["personalInfo.phoneNumber"]="Phone number is required"),o.employmentInfo.employeeId||(F["employmentInfo.employeeId"]="Employee ID is required"),o.employmentInfo.startDate||(F["employmentInfo.startDate"]="Start date is required"),(!o.compensation.baseSalary||o.compensation.baseSalary<=0)&&(F["compensation.baseSalary"]="Base salary is required and must be greater than 0"),u(F),Object.keys(F).length===0},w=async F=>{if(F.preventDefault(),!!C())try{let K;r==="create"?K=await n(o):K=await i(s.id,o),t(K)}catch(K){console.error("Error saving staff:",K),alert("Error saving staff. Please try again.")}},g=Object.values(ye).map(F=>({value:F,label:F.replace("_"," ").replace(/\b\w/g,K=>K.toUpperCase())})),p=Object.values(gt).map(F=>({value:F,label:F.replace("_"," ").replace(/\b\w/g,K=>K.toUpperCase())})),x=Object.values(ce).map(F=>({value:F,label:F.replace("_"," ").replace(/\b\w/g,K=>K.toUpperCase())}));return e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("form",{onSubmit:w,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(D,{label:"First Name *",value:o.personalInfo.firstName,onChange:F=>b("personalInfo","firstName",F),error:d["personalInfo.firstName"]}),e.jsx(D,{label:"Last Name *",value:o.personalInfo.lastName,onChange:F=>b("personalInfo","lastName",F),error:d["personalInfo.lastName"]}),e.jsx(D,{label:"Middle Name",value:o.personalInfo.middleName,onChange:F=>b("personalInfo","middleName",F)}),e.jsx(D,{label:"Date of Birth",type:"date",value:o.personalInfo.dateOfBirth,onChange:F=>b("personalInfo","dateOfBirth",F)}),e.jsx(B,{label:"Gender",options:[{value:"",label:"Select Gender"},{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Other"}],value:o.personalInfo.gender,onChange:F=>b("personalInfo","gender",F)}),e.jsx(D,{label:"ID Number",value:o.personalInfo.idNumber,onChange:F=>b("personalInfo","idNumber",F)}),e.jsx(D,{label:"Phone Number *",value:o.personalInfo.phoneNumber,onChange:F=>b("personalInfo","phoneNumber",F),error:d["personalInfo.phoneNumber"]}),e.jsx(D,{label:"Email *",type:"email",value:o.personalInfo.email,onChange:F=>b("personalInfo","email",F),error:d["personalInfo.email"]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(ve,{label:"Address",value:o.personalInfo.address,onChange:F=>b("personalInfo","address",F),rows:3})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Employment Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(D,{label:"Employee ID *",value:o.employmentInfo.employeeId,onChange:F=>b("employmentInfo","employeeId",F),error:d["employmentInfo.employeeId"]}),e.jsx(B,{label:"Role *",options:g,value:o.employmentInfo.role,onChange:F=>b("employmentInfo","role",F)}),e.jsx(D,{label:"Department",value:o.employmentInfo.department,onChange:F=>b("employmentInfo","department",F)}),e.jsx(B,{label:"Employment Type",options:p,value:o.employmentInfo.employmentType,onChange:F=>b("employmentInfo","employmentType",F)}),e.jsx(D,{label:"Start Date *",type:"date",value:o.employmentInfo.startDate,onChange:F=>b("employmentInfo","startDate",F),error:d["employmentInfo.startDate"]}),e.jsx(B,{label:"Status",options:x,value:o.employmentInfo.status,onChange:F=>b("employmentInfo","status",F)})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Compensation"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(D,{label:"Base Salary (KES) *",type:"number",value:o.compensation.baseSalary,onChange:F=>b("compensation","baseSalary",parseFloat(F)||0),error:d["compensation.baseSalary"]}),e.jsx(B,{label:"Pay Frequency",options:[{value:"monthly",label:"Monthly"},{value:"bi-weekly",label:"Bi-weekly"},{value:"weekly",label:"Weekly"}],value:o.compensation.payFrequency,onChange:F=>b("compensation","payFrequency",F)})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Banking Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(D,{label:"Bank Name",value:o.bankingInfo.bankName,onChange:F=>b("bankingInfo","bankName",F)}),e.jsx(D,{label:"Account Number",value:o.bankingInfo.accountNumber,onChange:F=>b("bankingInfo","accountNumber",F)}),e.jsx(D,{label:"Branch Code",value:o.bankingInfo.branchCode,onChange:F=>b("bankingInfo","branchCode",F)}),e.jsx(D,{label:"M-Pesa Number",value:o.bankingInfo.mpesaNumber,onChange:F=>b("bankingInfo","mpesaNumber",F)})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(P,{type:"button",variant:"outline",onClick:a,disabled:l,children:"Cancel"}),e.jsx(P,{type:"submit",loading:l,iconName:"Save",children:r==="create"?"Create Staff":"Update Staff"})]})]})})},Gc=({staff:s,onEdit:t,onBack:a})=>{const{deleteStaff:r}=Ht(),n=async()=>{if(window.confirm(`Are you sure you want to delete ${s.personalInfo.firstName} ${s.personalInfo.lastName}?`))try{await r(s.id),a()}catch(c){console.error("Error deleting staff:",c),alert("Error deleting staff. Please try again.")}},i=c=>`KES ${c.toLocaleString()}`,l=c=>c?new Date(c).toLocaleDateString():"Not set",o=c=>{switch(c){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"on_leave":return"bg-yellow-100 text-yellow-800";case"terminated":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-primary rounded-full flex items-center justify-center",children:e.jsx(E,{name:"User",size:32,className:"text-white"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[s.personalInfo.firstName," ",s.personalInfo.lastName]}),e.jsxs("p",{className:"text-gray-600",children:[s.employmentInfo.role.replace("_"," ").replace(/\b\w/g,c=>c.toUpperCase()),"  Employee ID: ",s.employmentInfo.employeeId]}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${o(s.employmentInfo.status)}`,children:s.employmentInfo.status.replace("_"," ").toUpperCase()})})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(P,{variant:"outline",iconName:"Edit",onClick:()=>t(s),children:"Edit"}),e.jsx(P,{variant:"danger",iconName:"Trash2",onClick:n,children:"Delete"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(E,{name:"User",size:20,className:"mr-2"}),"Personal Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Full Name:"}),e.jsxs("span",{className:"font-medium",children:[s.personalInfo.firstName," ",s.personalInfo.middleName," ",s.personalInfo.lastName]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Date of Birth:"}),e.jsx("span",{className:"font-medium",children:l(s.personalInfo.dateOfBirth)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Gender:"}),e.jsx("span",{className:"font-medium",children:s.personalInfo.gender||"Not specified"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ID Number:"}),e.jsx("span",{className:"font-medium",children:s.personalInfo.idNumber||"Not provided"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Phone:"}),e.jsx("span",{className:"font-medium",children:s.personalInfo.phoneNumber})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Email:"}),e.jsx("span",{className:"font-medium",children:s.personalInfo.email})]}),s.personalInfo.address&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Address:"}),e.jsx("p",{className:"font-medium mt-1",children:s.personalInfo.address})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(E,{name:"Briefcase",size:20,className:"mr-2"}),"Employment Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Employee ID:"}),e.jsx("span",{className:"font-medium",children:s.employmentInfo.employeeId})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Role:"}),e.jsx("span",{className:"font-medium",children:s.employmentInfo.role.replace("_"," ").replace(/\b\w/g,c=>c.toUpperCase())})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Department:"}),e.jsx("span",{className:"font-medium",children:s.employmentInfo.department||"Not assigned"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Employment Type:"}),e.jsx("span",{className:"font-medium",children:s.employmentInfo.employmentType.replace("_"," ").replace(/\b\w/g,c=>c.toUpperCase())})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Start Date:"}),e.jsx("span",{className:"font-medium",children:l(s.employmentInfo.startDate)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Supervisor:"}),e.jsx("span",{className:"font-medium",children:s.employmentInfo.supervisor||"Not assigned"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(E,{name:"DollarSign",size:20,className:"mr-2"}),"Compensation"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Base Salary:"}),e.jsx("span",{className:"font-medium text-lg",children:i(s.compensation.baseSalary)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Pay Frequency:"}),e.jsx("span",{className:"font-medium",children:s.compensation.payFrequency.replace(/\b\w/g,c=>c.toUpperCase())})]}),s.compensation.allowances&&s.compensation.allowances.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Allowances:"}),e.jsx("ul",{className:"mt-1 space-y-1",children:s.compensation.allowances.map((c,d)=>e.jsxs("li",{className:"text-sm font-medium",children:[" ",c.name,": ",i(c.amount)]},d))})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(E,{name:"CreditCard",size:20,className:"mr-2"}),"Banking Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Bank Name:"}),e.jsx("span",{className:"font-medium",children:s.bankingInfo.bankName||"Not provided"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Account Number:"}),e.jsx("span",{className:"font-medium",children:s.bankingInfo.accountNumber||"Not provided"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Branch Code:"}),e.jsx("span",{className:"font-medium",children:s.bankingInfo.branchCode||"Not provided"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"M-Pesa Number:"}),e.jsx("span",{className:"font-medium",children:s.bankingInfo.mpesaNumber||"Not provided"})]})]})]})]}),s.emergencyContact&&(s.emergencyContact.name||s.emergencyContact.phoneNumber)&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mt-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(E,{name:"Phone",size:20,className:"mr-2"}),"Emergency Contact"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Name:"}),e.jsx("span",{className:"font-medium",children:s.emergencyContact.name||"Not provided"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Relationship:"}),e.jsx("span",{className:"font-medium",children:s.emergencyContact.relationship||"Not specified"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Phone:"}),e.jsx("span",{className:"font-medium",children:s.emergencyContact.phoneNumber||"Not provided"})]})]})]}),s.notes&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mt-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(E,{name:"FileText",size:20,className:"mr-2"}),"Notes"]}),e.jsx("p",{className:"text-gray-700",children:s.notes})]})]})},$c=({selectedStaff:s,onBack:t})=>{const{processBulkPayroll:a,processPayment:r,paymentStats:n,loading:i}=Ht(),[l,o]=T.useState([]),[c,d]=T.useState({totalEmployees:0,totalGrossSalary:0,totalDeductions:0,totalNetSalary:0,mpesaPayments:0,bankTransfers:0}),[u,b]=T.useState("ready"),[C,w]=T.useState(null);T.useEffect(()=>{if(s&&s.length>0){const y=s.map(A=>{const N=A.payrollInfo.basicSalary||0,f=A.payrollInfo.allowances.reduce((R,L)=>R+L.amount,0),v=A.payrollInfo.deductions.reduce((R,L)=>R+L.amount,0),h=N+f,I=h-v;return{id:A.id,employeeNumber:A.employeeNumber,name:`${A.personalInfo.firstName} ${A.personalInfo.lastName}`,department:A.employmentInfo.department,role:A.employmentInfo.role,basicSalary:N,allowances:f,deductions:v,grossSalary:h,netSalary:I,paymentMethod:A.payrollInfo.paymentMethod,mpesaNumber:A.payrollInfo.mpesaNumber,bankDetails:A.payrollInfo.bankDetails,taxNumber:A.payrollInfo.taxNumber,status:"pending"}});o(y),g(y)}},[s]);const g=y=>{const A={totalEmployees:y.length,totalGrossSalary:y.reduce((N,f)=>N+f.grossSalary,0),totalDeductions:y.reduce((N,f)=>N+f.deductions,0),totalNetSalary:y.reduce((N,f)=>N+f.netSalary,0),mpesaPayments:y.filter(N=>N.paymentMethod==="mpesa").length,bankTransfers:y.filter(N=>N.paymentMethod==="bank_transfer").length};d(A)},p=(y,A,N)=>{const f=l.map(v=>{if(v.id===y){const h={...v,[A]:parseFloat(N)||0};return h.grossSalary=h.basicSalary+h.allowances,h.netSalary=h.grossSalary-h.deductions,h}return v});o(f),g(f)},x=async()=>{b("processing");try{const y=l.filter(N=>N.paymentMethod==="mpesa");if(y.length===0){alert("No M-Pesa payments to process. Please ensure staff have M-Pesa payment method configured."),b("ready");return}const A=await a(y);if(A.success){w(A.data),b("completed");const N=l.map(f=>{const v=A.data.results.successful.find(I=>I.employee.id===f.id),h=A.data.results.failed.find(I=>I.employee.id===f.id);return v?{...f,status:"completed"}:h?{...f,status:"failed",error:h.error}:f});o(N)}else b("failed"),alert(`Payroll processing failed: ${A.error}`)}catch(y){b("failed"),alert(`Error processing payroll: ${y.message}`)}},m=async y=>{if(y.paymentMethod!=="mpesa"){alert("Individual payments are currently only supported for M-Pesa");return}try{const A={employeeId:y.id,employeeName:y.name,employeeNumber:y.employeeNumber,phoneNumber:y.mpesaNumber,amount:y.netSalary,remarks:`Salary payment for ${y.name} - ${new Date().toLocaleDateString()}`,occasion:"Individual Salary Payment"},N=await r(A);if(N.success){const f=l.map(v=>v.id===y.id?{...v,status:"completed"}:v);o(f),alert("Payment processed successfully!")}else alert(`Payment failed: ${N.error}`)}catch(A){alert(`Error processing payment: ${A.message}`)}},j=y=>{switch(y){case"completed":return"text-green-600 bg-green-100";case"failed":return"text-red-600 bg-red-100";case"processing":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},S=y=>`KSh ${y.toLocaleString()}`;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Payroll Summary"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"})," Payroll"]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"M-Pesa Status"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:"Connected"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:c.totalEmployees}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Employees"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:S(c.totalGrossSalary)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Gross Salary"})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:S(c.totalDeductions)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Deductions"})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:S(c.totalNetSalary)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Net Payable"})]}),e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:c.mpesaPayments}),e.jsx("div",{className:"text-sm text-gray-600",children:"M-Pesa Payments"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:c.bankTransfers}),e.jsx("div",{className:"text-sm text-gray-600",children:"Bank Transfers"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Payroll Processing"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Process salary payments via M-Pesa B2C integration"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(P,{variant:"outline",iconName:"ArrowLeft",onClick:t,children:"Back to Staff"}),e.jsx(P,{iconName:"CreditCard",onClick:x,loading:i||u==="processing",disabled:u==="processing"||c.mpesaPayments===0,children:u==="processing"?"Processing...":`Process M-Pesa Payments (${c.mpesaPayments})`})]})]}),u!=="ready"&&e.jsxs("div",{className:"mt-4 p-4 rounded-lg border",children:[u==="processing"&&e.jsxs("div",{className:"flex items-center text-blue-600",children:[e.jsx(E,{name:"Loader2",size:20,className:"animate-spin mr-2"}),e.jsx("span",{children:"Processing payroll payments..."})]}),u==="completed"&&C&&e.jsxs("div",{className:"text-green-600",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(E,{name:"CheckCircle",size:20,className:"mr-2"}),e.jsx("span",{className:"font-medium",children:"Payroll processing completed!"})]}),e.jsxs("div",{className:"text-sm",children:["Successful: ",C.successfulPayments," | Failed: ",C.failedPayments," | Total Amount: ",S(C.successfulAmount)]})]}),u==="failed"&&e.jsxs("div",{className:"flex items-center text-red-600",children:[e.jsx(E,{name:"XCircle",size:20,className:"mr-2"}),e.jsx("span",{children:"Payroll processing failed. Please try again."})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Employee Payroll Details"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Basic Salary"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Allowances"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deductions"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Salary"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Method"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(y=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.name}),e.jsx("div",{className:"text-sm text-gray-500",children:y.employeeNumber})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(D,{type:"number",value:y.basicSalary,onChange:A=>p(y.id,"basicSalary",A.target.value),className:"w-24 text-sm",disabled:y.status==="completed"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(D,{type:"number",value:y.allowances,onChange:A=>p(y.id,"allowances",A.target.value),className:"w-24 text-sm",disabled:y.status==="completed"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(D,{type:"number",value:y.deductions,onChange:A=>p(y.id,"deductions",A.target.value),className:"w-24 text-sm",disabled:y.status==="completed"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:S(y.netSalary)})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{name:y.paymentMethod==="mpesa"?"Smartphone":"CreditCard",size:16,className:"text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm text-gray-900",children:y.paymentMethod==="mpesa"?"M-Pesa":"Bank Transfer"})]}),y.paymentMethod==="mpesa"&&e.jsx("div",{className:"text-xs text-gray-500",children:y.mpesaNumber})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${j(y.status)}`,children:y.status}),y.error&&e.jsx("div",{className:"text-xs text-red-500 mt-1",children:y.error})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:y.paymentMethod==="mpesa"&&y.status==="pending"&&e.jsx(P,{variant:"outline",size:"sm",iconName:"Send",onClick:()=>m(y),children:"Pay Now"})})]},y.id))})]})})]})]})},Hc=()=>{const[s,t]=T.useState("list"),[a,r]=T.useState([]),[n,i]=T.useState(null),l=()=>{i(null),t("create")},o=w=>{i(w),t("edit")},c=w=>{i(w),t("details")},d=w=>{i(w),t("details")},u=w=>{r(w),t("payroll")},b=()=>{r([]),i(null),t("list")},C=()=>{switch(s){case"create":return e.jsx(Ra,{mode:"create",onSave:d,onCancel:b});case"edit":return e.jsx(Ra,{staff:n,mode:"edit",onSave:d,onCancel:b});case"details":return e.jsx(Gc,{staff:n,onEdit:o,onBack:b});case"payroll":return e.jsx($c,{selectedStaff:a,onBack:b});default:return e.jsx(zc,{onStaffSelect:c,onCreateStaff:l,onProcessPayroll:u})}};return e.jsxs(Bc,{children:[e.jsxs(We,{children:[e.jsx("title",{children:"Staff Management - MoveEase Pro"}),e.jsx("meta",{name:"description",content:"Manage your staff, process payroll with M-Pesa, and track employee performance"})]}),e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"flex h-screen",children:[e.jsx(nt,{}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[s!=="list"&&e.jsxs("button",{onClick:b,className:"flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Staff"]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[s==="list"&&"Staff Management",s==="create"&&"Add New Staff",s==="edit"&&"Edit Staff",s==="details"&&"Staff Details",s==="payroll"&&"Payroll Processing"]}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[s==="list"&&"Manage your staff and process M-Pesa payroll",s==="create"&&"Add a new staff member to your team",s==="edit"&&"Update staff member information",s==="details"&&"View complete staff member profile",s==="payroll"&&`Processing payroll for ${a.length} staff members`]})]})]}),s==="list"&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"M-Pesa Integration"}),e.jsx("div",{className:"text-lg font-semibold text-green-600",children:"Active"})]}),e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"})]})]})}),e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"p-6",children:C()})})]})]})})]})},ne={DRAFT:"draft",PENDING_APPROVAL:"pending_approval",APPROVED:"approved",PROCESSING:"processing",COMPLETED:"completed",FAILED:"failed",CANCELLED:"cancelled"},Ce={WEEKLY:"weekly",BIWEEKLY:"biweekly",MONTHLY:"monthly",QUARTERLY:"quarterly",ANNUALLY:"annually"},qc={KENYA:[{min:0,max:24e3,rate:.1,relief:2400},{min:24001,max:32333,rate:.25,relief:0},{min:32334,max:5e5,rate:.3,relief:0},{min:500001,max:8e5,rate:.325,relief:0},{min:800001,max:1/0,rate:.35,relief:0}]},Ot={NHIF:[{min:0,max:5999,amount:150},{min:6e3,max:7999,amount:300},{min:8e3,max:11999,amount:400},{min:12e3,max:14999,amount:500},{min:15e3,max:19999,amount:600},{min:2e4,max:24999,amount:750},{min:25e3,max:29999,amount:850},{min:3e4,max:34999,amount:900},{min:35e3,max:39999,amount:950},{min:4e4,max:44999,amount:1e3},{min:45e3,max:49999,amount:1100},{min:5e4,max:59999,amount:1200},{min:6e4,max:69999,amount:1300},{min:7e4,max:79999,amount:1400},{min:8e4,max:89999,amount:1500},{min:9e4,max:99999,amount:1600},{min:1e5,max:1/0,amount:1700}],NSSF:{rate:.06,maxContribution:2160},HOUSING_LEVY:{rate:.015,maxContribution:2500}},Vc={TRANSPORT:"transport"},Kc={LOAN:"loan"},Wc={ACTIVE:"active"},Yc={id:"",name:"",periodType:Ce.MONTHLY,startDate:null,endDate:null,payDate:null,status:ne.DRAFT,totalEmployees:0,totalGrossPay:0,totalDeductions:0,totalNetPay:0,totalTax:0,totalNHIF:0,totalNSSF:0,totalHousingLevy:0,createdAt:null,createdBy:"",approvedAt:null,approvedBy:"",processedAt:null,processedBy:"",notes:""},Jc={id:"",payrollPeriodId:"",employeeId:"",employeeNumber:"",employeeName:"",department:"",role:"",basicSalary:0,daysWorked:0,totalWorkingDays:0,hoursWorked:0,overtimeHours:0,overtimeRate:1.5,allowances:[{id:"",type:Vc.TRANSPORT,name:"",amount:0,taxable:!0,frequency:"monthly",prorated:!1}],totalAllowances:0,taxableAllowances:0,nonTaxableAllowances:0,deductions:[{id:"",type:Kc.LOAN,name:"",amount:0,balance:0,installmentNumber:0,totalInstallments:0,status:Wc.ACTIVE}],totalDeductions:0,statutoryDeductions:{paye:0,nhif:0,nssf:0,housingLevy:0,total:0},grossPay:0,taxableIncome:0,netPay:0,paymentMethod:"mpesa",mpesaNumber:"",bankDetails:{bankName:"",accountNumber:"",branchCode:""},status:ne.DRAFT,paymentStatus:"pending",paymentReference:"",paymentDate:null,createdAt:null,updatedAt:null,processedAt:null,notes:""},Qc={id:"",payrollItemId:"",payrollPeriodId:"",employeeId:"",employeeNumber:"",employeeName:"",department:"",role:"",payPeriod:"",payDate:null,earnings:{basicSalary:0,allowances:[],overtime:0,bonus:0,commission:0,total:0},deductions:{statutory:{paye:0,nhif:0,nssf:0,housingLevy:0,total:0},voluntary:[],total:0},grossPay:0,totalDeductions:0,netPay:0,ytd:{grossPay:0,paye:0,nhif:0,nssf:0,netPay:0},companyInfo:{name:"MoveEase Pro",address:"",phone:"",email:"",kraPin:"",nssfNumber:"",nhifNumber:""},generatedAt:null,generatedBy:"",pdfUrl:"",emailSent:!1,emailSentAt:null};class Zc{constructor(){this.payrollPeriods=this.loadPayrollPeriods(),this.payrollItems=this.loadPayrollItems(),this.compensationPackages=this.loadCompensationPackages(),this.payslips=this.loadPayslips()}loadPayrollPeriods(){try{const t=localStorage.getItem("moveease_payroll_periods");return t?JSON.parse(t):[]}catch(t){return console.error("Error loading payroll periods:",t),[]}}loadPayrollItems(){try{const t=localStorage.getItem("moveease_payroll_items");return t?JSON.parse(t):[]}catch(t){return console.error("Error loading payroll items:",t),[]}}loadCompensationPackages(){try{const t=localStorage.getItem("moveease_compensation_packages");return t?JSON.parse(t):[]}catch(t){return console.error("Error loading compensation packages:",t),[]}}loadPayslips(){try{const t=localStorage.getItem("moveease_payslips");return t?JSON.parse(t):[]}catch(t){return console.error("Error loading payslips:",t),[]}}savePayrollPeriods(){try{return localStorage.setItem("moveease_payroll_periods",JSON.stringify(this.payrollPeriods)),!0}catch(t){return console.error("Error saving payroll periods:",t),!1}}savePayrollItems(){try{return localStorage.setItem("moveease_payroll_items",JSON.stringify(this.payrollItems)),!0}catch(t){return console.error("Error saving payroll items:",t),!1}}saveCompensationPackages(){try{return localStorage.setItem("moveease_compensation_packages",JSON.stringify(this.compensationPackages)),!0}catch(t){return console.error("Error saving compensation packages:",t),!1}}savePayslips(){try{return localStorage.setItem("moveease_payslips",JSON.stringify(this.payslips)),!0}catch(t){return console.error("Error saving payslips:",t),!1}}generateId(t="payroll"){return`${t}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}calculatePAYE(t,a=2400){let r=0,n=t;for(const i of qc.KENYA){if(n<=0)break;const l=Math.min(n,i.max===1/0?n:i.max-i.min+1);r+=l*i.rate,n-=l}return r=Math.max(0,r-a),Math.round(r)}calculateNHIF(t){for(const a of Ot.NHIF)if(t>=a.min&&t<=a.max)return a.amount;return 1700}calculateNSSF(t){const a=t*Ot.NSSF.rate;return Math.min(a,Ot.NSSF.maxContribution)}calculateHousingLevy(t){const a=t*Ot.HOUSING_LEVY.rate;return Math.min(a,Ot.HOUSING_LEVY.maxContribution)}calculatePayrollItem(t,a,r={}){try{const n=this.getActiveCompensationPackage(t.id),i=r.workingDays||a.workingDays||22,l=r.daysWorked||i,o=r.basicSalary||(n==null?void 0:n.basicSalary)||t.payrollInfo.basicSalary,c=o/i*l;let d=0,u=0,b=0;const C=r.allowances||t.payrollInfo.allowances||[];C.forEach(H=>{let k=H.amount;H.prorated&&l<i&&(k=k/i*l),d+=k,H.taxable?u+=k:b+=k});const w=r.overtimeHours||0,g=r.overtimeRate||1.5,p=o/(i*8),x=w*p*g,m=c+d+x,j=m-b,S=this.calculatePAYE(j),y=this.calculateNHIF(m),A=this.calculateNSSF(o),N=this.calculateHousingLevy(m),f={paye:S,nhif:y,nssf:A,housingLevy:N,total:S+y+A+N};let v=0;const h=r.deductions||t.payrollInfo.deductions||[];h.forEach(H=>{v+=H.amount});const I=f.total+v,R=m-I;return{success:!0,data:{...Jc,id:this.generateId("payroll_item"),payrollPeriodId:a.id,employeeId:t.id,employeeNumber:t.employeeNumber,employeeName:`${t.personalInfo.firstName} ${t.personalInfo.lastName}`,department:t.employmentInfo.department,role:t.employmentInfo.role,basicSalary:c,daysWorked:l,totalWorkingDays:i,overtimeHours:w,overtimeRate:g,allowances:C,totalAllowances:d,taxableAllowances:u,nonTaxableAllowances:b,deductions:h,totalDeductions:v,statutoryDeductions:f,grossPay:m,taxableIncome:j,netPay:R,paymentMethod:t.payrollInfo.paymentMethod,mpesaNumber:t.payrollInfo.mpesaNumber,bankDetails:t.payrollInfo.bankDetails,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}}}catch(n){return{success:!1,error:n.message}}}async createPayrollPeriod(t){try{const a={...Yc,id:this.generateId("payroll_period"),...t,createdAt:new Date().toISOString(),createdBy:"system"};return this.payrollPeriods.push(a),this.savePayrollPeriods(),{success:!0,data:a,message:"Payroll period created successfully"}}catch(a){return{success:!1,error:a.message,message:"Failed to create payroll period"}}}async generatePayroll(t,a,r={}){try{const n=this.payrollPeriods.find(g=>g.id===t);if(!n)throw new Error("Payroll period not found");const i=[];let l=0,o=0,c=0,d=0,u=0,b=0,C=0;for(const g of a){const p=r[g.id]||{},x=this.calculatePayrollItem(g,n,p);x.success&&(i.push(x.data),this.payrollItems.push(x.data),l+=x.data.grossPay,o+=x.data.statutoryDeductions.total+x.data.totalDeductions,c+=x.data.netPay,d+=x.data.statutoryDeductions.paye,u+=x.data.statutoryDeductions.nhif,b+=x.data.statutoryDeductions.nssf,C+=x.data.statutoryDeductions.housingLevy)}const w=this.payrollPeriods.findIndex(g=>g.id===t);return this.payrollPeriods[w]={...this.payrollPeriods[w],totalEmployees:i.length,totalGrossPay:l,totalDeductions:o,totalNetPay:c,totalTax:d,totalNHIF:u,totalNSSF:b,totalHousingLevy:C,status:ne.PENDING_APPROVAL,updatedAt:new Date().toISOString()},this.savePayrollPeriods(),this.savePayrollItems(),{success:!0,data:{payrollPeriod:this.payrollPeriods[w],payrollItems:i,summary:{totalEmployees:i.length,totalGrossPay:l,totalDeductions:o,totalNetPay:c,totalTax:d,totalNHIF:u,totalNSSF:b,totalHousingLevy:C}},message:"Payroll generated successfully"}}catch(n){return{success:!1,error:n.message,message:"Failed to generate payroll"}}}getPayrollPeriods(t={}){try{let a=[...this.payrollPeriods];t.status&&(a=a.filter(c=>c.status===t.status)),t.year&&(a=a.filter(c=>new Date(c.startDate).getFullYear()===parseInt(t.year))),a.sort((c,d)=>new Date(d.startDate)-new Date(c.startDate));const r=t.page||1,n=t.limit||10,i=(r-1)*n,l=i+n;return{success:!0,data:a.slice(i,l),pagination:{page:r,limit:n,total:a.length,totalPages:Math.ceil(a.length/n),hasNext:l<a.length,hasPrev:r>1}}}catch(a){return{success:!1,error:a.message}}}getPayrollItems(t){try{return{success:!0,data:this.payrollItems.filter(r=>r.payrollPeriodId===t)}}catch(a){return{success:!1,error:a.message}}}generatePayslip(t){try{const a=this.payrollItems.find(o=>o.id===t);if(!a)throw new Error("Payroll item not found");const r=this.payrollPeriods.find(o=>o.id===a.payrollPeriodId),n=this.payrollItems.filter(o=>o.employeeId===a.employeeId&&new Date(o.createdAt).getFullYear()===new Date().getFullYear()),i={grossPay:n.reduce((o,c)=>o+c.grossPay,0),paye:n.reduce((o,c)=>o+c.statutoryDeductions.paye,0),nhif:n.reduce((o,c)=>o+c.statutoryDeductions.nhif,0),nssf:n.reduce((o,c)=>o+c.statutoryDeductions.nssf,0),netPay:n.reduce((o,c)=>o+c.netPay,0)},l={...Qc,id:this.generateId("payslip"),payrollItemId:a.id,payrollPeriodId:a.payrollPeriodId,employeeId:a.employeeId,employeeNumber:a.employeeNumber,employeeName:a.employeeName,department:a.department,role:a.role,payPeriod:r.name,payDate:r.payDate,earnings:{basicSalary:a.basicSalary,allowances:a.allowances,overtime:a.overtimeHours*(a.basicSalary/(a.totalWorkingDays*8))*a.overtimeRate,bonus:0,commission:0,total:a.grossPay},deductions:{statutory:a.statutoryDeductions,voluntary:a.deductions,total:a.statutoryDeductions.total+a.totalDeductions},grossPay:a.grossPay,totalDeductions:a.statutoryDeductions.total+a.totalDeductions,netPay:a.netPay,ytd:i,generatedAt:new Date().toISOString(),generatedBy:"system"};return this.payslips.push(l),this.savePayslips(),{success:!0,data:l,message:"Payslip generated successfully"}}catch(a){return{success:!1,error:a.message}}}getActiveCompensationPackage(t){return this.compensationPackages.find(a=>a.employeeId===t&&a.isActive&&new Date(a.effectiveDate)<=new Date&&(!a.endDate||new Date(a.endDate)>=new Date))}async createCompensationPackage(t){try{this.compensationPackages.forEach(r=>{r.employeeId===t.employeeId&&r.isActive&&(r.isActive=!1,r.endDate=new Date().toISOString())});const a={id:this.generateId("comp_package"),...t,createdAt:new Date().toISOString(),createdBy:"system"};return this.compensationPackages.push(a),this.saveCompensationPackages(),{success:!0,data:a,message:"Compensation package created successfully"}}catch(a){return{success:!1,error:a.message}}}async approvePayrollPeriod(t,a){try{const r=this.payrollPeriods.findIndex(n=>n.id===t);if(r===-1)throw new Error("Payroll period not found");return this.payrollPeriods[r]={...this.payrollPeriods[r],status:ne.APPROVED,approvedAt:new Date().toISOString(),approvedBy:a,updatedAt:new Date().toISOString()},this.payrollItems.forEach(n=>{n.payrollPeriodId===t&&(n.status=ne.APPROVED,n.updatedAt=new Date().toISOString())}),this.savePayrollPeriods(),this.savePayrollItems(),{success:!0,message:"Payroll period approved successfully"}}catch(r){return{success:!1,error:r.message}}}getPayrollStats(){try{const t=new Date().getFullYear(),a=this.payrollPeriods.filter(i=>new Date(i.startDate).getFullYear()===t),r={totalPeriods:this.payrollPeriods.length,currentYearPeriods:a.length,pendingApproval:this.payrollPeriods.filter(i=>i.status===ne.PENDING_APPROVAL).length,approved:this.payrollPeriods.filter(i=>i.status===ne.APPROVED).length,completed:this.payrollPeriods.filter(i=>i.status===ne.COMPLETED).length,totalPayrollValue:a.reduce((i,l)=>i+l.totalNetPay,0),totalTaxPaid:a.reduce((i,l)=>i+l.totalTax,0),averageGrossPay:0,averageNetPay:0},n=this.payrollItems.filter(i=>new Date(i.createdAt).getFullYear()===t).length;if(n>0){const i=this.payrollItems.filter(o=>new Date(o.createdAt).getFullYear()===t).reduce((o,c)=>o+c.grossPay,0),l=this.payrollItems.filter(o=>new Date(o.createdAt).getFullYear()===t).reduce((o,c)=>o+c.netPay,0);r.averageGrossPay=i/n,r.averageNetPay=l/n}return{success:!0,data:r}}catch(t){return{success:!1,error:t.message}}}exportPayrollData(t,a="json"){try{const r=this.payrollPeriods.find(l=>l.id===t),i=this.payrollItems.filter(l=>l.payrollPeriodId===t).map(l=>({employeeNumber:l.employeeNumber,employeeName:l.employeeName,department:l.department,role:l.role,basicSalary:l.basicSalary,allowances:l.totalAllowances,grossPay:l.grossPay,paye:l.statutoryDeductions.paye,nhif:l.statutoryDeductions.nhif,nssf:l.statutoryDeductions.nssf,housingLevy:l.statutoryDeductions.housingLevy,otherDeductions:l.totalDeductions,netPay:l.netPay,paymentMethod:l.paymentMethod,mpesaNumber:l.mpesaNumber}));if(a==="csv"){const l=Object.keys(i[0]||{});return{success:!0,data:[l.join(","),...i.map(c=>l.map(d=>`"${c[d]||""}"`).join(","))].join(`
`),filename:`payroll_${r.name.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.csv`}}return{success:!0,data:JSON.stringify({payrollPeriod:r,payrollItems:i},null,2),filename:`payroll_${r.name.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.json`}}catch(r){return{success:!1,error:r.message}}}}const Me=new Zc,Z={SET_LOADING:"SET_LOADING",SET_ERROR:"SET_ERROR",SET_PAYROLL_PERIODS:"SET_PAYROLL_PERIODS",SET_CURRENT_PERIOD:"SET_CURRENT_PERIOD",SET_PAYROLL_ITEMS:"SET_PAYROLL_ITEMS",SET_PAYROLL_STATS:"SET_PAYROLL_STATS",SET_COMPENSATION_PACKAGES:"SET_COMPENSATION_PACKAGES",SET_PAYSLIPS:"SET_PAYSLIPS",SET_FILTERS:"SET_FILTERS",SET_PAGINATION:"SET_PAGINATION",ADD_PAYROLL_PERIOD:"ADD_PAYROLL_PERIOD",UPDATE_PAYROLL_PERIOD:"UPDATE_PAYROLL_PERIOD",ADD_PAYROLL_ITEMS:"ADD_PAYROLL_ITEMS",UPDATE_PAYROLL_ITEM:"UPDATE_PAYROLL_ITEM",CLEAR_ERROR:"CLEAR_ERROR"},Xc={payrollPeriods:[],currentPeriod:null,payrollItems:[],payrollStats:{totalPeriods:0,currentYearPeriods:0,pendingApproval:0,approved:0,completed:0,totalPayrollValue:0,totalTaxPaid:0,averageGrossPay:0,averageNetPay:0},compensationPackages:[],payslips:[],filters:{status:"",year:new Date().getFullYear().toString(),search:"",sortBy:"startDate",sortOrder:"desc"},pagination:{page:1,limit:10,total:0,totalPages:0,hasNext:!1,hasPrev:!1},loading:!1,error:null};function ed(s,t){var a;switch(t.type){case Z.SET_LOADING:return{...s,loading:t.payload,error:t.payload?null:s.error};case Z.SET_ERROR:return{...s,error:t.payload,loading:!1};case Z.CLEAR_ERROR:return{...s,error:null};case Z.SET_PAYROLL_PERIODS:return{...s,payrollPeriods:t.payload,loading:!1,error:null};case Z.SET_CURRENT_PERIOD:return{...s,currentPeriod:t.payload};case Z.SET_PAYROLL_ITEMS:return{...s,payrollItems:t.payload};case Z.SET_PAYROLL_STATS:return{...s,payrollStats:t.payload};case Z.SET_COMPENSATION_PACKAGES:return{...s,compensationPackages:t.payload};case Z.SET_PAYSLIPS:return{...s,payslips:t.payload};case Z.SET_FILTERS:return{...s,filters:{...s.filters,...t.payload}};case Z.SET_PAGINATION:return{...s,pagination:t.payload};case Z.ADD_PAYROLL_PERIOD:return{...s,payrollPeriods:[t.payload,...s.payrollPeriods]};case Z.UPDATE_PAYROLL_PERIOD:return{...s,payrollPeriods:s.payrollPeriods.map(r=>r.id===t.payload.id?t.payload:r),currentPeriod:((a=s.currentPeriod)==null?void 0:a.id)===t.payload.id?t.payload:s.currentPeriod};case Z.ADD_PAYROLL_ITEMS:return{...s,payrollItems:[...s.payrollItems,...t.payload]};case Z.UPDATE_PAYROLL_ITEM:return{...s,payrollItems:s.payrollItems.map(r=>r.id===t.payload.id?t.payload:r)};default:return s}}const Ur=T.createContext();function td({children:s}){const[t,a]=T.useReducer(ed,Xc);T.useEffect(()=>{r(),n()},[]),T.useEffect(()=>{(t.filters||t.pagination.page||t.pagination.limit)&&r()},[t.filters,t.pagination.page,t.pagination.limit]);const r=async()=>{a({type:Z.SET_LOADING,payload:!0});try{const j=await Me.getPayrollPeriods({...t.filters,page:t.pagination.page,limit:t.pagination.limit});j.success?(a({type:Z.SET_PAYROLL_PERIODS,payload:j.data}),a({type:Z.SET_PAGINATION,payload:j.pagination})):a({type:Z.SET_ERROR,payload:j.error})}catch(j){a({type:Z.SET_ERROR,payload:j.message})}},n=async()=>{try{const j=await Me.getPayrollStats();j.success&&a({type:Z.SET_PAYROLL_STATS,payload:j.data})}catch(j){console.error("Error loading payroll stats:",j)}},m={...t,createPayrollPeriod:async j=>{a({type:Z.SET_LOADING,payload:!0});try{const S=await Me.createPayrollPeriod(j);return S.success?(a({type:Z.ADD_PAYROLL_PERIOD,payload:S.data}),await n(),S):(a({type:Z.SET_ERROR,payload:S.error}),S)}catch(S){const y=S.message;return a({type:Z.SET_ERROR,payload:y}),{success:!1,error:y}}finally{a({type:Z.SET_LOADING,payload:!1})}},generatePayroll:async(j,S,y={})=>{a({type:Z.SET_LOADING,payload:!0});try{const A=await Me.generatePayroll(j,S,y);return A.success?(a({type:Z.UPDATE_PAYROLL_PERIOD,payload:A.data.payrollPeriod}),a({type:Z.ADD_PAYROLL_ITEMS,payload:A.data.payrollItems}),await n(),A):(a({type:Z.SET_ERROR,payload:A.error}),A)}catch(A){const N=A.message;return a({type:Z.SET_ERROR,payload:N}),{success:!1,error:N}}finally{a({type:Z.SET_LOADING,payload:!1})}},loadPayrollItems:async j=>{try{const S=await Me.getPayrollItems(j);return S.success&&a({type:Z.SET_PAYROLL_ITEMS,payload:S.data}),S}catch(S){return{success:!1,error:S.message}}},approvePayrollPeriod:async(j,S)=>{a({type:Z.SET_LOADING,payload:!0});try{const y=await Me.approvePayrollPeriod(j,S);if(y.success){const A=Me.payrollPeriods.find(N=>N.id===j);return A&&a({type:Z.UPDATE_PAYROLL_PERIOD,payload:A}),await n(),y}else return a({type:Z.SET_ERROR,payload:y.error}),y}catch(y){const A=y.message;return a({type:Z.SET_ERROR,payload:A}),{success:!1,error:A}}finally{a({type:Z.SET_LOADING,payload:!1})}},generatePayslip:async j=>{try{const S=await Me.generatePayslip(j);return S.success&&a({type:Z.SET_PAYSLIPS,payload:[...t.payslips,S.data]}),S}catch(S){return{success:!1,error:S.message}}},createCompensationPackage:async j=>{try{const S=await Me.createCompensationPackage(j);if(S.success){const y=Me.compensationPackages;a({type:Z.SET_COMPENSATION_PACKAGES,payload:y})}return S}catch(S){return{success:!1,error:S.message}}},calculatePayrollItem:async(j,S,y={})=>{try{return await Me.calculatePayrollItem(j,S,y)}catch(A){return{success:!1,error:A.message}}},setCurrentPeriod:j=>{a({type:Z.SET_CURRENT_PERIOD,payload:j})},setFilters:j=>{a({type:Z.SET_FILTERS,payload:j})},setPagination:j=>{a({type:Z.SET_PAGINATION,payload:{...t.pagination,...j}})},clearError:()=>{a({type:Z.CLEAR_ERROR})},exportPayrollData:async(j,S="json")=>{try{const y=await Me.exportPayrollData(j,S);if(y.success){const A=new Blob([y.data],{type:S==="csv"?"text/csv":"application/json"}),N=URL.createObjectURL(A),f=document.createElement("a");f.href=N,f.download=y.filename,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(N)}return y}catch(y){return{success:!1,error:y.message}}},loadPayrollPeriods:r,loadPayrollStats:n};return e.jsx(Ur.Provider,{value:m,children:s})}function ws(){const s=T.useContext(Ur);if(!s)throw new Error("usePayroll must be used within a PayrollProvider");return s}const sd=({onCreatePeriod:s,onViewPeriod:t,onGeneratePayroll:a})=>{const{payrollPeriods:r,payrollStats:n,loading:i,error:l,filters:o,pagination:c,setFilters:d,setPagination:u,clearError:b,exportPayrollData:C}=ws(),[w,g]=T.useState(!1),p=f=>{const v=f.target.value;d({search:v})},x=(f,v)=>{d({[f]:v})},m=f=>{u({page:f})},j=f=>{t&&t(f)},S=async(f,v)=>{const h=await C(f,v);h.success||alert(`Export failed: ${h.error}`)},y=f=>`KSh ${f.toLocaleString()}`,A=f=>{switch(f){case ne.DRAFT:return"text-gray-600 bg-gray-100";case ne.PENDING_APPROVAL:return"text-yellow-600 bg-yellow-100";case ne.APPROVED:return"text-blue-600 bg-blue-100";case ne.PROCESSING:return"text-purple-600 bg-purple-100";case ne.COMPLETED:return"text-green-600 bg-green-100";case ne.FAILED:return"text-red-600 bg-red-100";case ne.CANCELLED:return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},N=f=>f.split("_").map(v=>v.charAt(0).toUpperCase()+v.slice(1)).join(" ");return l?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{name:"AlertCircle",size:20,className:"text-red-600 mr-2"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-800 font-medium",children:"Error Loading Payroll Data"}),e.jsx("p",{className:"text-red-600 text-sm mt-1",children:l})]}),e.jsx(P,{variant:"outline",size:"sm",onClick:b,className:"ml-auto",children:"Retry"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Payroll Dashboard"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(P,{variant:"outline",iconName:"Download",onClick:()=>{alert("Payroll summary export will be implemented")},children:"Export Summary"}),e.jsx(P,{iconName:"Plus",onClick:s,children:"New Payroll Period"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n.totalPeriods}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Periods"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.currentYearPeriods}),e.jsx("div",{className:"text-sm text-gray-600",children:"This Year"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:n.pendingApproval}),e.jsx("div",{className:"text-sm text-gray-600",children:"Pending"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n.approved}),e.jsx("div",{className:"text-sm text-gray-600",children:"Approved"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.completed}),e.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:y(n.totalPayrollValue)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Value"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:y(n.totalTaxPaid)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Tax Paid"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:y(n.averageNetPay)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Avg Net Pay"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsx(D,{placeholder:"Search payroll periods...",value:o.search,onChange:p,iconName:"Search"})}),e.jsx(P,{variant:"outline",iconName:"Filter",onClick:()=>g(!w),children:"Filters"})]}),w&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 pt-4 border-t border-gray-200",children:[e.jsx(B,{label:"Status",options:[{value:"",label:"All Statuses"},{value:ne.DRAFT,label:"Draft"},{value:ne.PENDING_APPROVAL,label:"Pending Approval"},{value:ne.APPROVED,label:"Approved"},{value:ne.PROCESSING,label:"Processing"},{value:ne.COMPLETED,label:"Completed"},{value:ne.FAILED,label:"Failed"},{value:ne.CANCELLED,label:"Cancelled"}],value:o.status,onChange:f=>x("status",f)}),e.jsx(B,{label:"Year",options:[{value:"2024",label:"2024"},{value:"2023",label:"2023"},{value:"2022",label:"2022"}],value:o.year,onChange:f=>x("year",f)}),e.jsx(B,{label:"Sort By",options:[{value:"startDate",label:"Start Date"},{value:"payDate",label:"Pay Date"},{value:"totalNetPay",label:"Total Amount"},{value:"totalEmployees",label:"Employee Count"}],value:o.sortBy,onChange:f=>x("sortBy",f)}),e.jsx(B,{label:"Sort Order",options:[{value:"desc",label:"Descending"},{value:"asc",label:"Ascending"}],value:o.sortOrder,onChange:f=>x("sortOrder",f)})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Period"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dates"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employees"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gross Pay"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Deductions"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Pay"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(E,{name:"Loader2",size:24,className:"animate-spin text-gray-400 mr-2"}),e.jsx("span",{className:"text-gray-600",children:"Loading payroll periods..."})]})})}):r.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx(E,{name:"Calendar",size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No payroll periods found"}),e.jsx("p",{className:"text-sm",children:"Get started by creating your first payroll period."}),e.jsx(P,{className:"mt-4",iconName:"Plus",onClick:s,children:"Create Payroll Period"})]})})}):r.map(f=>e.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>j(f),children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:f.name}),e.jsx("div",{className:"text-sm text-gray-500",children:f.periodType})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-gray-900",children:[new Date(f.startDate).toLocaleDateString()," - ",new Date(f.endDate).toLocaleDateString()]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Pay Date: ",new Date(f.payDate).toLocaleDateString()]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:f.totalEmployees}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:y(f.totalGrossPay)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:y(f.totalDeductions)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:y(f.totalNetPay)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${A(f.status)}`,children:N(f.status)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(P,{variant:"ghost",size:"sm",iconName:"Eye",onClick:v=>{v.stopPropagation(),j(f)}}),f.status===ne.DRAFT&&e.jsx(P,{variant:"ghost",size:"sm",iconName:"Play",onClick:v=>{v.stopPropagation(),a(f)},className:"text-blue-600 hover:text-blue-700"}),e.jsx(P,{variant:"ghost",size:"sm",iconName:"Download",onClick:v=>{v.stopPropagation(),S(f.id,"csv")},className:"text-green-600 hover:text-green-700"})]})})]},f.id))})]})}),c.totalPages>1&&e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx(P,{variant:"outline",onClick:()=>m(c.page-1),disabled:!c.hasPrev,children:"Previous"}),e.jsx(P,{variant:"outline",onClick:()=>m(c.page+1),disabled:!c.hasNext,children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:(c.page-1)*c.limit+1})," ","to"," ",e.jsx("span",{className:"font-medium",children:Math.min(c.page*c.limit,c.total)})," ","of"," ",e.jsx("span",{className:"font-medium",children:c.total})," ","results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>m(c.page-1),disabled:!c.hasPrev,className:"rounded-l-md",children:"Previous"}),Array.from({length:c.totalPages},(f,v)=>v+1).filter(f=>f===1||f===c.totalPages||Math.abs(f-c.page)<=2).map((f,v,h)=>e.jsxs(je.Fragment,{children:[v>0&&h[v-1]!==f-1&&e.jsx("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:"..."}),e.jsx(P,{variant:f===c.page?"default":"outline",size:"sm",onClick:()=>m(f),className:"border-l-0",children:f})]},f)),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>m(c.page+1),disabled:!c.hasNext,className:"rounded-r-md border-l-0",children:"Next"})]})})]})]})]})]})},ad=({onSave:s,onCancel:t})=>{const{createPayrollPeriod:a,loading:r}=ws(),[n,i]=T.useState({name:"",periodType:Ce.MONTHLY,startDate:"",endDate:"",payDate:"",notes:""}),[l,o]=T.useState({}),c=(x,m)=>{i(j=>({...j,[x]:m})),l[x]&&o(j=>({...j,[x]:void 0})),(x==="periodType"||x==="startDate"||x==="endDate")&&d({...n,[x]:m})},d=x=>{if(x.startDate&&x.endDate){const m=new Date(x.startDate),j=new Date(x.endDate);let S="";switch(x.periodType){case Ce.MONTHLY:S=`${m.toLocaleDateString("en-US",{month:"long",year:"numeric"})} Payroll`;break;case Ce.WEEKLY:S=`Week of ${m.toLocaleDateString()} Payroll`;break;case Ce.BIWEEKLY:S=`Bi-weekly ${m.toLocaleDateString()} - ${j.toLocaleDateString()} Payroll`;break;case Ce.QUARTERLY:S=`Q${Math.floor(m.getMonth()/3)+1} ${m.getFullYear()} Payroll`;break;case Ce.ANNUALLY:S=`${m.getFullYear()} Annual Payroll`;break;default:S=`${m.toLocaleDateString()} - ${j.toLocaleDateString()} Payroll`}i(y=>({...y,name:S}))}},u=(x,m)=>{const j=new Date(x);let S=new Date(j);switch(m){case Ce.WEEKLY:S.setDate(j.getDate()+6);break;case Ce.BIWEEKLY:S.setDate(j.getDate()+13);break;case Ce.MONTHLY:S.setMonth(j.getMonth()+1),S.setDate(0);break;case Ce.QUARTERLY:S.setMonth(j.getMonth()+3),S.setDate(0);break;case Ce.ANNUALLY:S.setFullYear(j.getFullYear()+1),S.setDate(0);break;default:S.setDate(j.getDate()+30)}return S.toISOString().split("T")[0]},b=x=>{if(c("startDate",x),x){const m=u(x,n.periodType);c("endDate",m);const j=new Date(m);j.setDate(j.getDate()+5),c("payDate",j.toISOString().split("T")[0])}},C=x=>{if(c("periodType",x),n.startDate){const m=u(n.startDate,x);c("endDate",m)}},w=()=>{const x={};return n.name.trim()||(x.name="Period name is required"),n.startDate||(x.startDate="Start date is required"),n.endDate||(x.endDate="End date is required"),n.payDate||(x.payDate="Pay date is required"),n.startDate&&n.endDate&&new Date(n.startDate)>=new Date(n.endDate)&&(x.endDate="End date must be after start date"),n.endDate&&n.payDate&&new Date(n.payDate)<=new Date(n.endDate)&&(x.payDate="Pay date must be after end date"),o(x),Object.keys(x).length===0},g=async x=>{if(x.preventDefault(),!!w())try{const m=await a(n);m.success?s(m.data):alert(`Error: ${m.error}`)}catch(m){alert(`Error: ${m.message}`)}},p=[{value:Ce.WEEKLY,label:"Weekly"},{value:Ce.BIWEEKLY,label:"Bi-weekly"},{value:Ce.MONTHLY,label:"Monthly"},{value:Ce.QUARTERLY,label:"Quarterly"},{value:Ce.ANNUALLY,label:"Annually"}];return e.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Create Payroll Period"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Set up a new payroll period for processing employee salaries"})]}),e.jsx(P,{variant:"ghost",iconName:"X",onClick:t})]})}),e.jsxs("form",{onSubmit:g,className:"p-6 space-y-6",children:[e.jsx(B,{label:"Period Type",options:p,value:n.periodType,onChange:C,error:l.periodType,required:!0}),e.jsx(D,{label:"Period Name",value:n.name,onChange:x=>c("name",x.target.value),error:l.name,placeholder:"e.g., January 2024 Payroll",required:!0}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(D,{label:"Start Date",type:"date",value:n.startDate,onChange:x=>b(x.target.value),error:l.startDate,required:!0}),e.jsx(D,{label:"End Date",type:"date",value:n.endDate,onChange:x=>c("endDate",x.target.value),error:l.endDate,required:!0})]}),e.jsx(D,{label:"Pay Date",type:"date",value:n.payDate,onChange:x=>c("payDate",x.target.value),error:l.payDate,help:"Date when employees will receive their salaries",required:!0}),e.jsx(ve,{label:"Notes",value:n.notes,onChange:x=>c("notes",x.target.value),placeholder:"Any additional notes about this payroll period...",rows:3}),n.startDate&&n.endDate&&n.payDate&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Period Summary"}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Period:"})," ",new Date(n.startDate).toLocaleDateString()," - ",new Date(n.endDate).toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Duration:"})," ",Math.ceil((new Date(n.endDate)-new Date(n.startDate))/(1e3*60*60*24))+1," days"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Pay Date:"})," ",new Date(n.payDate).toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Processing Time:"})," ",Math.ceil((new Date(n.payDate)-new Date(n.endDate))/(1e3*60*60*24))," days after period end"]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx(P,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),e.jsx(P,{type:"submit",loading:r,iconName:"Save",children:"Create Period"})]})]})]})},rd=({period:s,onBack:t,onComplete:a})=>{const{generatePayroll:r,calculatePayrollItem:n,loading:i}=ws(),{staff:l}=Ht(),[o,c]=T.useState([]),[d,u]=T.useState([]),[b,C]=T.useState({}),[w,g]=T.useState(null),[p,x]=T.useState(1);T.useEffect(()=>{if(l&&l.length>0){const h=l.filter(I=>I.status===ce.ACTIVE||I.status===ce.ON_LEAVE);c(h),u(h.map(I=>I.id))}},[l]);const m=(h,I)=>{u(I?[...d,h]:d.filter(R=>R!==h))},j=h=>{u(h?o.map(I=>I.id):[])},S=(h,I,R)=>{C(L=>({...L,[h]:{...L[h],[I]:parseFloat(R)||0}}))},y=async()=>{const h=o.filter(z=>d.includes(z.id)),I=[];let R=0,L=0,H=0,k=0,U=0,O=0,M=0;for(const z of h){const G=b[z.id]||{},se=await n(z,s,G);se.success&&(I.push(se.data),R+=se.data.grossPay,L+=se.data.statutoryDeductions.total+se.data.totalDeductions,H+=se.data.netPay,k+=se.data.statutoryDeductions.paye,U+=se.data.statutoryDeductions.nhif,O+=se.data.statutoryDeductions.nssf,M+=se.data.statutoryDeductions.housingLevy)}g({items:I,summary:{totalEmployees:I.length,totalGross:R,totalDeductions:L,totalNet:H,totalTax:k,totalNHIF:U,totalNSSF:O,totalHousingLevy:M}})},A=async()=>{const h=o.filter(R=>d.includes(R.id)),I=await r(s.id,h,b);I.success?a(I.data.payrollPeriod):alert(`Error generating payroll: ${I.error}`)},N=h=>`KSh ${h.toLocaleString()}`,v=(()=>{const h=new Date(s.startDate),I=new Date(s.endDate);let R=0;for(let L=new Date(h);L<=I;L.setDate(L.getDate()+1)){const H=L.getDay();H!==0&&H!==6&&R++}return R})();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Generate Payroll: ",s.name]}),e.jsx("div",{className:"flex items-center space-x-4",children:[1,2,3,4].map(h=>e.jsxs("div",{className:`flex items-center ${h<4?"mr-4":""}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${p>=h?"bg-primary text-white":"bg-gray-200 text-gray-600"}`,children:h}),h<4&&e.jsx("div",{className:`w-12 h-1 mx-2 ${p>h?"bg-primary":"bg-gray-200"}`})]},h))})]}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[e.jsxs("div",{children:["Period: ",new Date(s.startDate).toLocaleDateString()," - ",new Date(s.endDate).toLocaleDateString()]}),e.jsxs("div",{children:["Working Days: ",v," | Pay Date: ",new Date(s.payDate).toLocaleDateString()]})]})]}),p===1&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Step 1: Select Employees"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Choose which employees to include in this payroll"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:d.length===o.length&&o.length>0,onChange:h=>j(h.target.checked),className:"rounded border-gray-300 text-primary focus:ring-primary"}),e.jsxs("label",{className:"ml-2 text-sm font-medium text-gray-900",children:["Select All (",o.length," employees)"]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[d.length," of ",o.length," selected"]})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:o.map(h=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:d.includes(h.id),onChange:I=>m(h.id,I.target.checked),className:"rounded border-gray-300 text-primary focus:ring-primary"}),e.jsxs("div",{className:"ml-3",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[h.personalInfo.firstName," ",h.personalInfo.lastName]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[h.employeeNumber,"  ",h.employmentInfo.role,"  ",h.employmentInfo.department]})]})]}),e.jsx("div",{className:"text-sm text-gray-900",children:N(h.payrollInfo.basicSalary)})]},h.id))}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx(P,{onClick:()=>x(2),disabled:d.length===0,iconName:"ArrowRight",children:"Next: Adjustments"})})]})]}),p===2&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Step 2: Salary Adjustments"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Make any necessary adjustments to employee salaries"})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Basic Salary"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days Worked"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Overtime Hours"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bonus"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.filter(h=>d.includes(h.id)).map(h=>{var I,R,L,H;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[h.personalInfo.firstName," ",h.personalInfo.lastName]}),e.jsx("div",{className:"text-sm text-gray-500",children:h.employeeNumber})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(D,{type:"number",value:((I=b[h.id])==null?void 0:I.basicSalary)||h.payrollInfo.basicSalary,onChange:k=>S(h.id,"basicSalary",k.target.value),className:"w-32"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(D,{type:"number",value:((R=b[h.id])==null?void 0:R.daysWorked)||v,onChange:k=>S(h.id,"daysWorked",k.target.value),className:"w-20",min:"0",max:v})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(D,{type:"number",value:((L=b[h.id])==null?void 0:L.overtimeHours)||0,onChange:k=>S(h.id,"overtimeHours",k.target.value),className:"w-20",min:"0"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(D,{type:"number",value:((H=b[h.id])==null?void 0:H.bonus)||0,onChange:k=>S(h.id,"bonus",k.target.value),className:"w-32",min:"0"})})]},h.id)})})]})}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsx(P,{variant:"outline",onClick:()=>x(1),iconName:"ArrowLeft",children:"Back: Select Staff"}),e.jsx(P,{onClick:()=>{y(),x(3)},iconName:"ArrowRight",children:"Next: Preview"})]})]})]}),p===3&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Step 3: Payroll Preview"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Review payroll calculations before generating"})]}),e.jsxs("div",{className:"p-6",children:[w&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600",children:w.summary.totalEmployees}),e.jsx("div",{className:"text-xs text-gray-600",children:"Employees"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:N(w.summary.totalGross)}),e.jsx("div",{className:"text-xs text-gray-600",children:"Gross Pay"})]}),e.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-red-600",children:N(w.summary.totalTax)}),e.jsx("div",{className:"text-xs text-gray-600",children:"PAYE Tax"})]}),e.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-yellow-600",children:N(w.summary.totalNHIF)}),e.jsx("div",{className:"text-xs text-gray-600",children:"NHIF"})]}),e.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-purple-600",children:N(w.summary.totalNSSF)}),e.jsx("div",{className:"text-xs text-gray-600",children:"NSSF"})]}),e.jsxs("div",{className:"text-center p-3 bg-indigo-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-indigo-600",children:N(w.summary.totalHousingLevy)}),e.jsx("div",{className:"text-xs text-gray-600",children:"Housing Levy"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-gray-900",children:N(w.summary.totalNet)}),e.jsx("div",{className:"text-xs text-gray-600",children:"Net Pay"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gross Pay"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PAYE"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"NHIF"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"NSSF"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Pay"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.items.map(h=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:h.employeeName}),e.jsx("div",{className:"text-sm text-gray-500",children:h.employeeNumber})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:N(h.grossPay)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:N(h.statutoryDeductions.paye)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:N(h.statutoryDeductions.nhif)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:N(h.statutoryDeductions.nssf)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:N(h.netPay)})]},h.employeeId))})]})})]}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsx(P,{variant:"outline",onClick:()=>x(2),iconName:"ArrowLeft",children:"Back: Adjustments"}),e.jsx(P,{onClick:()=>x(4),iconName:"ArrowRight",children:"Generate Payroll"})]})]})]}),p===4&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Step 4: Generate Payroll"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Confirm and generate the payroll for this period"})]}),e.jsxs("div",{className:"p-6 text-center",children:[e.jsx(E,{name:"CheckCircle",size:64,className:"text-green-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Ready to Generate Payroll"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["This will create payroll records for ",d.length,' employees and set the period status to "Pending Approval".']}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx(P,{variant:"outline",onClick:()=>x(3),iconName:"ArrowLeft",children:"Back: Preview"}),e.jsx(P,{onClick:A,loading:i,iconName:"Play",children:"Generate Payroll"})]})]})]})]})},nd=({period:s,onBack:t,onGenerate:a})=>{const{loadPayrollItems:r,approvePayrollPeriod:n,generatePayslip:i,exportPayrollData:l,loading:o}=ws(),[c,d]=T.useState([]),[u,b]=T.useState(!0);T.useEffect(()=>{s&&C()},[s]);const C=async()=>{b(!0);try{const j=await r(s.id);j.success&&d(j.data)}catch(j){console.error("Error loading payroll items:",j)}finally{b(!1)}},w=async()=>{if(confirm("Are you sure you want to approve this payroll period?")){const j=await n(s.id,"Current User");j.success?(alert("Payroll period approved successfully"),window.location.reload()):alert(`Error: ${j.error}`)}},g=async j=>{const S=await i(j);S.success?alert("Payslip generated successfully"):alert(`Error: ${S.error}`)},p=async j=>{const S=await l(s.id,j);S.success||alert(`Export failed: ${S.error}`)},x=j=>`KSh ${j.toLocaleString()}`,m=j=>{switch(j){case ne.DRAFT:return"text-gray-600 bg-gray-100";case ne.PENDING_APPROVAL:return"text-yellow-600 bg-yellow-100";case ne.APPROVED:return"text-blue-600 bg-blue-100";case ne.PROCESSING:return"text-purple-600 bg-purple-100";case ne.COMPLETED:return"text-green-600 bg-green-100";case ne.FAILED:return"text-red-600 bg-red-100";case ne.CANCELLED:return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}};return s?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s.name}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Period: ",new Date(s.startDate).toLocaleDateString()," - ",new Date(s.endDate).toLocaleDateString()]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Pay Date: ",new Date(s.payDate).toLocaleDateString()]}),e.jsx("div",{className:"flex items-center mt-2",children:e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${m(s.status)}`,children:s.status.replace("_"," ").toUpperCase()})})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[s.status===ne.DRAFT&&e.jsx(P,{iconName:"Play",onClick:()=>a(s),children:"Generate Payroll"}),s.status===ne.PENDING_APPROVAL&&e.jsx(P,{iconName:"Check",onClick:w,loading:o,children:"Approve Payroll"}),e.jsx(P,{variant:"outline",iconName:"Download",onClick:()=>p("csv"),children:"Export CSV"}),e.jsx(P,{variant:"outline",iconName:"Download",onClick:()=>p("json"),children:"Export JSON"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-4 mt-6 pt-6 border-t border-gray-200",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.totalEmployees}),e.jsx("div",{className:"text-sm text-gray-600",children:"Employees"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:x(s.totalGrossPay)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Gross Pay"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:x(s.totalTax)}),e.jsx("div",{className:"text-sm text-gray-600",children:"PAYE Tax"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:x(s.totalNHIF)}),e.jsx("div",{className:"text-sm text-gray-600",children:"NHIF"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:x(s.totalNSSF)}),e.jsx("div",{className:"text-sm text-gray-600",children:"NSSF"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:x(s.totalHousingLevy)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Housing Levy"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:x(s.totalDeductions)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Deductions"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:x(s.totalNetPay)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Net Pay"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Employee Payroll Details"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Basic Salary"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gross Pay"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PAYE"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"NHIF"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"NSSF"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Net Pay"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(E,{name:"Loader2",size:24,className:"animate-spin text-gray-400 mr-2"}),e.jsx("span",{className:"text-gray-600",children:"Loading payroll items..."})]})})}):c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx(E,{name:"FileText",size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No payroll items found"}),e.jsx("p",{className:"text-sm",children:s.status===ne.DRAFT?"Generate payroll to create employee records for this period.":"No employee records found for this payroll period."}),s.status===ne.DRAFT&&e.jsx(P,{className:"mt-4",iconName:"Play",onClick:()=>a(s),children:"Generate Payroll"})]})})}):c.map(j=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:j.employeeName}),e.jsx("div",{className:"text-sm text-gray-500",children:j.employeeNumber})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:j.department}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x(j.basicSalary)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x(j.grossPay)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x(j.statutoryDeductions.paye)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x(j.statutoryDeductions.nhif)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:x(j.statutoryDeductions.nssf)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:x(j.netPay)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx(P,{variant:"ghost",size:"sm",iconName:"FileText",onClick:()=>g(j.id),children:"Payslip"})})]},j.id))})]})})]}),s.notes&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Notes"}),e.jsx("p",{className:"text-gray-700",children:s.notes})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(E,{name:"Calendar",size:48,className:"text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Period Selected"}),e.jsx("p",{className:"text-gray-600",children:"Please select a payroll period to view details."})]})},id=()=>{const[s,t]=T.useState("dashboard"),[a,r]=T.useState(null),n=()=>{r(null),t("create-period")},i=C=>{r(C),t("details")},l=C=>{r(C),t("generate")},o=C=>{r(C),t("details")},c=()=>{r(null),t("dashboard")},d=()=>{switch(s){case"create-period":return e.jsx(ad,{onSave:o,onCancel:c});case"generate":return e.jsx(rd,{period:a,onBack:c,onComplete:i});case"details":return e.jsx(nd,{period:a,onBack:c,onGenerate:l});default:return e.jsx(sd,{onCreatePeriod:n,onViewPeriod:i,onGeneratePayroll:l})}},u=()=>{switch(s){case"create-period":return"Create Payroll Period";case"generate":return"Generate Payroll";case"details":return a?a.name:"Payroll Details";default:return"Payroll Management"}},b=()=>{switch(s){case"create-period":return"Set up a new payroll period for processing employee salaries";case"generate":return"Generate payroll calculations for all employees";case"details":return"View and manage payroll period details";default:return"Manage payroll periods, calculate salaries, and process payments"}};return e.jsxs(td,{children:[e.jsxs(We,{children:[e.jsx("title",{children:"Payroll Management - MoveEase Pro"}),e.jsx("meta",{name:"description",content:"Advanced payroll management with tax calculations, payslip generation, and comprehensive reporting"})]}),e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"flex h-screen",children:[e.jsx(nt,{}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[s!=="dashboard"&&e.jsxs("button",{onClick:c,className:"flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Dashboard"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:u()}),e.jsx("p",{className:"text-gray-600 mt-1",children:b()})]})]}),s==="dashboard"&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Tax Engine"}),e.jsx("div",{className:"text-lg font-semibold text-green-600",children:"KRA Compliant"})]}),e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"})]}),s==="details"&&a&&e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Period Status"}),e.jsx("div",{className:"text-lg font-semibold text-blue-600",children:a.status.replace("_"," ").toUpperCase()})]})})]})}),e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"p-6",children:d()})})]})]})})]})},_e={WEBSITE:"website",REFERRAL:"referral",SOCIAL_MEDIA:"social_media",GOOGLE_ADS:"google_ads",FACEBOOK_ADS:"facebook_ads",COLD_CALL:"cold_call",EMAIL_CAMPAIGN:"email_campaign",TRADE_SHOW:"trade_show",PARTNER:"partner",WALK_IN:"walk_in",PHONE_INQUIRY:"phone_inquiry",REPEAT_CUSTOMER:"repeat_customer"},we={NEW:"new",CONTACTED:"contacted",QUALIFIED:"qualified",PROPOSAL_SENT:"proposal_sent",NEGOTIATION:"negotiation",CONVERTED:"converted",LOST:"lost",NURTURING:"nurturing"},be={PROSPECTING:"prospecting",QUALIFICATION:"qualification",NEEDS_ANALYSIS:"needs_analysis",PROPOSAL:"proposal",NEGOTIATION:"negotiation",CLOSED_WON:"closed_won",CLOSED_LOST:"closed_lost"},Fe={CALL:"call",EMAIL:"email",MEETING:"meeting",TASK:"task",NOTE:"note",QUOTE:"quote",PROPOSAL:"proposal",FOLLOW_UP:"follow_up",DEMO:"demo",SITE_VISIT:"site_visit"},Oa={id:"",leadNumber:"",firstName:"",lastName:"",company:"",title:"",email:"",phone:"",website:"",address:{street:"",city:"",state:"",postalCode:"",country:"Kenya"},source:_e.WEBSITE,status:we.NEW,rating:"cold",score:0,assignedTo:"",assignedBy:"",assignedAt:null,interestedServices:[],estimatedValue:0,estimatedCloseDate:null,budget:0,timeline:"",decisionMaker:!1,painPoints:[],preferredContactMethod:"email",bestTimeToContact:"",timezone:"Africa/Nairobi",firstContactDate:null,lastContactDate:null,nextFollowUpDate:null,contactAttempts:0,convertedAt:null,convertedTo:"",conversionValue:0,campaignId:"",campaignSource:"",notes:"",tags:[],createdAt:null,updatedAt:null,createdBy:"",updatedBy:""},Ds={id:"",opportunityNumber:"",name:"",leadId:"",customerId:"",accountId:"",stage:be.PROSPECTING,probability:0,amount:0,currency:"KSH",expectedCloseDate:null,actualCloseDate:null,createdDate:null,serviceType:"",serviceDescription:"",requirements:"",competitors:[],competitiveAdvantage:"",decisionMakers:[{name:"",title:"",influence:"high",supportLevel:"champion"}],decisionCriteria:[],decisionTimeline:"",proposalSent:!1,proposalDate:null,proposalValue:0,proposalValidUntil:null,ownerId:"",teamMembers:[],activities:[],nextSteps:"",winReason:"",lossReason:"",createdAt:null,updatedAt:null,createdBy:"",updatedBy:""},_a={id:"",type:Fe.CALL,subject:"",description:"",leadId:"",opportunityId:"",customerId:"",scheduledDate:null,dueDate:null,completedDate:null,duration:0,status:"scheduled",priority:"medium",assignedTo:"",participants:[],location:"",meetingType:"in_person",outcome:"",nextAction:"",followUpRequired:!1,followUpDate:null,createdAt:null,updatedAt:null,createdBy:"",updatedBy:""};class ld{constructor(){this.leads=this.loadLeads(),this.opportunities=this.loadOpportunities(),this.activities=this.loadActivities(),this.campaigns=this.loadCampaigns(),this.customerLifecycles=this.loadCustomerLifecycles(),this.salesPipelines=this.loadSalesPipelines(),this.initializeSampleData()}loadLeads(){try{const t=localStorage.getItem("moveease_crm_leads");return t?JSON.parse(t):[]}catch(t){return console.error("Error loading leads:",t),[]}}loadOpportunities(){try{const t=localStorage.getItem("moveease_crm_opportunities");return t?JSON.parse(t):[]}catch(t){return console.error("Error loading opportunities:",t),[]}}loadActivities(){try{const t=localStorage.getItem("moveease_crm_activities");return t?JSON.parse(t):[]}catch(t){return console.error("Error loading activities:",t),[]}}loadCampaigns(){try{const t=localStorage.getItem("moveease_crm_campaigns");return t?JSON.parse(t):[]}catch(t){return console.error("Error loading campaigns:",t),[]}}loadCustomerLifecycles(){try{const t=localStorage.getItem("moveease_crm_lifecycles");return t?JSON.parse(t):[]}catch(t){return console.error("Error loading customer lifecycles:",t),[]}}loadSalesPipelines(){try{const t=localStorage.getItem("moveease_crm_pipelines");return t?JSON.parse(t):[]}catch(t){return console.error("Error loading sales pipelines:",t),[]}}saveLeads(){try{return localStorage.setItem("moveease_crm_leads",JSON.stringify(this.leads)),!0}catch(t){return console.error("Error saving leads:",t),!1}}saveOpportunities(){try{return localStorage.setItem("moveease_crm_opportunities",JSON.stringify(this.opportunities)),!0}catch(t){return console.error("Error saving opportunities:",t),!1}}saveActivities(){try{return localStorage.setItem("moveease_crm_activities",JSON.stringify(this.activities)),!0}catch(t){return console.error("Error saving activities:",t),!1}}saveCampaigns(){try{return localStorage.setItem("moveease_crm_campaigns",JSON.stringify(this.campaigns)),!0}catch(t){return console.error("Error saving campaigns:",t),!1}}saveCustomerLifecycles(){try{return localStorage.setItem("moveease_crm_lifecycles",JSON.stringify(this.customerLifecycles)),!0}catch(t){return console.error("Error saving customer lifecycles:",t),!1}}saveSalesPipelines(){try{return localStorage.setItem("moveease_crm_pipelines",JSON.stringify(this.salesPipelines)),!0}catch(t){return console.error("Error saving sales pipelines:",t),!1}}generateId(t="crm"){return`${t}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateLeadNumber(){const t=new Date().getFullYear(),a=this.leads.filter(r=>new Date(r.createdAt).getFullYear()===t).length+1;return`LEAD${t}${a.toString().padStart(4,"0")}`}generateOpportunityNumber(){const t=new Date().getFullYear(),a=this.opportunities.filter(r=>new Date(r.createdAt).getFullYear()===t).length+1;return`OPP${t}${a.toString().padStart(4,"0")}`}async createLead(t){try{const a={...Oa,id:this.generateId("lead"),leadNumber:this.generateLeadNumber(),...t,score:this.calculateLeadScore(t),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"system"};return this.leads.push(a),this.saveLeads(),await this.createActivity({type:"note",subject:"Lead Created",description:`New lead created from ${a.source}`,leadId:a.id,status:"completed",completedDate:new Date().toISOString()}),{success:!0,data:a,message:"Lead created successfully"}}catch(a){return{success:!1,error:a.message,message:"Failed to create lead"}}}calculateLeadScore(t){let a=0;const r={[_e.REFERRAL]:25,[_e.REPEAT_CUSTOMER]:30,[_e.WEBSITE]:20,[_e.GOOGLE_ADS]:15,[_e.SOCIAL_MEDIA]:10,[_e.COLD_CALL]:5};return a+=r[t.source]||10,t.budget>1e5?a+=25:t.budget>5e4?a+=15:t.budget>2e4&&(a+=10),a+={immediate:25,"1_month":20,"3_months":15,"6_months":10,"1_year":5}[t.timeline]||0,t.decisionMaker&&(a+=20),t.company&&(a+=10),Math.min(100,a)}getLeads(t={}){try{let a=[...this.leads];if(t.status&&(a=a.filter(u=>u.status===t.status)),t.source&&(a=a.filter(u=>u.source===t.source)),t.assignedTo&&(a=a.filter(u=>u.assignedTo===t.assignedTo)),t.rating&&(a=a.filter(u=>u.rating===t.rating)),t.search){const u=t.search.toLowerCase();a=a.filter(b=>b.firstName.toLowerCase().includes(u)||b.lastName.toLowerCase().includes(u)||b.email.toLowerCase().includes(u)||b.company.toLowerCase().includes(u))}const r=t.sortBy||"createdAt",n=t.sortOrder||"desc";a.sort((u,b)=>{let C=u[r],w=b[r];return(r==="createdAt"||r==="updatedAt")&&(C=new Date(C),w=new Date(w)),n==="desc"?w>C?1:-1:C>w?1:-1});const i=t.page||1,l=t.limit||10,o=(i-1)*l,c=o+l;return{success:!0,data:a.slice(o,c),pagination:{page:i,limit:l,total:a.length,totalPages:Math.ceil(a.length/l),hasNext:c<a.length,hasPrev:i>1}}}catch(a){return{success:!1,error:a.message}}}async updateLead(t,a){try{const r=this.leads.findIndex(i=>i.id===t);if(r===-1)throw new Error("Lead not found");const n={...this.leads[r],...a,updatedAt:new Date().toISOString(),updatedBy:"system"};return(a.source||a.budget||a.timeline||a.decisionMaker)&&(n.score=this.calculateLeadScore(n)),this.leads[r]=n,this.saveLeads(),{success:!0,data:n,message:"Lead updated successfully"}}catch(r){return{success:!1,error:r.message,message:"Failed to update lead"}}}async convertLeadToOpportunity(t,a){try{const r=this.leads.find(i=>i.id===t);if(!r)throw new Error("Lead not found");const n={...Ds,id:this.generateId("opportunity"),opportunityNumber:this.generateOpportunityNumber(),name:a.name||`${r.firstName} ${r.lastName} - ${a.serviceType}`,leadId:r.id,stage:be.QUALIFICATION,probability:25,amount:a.amount||r.estimatedValue||0,expectedCloseDate:a.expectedCloseDate||r.estimatedCloseDate,serviceType:a.serviceType||"",serviceDescription:a.serviceDescription||"",ownerId:r.assignedTo,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"system"};return this.opportunities.push(n),this.saveOpportunities(),await this.updateLead(t,{status:we.CONVERTED,convertedAt:new Date().toISOString(),conversionValue:n.amount}),await this.createActivity({type:"note",subject:"Lead Converted to Opportunity",description:`Lead successfully converted to opportunity: ${n.name}`,leadId:r.id,opportunityId:n.id,status:"completed",completedDate:new Date().toISOString()}),{success:!0,data:n,message:"Lead converted to opportunity successfully"}}catch(r){return{success:!1,error:r.message,message:"Failed to convert lead to opportunity"}}}async createOpportunity(t){try{const a={...Ds,id:this.generateId("opportunity"),opportunityNumber:this.generateOpportunityNumber(),...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"system"};return this.opportunities.push(a),this.saveOpportunities(),{success:!0,data:a,message:"Opportunity created successfully"}}catch(a){return{success:!1,error:a.message,message:"Failed to create opportunity"}}}getOpportunities(t={}){try{let a=[...this.opportunities];return t.stage&&(a=a.filter(r=>r.stage===t.stage)),t.ownerId&&(a=a.filter(r=>r.ownerId===t.ownerId)),a.sort((r,n)=>new Date(n.createdAt)-new Date(r.createdAt)),{success:!0,data:a}}catch(a){return{success:!1,error:a.message}}}async createActivity(t){try{const a={..._a,id:this.generateId("activity"),...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:"system"};return this.activities.push(a),this.saveActivities(),{success:!0,data:a,message:"Activity created successfully"}}catch(a){return{success:!1,error:a.message,message:"Failed to create activity"}}}getActivities(t={}){try{let a=[...this.activities];return t.leadId&&(a=a.filter(r=>r.leadId===t.leadId)),t.opportunityId&&(a=a.filter(r=>r.opportunityId===t.opportunityId)),t.assignedTo&&(a=a.filter(r=>r.assignedTo===t.assignedTo)),a.sort((r,n)=>new Date(n.createdAt)-new Date(r.createdAt)),{success:!0,data:a}}catch(a){return{success:!1,error:a.message}}}getCRMDashboard(){try{const t=new Date,a=new Date(t.getFullYear(),t.getMonth(),1),r=new Date(t.getFullYear(),Math.floor(t.getMonth()/3)*3,1),n=new Date(t.getFullYear(),0,1),i=this.leads.length,l=this.leads.filter(j=>new Date(j.createdAt)>=a).length,o=this.leads.filter(j=>j.status===we.QUALIFIED).length,c=this.leads.filter(j=>j.status===we.CONVERTED).length,d=i>0?c/i*100:0,u=this.opportunities.length,b=this.opportunities.reduce((j,S)=>j+S.amount,0),C=u>0?b/u:0,w=this.opportunities.filter(j=>j.stage===be.CLOSED_WON),g=u>0?w.length/u*100:0,p=this.activities.length,x=this.activities.filter(j=>j.status==="completed").length,m=this.activities.filter(j=>j.dueDate&&new Date(j.dueDate)<t&&j.status!=="completed").length;return{success:!0,data:{leadMetrics:{totalLeads:i,newLeads:l,qualifiedLeads:o,convertedLeads:c,conversionRate:Math.round(d*100)/100},opportunityMetrics:{totalOpportunities:u,totalValue:b,averageDealSize:Math.round(C),winRate:Math.round(g*100)/100},activityMetrics:{totalActivities:p,completedActivities:x,overdueActivities:m}}}}catch(t){return{success:!1,error:t.message}}}initializeSampleData(){this.leads.length===0&&this.opportunities.length===0&&this.createSampleData()}createSampleData(){var n,i,l,o,c,d;[{firstName:"Michael",lastName:"Johnson",company:"Tech Solutions Ltd",title:"Operations Manager",email:"michael.johnson@techsolutions.co.ke",phone:"+254701234567",source:_e.WEBSITE,status:we.QUALIFIED,rating:"hot",budget:15e4,timeline:"1_month",decisionMaker:!0,interestedServices:["office_move","storage"],estimatedValue:15e4,painPoints:["Current office too small","Need professional moving service"],preferredContactMethod:"email",notes:"Expanding business, needs to move office by end of month",tags:["high-priority","office-move"],assignedTo:"sales_rep_1"},{firstName:"Sarah",lastName:"Williams",company:"",title:"",email:"sarah.williams@gmail.com",phone:"+254712345678",source:_e.REFERRAL,status:we.CONTACTED,rating:"warm",budget:8e4,timeline:"3_months",decisionMaker:!0,interestedServices:["residential_move"],estimatedValue:8e4,painPoints:["Moving to new city","Need reliable service"],preferredContactMethod:"phone",notes:"Referred by John Doe, planning to move to Mombasa",tags:["referral","residential"],assignedTo:"sales_rep_2"},{firstName:"David",lastName:"Kimani",company:"Kimani Enterprises",title:"CEO",email:"david@kimanienterprises.co.ke",phone:"+254723456789",source:_e.GOOGLE_ADS,status:we.NEW,rating:"cold",budget:2e5,timeline:"6_months",decisionMaker:!0,interestedServices:["office_move","international_move"],estimatedValue:2e5,painPoints:["Expanding internationally","Need comprehensive service"],preferredContactMethod:"email",notes:"Interested in international moving services",tags:["international","high-value"],assignedTo:"sales_rep_1"}].forEach(u=>{const b={...Oa,id:this.generateId("lead"),leadNumber:this.generateLeadNumber(),...u,score:this.calculateLeadScore(u),createdAt:new Date(Date.now()-Math.random()*30*24*60*60*1e3).toISOString(),updatedAt:new Date().toISOString(),createdBy:"system"};this.leads.push(b)}),[{name:"Tech Solutions Office Move",leadId:(n=this.leads[0])==null?void 0:n.id,stage:be.PROPOSAL,probability:75,amount:15e4,expectedCloseDate:new Date(Date.now()+15*24*60*60*1e3).toISOString(),serviceType:"office_move",serviceDescription:"Complete office relocation including IT equipment",ownerId:"sales_rep_1",proposalSent:!0,proposalDate:new Date(Date.now()-5*24*60*60*1e3).toISOString(),proposalValue:15e4},{name:"Williams Residential Move",leadId:(i=this.leads[1])==null?void 0:i.id,stage:be.QUALIFICATION,probability:50,amount:8e4,expectedCloseDate:new Date(Date.now()+60*24*60*60*1e3).toISOString(),serviceType:"residential_move",serviceDescription:"3-bedroom house move from Nairobi to Mombasa",ownerId:"sales_rep_2"}].forEach(u=>{const b={...Ds,id:this.generateId("opportunity"),opportunityNumber:this.generateOpportunityNumber(),...u,createdAt:new Date(Date.now()-Math.random()*20*24*60*60*1e3).toISOString(),updatedAt:new Date().toISOString(),createdBy:"system"};this.opportunities.push(b)}),[{type:"call",subject:"Initial qualification call",description:"Discussed moving requirements and timeline",leadId:(l=this.leads[0])==null?void 0:l.id,status:"completed",completedDate:new Date(Date.now()-3*24*60*60*1e3).toISOString(),duration:30,assignedTo:"sales_rep_1",outcome:"Qualified lead, ready for proposal"},{type:"email",subject:"Follow-up email with proposal",description:"Sent detailed proposal for office move",leadId:(o=this.leads[0])==null?void 0:o.id,opportunityId:(c=this.opportunities[0])==null?void 0:c.id,status:"completed",completedDate:new Date(Date.now()-1*24*60*60*1e3).toISOString(),assignedTo:"sales_rep_1",outcome:"Proposal sent, awaiting response"},{type:"call",subject:"Referral follow-up call",description:"Called to introduce services and schedule site visit",leadId:(d=this.leads[1])==null?void 0:d.id,status:"completed",completedDate:new Date(Date.now()-2*24*60*60*1e3).toISOString(),duration:20,assignedTo:"sales_rep_2",outcome:"Interested, scheduled site visit"}].forEach(u=>{const b={..._a,id:this.generateId("activity"),...u,createdAt:new Date(Date.now()-Math.random()*10*24*60*60*1e3).toISOString(),updatedAt:new Date().toISOString(),createdBy:"system"};this.activities.push(b)}),this.saveLeads(),this.saveOpportunities(),this.saveActivities()}}const tt=new ld,Y={SET_LOADING:"SET_LOADING",SET_ERROR:"SET_ERROR",SET_LEADS:"SET_LEADS",SET_OPPORTUNITIES:"SET_OPPORTUNITIES",SET_ACTIVITIES:"SET_ACTIVITIES",SET_CAMPAIGNS:"SET_CAMPAIGNS",SET_DASHBOARD_DATA:"SET_DASHBOARD_DATA",SET_FILTERS:"SET_FILTERS",SET_PAGINATION:"SET_PAGINATION",ADD_LEAD:"ADD_LEAD",UPDATE_LEAD:"UPDATE_LEAD",ADD_OPPORTUNITY:"ADD_OPPORTUNITY",UPDATE_OPPORTUNITY:"UPDATE_OPPORTUNITY",ADD_ACTIVITY:"ADD_ACTIVITY",UPDATE_ACTIVITY:"UPDATE_ACTIVITY",CLEAR_ERROR:"CLEAR_ERROR"},od={leads:[],opportunities:[],activities:[],campaigns:[],dashboardData:{leadMetrics:{totalLeads:0,newLeads:0,qualifiedLeads:0,convertedLeads:0,conversionRate:0},opportunityMetrics:{totalOpportunities:0,totalValue:0,averageDealSize:0,winRate:0},activityMetrics:{totalActivities:0,completedActivities:0,overdueActivities:0}},filters:{leads:{status:"",source:"",rating:"",assignedTo:"",search:"",sortBy:"createdAt",sortOrder:"desc"},opportunities:{stage:"",ownerId:"",search:"",sortBy:"createdAt",sortOrder:"desc"},activities:{type:"",status:"",assignedTo:"",search:"",sortBy:"createdAt",sortOrder:"desc"}},pagination:{leads:{page:1,limit:10,total:0,totalPages:0,hasNext:!1,hasPrev:!1},opportunities:{page:1,limit:10,total:0,totalPages:0,hasNext:!1,hasPrev:!1},activities:{page:1,limit:10,total:0,totalPages:0,hasNext:!1,hasPrev:!1}},loading:!1,error:null};function cd(s,t){switch(t.type){case Y.SET_LOADING:return{...s,loading:t.payload,error:t.payload?null:s.error};case Y.SET_ERROR:return{...s,error:t.payload,loading:!1};case Y.CLEAR_ERROR:return{...s,error:null};case Y.SET_LEADS:return{...s,leads:t.payload,loading:!1,error:null};case Y.SET_OPPORTUNITIES:return{...s,opportunities:t.payload,loading:!1,error:null};case Y.SET_ACTIVITIES:return{...s,activities:t.payload,loading:!1,error:null};case Y.SET_CAMPAIGNS:return{...s,campaigns:t.payload,loading:!1,error:null};case Y.SET_DASHBOARD_DATA:return{...s,dashboardData:t.payload};case Y.SET_FILTERS:return{...s,filters:{...s.filters,[t.payload.type]:{...s.filters[t.payload.type],...t.payload.filters}}};case Y.SET_PAGINATION:return{...s,pagination:{...s.pagination,[t.payload.type]:t.payload.pagination}};case Y.ADD_LEAD:return{...s,leads:[t.payload,...s.leads]};case Y.UPDATE_LEAD:return{...s,leads:s.leads.map(a=>a.id===t.payload.id?t.payload:a)};case Y.ADD_OPPORTUNITY:return{...s,opportunities:[t.payload,...s.opportunities]};case Y.UPDATE_OPPORTUNITY:return{...s,opportunities:s.opportunities.map(a=>a.id===t.payload.id?t.payload:a)};case Y.ADD_ACTIVITY:return{...s,activities:[t.payload,...s.activities]};case Y.UPDATE_ACTIVITY:return{...s,activities:s.activities.map(a=>a.id===t.payload.id?t.payload:a)};default:return s}}const Br=T.createContext();function dd({children:s}){const[t,a]=T.useReducer(cd,od);T.useEffect(()=>{r(),n(),i(),l()},[]),T.useEffect(()=>{(t.filters.leads||t.pagination.leads.page)&&n()},[t.filters.leads,t.pagination.leads.page]);const r=async()=>{try{const x=await tt.getCRMDashboard();x.success&&a({type:Y.SET_DASHBOARD_DATA,payload:x.data})}catch(x){console.error("Error loading dashboard data:",x)}},n=async()=>{a({type:Y.SET_LOADING,payload:!0});try{const x=await tt.getLeads({...t.filters.leads,page:t.pagination.leads.page,limit:t.pagination.leads.limit});x.success?(a({type:Y.SET_LEADS,payload:x.data}),a({type:Y.SET_PAGINATION,payload:{type:"leads",pagination:x.pagination}})):a({type:Y.SET_ERROR,payload:x.error})}catch(x){a({type:Y.SET_ERROR,payload:x.message})}},i=async()=>{try{const x=await tt.getOpportunities(t.filters.opportunities);x.success&&a({type:Y.SET_OPPORTUNITIES,payload:x.data})}catch(x){console.error("Error loading opportunities:",x)}},l=async()=>{try{const x=await tt.getActivities(t.filters.activities);x.success&&a({type:Y.SET_ACTIVITIES,payload:x.data})}catch(x){console.error("Error loading activities:",x)}},p={...t,createLead:async x=>{a({type:Y.SET_LOADING,payload:!0});try{const m=await tt.createLead(x);return m.success?(a({type:Y.ADD_LEAD,payload:m.data}),await r(),m):(a({type:Y.SET_ERROR,payload:m.error}),m)}catch(m){const j=m.message;return a({type:Y.SET_ERROR,payload:j}),{success:!1,error:j}}finally{a({type:Y.SET_LOADING,payload:!1})}},updateLead:async(x,m)=>{try{const j=await tt.updateLead(x,m);return j.success?(a({type:Y.UPDATE_LEAD,payload:j.data}),await r(),j):(a({type:Y.SET_ERROR,payload:j.error}),j)}catch(j){return{success:!1,error:j.message}}},convertLeadToOpportunity:async(x,m)=>{a({type:Y.SET_LOADING,payload:!0});try{const j=await tt.convertLeadToOpportunity(x,m);return j.success?(a({type:Y.ADD_OPPORTUNITY,payload:j.data}),await n(),await r(),j):(a({type:Y.SET_ERROR,payload:j.error}),j)}catch(j){const S=j.message;return a({type:Y.SET_ERROR,payload:S}),{success:!1,error:S}}finally{a({type:Y.SET_LOADING,payload:!1})}},createOpportunity:async x=>{a({type:Y.SET_LOADING,payload:!0});try{const m=await tt.createOpportunity(x);return m.success?(a({type:Y.ADD_OPPORTUNITY,payload:m.data}),await r(),m):(a({type:Y.SET_ERROR,payload:m.error}),m)}catch(m){const j=m.message;return a({type:Y.SET_ERROR,payload:j}),{success:!1,error:j}}finally{a({type:Y.SET_LOADING,payload:!1})}},createActivity:async x=>{try{const m=await tt.createActivity(x);return m.success?(a({type:Y.ADD_ACTIVITY,payload:m.data}),m):(a({type:Y.SET_ERROR,payload:m.error}),m)}catch(m){return{success:!1,error:m.message}}},loadLeads:n,loadOpportunities:i,loadActivities:l,loadDashboardData:r,setFilters:(x,m)=>{a({type:Y.SET_FILTERS,payload:{type:x,filters:m}})},setPagination:(x,m)=>{a({type:Y.SET_PAGINATION,payload:{type:x,pagination:{...t.pagination[x],...m}}})},clearError:()=>{a({type:Y.CLEAR_ERROR})}};return e.jsx(Br.Provider,{value:p,children:s})}function qt(){const s=T.useContext(Br);if(!s)throw new Error("useCRM must be used within a CRMProvider");return s}const md=({onCreateLead:s,onCreateOpportunity:t,onViewLeads:a,onViewOpportunities:r})=>{const{dashboardData:n,loading:i,error:l,loadDashboardData:o,clearError:c}=qt(),d=b=>`KSh ${b.toLocaleString()}`,u=b=>`${b.toFixed(1)}%`;return l?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{name:"AlertCircle",size:20,className:"text-red-600 mr-2"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-800 font-medium",children:"Error Loading CRM Data"}),e.jsx("p",{className:"text-red-600 text-sm mt-1",children:l})]}),e.jsx(P,{variant:"outline",size:"sm",onClick:c,className:"ml-auto",children:"Retry"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"CRM Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage leads, opportunities, and sales pipeline"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(P,{variant:"outline",iconName:"RefreshCw",onClick:o,loading:i,children:"Refresh"}),e.jsx(P,{variant:"outline",iconName:"Target",onClick:t,children:"New Opportunity"}),e.jsx(P,{iconName:"UserPlus",onClick:s,children:"New Lead"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Leads"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.leadMetrics.totalLeads})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(E,{name:"Users",size:24,className:"text-blue-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsxs("span",{className:"text-green-600 font-medium",children:["+",n.leadMetrics.newLeads]}),e.jsx("span",{className:"text-gray-600 ml-1",children:"new this month"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Qualified Leads"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.leadMetrics.qualifiedLeads})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(E,{name:"UserCheck",size:24,className:"text-green-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:"text-blue-600 font-medium",children:u(n.leadMetrics.qualifiedLeads/n.leadMetrics.totalLeads*100||0)}),e.jsx("span",{className:"text-gray-600 ml-1",children:"qualification rate"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Conversion Rate"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u(n.leadMetrics.conversionRate)})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:e.jsx(E,{name:"TrendingUp",size:24,className:"text-purple-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:"text-green-600 font-medium",children:n.leadMetrics.convertedLeads}),e.jsx("span",{className:"text-gray-600 ml-1",children:"converted leads"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pipeline Value"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:d(n.opportunityMetrics.totalValue)})]}),e.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:e.jsx(E,{name:"DollarSign",size:24,className:"text-yellow-600"})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:"text-blue-600 font-medium",children:n.opportunityMetrics.totalOpportunities}),e.jsx("span",{className:"text-gray-600 ml-1",children:"opportunities"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Lead Performance"}),e.jsx(P,{variant:"ghost",size:"sm",iconName:"Eye",onClick:a,children:"View All"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-3"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Total Leads"})]}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:n.leadMetrics.totalLeads})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Qualified"})]}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:n.leadMetrics.qualifiedLeads})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full mr-3"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Converted"})]}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:n.leadMetrics.convertedLeads})]}),e.jsx("div",{className:"pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Conversion Rate"}),e.jsx("span",{className:"text-sm font-bold text-green-600",children:u(n.leadMetrics.conversionRate)})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Opportunity Performance"}),e.jsx(P,{variant:"ghost",size:"sm",iconName:"Eye",onClick:r,children:"View All"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-3"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Total Opportunities"})]}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:n.opportunityMetrics.totalOpportunities})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-3"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Total Value"})]}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:d(n.opportunityMetrics.totalValue)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-3"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Average Deal Size"})]}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:d(n.opportunityMetrics.averageDealSize)})]}),e.jsx("div",{className:"pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Win Rate"}),e.jsx("span",{className:"text-sm font-bold text-green-600",children:u(n.opportunityMetrics.winRate)})]})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Activity Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:n.activityMetrics.totalActivities}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Total Activities"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:n.activityMetrics.completedActivities}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Completed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-red-600",children:n.activityMetrics.overdueActivities}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Overdue"})]})]}),n.activityMetrics.overdueActivities>0&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{name:"AlertTriangle",size:16,className:"text-red-600 mr-2"}),e.jsxs("span",{className:"text-sm text-red-800",children:["You have ",n.activityMetrics.overdueActivities," overdue activities that need attention."]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(P,{variant:"outline",iconName:"UserPlus",onClick:s,className:"justify-start",children:"Add New Lead"}),e.jsx(P,{variant:"outline",iconName:"Target",onClick:t,className:"justify-start",children:"Create Opportunity"}),e.jsx(P,{variant:"outline",iconName:"Users",onClick:a,className:"justify-start",children:"View All Leads"}),e.jsx(P,{variant:"outline",iconName:"BarChart3",onClick:r,className:"justify-start",children:"View Pipeline"})]})]})]})},ud=({onCreateLead:s,onViewLead:t,onConvertLead:a})=>{const{leads:r,loading:n,error:i,filters:l,pagination:o,setFilters:c,setPagination:d,updateLead:u,clearError:b}=qt(),[C,w]=T.useState(!1),g=v=>{const h=v.target.value;c("leads",{search:h})},p=(v,h)=>{c("leads",{[v]:h})},x=v=>{d("leads",{page:v})},m=v=>{t&&t(v)},j=v=>`KSh ${v.toLocaleString()}`,S=v=>{switch(v){case we.NEW:return"text-blue-600 bg-blue-100";case we.CONTACTED:return"text-yellow-600 bg-yellow-100";case we.QUALIFIED:return"text-green-600 bg-green-100";case we.PROPOSAL_SENT:return"text-purple-600 bg-purple-100";case we.NEGOTIATION:return"text-orange-600 bg-orange-100";case we.CONVERTED:return"text-green-600 bg-green-100";case we.LOST:return"text-red-600 bg-red-100";case we.NURTURING:return"text-indigo-600 bg-indigo-100";default:return"text-gray-600 bg-gray-100"}},y=v=>{switch(v){case"hot":return"text-red-600 bg-red-100";case"warm":return"text-yellow-600 bg-yellow-100";case"cold":return"text-blue-600 bg-blue-100";default:return"text-gray-600 bg-gray-100"}},A=v=>v.split("_").map(h=>h.charAt(0).toUpperCase()+h.slice(1)).join(" "),N=Object.values(_e).map(v=>({value:v,label:v.replace("_"," ").replace(/\b\w/g,h=>h.toUpperCase())})),f=Object.values(we).map(v=>({value:v,label:A(v)}));return i?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{name:"AlertCircle",size:20,className:"text-red-600 mr-2"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-800 font-medium",children:"Error Loading Leads"}),e.jsx("p",{className:"text-red-600 text-sm mt-1",children:i})]}),e.jsx(P,{variant:"outline",size:"sm",onClick:b,className:"ml-auto",children:"Retry"})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Lead Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage and track all your sales leads"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(P,{variant:"outline",iconName:"Download",onClick:()=>{alert("Lead export will be implemented")},children:"Export"}),e.jsx(P,{iconName:"UserPlus",onClick:s,children:"New Lead"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsx(D,{placeholder:"Search leads...",value:l.leads.search,onChange:g,iconName:"Search"})}),e.jsx(P,{variant:"outline",iconName:"Filter",onClick:()=>w(!C),children:"Filters"})]}),C&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 pt-4 border-t border-gray-200",children:[e.jsx(B,{label:"Status",options:[{value:"",label:"All Statuses"},...f],value:l.leads.status,onChange:v=>p("status",v)}),e.jsx(B,{label:"Source",options:[{value:"",label:"All Sources"},...N],value:l.leads.source,onChange:v=>p("source",v)}),e.jsx(B,{label:"Rating",options:[{value:"",label:"All Ratings"},{value:"hot",label:"Hot"},{value:"warm",label:"Warm"},{value:"cold",label:"Cold"}],value:l.leads.rating,onChange:v=>p("rating",v)}),e.jsx(B,{label:"Sort By",options:[{value:"createdAt",label:"Created Date"},{value:"updatedAt",label:"Updated Date"},{value:"score",label:"Lead Score"},{value:"estimatedValue",label:"Estimated Value"}],value:l.leads.sortBy,onChange:v=>p("sortBy",v)}),e.jsx(B,{label:"Sort Order",options:[{value:"desc",label:"Descending"},{value:"asc",label:"Ascending"}],value:l.leads.sortOrder,onChange:v=>p("sortOrder",v)})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lead"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Company"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Source"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rating"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(E,{name:"Loader2",size:24,className:"animate-spin text-gray-400 mr-2"}),e.jsx("span",{className:"text-gray-600",children:"Loading leads..."})]})})}):r.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx(E,{name:"Users",size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No leads found"}),e.jsx("p",{className:"text-sm",children:"Get started by creating your first lead."}),e.jsx(P,{className:"mt-4",iconName:"UserPlus",onClick:s,children:"Create Lead"})]})})}):r.map(v=>e.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>m(v),children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[v.firstName," ",v.lastName]}),e.jsx("div",{className:"text-sm text-gray-500",children:v.email}),e.jsx("div",{className:"text-sm text-gray-500",children:v.phone})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:v.company||"N/A"}),e.jsx("div",{className:"text-sm text-gray-500",children:v.title||"N/A"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:v.source.replace("_"," ").replace(/\b\w/g,h=>h.toUpperCase())})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${S(v.status)}`,children:A(v.status)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${y(v.rating)}`,children:v.rating.toUpperCase()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:v.score}),e.jsx("div",{className:"ml-2 w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${v.score}%`}})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:v.estimatedValue>0?j(v.estimatedValue):"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(v.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(P,{variant:"ghost",size:"sm",iconName:"Eye",onClick:h=>{h.stopPropagation(),m(v)}}),v.status===we.QUALIFIED&&e.jsx(P,{variant:"ghost",size:"sm",iconName:"ArrowRight",onClick:h=>{h.stopPropagation(),a(v)},className:"text-green-600 hover:text-green-700"}),e.jsx(P,{variant:"ghost",size:"sm",iconName:"MoreHorizontal",onClick:h=>{h.stopPropagation()}})]})})]},v.id))})]})}),o.leads.totalPages>1&&e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx(P,{variant:"outline",onClick:()=>x(o.leads.page-1),disabled:!o.leads.hasPrev,children:"Previous"}),e.jsx(P,{variant:"outline",onClick:()=>x(o.leads.page+1),disabled:!o.leads.hasNext,children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:(o.leads.page-1)*o.leads.limit+1})," ","to"," ",e.jsx("span",{className:"font-medium",children:Math.min(o.leads.page*o.leads.limit,o.leads.total)})," ","of"," ",e.jsx("span",{className:"font-medium",children:o.leads.total})," ","results"]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>x(o.leads.page-1),disabled:!o.leads.hasPrev,className:"rounded-l-md",children:"Previous"}),Array.from({length:o.leads.totalPages},(v,h)=>h+1).filter(v=>v===1||v===o.leads.totalPages||Math.abs(v-o.leads.page)<=2).map((v,h,I)=>e.jsxs(je.Fragment,{children:[h>0&&I[h-1]!==v-1&&e.jsx("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:"..."}),e.jsx(P,{variant:v===o.leads.page?"default":"outline",size:"sm",onClick:()=>x(v),className:"border-l-0",children:v})]},v)),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>x(o.leads.page+1),disabled:!o.leads.hasNext,className:"rounded-r-md border-l-0",children:"Next"})]})})]})]})]})]})},La=({lead:s,onSave:t,onCancel:a})=>{var h,I,R,L,H;const{createLead:r,updateLead:n,loading:i}=qt(),[l,o]=T.useState({firstName:(s==null?void 0:s.firstName)||"",lastName:(s==null?void 0:s.lastName)||"",company:(s==null?void 0:s.company)||"",title:(s==null?void 0:s.title)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",website:(s==null?void 0:s.website)||"",source:(s==null?void 0:s.source)||_e.WEBSITE,status:(s==null?void 0:s.status)||we.NEW,rating:(s==null?void 0:s.rating)||"cold",budget:(s==null?void 0:s.budget)||"",timeline:(s==null?void 0:s.timeline)||"",decisionMaker:(s==null?void 0:s.decisionMaker)||!1,interestedServices:(s==null?void 0:s.interestedServices)||[],estimatedValue:(s==null?void 0:s.estimatedValue)||"",painPoints:(s==null?void 0:s.painPoints)||[],preferredContactMethod:(s==null?void 0:s.preferredContactMethod)||"email",bestTimeToContact:(s==null?void 0:s.bestTimeToContact)||"",notes:(s==null?void 0:s.notes)||"",tags:(s==null?void 0:s.tags)||[],assignedTo:(s==null?void 0:s.assignedTo)||"",address:{street:((h=s==null?void 0:s.address)==null?void 0:h.street)||"",city:((I=s==null?void 0:s.address)==null?void 0:I.city)||"",state:((R=s==null?void 0:s.address)==null?void 0:R.state)||"",postalCode:((L=s==null?void 0:s.address)==null?void 0:L.postalCode)||"",country:((H=s==null?void 0:s.address)==null?void 0:H.country)||"Kenya"}}),[c,d]=T.useState({}),[u,b]=T.useState(""),[C,w]=T.useState(""),g=(k,U)=>{if(k.includes(".")){const[O,M]=k.split(".");o(z=>({...z,[O]:{...z[O],[M]:U}}))}else o(O=>({...O,[k]:U}));c[k]&&d(O=>({...O,[k]:void 0}))},p=(k,U)=>{o(U?O=>({...O,interestedServices:[...O.interestedServices,k]}):O=>({...O,interestedServices:O.interestedServices.filter(M=>M!==k)}))},x=()=>{u.trim()&&(o(k=>({...k,painPoints:[...k.painPoints,u.trim()]})),b(""))},m=k=>{o(U=>({...U,painPoints:U.painPoints.filter((O,M)=>M!==k)}))},j=()=>{C.trim()&&!l.tags.includes(C.trim())&&(o(k=>({...k,tags:[...k.tags,C.trim()]})),w(""))},S=k=>{o(U=>({...U,tags:U.tags.filter((O,M)=>M!==k)}))},y=()=>{const k={};return l.firstName.trim()||(k.firstName="First name is required"),l.lastName.trim()||(k.lastName="Last name is required"),l.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)||(k.email="Please enter a valid email address"):k.email="Email is required",l.phone.trim()||(k.phone="Phone number is required"),l.budget&&isNaN(parseFloat(l.budget))&&(k.budget="Budget must be a valid number"),l.estimatedValue&&isNaN(parseFloat(l.estimatedValue))&&(k.estimatedValue="Estimated value must be a valid number"),d(k),Object.keys(k).length===0},A=async k=>{if(k.preventDefault(),!y())return;const U={...l,budget:parseFloat(l.budget)||0,estimatedValue:parseFloat(l.estimatedValue)||0};try{let O;s!=null&&s.id?O=await n(s.id,U):O=await r(U),O.success?t(O.data):alert(`Error: ${O.error}`)}catch(O){alert(`Error: ${O.message}`)}},N=Object.values(_e).map(k=>({value:k,label:k.replace("_"," ").replace(/\b\w/g,U=>U.toUpperCase())})),f=Object.values(we).map(k=>({value:k,label:k.split("_").map(U=>U.charAt(0).toUpperCase()+U.slice(1)).join(" ")})),v=["residential_move","office_move","international_move","storage","packing","unpacking","assembly","cleaning"];return e.jsxs("div",{className:"max-w-4xl mx-auto bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s?"Edit Lead":"Create New Lead"}),e.jsx("p",{className:"text-gray-600 mt-1",children:s?"Update lead information and track progress":"Add a new lead to your sales pipeline"})]}),e.jsx(P,{variant:"ghost",iconName:"X",onClick:a})]})}),e.jsxs("form",{onSubmit:A,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(D,{label:"First Name",value:l.firstName,onChange:k=>g("firstName",k.target.value),error:c.firstName,required:!0}),e.jsx(D,{label:"Last Name",value:l.lastName,onChange:k=>g("lastName",k.target.value),error:c.lastName,required:!0}),e.jsx(D,{label:"Email",type:"email",value:l.email,onChange:k=>g("email",k.target.value),error:c.email,required:!0}),e.jsx(D,{label:"Phone",value:l.phone,onChange:k=>g("phone",k.target.value),error:c.phone,required:!0}),e.jsx(D,{label:"Company",value:l.company,onChange:k=>g("company",k.target.value)}),e.jsx(D,{label:"Job Title",value:l.title,onChange:k=>g("title",k.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Lead Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(B,{label:"Source",options:N,value:l.source,onChange:k=>g("source",k),required:!0}),e.jsx(B,{label:"Status",options:f,value:l.status,onChange:k=>g("status",k),required:!0}),e.jsx(B,{label:"Rating",options:[{value:"hot",label:"Hot"},{value:"warm",label:"Warm"},{value:"cold",label:"Cold"}],value:l.rating,onChange:k=>g("rating",k),required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Qualification"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(D,{label:"Budget (KSh)",type:"number",value:l.budget,onChange:k=>g("budget",k.target.value),error:c.budget,min:"0"}),e.jsx(D,{label:"Estimated Value (KSh)",type:"number",value:l.estimatedValue,onChange:k=>g("estimatedValue",k.target.value),error:c.estimatedValue,min:"0"}),e.jsx(B,{label:"Timeline",options:[{value:"",label:"Select timeline"},{value:"immediate",label:"Immediate"},{value:"1_month",label:"1 Month"},{value:"3_months",label:"3 Months"},{value:"6_months",label:"6 Months"},{value:"1_year",label:"1 Year"}],value:l.timeline,onChange:k=>g("timeline",k)}),e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:l.decisionMaker,onChange:k=>g("decisionMaker",k.target.checked),className:"rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Decision Maker"})]})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Interested Services"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:v.map(k=>e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:l.interestedServices.includes(k),onChange:U=>p(k,U.target.checked),className:"rounded border-gray-300 text-primary focus:ring-primary"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:k.replace("_"," ").replace(/\b\w/g,U=>U.toUpperCase())})]},k))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Pain Points"}),e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(D,{placeholder:"Add a pain point...",value:u,onChange:k=>b(k.target.value),onKeyPress:k=>k.key==="Enter"&&(k.preventDefault(),x())}),e.jsx(P,{type:"button",variant:"outline",iconName:"Plus",onClick:x})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.painPoints.map((k,U)=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-red-100 text-red-800",children:[k,e.jsx("button",{type:"button",onClick:()=>m(U),className:"ml-2 text-red-600 hover:text-red-800",children:e.jsx(E,{name:"X",size:14})})]},U))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Tags"}),e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(D,{placeholder:"Add a tag...",value:C,onChange:k=>w(k.target.value),onKeyPress:k=>k.key==="Enter"&&(k.preventDefault(),j())}),e.jsx(P,{type:"button",variant:"outline",iconName:"Plus",onClick:j})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.tags.map((k,U)=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[k,e.jsx("button",{type:"button",onClick:()=>S(U),className:"ml-2 text-blue-600 hover:text-blue-800",children:e.jsx(E,{name:"X",size:14})})]},U))})]}),e.jsx("div",{children:e.jsx(ve,{label:"Notes",value:l.notes,onChange:k=>g("notes",k.target.value),placeholder:"Additional notes about this lead...",rows:4})}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx(P,{type:"button",variant:"outline",onClick:a,children:"Cancel"}),e.jsx(P,{type:"submit",loading:i,iconName:"Save",children:s?"Update Lead":"Create Lead"})]})]})]})},xd=({onCreateOpportunity:s,onBack:t})=>{const{opportunities:a,loading:r}=qt(),n=a.reduce((c,d)=>(c[d.stage]||(c[d.stage]=[]),c[d.stage].push(d),c),{}),i=c=>`KSh ${c.toLocaleString()}`,l=c=>{switch(c){case be.PROSPECTING:return"bg-blue-100 text-blue-800";case be.QUALIFICATION:return"bg-yellow-100 text-yellow-800";case be.NEEDS_ANALYSIS:return"bg-purple-100 text-purple-800";case be.PROPOSAL:return"bg-indigo-100 text-indigo-800";case be.NEGOTIATION:return"bg-orange-100 text-orange-800";case be.CLOSED_WON:return"bg-green-100 text-green-800";case be.CLOSED_LOST:return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},o=[{key:be.PROSPECTING,label:"Prospecting"},{key:be.QUALIFICATION,label:"Qualification"},{key:be.NEEDS_ANALYSIS,label:"Needs Analysis"},{key:be.PROPOSAL,label:"Proposal"},{key:be.NEGOTIATION,label:"Negotiation"},{key:be.CLOSED_WON,label:"Closed Won"},{key:be.CLOSED_LOST,label:"Closed Lost"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Sales Pipeline"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track opportunities through your sales process"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(P,{variant:"outline",iconName:"Download",onClick:()=>alert("Pipeline export will be implemented"),children:"Export"}),e.jsx(P,{iconName:"Plus",onClick:s,children:"New Opportunity"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Pipeline Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Opportunities"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:i(a.reduce((c,d)=>c+d.amount,0))}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Value"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:i(a.length>0?a.reduce((c,d)=>c+d.amount,0)/a.length:0)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Avg Deal Size"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:a.filter(c=>c.stage===be.CLOSED_WON).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Won Deals"})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-7 gap-4",children:o.map(c=>{const d=n[c.key]||[],u=d.reduce((b,C)=>b+C.amount,0);return e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:c.label}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",d.length,")"]})]}),e.jsx("div",{className:"text-sm text-gray-600 mb-4",children:i(u)}),e.jsxs("div",{className:"space-y-3",children:[d.map(b=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3 cursor-pointer hover:shadow-sm",children:[e.jsx("div",{className:"font-medium text-sm text-gray-900 mb-1",children:b.name}),e.jsx("div",{className:"text-xs text-gray-600 mb-2",children:i(b.amount)}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${l(b.stage)}`,children:[b.probability,"%"]}),e.jsx("div",{className:"text-xs text-gray-500",children:b.expectedCloseDate?new Date(b.expectedCloseDate).toLocaleDateString():"No date"})]})]},b.id)),d.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(E,{name:"Target",size:32,className:"mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm",children:"No opportunities"})]})]})]},c.key)})})}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"All Opportunities"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opportunity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stage"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Probability"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Close Date"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r?e.jsx("tr",{children:e.jsxs("td",{colSpan:"6",className:"px-6 py-12 text-center",children:[e.jsx(E,{name:"Loader2",size:24,className:"animate-spin text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Loading opportunities..."})]})}):a.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:"6",className:"px-6 py-12 text-center",children:[e.jsx(E,{name:"Target",size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No opportunities found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first opportunity to start tracking deals."}),e.jsx(P,{iconName:"Plus",onClick:s,children:"Create Opportunity"})]})}):a.map(c=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:c.name}),e.jsx("div",{className:"text-sm text-gray-500",children:c.serviceType})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${l(c.stage)}`,children:c.stage.replace("_"," ").replace(/\b\w/g,d=>d.toUpperCase())})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:i(c.amount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[c.probability,"%"]}),e.jsx("div",{className:"ml-2 w-16 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${c.probability}%`}})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c.expectedCloseDate?new Date(c.expectedCloseDate).toLocaleDateString():"Not set"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(P,{variant:"ghost",size:"sm",iconName:"Eye",children:"View"}),e.jsx(P,{variant:"ghost",size:"sm",iconName:"Edit",children:"Edit"})]})})]},c.id))})]})})]})]})},pd=({onBack:s})=>{const{activities:t,loading:a,createActivity:r}=qt(),[n,i]=T.useState(!1),[l,o]=T.useState({type:"",status:"",assignedTo:""}),c=(g,p)=>{o(x=>({...x,[g]:p}))},d=t.filter(g=>!(l.type&&g.type!==l.type||l.status&&g.status!==l.status||l.assignedTo&&g.assignedTo!==l.assignedTo)),u=g=>{switch(g){case Fe.CALL:return"Phone";case Fe.EMAIL:return"Mail";case Fe.MEETING:return"Users";case Fe.TASK:return"CheckSquare";case Fe.NOTE:return"FileText";case Fe.QUOTE:return"DollarSign";case Fe.PROPOSAL:return"FileText";case Fe.FOLLOW_UP:return"Clock";case Fe.DEMO:return"Play";case Fe.SITE_VISIT:return"MapPin";default:return"Activity"}},b=g=>{switch(g){case"scheduled":return"text-blue-600 bg-blue-100";case"in_progress":return"text-yellow-600 bg-yellow-100";case"completed":return"text-green-600 bg-green-100";case"cancelled":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},C=g=>{switch(g){case"urgent":return"text-red-600 bg-red-100";case"high":return"text-orange-600 bg-orange-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},w=Object.values(Fe).map(g=>({value:g,label:g.replace("_"," ").replace(/\b\w/g,p=>p.toUpperCase())}));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Activity Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track and manage all sales activities"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(P,{variant:"outline",iconName:"Calendar",onClick:()=>alert("Calendar view will be implemented"),children:"Calendar View"}),e.jsx(P,{iconName:"Plus",onClick:()=>i(!0),children:"New Activity"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Activity Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Activities"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.filter(g=>g.status==="completed").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:t.filter(g=>g.status==="scheduled").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Scheduled"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:t.filter(g=>g.dueDate&&new Date(g.dueDate)<new Date&&g.status!=="completed").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Overdue"})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(B,{label:"Filter by Type",options:[{value:"",label:"All Types"},...w],value:l.type,onChange:g=>c("type",g)}),e.jsx(B,{label:"Filter by Status",options:[{value:"",label:"All Statuses"},{value:"scheduled",label:"Scheduled"},{value:"in_progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}],value:l.status,onChange:g=>c("status",g)}),e.jsx(B,{label:"Filter by Assignee",options:[{value:"",label:"All Assignees"},{value:"sales_rep_1",label:"Sales Rep 1"},{value:"sales_rep_2",label:"Sales Rep 2"}],value:l.assignedTo,onChange:g=>c("assignedTo",g)}),e.jsx("div",{className:"flex items-end",children:e.jsx(P,{variant:"outline",onClick:()=>o({type:"",status:"",assignedTo:""}),className:"w-full",children:"Clear Filters"})})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200",children:a?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(E,{name:"Loader2",size:24,className:"animate-spin text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Loading activities..."})]}):d.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(E,{name:"Activity",size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No activities found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:t.length===0?"Create your first activity to start tracking sales tasks.":"No activities match your current filters."}),t.length===0&&e.jsx(P,{iconName:"Plus",onClick:()=>i(!0),children:"Create Activity"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:d.map(g=>e.jsx("div",{className:"p-6 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(E,{name:u(g.type),size:20,className:"text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:g.subject}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${b(g.status)}`,children:g.status.replace("_"," ").toUpperCase()}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${C(g.priority)}`,children:g.priority.toUpperCase()})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mb-3",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(E,{name:"Tag",size:16,className:"mr-1"}),g.type.replace("_"," ")]}),g.scheduledDate&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(E,{name:"Calendar",size:16,className:"mr-1"}),new Date(g.scheduledDate).toLocaleDateString()]}),g.duration>0&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(E,{name:"Clock",size:16,className:"mr-1"}),g.duration," min"]}),g.assignedTo&&e.jsxs("span",{className:"flex items-center",children:[e.jsx(E,{name:"User",size:16,className:"mr-1"}),g.assignedTo]})]}),g.description&&e.jsx("p",{className:"text-gray-700 mb-3",children:g.description}),g.outcome&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm font-medium text-green-800 mb-1",children:"Outcome:"}),e.jsx("div",{className:"text-sm text-green-700",children:g.outcome})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[g.status==="scheduled"&&e.jsx(P,{variant:"outline",size:"sm",onClick:()=>{alert("Mark as in progress functionality will be implemented")},children:"Start"}),g.status==="in_progress"&&e.jsx(P,{variant:"outline",size:"sm",onClick:()=>{alert("Mark as completed functionality will be implemented")},children:"Complete"}),e.jsx(P,{variant:"ghost",size:"sm",iconName:"Edit"}),e.jsx(P,{variant:"ghost",size:"sm",iconName:"MoreHorizontal"})]})]})},g.id))})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Quick Create Activity"}),e.jsx(P,{variant:"ghost",iconName:"X",onClick:()=>i(!1)})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(B,{label:"Type",options:w,value:"",onChange:()=>{}}),e.jsx(D,{label:"Subject",placeholder:"Activity subject..."}),e.jsx(D,{label:"Due Date",type:"date"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(P,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(P,{onClick:()=>{i(!1),alert("Activity creation will be implemented")},children:"Create"})]})]})]})})]})},gd=()=>{const[s,t]=T.useState("dashboard"),[a,r]=T.useState(null),[n,i]=T.useState(null),l=()=>{r(null),t("create-lead")},o=m=>{r(m),t("lead-details")},c=m=>{r(m),t("convert-lead")},d=()=>{i(null),t("create-opportunity")},u=()=>{t("opportunities")},b=()=>{t("leads")},C=m=>{r(m),t("leads")},w=()=>{r(null),i(null),t("dashboard")},g=()=>{switch(s){case"create-lead":return e.jsx(La,{onSave:C,onCancel:w});case"edit-lead":return e.jsx(La,{lead:a,onSave:C,onCancel:w});case"leads":return e.jsx(ud,{onCreateLead:l,onViewLead:o,onConvertLead:c});case"opportunities":return e.jsx(xd,{onCreateOpportunity:d,onBack:w});case"activities":return e.jsx(pd,{onBack:w});default:return e.jsx(md,{onCreateLead:l,onCreateOpportunity:d,onViewLeads:b,onViewOpportunities:u})}},p=()=>{switch(s){case"create-lead":return"Create New Lead";case"edit-lead":return"Edit Lead";case"leads":return"Lead Management";case"opportunities":return"Sales Pipeline";case"activities":return"Activity Management";default:return"CRM Dashboard"}},x=()=>{switch(s){case"create-lead":return"Add a new lead to your sales pipeline";case"edit-lead":return"Update lead information and track progress";case"leads":return"Manage and track all your sales leads";case"opportunities":return"Track opportunities through your sales pipeline";case"activities":return"Manage sales activities and follow-ups";default:return"Comprehensive customer relationship management"}};return e.jsxs(dd,{children:[e.jsxs(We,{children:[e.jsx("title",{children:"CRM Management - MoveEase Pro"}),e.jsx("meta",{name:"description",content:"Complete customer relationship management with lead tracking, sales pipeline, and opportunity management"})]}),e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"flex h-screen",children:[e.jsx(nt,{}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[s!=="dashboard"&&e.jsxs("button",{onClick:w,className:"flex items-center text-gray-600 hover:text-gray-900",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Dashboard"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:p()}),e.jsx("p",{className:"text-gray-600 mt-1",children:x()})]})]}),s==="dashboard"&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"CRM Status"}),e.jsx("div",{className:"text-lg font-semibold text-green-600",children:"Active"})]}),e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"})]}),s==="leads"&&e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Lead Pipeline"}),e.jsx("div",{className:"text-lg font-semibold text-blue-600",children:"Active Management"})]})}),s==="opportunities"&&e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Sales Pipeline"}),e.jsx("div",{className:"text-lg font-semibold text-purple-600",children:"Opportunity Tracking"})]})})]})}),e.jsx("main",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"p-6",children:g()})})]})]})})]})},W={HEADERS:"headers",HEROES:"heroes",FEATURES:"features",ABOUT:"about",SERVICES:"services",TESTIMONIALS:"testimonials",GALLERIES:"galleries",FORMS:"forms",FOOTERS:"footers",CONTENT:"content",CTA:"cta"},$={HEADER_SIMPLE:"header_simple",HEADER_WITH_CTA:"header_with_cta",HEADER_TRANSPARENT:"header_transparent",HEADER_CENTERED:"header_centered",HERO_BANNER:"hero_banner",HERO_VIDEO:"hero_video",HERO_SPLIT:"hero_split",HERO_MINIMAL:"hero_minimal",HERO_CAROUSEL:"hero_carousel",FEATURES_GRID:"features_grid",FEATURES_LIST:"features_list",FEATURES_TABS:"features_tabs",FEATURES_ACCORDION:"features_accordion",ABOUT_SIMPLE:"about_simple",ABOUT_WITH_IMAGE:"about_with_image",ABOUT_TIMELINE:"about_timeline",ABOUT_STATS:"about_stats",SERVICES_GRID:"services_grid",SERVICES_CAROUSEL:"services_carousel",SERVICES_LIST:"services_list",SERVICES_PRICING:"services_pricing",TESTIMONIALS_GRID:"testimonials_grid",TESTIMONIALS_CAROUSEL:"testimonials_carousel",TESTIMONIALS_SINGLE:"testimonials_single",GALLERY_GRID:"gallery_grid",GALLERY_MASONRY:"gallery_masonry",GALLERY_CAROUSEL:"gallery_carousel",GALLERY_LIGHTBOX:"gallery_lightbox",CONTACT_FORM:"contact_form",QUOTE_FORM:"quote_form",NEWSLETTER_FORM:"newsletter_form",BOOKING_FORM:"booking_form",TEXT_BLOCK:"text_block",IMAGE_BLOCK:"image_block",VIDEO_BLOCK:"video_block",DIVIDER:"divider",SPACER:"spacer",CTA_BANNER:"cta_banner",CTA_BUTTON:"cta_button",CTA_POPUP:"cta_popup",FOOTER_SIMPLE:"footer_simple",FOOTER_DETAILED:"footer_detailed",FOOTER_MINIMAL:"footer_minimal"},at={DESKTOP:"desktop",TABLET:"tablet",MOBILE:"mobile"},ze={DRAFT:"draft",PUBLISHED:"published",ARCHIVED:"archived"},hd={NONE:"none"},yd=(s,t)=>({id:null,type:s,category:t,name:"",content:{},styles:{desktop:{},tablet:{},mobile:{}},settings:{animation:hd.NONE,animationDelay:0,animationDuration:1e3,visible:!0,customCSS:"",customJS:""},position:0,createdAt:null,updatedAt:null}),fd=()=>({id:null,name:"",slug:"",title:"",description:"",keywords:"",status:ze.DRAFT,blocks:[],settings:{layout:"default",theme:"default",customCSS:"",customJS:"",seo:{title:"",description:"",keywords:"",ogImage:"",canonical:""}},createdAt:null,updatedAt:null,publishedAt:null}),Ma=()=>({id:null,name:"MoveEase Pro Website",domain:"",pages:[],globalSettings:{branding:{logo:"",favicon:"",colors:{primary:"#1E40AF",secondary:"#64748B",accent:"#F59E0B",background:"#FFFFFF",text:"#1F2937"},fonts:{heading:"Inter",body:"Inter"}},navigation:{style:"horizontal",position:"top",sticky:!0,items:[]},footer:{copyright:"",links:[],social:[]},analytics:{googleAnalytics:"",facebookPixel:"",customCode:""}},createdAt:null,updatedAt:null}),bd={[$.HERO_BANNER]:{title:"Kenya's Most Trusted Moving Company",subtitle:"Professional  Reliable  Affordable",description:"Experience seamless relocations with our expert moving team. We handle residential, office, and commercial moves across Kenya with unmatched care and precision.",backgroundImage:"",backgroundVideo:"",buttons:[{text:"Get Free Moving Quote",link:"/quote",style:"primary"},{text:"View Moving Services",link:"/services",style:"secondary"}],overlay:{enabled:!0,color:"#000000",opacity:.4}},[$.FEATURES_GRID]:{title:"Why Choose Our Moving Services",subtitle:"Kenya's premier moving company with unmatched expertise",features:[{icon:"Truck",title:"Professional Moving Team",description:"Certified and experienced movers trained in safe handling techniques"},{icon:"Shield",title:"Fully Insured Moves",description:"Comprehensive insurance coverage for complete peace of mind"},{icon:"Clock",title:"Punctual Service",description:"On-time arrivals and efficient moving process every time"},{icon:"MapPin",title:"Kenya-Wide Coverage",description:"Serving all major cities and towns across Kenya"},{icon:"Package",title:"Safe Packing",description:"Professional packing materials and techniques for fragile items"},{icon:"Phone",title:"24/7 Support",description:"Round-the-clock customer support for your moving needs"}]},[$.CONTACT_FORM]:{title:"Get Your Free Moving Quote Today",subtitle:"Complete the form below and receive a detailed moving estimate within 2 hours",fields:[{name:"name",label:"Full Name",type:"text",required:!0},{name:"email",label:"Email Address",type:"email",required:!0},{name:"phone",label:"Phone Number",type:"tel",required:!0},{name:"moveType",label:"Type of Move",type:"select",required:!0,options:["Residential Move","Office Relocation","Commercial Move","Storage Services","Packing Services","Long Distance Move"]},{name:"moveDate",label:"Preferred Moving Date",type:"date",required:!0},{name:"fromLocation",label:"Moving From (City/Area)",type:"text",required:!0},{name:"toLocation",label:"Moving To (City/Area)",type:"text",required:!0},{name:"homeSize",label:"Home/Office Size",type:"select",required:!1,options:["Studio/1BR","2-3 Bedrooms","4+ Bedrooms","Small Office","Large Office","Warehouse"]},{name:"specialItems",label:"Special Items (Piano, Art, etc.)",type:"textarea",required:!1}],submitButton:{text:"Get My Moving Quote",style:"primary"},successMessage:"Thank you! Our moving consultant will contact you within 2 hours with your personalized quote.",errorMessage:"Sorry, there was an error submitting your request. Please call us directly at +254 700 123 456."}},Jt={snapToGrid:!0,showGrid:!1,autoSave:!0,autoSaveInterval:3e4};class vd{constructor(){this.website=this.loadWebsite(),this.currentPage=null,this.history=[],this.historyIndex=-1,this.maxHistorySize=50,this.initializeDefaultData()}loadWebsite(){try{const t=localStorage.getItem("moveease_website");if(t)return JSON.parse(t)}catch(t){console.error("Error loading website data:",t)}return Ma()}saveWebsite(){try{return this.website.updatedAt=new Date().toISOString(),localStorage.setItem("moveease_website",JSON.stringify(this.website)),!0}catch(t){return console.error("Error saving website data:",t),!1}}initializeDefaultData(){if(!this.website.id){this.website={...Ma(),id:this.generateId(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};const t=this.createPage("Home","home");this.website.pages.push(t),this.currentPage=t,this.saveWebsite()}}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}createPage(t,a){return{...fd(),id:this.generateId(),name:t,slug:a,title:t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}}addPage(t,a){const r=this.createPage(t,a);return this.website.pages.push(r),this.saveWebsite(),r}updatePage(t,a){const r=this.website.pages.findIndex(n=>n.id===t);return r!==-1?(this.website.pages[r]={...this.website.pages[r],...a,updatedAt:new Date().toISOString()},this.saveWebsite(),this.website.pages[r]):null}deletePage(t){const a=this.website.pages.findIndex(r=>r.id===t);return a!==-1?(this.website.pages.splice(a,1),this.saveWebsite(),!0):!1}getPage(t){return this.website.pages.find(a=>a.id===t)}getPageBySlug(t){return this.website.pages.find(a=>a.slug===t)}createBlock(t,a,r={}){return{...yd(t,a),id:this.generateId(),name:this.getBlockName(t),content:{...bd[t],...r},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}}addBlockToPage(t,a,r,n=-1){const i=this.getPage(t);if(!i)return null;const l=this.createBlock(a,r);return n===-1||n>=i.blocks.length?(i.blocks.push(l),l.position=i.blocks.length-1):(i.blocks.splice(n,0,l),i.blocks.forEach((o,c)=>{o.position=c})),this.updatePage(t,{blocks:i.blocks}),this.addToHistory("ADD_BLOCK",{pageId:t,block:l}),l}updateBlock(t,a,r){const n=this.getPage(t);if(!n)return null;const i=n.blocks.findIndex(o=>o.id===a);if(i===-1)return null;const l={...n.blocks[i]};return n.blocks[i]={...n.blocks[i],...r,updatedAt:new Date().toISOString()},this.updatePage(t,{blocks:n.blocks}),this.addToHistory("UPDATE_BLOCK",{pageId:t,blockId:a,oldBlock:l,newBlock:n.blocks[i]}),n.blocks[i]}deleteBlock(t,a){const r=this.getPage(t);if(!r)return!1;const n=r.blocks.findIndex(l=>l.id===a);if(n===-1)return!1;const i=r.blocks[n];return r.blocks.splice(n,1),r.blocks.forEach((l,o)=>{l.position=o}),this.updatePage(t,{blocks:r.blocks}),this.addToHistory("DELETE_BLOCK",{pageId:t,block:i,position:n}),!0}moveBlock(t,a,r){const n=this.getPage(t);if(!n)return!1;const i=n.blocks.findIndex(c=>c.id===a);if(i===-1)return!1;const l=n.blocks[i],o=i;return n.blocks.splice(i,1),n.blocks.splice(r,0,l),n.blocks.forEach((c,d)=>{c.position=d}),this.updatePage(t,{blocks:n.blocks}),this.addToHistory("MOVE_BLOCK",{pageId:t,blockId:a,oldPosition:o,newPosition:r}),!0}duplicateBlock(t,a){const r=this.getPage(t);if(!r)return null;const n=r.blocks.find(o=>o.id===a);if(!n)return null;const i={...n,id:this.generateId(),name:`${n.name} Copy`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},l=n.position+1;return r.blocks.splice(l,0,i),r.blocks.forEach((o,c)=>{o.position=c}),this.updatePage(t,{blocks:r.blocks}),this.addToHistory("DUPLICATE_BLOCK",{pageId:t,originalBlockId:a,duplicatedBlock:i}),i}addToHistory(t,a){this.history=this.history.slice(0,this.historyIndex+1),this.history.push({action:t,data:a,timestamp:new Date().toISOString()}),this.history.length>this.maxHistorySize?this.history.shift():this.historyIndex++}undo(){if(this.historyIndex<0)return!1;const t=this.history[this.historyIndex];return this.executeUndoAction(t),this.historyIndex--,!0}redo(){if(this.historyIndex>=this.history.length-1)return!1;this.historyIndex++;const t=this.history[this.historyIndex];return this.executeRedoAction(t),!0}executeUndoAction(t){const{action:a,data:r}=t;switch(a){case"ADD_BLOCK":this.deleteBlock(r.pageId,r.block.id);break;case"DELETE_BLOCK":const n=this.getPage(r.pageId);n&&(n.blocks.splice(r.position,0,r.block),n.blocks.forEach((i,l)=>{i.position=l}),this.updatePage(r.pageId,{blocks:n.blocks}));break;case"UPDATE_BLOCK":this.updateBlock(r.pageId,r.blockId,r.oldBlock);break;case"MOVE_BLOCK":this.moveBlock(r.pageId,r.blockId,r.oldPosition);break}}executeRedoAction(t){const{action:a,data:r}=t;switch(a){case"ADD_BLOCK":const n=this.getPage(r.pageId);n&&(n.blocks.push(r.block),this.updatePage(r.pageId,{blocks:n.blocks}));break;case"DELETE_BLOCK":this.deleteBlock(r.pageId,r.block.id);break;case"UPDATE_BLOCK":this.updateBlock(r.pageId,r.blockId,r.newBlock);break;case"MOVE_BLOCK":this.moveBlock(r.pageId,r.blockId,r.newPosition);break}}getBlockName(t){return{[$.HERO_BANNER]:"Hero Banner",[$.HERO_VIDEO]:"Video Hero",[$.FEATURES_GRID]:"Features Grid",[$.ABOUT_SIMPLE]:"About Section",[$.SERVICES_GRID]:"Services Grid",[$.TESTIMONIALS_GRID]:"Testimonials",[$.GALLERY_GRID]:"Photo Gallery",[$.CONTACT_FORM]:"Contact Form",[$.FOOTER_SIMPLE]:"Footer"}[t]||"Block"}exportWebsite(){return JSON.stringify(this.website,null,2)}importWebsite(t){try{const a=JSON.parse(t);return this.website=a,this.saveWebsite(),!0}catch(a){return console.error("Error importing website:",a),!1}}publishPage(t){const a=this.getPage(t);return a?(a.status=ze.PUBLISHED,a.publishedAt=new Date().toISOString(),this.updatePage(t,{status:a.status,publishedAt:a.publishedAt}),!0):!1}unpublishPage(t){const a=this.getPage(t);return a?(a.status=ze.DRAFT,a.publishedAt=null,this.updatePage(t,{status:a.status,publishedAt:a.publishedAt}),!0):!1}}const X=new vd,zr=T.createContext(),ft=()=>{const s=T.useContext(zr);if(!s)throw new Error("useWebsiteBuilder must be used within a WebsiteBuilderProvider");return s},jd=({children:s})=>{const[t,a]=T.useState(X.website),[r,n]=T.useState(null),[i,l]=T.useState(null),[o,c]=T.useState(!1),[d,u]=T.useState(null),[b,C]=T.useState("edit"),[w,g]=T.useState(at.DESKTOP),[p,x]=T.useState(Jt.showGrid),[m,j]=T.useState(Jt.snapToGrid),[S,y]=T.useState(!1),[A,N]=T.useState(null),[f,v]=T.useState(!1),[h,I]=T.useState(!1),[R,L]=T.useState(!1),[H,k]=T.useState(null);T.useEffect(()=>{t.pages.length>0&&!r&&n(t.pages[0])},[t,r]),T.useEffect(()=>{if(R&&Jt.autoSave){const F=setTimeout(()=>{O()},Jt.autoSaveInterval);return()=>clearTimeout(F)}},[R]);const U=T.useCallback(()=>{v(X.historyIndex>=0),I(X.historyIndex<X.history.length-1)},[]),O=T.useCallback(async()=>{c(!0);try{if(X.saveWebsite())a({...X.website}),L(!1),k(new Date),u(null);else throw new Error("Failed to save website")}catch(F){u(F.message)}finally{c(!1)}},[]),M=T.useCallback(async F=>{c(!0);try{X.website.globalSettings={...X.website.globalSettings,...F},await O()}catch(K){u(K.message)}finally{c(!1)}},[O]),z=T.useCallback(async(F,K)=>{c(!0);try{const de=X.addPage(F,K);return a({...X.website}),n(de),L(!0),de}catch(de){return u(de.message),null}finally{c(!1)}},[]),G=T.useCallback(async(F,K)=>{c(!0);try{const de=X.updatePage(F,K);return de&&(a({...X.website}),r&&r.id===F&&n(de),L(!0)),de}catch(de){return u(de.message),null}finally{c(!1)}},[r]),se=T.useCallback(async F=>{c(!0);try{const K=X.deletePage(F);return K&&(a({...X.website}),r&&r.id===F&&n(X.website.pages[0]||null),L(!0)),K}catch(K){return u(K.message),!1}finally{c(!1)}},[r]),le=T.useCallback(F=>{const K=X.getPage(F);K&&(n(K),l(null))},[]),Se=T.useCallback(async(F,K,de=-1)=>{if(!r)return null;c(!0);try{const qe=X.addBlockToPage(r.id,F,K,de);return qe&&(a({...X.website}),n(X.getPage(r.id)),l(qe),L(!0),U()),qe}catch(qe){return u(qe.message),null}finally{c(!1)}},[r,U]),pe=T.useCallback(async(F,K)=>{if(!r)return null;try{const de=X.updateBlock(r.id,F,K);return de&&(a({...X.website}),n(X.getPage(r.id)),i&&i.id===F&&l(de),L(!0),U()),de}catch(de){return u(de.message),null}},[r,i,U]),ge=T.useCallback(async F=>{if(!r)return!1;c(!0);try{const K=X.deleteBlock(r.id,F);return K&&(a({...X.website}),n(X.getPage(r.id)),i&&i.id===F&&l(null),L(!0),U()),K}catch(K){return u(K.message),!1}finally{c(!1)}},[r,i,U]),Ue=T.useCallback(async(F,K)=>{if(!r)return!1;try{const de=X.moveBlock(r.id,F,K);return de&&(a({...X.website}),n(X.getPage(r.id)),L(!0),U()),de}catch(de){return u(de.message),!1}},[r,U]),Ye=T.useCallback(async F=>{if(!r)return null;c(!0);try{const K=X.duplicateBlock(r.id,F);return K&&(a({...X.website}),n(X.getPage(r.id)),l(K),L(!0),U()),K}catch(K){return u(K.message),null}finally{c(!1)}},[r,U]),he=T.useCallback(()=>{const F=X.undo();return F&&(a({...X.website}),n(X.getPage(r.id)),L(!0),U()),F},[r,U]),mt=T.useCallback(()=>{const F=X.redo();return F&&(a({...X.website}),n(X.getPage(r.id)),L(!0),U()),F},[r,U]),Je=T.useCallback(async F=>{c(!0);try{const K=X.publishPage(F);return K&&(a({...X.website}),r&&r.id===F&&n(X.getPage(F)),await O()),K}catch(K){return u(K.message),!1}finally{c(!1)}},[r,O]),Qe=T.useCallback(async F=>{c(!0);try{const K=X.unpublishPage(F);return K&&(a({...X.website}),r&&r.id===F&&n(X.getPage(F)),await O()),K}catch(K){return u(K.message),!1}finally{c(!1)}},[r,O]),it={website:t,currentPage:r,selectedBlock:i,loading:o,error:d,editorMode:b,deviceMode:w,showGrid:p,snapToGrid:m,isDragging:S,draggedBlock:A,canUndo:f,canRedo:h,hasUnsavedChanges:R,lastSaved:H,saveWebsite:O,updateWebsiteSettings:M,createPage:z,updatePage:G,deletePage:se,switchPage:le,addBlock:Se,updateBlock:pe,deleteBlock:ge,moveBlock:Ue,duplicateBlock:Ye,setSelectedBlock:l,setEditorMode:C,setDeviceMode:g,setShowGrid:x,setSnapToGrid:j,setIsDragging:y,setDraggedBlock:N,undo:he,redo:mt,publishPage:Je,unpublishPage:Qe,setError:u};return e.jsx(zr.Provider,{value:it,children:s})};var Nd={};class wd{constructor(){this.baseUrl=Nd.VITE_API_URL||"http://localhost:3001",this.uploadEndpoint="/api/upload/images",this.maxFileSize=10*1024*1024,this.allowedTypes=["image/jpeg","image/jpg","image/png","image/gif","image/webp"],this.compressionQuality=.8}validateFile(t){const a=[];return t?(this.allowedTypes.includes(t.type)||a.push(`File type ${t.type} not supported. Allowed types: ${this.allowedTypes.join(", ")}`),t.size>this.maxFileSize&&a.push(`File size ${(t.size/1024/1024).toFixed(2)}MB exceeds maximum ${this.maxFileSize/1024/1024}MB`),{isValid:a.length===0,errors:a}):(a.push("No file selected"),{isValid:!1,errors:a})}async compressImage(t){return new Promise(a=>{const r=document.createElement("canvas"),n=r.getContext("2d"),i=new Image;i.onload=()=>{let{width:l,height:o}=i;const c=1920,d=1080;if(l>c||o>d){const u=Math.min(c/l,d/o);l*=u,o*=u}r.width=l,r.height=o,n.drawImage(i,0,0,l,o),r.toBlob(u=>{const b=new File([u],t.name,{type:t.type,lastModified:Date.now()});a(b)},t.type,this.compressionQuality)},i.src=URL.createObjectURL(t)})}async generateThumbnail(t,a=300){return new Promise(r=>{const n=document.createElement("canvas"),i=n.getContext("2d"),l=new Image;l.onload=()=>{n.width=a,n.height=a;const{width:o,height:c}=l,d=Math.min(o,c),u=(o-d)/2,b=(c-d)/2;i.drawImage(l,u,b,d,d,0,0,a,a),n.toBlob(C=>{const w=new File([C],`thumb_${t.name}`,{type:t.type,lastModified:Date.now()});r(w)},t.type,.7)},l.src=URL.createObjectURL(t)})}async uploadImage(t,a={}){try{const r=this.validateFile(t);if(!r.isValid)throw new Error(r.errors.join(", "));const n=await this.compressImage(t),i=await this.generateThumbnail(n),l=new FormData;return l.append("image",n),l.append("thumbnail",i),l.append("originalName",t.name),l.append("category",a.category||"website-builder"),l.append("alt",a.alt||""),{success:!0,data:await this.simulateUpload(n,i,a)}}catch(r){return console.error("Image upload error:",r),{success:!1,error:r.message}}}async simulateUpload(t,a,r){await new Promise(d=>setTimeout(d,1e3+Math.random()*2e3));const n=Date.now().toString(36)+Math.random().toString(36).substr(2),i=URL.createObjectURL(t),l=URL.createObjectURL(a),o={id:n,originalName:t.name,fileName:`${n}_${t.name}`,url:i,thumbnailUrl:l,size:t.size,type:t.type,category:r.category||"website-builder",alt:r.alt||"",uploadedAt:new Date().toISOString(),dimensions:await this.getImageDimensions(t)},c=JSON.parse(localStorage.getItem("uploaded_images")||"[]");return c.push(o),localStorage.setItem("uploaded_images",JSON.stringify(c)),o}async getImageDimensions(t){return new Promise(a=>{const r=new Image;r.onload=()=>{a({width:r.naturalWidth,height:r.naturalHeight})},r.src=URL.createObjectURL(t)})}async uploadMultipleImages(t,a={}){const r=[];for(let n=0;n<t.length;n++){const i=t[n],l=await this.uploadImage(i,{...a,onProgress:o=>{a.onProgress&&a.onProgress({fileIndex:n,fileName:i.name,progress:o,totalFiles:t.length})}});r.push(l)}return r}getUploadedImages(t=null){const a=JSON.parse(localStorage.getItem("uploaded_images")||"[]");return t?a.filter(r=>r.category===t):a}deleteImage(t){const r=JSON.parse(localStorage.getItem("uploaded_images")||"[]").filter(n=>n.id!==t);return localStorage.setItem("uploaded_images",JSON.stringify(r)),!0}getImageById(t){return this.getUploadedImages().find(r=>r.id===t)}searchImages(t,a=null){const r=this.getUploadedImages(a);if(!t)return r;const n=t.toLowerCase();return r.filter(i=>i.originalName.toLowerCase().includes(n)||i.alt.toLowerCase().includes(n)||i.category.toLowerCase().includes(n))}getStorageUsage(){const t=this.getUploadedImages(),a=t.reduce((r,n)=>r+n.size,0);return{totalImages:t.length,totalSize:a,totalSizeMB:(a/1024/1024).toFixed(2)}}}const Nt=new wd,ds=({onImageSelect:s,onImageUpload:t,multiple:a=!1,category:r="website-builder",accept:n="image/*",maxFiles:i=10,className:l="",showPreview:o=!0,showGallery:c=!0})=>{const[d,u]=T.useState(!1),[b,C]=T.useState(!1),[w,g]=T.useState(0),[p,x]=T.useState([]),[m,j]=T.useState(!1),[S,y]=T.useState([]),[A,N]=T.useState(""),f=T.useRef(null),v=T.useCallback(()=>{const G=Nt.getUploadedImages(r);y(G)},[r]),h=T.useCallback(async G=>{if(!G||G.length===0)return;const se=Array.from(G);if(!a&&se.length>1){alert("Please select only one image");return}if(se.length>i){alert(`Please select no more than ${i} images`);return}C(!0),g(0);try{const le=[];for(let Se=0;Se<se.length;Se++){const pe=se[Se],ge=await Nt.uploadImage(pe,{category:r,onProgress:Ue=>{const Ye=(Se/se.length+Ue/100/se.length)*100;g(Ye)}});ge.success?le.push(ge.data):(console.error("Upload failed:",ge.error),alert(`Failed to upload ${pe.name}: ${ge.error}`))}le.length>0&&(x(le),t&&t(a?le:le[0]),s&&s(a?le:le[0]))}catch(le){console.error("Upload error:",le),alert("Upload failed. Please try again.")}finally{C(!1),g(0)}},[a,i,r,s,t]),I=T.useCallback(G=>{G.preventDefault(),u(!0)},[]),R=T.useCallback(G=>{G.preventDefault(),u(!1)},[]),L=T.useCallback(G=>{G.preventDefault(),u(!1);const se=G.dataTransfer.files;h(se)},[h]),H=T.useCallback(G=>{h(G.target.files)},[h]),k=T.useCallback(()=>{var G;(G=f.current)==null||G.click()},[]),U=T.useCallback(()=>{v(),j(!0)},[v]),O=T.useCallback(G=>{if(a){const se=p.some(le=>le.id===G.id);x(se?le=>le.filter(Se=>Se.id!==G.id):le=>[...le,G])}else x([G]),s&&s(G),j(!1)},[a,p,s]),M=T.useCallback(()=>{s&&s(a?p:p[0]),j(!1)},[a,p,s]),z=S.filter(G=>G.originalName.toLowerCase().includes(A.toLowerCase())||G.alt.toLowerCase().includes(A.toLowerCase()));return e.jsxs("div",{className:`image-upload ${l}`,children:[e.jsx("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${d?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"} ${b?"pointer-events-none opacity-50":""}`,onDragOver:I,onDragLeave:R,onDrop:L,children:b?e.jsxs("div",{className:"space-y-4",children:[e.jsx(E,{name:"Upload",size:48,className:"mx-auto text-blue-500 animate-pulse"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Uploading..."}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${w}%`}})}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[Math.round(w),"% complete"]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(E,{name:"Upload",size:48,className:"mx-auto text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Drop images here or click to upload"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Supports JPG, PNG, GIF, WebP up to 10MB"}),a&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["You can select up to ",i," images"]})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsxs(P,{onClick:k,variant:"outline",children:[e.jsx(E,{name:"Upload",size:16,className:"mr-2"}),"Choose Files"]}),c&&e.jsxs(P,{onClick:U,variant:"ghost",children:[e.jsx(E,{name:"Image",size:16,className:"mr-2"}),"From Gallery"]})]})]})}),e.jsx("input",{ref:f,type:"file",accept:n,multiple:a,onChange:H,className:"hidden"}),o&&p.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Selected Images"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:p.map(G=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:G.thumbnailUrl||G.url,alt:G.alt||G.originalName,className:"w-full h-24 object-cover rounded-lg border border-gray-200"}),e.jsx("button",{onClick:()=>{x(se=>se.filter(le=>le.id!==G.id))},className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(E,{name:"X",size:12})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 rounded-b-lg truncate",children:G.originalName})]},G.id))})]}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full mx-4 max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Image Gallery"}),e.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(E,{name:"X",size:20})})]}),e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(E,{name:"Search",size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search images...",value:A,onChange:G=>N(G.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:z.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(E,{name:"Image",size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No images found"})]}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:z.map(G=>e.jsxs("div",{className:`relative cursor-pointer rounded-lg overflow-hidden border-2 transition-all ${p.some(se=>se.id===G.id)?"border-blue-500 ring-2 ring-blue-200":"border-transparent hover:border-gray-300"}`,onClick:()=>O(G),children:[e.jsx("img",{src:G.thumbnailUrl||G.url,alt:G.alt||G.originalName,className:"w-full h-24 object-cover"}),p.some(se=>se.id===G.id)&&e.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center",children:e.jsx(E,{name:"Check",size:12})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 truncate",children:G.originalName})]},G.id))})}),e.jsxs("div",{className:"p-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[p.length," selected"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(P,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),e.jsx(P,{onClick:M,disabled:p.length===0,children:"Select Images"})]})]})]})})]})},Sd=({onClose:s})=>{const[t,a]=T.useState([]),[r,n]=T.useState([]),[i,l]=T.useState(""),[o,c]=T.useState("all"),[d,u]=T.useState([]),[b,C]=T.useState("grid"),[w,g]=T.useState("newest"),[p,x]=T.useState(!1),m=[{value:"all",label:"All Images"},{value:"website-builder",label:"Website Builder"},{value:"backgrounds",label:"Backgrounds"},{value:"logos",label:"Logos"},{value:"team",label:"Team Photos"},{value:"services",label:"Services"},{value:"gallery",label:"Gallery"}];T.useEffect(()=>{j()},[]),T.useEffect(()=>{let R=t;if(o!=="all"&&(R=R.filter(L=>L.category===o)),i){const L=i.toLowerCase();R=R.filter(H=>H.originalName.toLowerCase().includes(L)||H.alt.toLowerCase().includes(L)||H.category.toLowerCase().includes(L))}R.sort((L,H)=>{switch(w){case"oldest":return new Date(L.uploadedAt)-new Date(H.uploadedAt);case"name":return L.originalName.localeCompare(H.originalName);case"size":return H.size-L.size;case"newest":default:return new Date(H.uploadedAt)-new Date(L.uploadedAt)}}),n(R)},[t,i,o,w]);const j=()=>{const R=Nt.getUploadedImages();a(R)},S=R=>{j(),x(!1)},y=R=>{u(L=>L.some(k=>k.id===R.id)?L.filter(k=>k.id!==R.id):[...L,R])},A=()=>{d.length===r.length?u([]):u([...r])},N=()=>{if(d.length===0)return;window.confirm(`Are you sure you want to delete ${d.length} image(s)? This action cannot be undone.`)&&(d.forEach(L=>{Nt.deleteImage(L.id)}),u([]),j())},f=(R,L)=>{console.log("Update alt text:",R,L)},v=R=>{if(R===0)return"0 Bytes";const L=1024,H=["Bytes","KB","MB","GB"],k=Math.floor(Math.log(R)/Math.log(L));return parseFloat((R/Math.pow(L,k)).toFixed(2))+" "+H[k]},h=R=>new Date(R).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),I=Nt.getStorageUsage();return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-6xl w-full mx-4 max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Image Gallery"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[I.totalImages," images  ",I.totalSizeMB," MB used"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(P,{variant:"outline",onClick:()=>x(!p),children:[e.jsx(E,{name:"Upload",size:16,className:"mr-2"}),"Upload Images"]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx(E,{name:"X",size:20})})]})]}),p&&e.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:e.jsx(ds,{onImageUpload:S,multiple:!0,maxFiles:20,showPreview:!0,showGallery:!1})})]}),e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(D,{placeholder:"Search images...",value:i,onChange:l,icon:"Search"})}),e.jsx(B,{options:m,value:o,onChange:c}),e.jsx(B,{options:[{value:"newest",label:"Newest First"},{value:"oldest",label:"Oldest First"},{value:"name",label:"Name A-Z"},{value:"size",label:"Largest First"}],value:w,onChange:g}),e.jsxs("div",{className:"flex border border-gray-300 rounded-lg",children:[e.jsx("button",{onClick:()=>C("grid"),className:`p-2 ${b==="grid"?"bg-blue-500 text-white":"text-gray-600"}`,children:e.jsx(E,{name:"Grid3x3",size:16})}),e.jsx("button",{onClick:()=>C("list"),className:`p-2 ${b==="list"?"bg-blue-500 text-white":"text-gray-600"}`,children:e.jsx(E,{name:"List",size:16})})]})]}),d.length>0&&e.jsxs("div",{className:"flex items-center justify-between mt-4 p-3 bg-blue-50 rounded-lg",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[d.length," image(s) selected"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(P,{variant:"outline",size:"sm",onClick:()=>u([]),children:"Clear Selection"}),e.jsxs(P,{variant:"outline",size:"sm",onClick:N,className:"text-red-600 border-red-300 hover:bg-red-50",children:[e.jsx(E,{name:"Trash2",size:14,className:"mr-1"}),"Delete Selected"]})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(E,{name:"Image",size:64,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No images found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:i||o!=="all"?"Try adjusting your search or filter criteria":"Upload your first image to get started"}),!i&&o==="all"&&e.jsxs(P,{onClick:()=>x(!0),children:[e.jsx(E,{name:"Upload",size:16,className:"mr-2"}),"Upload Images"]})]}):b==="grid"?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:r.map(R=>{var L,H;return e.jsxs("div",{className:`relative group cursor-pointer rounded-lg overflow-hidden border-2 transition-all ${d.some(k=>k.id===R.id)?"border-blue-500 ring-2 ring-blue-200":"border-transparent hover:border-gray-300"}`,onClick:()=>y(R),children:[e.jsx("img",{src:R.thumbnailUrl||R.url,alt:R.alt||R.originalName,className:"w-full h-32 object-cover"}),d.some(k=>k.id===R.id)&&e.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center",children:e.jsx(E,{name:"Check",size:12})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-75 text-white p-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("p",{className:"text-xs truncate font-medium",children:R.originalName}),e.jsxs("p",{className:"text-xs text-gray-300",children:[v(R.size),"  ",(L=R.dimensions)==null?void 0:L.width,"",(H=R.dimensions)==null?void 0:H.height]})]})]},R.id)})}):e.jsx("div",{className:"space-y-2",children:r.map(R=>{var L,H;return e.jsxs("div",{className:`flex items-center p-3 rounded-lg border transition-all ${d.some(k=>k.id===R.id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"checkbox",checked:d.some(k=>k.id===R.id),onChange:()=>y(R),className:"mr-3"}),e.jsx("img",{src:R.thumbnailUrl||R.url,alt:R.alt||R.originalName,className:"w-12 h-12 object-cover rounded mr-4"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 truncate",children:R.originalName}),e.jsxs("p",{className:"text-sm text-gray-600",children:[v(R.size),"  ",(L=R.dimensions)==null?void 0:L.width,"",(H=R.dimensions)==null?void 0:H.height,"  ",h(R.uploadedAt)]}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:R.category})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{variant:"ghost",size:"sm",onClick:k=>{k.stopPropagation();const U=prompt("Enter alt text:",R.alt);U!==null&&f(R.id,U)},children:e.jsx(E,{name:"Edit",size:14})}),e.jsx(P,{variant:"ghost",size:"sm",onClick:k=>{k.stopPropagation(),window.confirm("Delete this image?")&&(Nt.deleteImage(R.id),j())},className:"text-red-600 hover:text-red-700",children:e.jsx(E,{name:"Trash2",size:14})})]})]},R.id)})})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:A,className:"text-sm text-blue-600 hover:text-blue-700",children:d.length===r.length?"Deselect All":"Select All"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",r.length," of ",t.length," images"]})]}),e.jsx(P,{onClick:s,children:"Close"})]})]})})};class Cd{constructor(){this.defaultSettings={title:"",description:"",keywords:"",author:"MoveEase Pro",robots:"index, follow",canonical:"",ogTitle:"",ogDescription:"",ogImage:"",ogType:"website",twitterCard:"summary_large_image",twitterTitle:"",twitterDescription:"",twitterImage:"",structuredData:null}}generateTitle(t,a="MoveEase Pro"){if(!t)return a;const r=60;let n=`${t} | ${a}`;return n.length>r&&(n=t.length>r-3?`${t.substring(0,r-3)}...`:t),n}generateDescription(t,a=160){if(!t)return"";const r=t.replace(/<[^>]*>/g,"").replace(/\s+/g," ").trim();if(r.length<=a)return r;const n=r.substring(0,a),i=n.lastIndexOf(" ");return i>a*.8?`${n.substring(0,i)}...`:`${n}...`}extractKeywords(t,a=10){if(!t)return[];const r=["moving","relocation","movers","packing","storage","transport","residential","commercial","office","home","kenya","nairobi","professional","reliable","affordable","insured","experienced"],n=t.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(o=>o.length>3),i={};return n.forEach(o=>{i[o]=(i[o]||0)+1}),Object.entries(i).map(([o,c])=>({word:o,count:c,priority:r.includes(o)?c*2:c})).sort((o,c)=>c.priority-o.priority).slice(0,a).map(o=>o.word)}generateMovingCompanyStructuredData(t){const a={"@context":"https://schema.org","@type":"MovingCompany",name:"MoveEase Pro",description:"Professional moving services in Kenya",url:window.location.origin,telephone:"+254-700-123-456",email:"info@moveeasepro.com",address:{"@type":"PostalAddress",streetAddress:"123 Moving Street",addressLocality:"Nairobi",addressCountry:"Kenya"},geo:{"@type":"GeoCoordinates",latitude:"-1.2921",longitude:"36.8219"},openingHours:"Mo-Sa 08:00-18:00",priceRange:"$$",serviceArea:{"@type":"Country",name:"Kenya"},hasOfferCatalog:{"@type":"OfferCatalog",name:"Moving Services",itemListElement:[{"@type":"Offer",itemOffered:{"@type":"Service",name:"Residential Moving",description:"Professional home relocation services"}},{"@type":"Offer",itemOffered:{"@type":"Service",name:"Office Relocation",description:"Commercial and office moving services"}},{"@type":"Offer",itemOffered:{"@type":"Service",name:"Storage Services",description:"Secure storage and warehousing solutions"}}]}};return t.title&&(a.name=t.title),t.description&&(a.description=t.description),a}generateBreadcrumbStructuredData(t){return!t||t.length===0?null:{"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:t.map((a,r)=>({"@type":"ListItem",position:r+1,name:a.name,item:a.url}))}}analyzePage(t){const a={score:0,issues:[],suggestions:[],warnings:[]};let r=0;const n=100;t.title?(r+=15,t.title.length<30?a.warnings.push("Title is too short (recommended: 30-60 characters)"):t.title.length>60?a.warnings.push("Title is too long (recommended: 30-60 characters)"):r+=5):a.issues.push("Missing page title"),t.description?(r+=15,t.description.length<120?a.warnings.push("Description is too short (recommended: 120-160 characters)"):t.description.length>160?a.warnings.push("Description is too long (recommended: 120-160 characters)"):r+=5):a.issues.push("Missing meta description"),!t.keywords||t.keywords.length===0?a.suggestions.push("Add relevant keywords for better SEO"):r+=10;const i=this.findImagesWithoutAlt(t.content);i>0?a.issues.push(`${i} images missing alt text`):r+=10;const l=this.analyzeHeadingStructure(t.content);return l.length>0?a.warnings.push(...l):r+=10,this.getWordCount(t.content)<300?a.warnings.push("Content is too short (recommended: 300+ words)"):r+=10,this.countInternalLinks(t.content)===0?a.suggestions.push("Add internal links to improve navigation"):r+=5,r+=10,r+=10,a.score=Math.round(r/n*100),a.score<70&&a.suggestions.push("Focus on fixing critical SEO issues first"),a.score>=80&&a.suggestions.push("Great SEO! Consider advanced optimizations"),a}findImagesWithoutAlt(t){return t?(t.match(/<img[^>]*>/gi)||[]).filter(r=>!r.includes("alt=")).length:0}analyzeHeadingStructure(t){if(!t)return[];const a=[];if((t.match(/<h[1-6][^>]*>.*?<\/h[1-6]>/gi)||[]).length===0)return a.push("No headings found - add H1, H2, etc. for better structure"),a;const n=(t.match(/<h1[^>]*>/gi)||[]).length;return n===0?a.push("Missing H1 tag - add a main heading"):n>1&&a.push("Multiple H1 tags found - use only one H1 per page"),a}getWordCount(t){return t?t.replace(/<[^>]*>/g,"").split(/\s+/).filter(a=>a.length>0).length:0}countInternalLinks(t){return t?(t.match(/<a[^>]*href=["'][^"']*["'][^>]*>/gi)||[]).filter(r=>!r.includes("http://")&&!r.includes("https://")&&!r.includes("mailto:")&&!r.includes("tel:")).length:0}generateSitemap(t){const a=window.location.origin;return t.filter(r=>r.status==="published").map(r=>({url:`${a}/${r.slug}`,lastmod:r.updatedAt,changefreq:"weekly",priority:r.slug==="home"?"1.0":"0.8"}))}generateRobotsTxt(){return`User-agent: *
Allow: /

# Sitemaps
Sitemap: ${window.location.origin}/sitemap.xml

# Block admin areas
Disallow: /admin/
Disallow: /api/
Disallow: /_next/
Disallow: /website-builder/

# Allow important pages
Allow: /
Allow: /services/
Allow: /about/
Allow: /contact/
Allow: /quote/`}}const _t=new Cd,Ed=({onClose:s})=>{const{currentPage:t,updatePage:a}=ft(),[r,n]=T.useState({title:"",description:"",keywords:"",canonical:"",robots:"index, follow",ogTitle:"",ogDescription:"",ogImage:"",ogType:"website",twitterCard:"summary_large_image",twitterTitle:"",twitterDescription:"",twitterImage:""}),[i,l]=T.useState(null),[o,c]=T.useState("basic");T.useEffect(()=>{var g;if(t){const p=((g=t.settings)==null?void 0:g.seo)||{};n({title:p.title||t.title||"",description:p.description||t.description||"",keywords:p.keywords||"",canonical:p.canonical||"",robots:p.robots||"index, follow",ogTitle:p.ogTitle||p.title||t.title||"",ogDescription:p.ogDescription||p.description||t.description||"",ogImage:p.ogImage||"",ogType:p.ogType||"website",twitterCard:p.twitterCard||"summary_large_image",twitterTitle:p.twitterTitle||p.title||t.title||"",twitterDescription:p.twitterDescription||p.description||t.description||"",twitterImage:p.twitterImage||p.ogImage||""})}},[t]),T.useEffect(()=>{if(t){const g=t.blocks.map(x=>JSON.stringify(x.content)).join(" "),p=_t.analyzePage({title:r.title,description:r.description,keywords:r.keywords.split(",").map(x=>x.trim()).filter(x=>x),content:g});l(p)}},[r,t]);const d=(g,p)=>{n(x=>({...x,[g]:p}))},u=g=>{if(!t)return;const p=t.blocks.map(x=>{const m=x.content||{};return[m.title,m.subtitle,m.description].filter(Boolean).join(" ")}).join(" ");switch(g){case"title":const x=_t.generateTitle(t.name);d("title",x);break;case"description":const m=_t.generateDescription(p);d("description",m);break;case"keywords":const j=_t.extractKeywords(p);d("keywords",j.join(", "));break}},b=async()=>{if(!t)return;const g={...t.settings,seo:r};await a(t.id,{settings:g,title:r.title||t.name,description:r.description}),s()},C=g=>g>=80?"text-green-600":g>=60?"text-yellow-600":"text-red-600",w=g=>g>=80?"bg-green-100":g>=60?"bg-yellow-100":"bg-red-100";return t?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full mx-4 max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"SEO Settings"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:['Optimize "',t.name,'" for search engines']})]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:e.jsx(E,{name:"X",size:20})})]}),i&&e.jsx("div",{className:`mt-4 p-4 rounded-lg ${w(i.score)}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"SEO Score"}),e.jsx("p",{className:"text-sm text-gray-600",children:i.score>=80?"Excellent":i.score>=60?"Good":"Needs Improvement"})]}),e.jsx("div",{className:`text-3xl font-bold ${C(i.score)}`,children:i.score})]})})]}),e.jsx("div",{className:"flex border-b border-gray-200",children:[{key:"basic",label:"Basic SEO",icon:"Search"},{key:"social",label:"Social Media",icon:"Share2"},{key:"advanced",label:"Advanced",icon:"Settings"},{key:"analysis",label:"Analysis",icon:"BarChart3"}].map(g=>e.jsxs("button",{onClick:()=>c(g.key),className:`flex items-center space-x-2 px-6 py-3 text-sm font-medium transition-colors ${o===g.key?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(E,{name:g.icon,size:16}),e.jsx("span",{children:g.label})]},g.key))}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[o==="basic"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Page Title"}),e.jsxs(P,{variant:"ghost",size:"sm",onClick:()=>u("title"),children:[e.jsx(E,{name:"Wand2",size:14,className:"mr-1"}),"Auto-generate"]})]}),e.jsx(D,{value:r.title,onChange:g=>d("title",g),placeholder:"Enter page title (50-60 characters)",maxLength:60}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[r.title.length,"/60 characters"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Meta Description"}),e.jsxs(P,{variant:"ghost",size:"sm",onClick:()=>u("description"),children:[e.jsx(E,{name:"Wand2",size:14,className:"mr-1"}),"Auto-generate"]})]}),e.jsx(ve,{value:r.description,onChange:g=>d("description",g),placeholder:"Enter meta description (120-160 characters)",rows:3,maxLength:160}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[r.description.length,"/160 characters"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Keywords"}),e.jsxs(P,{variant:"ghost",size:"sm",onClick:()=>u("keywords"),children:[e.jsx(E,{name:"Wand2",size:14,className:"mr-1"}),"Extract from content"]})]}),e.jsx(D,{value:r.keywords,onChange:g=>d("keywords",g),placeholder:"Enter keywords separated by commas"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Separate keywords with commas (e.g., moving services, relocation, Kenya)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Canonical URL"}),e.jsx(D,{value:r.canonical,onChange:g=>d("canonical",g),placeholder:"https://example.com/page-url (optional)"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to use the default page URL"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Robots Meta Tag"}),e.jsx(B,{options:[{value:"index, follow",label:"Index, Follow (Default)"},{value:"noindex, follow",label:"No Index, Follow"},{value:"index, nofollow",label:"Index, No Follow"},{value:"noindex, nofollow",label:"No Index, No Follow"}],value:r.robots,onChange:g=>d("robots",g)})]})]}),o==="social"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Open Graph (Facebook)"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(D,{label:"OG Title",value:r.ogTitle,onChange:g=>d("ogTitle",g),placeholder:"Title for social media sharing"}),e.jsx(ve,{label:"OG Description",value:r.ogDescription,onChange:g=>d("ogDescription",g),placeholder:"Description for social media sharing",rows:3}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"OG Image"}),e.jsx(ds,{onImageSelect:g=>d("ogImage",g.url),category:"social",showPreview:!1}),r.ogImage&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:r.ogImage,alt:"OG Image preview",className:"w-full max-w-md h-32 object-cover rounded border"})})]}),e.jsx(B,{label:"OG Type",options:[{value:"website",label:"Website"},{value:"article",label:"Article"},{value:"business.business",label:"Business"}],value:r.ogType,onChange:g=>d("ogType",g)})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Twitter Cards"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(B,{label:"Twitter Card Type",options:[{value:"summary_large_image",label:"Large Image Summary"},{value:"summary",label:"Summary"}],value:r.twitterCard,onChange:g=>d("twitterCard",g)}),e.jsx(D,{label:"Twitter Title",value:r.twitterTitle,onChange:g=>d("twitterTitle",g),placeholder:"Title for Twitter sharing"}),e.jsx(ve,{label:"Twitter Description",value:r.twitterDescription,onChange:g=>d("twitterDescription",g),placeholder:"Description for Twitter sharing",rows:3}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Twitter Image"}),e.jsx(ds,{onImageSelect:g=>d("twitterImage",g.url),category:"social",showPreview:!1}),r.twitterImage&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:r.twitterImage,alt:"Twitter Image preview",className:"w-full max-w-md h-32 object-cover rounded border"})})]})]})]})]}),o==="advanced"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(E,{name:"AlertTriangle",size:20,className:"text-yellow-600 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Advanced Settings"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"These settings require technical knowledge. Incorrect values may affect SEO performance."})]})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Structured Data"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsx("pre",{className:"text-xs text-gray-600 overflow-x-auto",children:JSON.stringify(_t.generateMovingCompanyStructuredData({title:r.title,description:r.description}),null,2)})})]})]}),o==="analysis"&&i&&e.jsxs("div",{className:"space-y-6",children:[i.issues.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-red-900 mb-3",children:"Critical Issues"}),e.jsx("div",{className:"space-y-2",children:i.issues.map((g,p)=>e.jsxs("div",{className:"flex items-start p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx(E,{name:"AlertCircle",size:16,className:"text-red-600 mr-2 mt-0.5"}),e.jsx("span",{className:"text-sm text-red-800",children:g})]},p))})]}),i.warnings.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-yellow-900 mb-3",children:"Warnings"}),e.jsx("div",{className:"space-y-2",children:i.warnings.map((g,p)=>e.jsxs("div",{className:"flex items-start p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx(E,{name:"AlertTriangle",size:16,className:"text-yellow-600 mr-2 mt-0.5"}),e.jsx("span",{className:"text-sm text-yellow-800",children:g})]},p))})]}),i.suggestions.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-3",children:"Suggestions"}),e.jsx("div",{className:"space-y-2",children:i.suggestions.map((g,p)=>e.jsxs("div",{className:"flex items-start p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx(E,{name:"Lightbulb",size:16,className:"text-blue-600 mr-2 mt-0.5"}),e.jsx("span",{className:"text-sm text-blue-800",children:g})]},p))})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:['Changes will be applied to "',t.name,'"']}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(P,{variant:"outline",onClick:s,children:"Cancel"}),e.jsx(P,{onClick:b,children:"Save SEO Settings"})]})]})]})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(E,{name:"AlertCircle",size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-600",children:"No page selected"})]})},Td=({leftPanelTab:s,setLeftPanelTab:t,rightPanelTab:a,setRightPanelTab:r,showLeftPanel:n,setShowLeftPanel:i,showRightPanel:l,setShowRightPanel:o})=>{var H;const{currentPage:c,editorMode:d,setEditorMode:u,canUndo:b,canRedo:C,undo:w,redo:g,saveWebsite:p,publishPage:x,unpublishPage:m,hasUnsavedChanges:j,lastSaved:S,loading:y}=ft(),[A,N]=T.useState(!1),[f,v]=T.useState(!1),h=async()=>{await p()},I=async()=>{c&&(c.status==="published"?await m(c.id):await x(c.id))},R=()=>{if(c){const k=`/preview/${c.slug}`;window.open(k,"_blank")}},L=()=>{if(!S)return"Never saved";const U=new Date-S,O=Math.floor(U/6e4);return O<1?"Saved just now":O===1?"Saved 1 minute ago":`Saved ${O} minutes ago`};return e.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>i(!n),className:n?"bg-gray-100":"",children:e.jsx(E,{name:"PanelLeft",size:16})}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>o(!l),className:l?"bg-gray-100":"",children:e.jsx(E,{name:"PanelRight",size:16})})]}),e.jsx("div",{className:"w-px h-6 bg-gray-300"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(P,{variant:"ghost",size:"sm",onClick:w,disabled:!b,title:"Undo",children:e.jsx(E,{name:"Undo",size:16})}),e.jsx(P,{variant:"ghost",size:"sm",onClick:g,disabled:!C,title:"Redo",children:e.jsx(E,{name:"Redo",size:16})})]}),e.jsx("div",{className:"w-px h-6 bg-gray-300"}),e.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>u("edit"),className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${d==="edit"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(E,{name:"Edit",size:14,className:"mr-1"}),"Edit"]}),e.jsxs("button",{onClick:()=>u("preview"),className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${d==="preview"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(E,{name:"Eye",size:14,className:"mr-1"}),"Preview"]})]})]}),e.jsx("div",{className:"flex items-center space-x-4",children:c&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:c.name}),e.jsx("div",{className:"text-xs text-gray-500",children:j?e.jsx("span",{className:"text-orange-600",children:"Unsaved changes"}):L()})]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[j&&e.jsxs("div",{className:"flex items-center text-orange-600 text-sm",children:[e.jsx(E,{name:"AlertCircle",size:16,className:"mr-1"}),"Unsaved"]}),e.jsxs(P,{variant:"ghost",size:"sm",onClick:()=>N(!0),children:[e.jsx(E,{name:"Image",size:16,className:"mr-1"}),"Images"]}),e.jsxs(P,{variant:"ghost",size:"sm",onClick:()=>v(!0),disabled:!c,children:[e.jsx(E,{name:"Search",size:16,className:"mr-1"}),"SEO"]}),e.jsxs(P,{variant:"ghost",size:"sm",onClick:R,disabled:!c,children:[e.jsx(E,{name:"ExternalLink",size:16,className:"mr-1"}),"Preview"]}),e.jsxs(P,{variant:"outline",size:"sm",onClick:h,loading:y,disabled:!j,children:[e.jsx(E,{name:"Save",size:16,className:"mr-1"}),"Save"]}),e.jsx(P,{variant:(c==null?void 0:c.status)==="published"?"outline":"default",size:"sm",onClick:I,loading:y,disabled:!c,children:(c==null?void 0:c.status)==="published"?e.jsxs(e.Fragment,{children:[e.jsx(E,{name:"EyeOff",size:16,className:"mr-1"}),"Unpublish"]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{name:"Globe",size:16,className:"mr-1"}),"Publish"]})}),e.jsx("div",{className:"relative",children:e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>{},children:e.jsx(E,{name:"MoreVertical",size:16})})})]})]}),d==="edit"&&e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{name:"Layers",size:14,className:"mr-1"}),((H=c==null?void 0:c.blocks)==null?void 0:H.length)||0," blocks"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{name:"FileText",size:14,className:"mr-1"}),(c==null?void 0:c.status)||"draft"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[e.jsx("span",{children:"Keyboard shortcuts:"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded",children:"Ctrl+Z"}),e.jsx("span",{children:"Undo"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-100 rounded",children:"Ctrl+S"}),e.jsx("span",{children:"Save"})]})]}),A&&e.jsx(Sd,{onClose:()=>N(!1)}),f&&e.jsx(Ed,{onClose:()=>v(!1)})]})},Ss=[{id:"header_simple",type:$.HEADER_SIMPLE,category:W.HEADERS,name:"Moving Company Header",description:"Professional header with company logo and moving services navigation",icon:"Navigation",preview:"/images/blocks/header-simple.jpg",tags:["navigation","moving company","professional"]},{id:"header_with_cta",type:$.HEADER_WITH_CTA,category:W.HEADERS,name:"Header with Quote Button",description:'Header with prominent "Get Free Quote" call-to-action',icon:"Phone",preview:"/images/blocks/header-cta.jpg",tags:["quote","cta","moving services"]},{id:"header_transparent",type:$.HEADER_TRANSPARENT,category:W.HEADERS,name:"Overlay Moving Header",description:"Transparent header perfect for moving hero sections",icon:"Eye",preview:"/images/blocks/header-transparent.jpg",tags:["overlay","hero","moving"]},{id:"header_centered",type:$.HEADER_CENTERED,category:W.HEADERS,name:"Centered Company Header",description:"Centered moving company logo with service navigation",icon:"AlignCenter",preview:"/images/blocks/header-centered.jpg",tags:["centered","company logo","services"]},{id:"hero_banner",type:$.HERO_BANNER,category:W.HEROES,name:"Moving Services Hero",description:"Powerful hero showcasing your moving services with stunning visuals",icon:"Truck",preview:"/images/blocks/hero-banner.jpg",tags:["moving services","professional","hero","cta"]},{id:"hero_video",type:$.HERO_VIDEO,category:W.HEROES,name:"Moving Team Video Hero",description:"Showcase your moving team in action with background video",icon:"Play",preview:"/images/blocks/hero-video.jpg",tags:["team video","moving process","professional"]},{id:"hero_split",type:$.HERO_SPLIT,category:W.HEROES,name:"Moving Company Split Hero",description:"Split layout featuring your moving services and team photo",icon:"Columns2",preview:"/images/blocks/hero-split.jpg",tags:["company profile","services","team photo"]},{id:"hero_minimal",type:$.HERO_MINIMAL,category:W.HEROES,name:"Clean Moving Hero",description:"Minimalist hero focusing on your moving company message",icon:"Minimize2",preview:"/images/blocks/hero-minimal.jpg",tags:["minimal","professional","clean design"]},{id:"hero_carousel",type:$.HERO_CAROUSEL,category:W.HEROES,name:"Moving Projects Carousel",description:"Rotating showcase of your successful moving projects",icon:"ChevronRight",preview:"/images/blocks/hero-carousel.jpg",tags:["projects","portfolio","carousel","success stories"]},{id:"features_grid",type:$.FEATURES_GRID,category:W.FEATURES,name:"Moving Services Features",description:"Highlight your key moving services with professional icons",icon:"Grid3x3",preview:"/images/blocks/features-grid.jpg",tags:["moving services","professional","benefits","why choose us"]},{id:"features_list",type:$.FEATURES_LIST,category:W.FEATURES,name:"Service Benefits List",description:"Detailed list of your moving service advantages",icon:"CheckCircle",preview:"/images/blocks/features-list.jpg",tags:["benefits","advantages","service quality","guarantees"]},{id:"features_tabs",type:$.FEATURES_TABS,category:W.FEATURES,name:"Moving Service Types",description:"Tabbed showcase of different moving services offered",icon:"Folder",preview:"/images/blocks/features-tabs.jpg",tags:["service types","residential","commercial","storage"]},{id:"features_accordion",type:$.FEATURES_ACCORDION,category:W.FEATURES,name:"Moving Process Steps",description:"Step-by-step breakdown of your moving process",icon:"ChevronDown",preview:"/images/blocks/features-accordion.jpg",tags:["process","steps","how it works","methodology"]},{id:"about_simple",type:$.ABOUT_SIMPLE,category:W.ABOUT,name:"Our Moving Company Story",description:"Tell your moving company's story and mission",icon:"Building2",preview:"/images/blocks/about-simple.jpg",tags:["company story","mission","values","history"]},{id:"about_with_image",type:$.ABOUT_WITH_IMAGE,category:W.ABOUT,name:"About Us with Team Photo",description:"Company story alongside professional team photo",icon:"Users",preview:"/images/blocks/about-image.jpg",tags:["team photo","company profile","professional","trust"]},{id:"about_timeline",type:$.ABOUT_TIMELINE,category:W.ABOUT,name:"Company Milestones",description:"Showcase your moving company's growth and achievements",icon:"TrendingUp",preview:"/images/blocks/about-timeline.jpg",tags:["milestones","growth","achievements","company history"]},{id:"about_stats",type:$.ABOUT_STATS,category:W.ABOUT,name:"Moving Success Statistics",description:"Display impressive moving statistics and achievements",icon:"BarChart3",preview:"/images/blocks/about-stats.jpg",tags:["statistics","success rate","happy customers","moves completed"]},{id:"services_grid",type:$.SERVICES_GRID,category:W.SERVICES,name:"Moving Services Grid",description:"Showcase all your moving services in an organized grid",icon:"LayoutGrid",preview:"/images/blocks/services-grid.jpg",tags:["residential moving","office relocation","storage","packing"]},{id:"services_carousel",type:$.SERVICES_CAROUSEL,category:W.SERVICES,name:"Service Showcase Slider",description:"Interactive carousel highlighting your key moving services",icon:"ArrowRight",preview:"/images/blocks/services-carousel.jpg",tags:["service showcase","interactive","moving types","specialties"]},{id:"services_list",type:$.SERVICES_LIST,category:W.SERVICES,name:"Detailed Service List",description:"Comprehensive list of all moving services with descriptions",icon:"ClipboardList",preview:"/images/blocks/services-list.jpg",tags:["comprehensive","detailed","service descriptions","what we do"]},{id:"services_pricing",type:$.SERVICES_PRICING,category:W.SERVICES,name:"Moving Service Packages",description:"Display moving packages with transparent pricing",icon:"CreditCard",preview:"/images/blocks/services-pricing.jpg",tags:["pricing packages","transparent costs","service tiers","estimates"]},{id:"testimonials_grid",type:$.TESTIMONIALS_GRID,category:W.TESTIMONIALS,name:"Customer Success Stories",description:"Grid of happy customer testimonials and reviews",icon:"MessageCircle",preview:"/images/blocks/testimonials-grid.jpg",tags:["customer reviews","success stories","happy clients","trust"]},{id:"testimonials_carousel",type:$.TESTIMONIALS_CAROUSEL,category:W.TESTIMONIALS,name:"Moving Reviews Slider",description:"Rotating showcase of customer moving experiences",icon:"ChevronRight",preview:"/images/blocks/testimonials-carousel.jpg",tags:["customer experiences","moving reviews","satisfaction","feedback"]},{id:"testimonials_single",type:$.TESTIMONIALS_SINGLE,category:W.TESTIMONIALS,name:"Featured Customer Review",description:"Highlight your best customer testimonial",icon:"Quote",preview:"/images/blocks/testimonials-single.jpg",tags:["featured review","best testimonial","customer highlight","trust builder"]},{id:"gallery_grid",type:$.GALLERY_GRID,category:W.GALLERIES,name:"Photo Grid",description:"Grid layout photo gallery",icon:"Grid",preview:"/images/blocks/gallery-grid.jpg",tags:["gallery","photos","grid","images"]},{id:"gallery_masonry",type:$.GALLERY_MASONRY,category:W.GALLERIES,name:"Masonry Gallery",description:"Pinterest-style masonry layout",icon:"Layout",preview:"/images/blocks/gallery-masonry.jpg",tags:["gallery","masonry","pinterest","varied"]},{id:"gallery_carousel",type:$.GALLERY_CAROUSEL,category:W.GALLERIES,name:"Gallery Carousel",description:"Sliding image carousel",icon:"RotateCcw",preview:"/images/blocks/gallery-carousel.jpg",tags:["gallery","carousel","slider","images"]},{id:"gallery_lightbox",type:$.GALLERY_LIGHTBOX,category:W.GALLERIES,name:"Lightbox Gallery",description:"Gallery with popup lightbox",icon:"Maximize",preview:"/images/blocks/gallery-lightbox.jpg",tags:["gallery","lightbox","popup","fullscreen"]},{id:"contact_form",type:$.CONTACT_FORM,category:W.FORMS,name:"Moving Quote Form",description:"Comprehensive form for moving quote requests",icon:"FileText",preview:"/images/blocks/contact-form.jpg",tags:["quote request","moving estimate","contact","inquiry"]},{id:"quote_form",type:$.QUOTE_FORM,category:W.FORMS,name:"Instant Moving Quote",description:"Quick quote calculator for moving services",icon:"Calculator",preview:"/images/blocks/quote-form.jpg",tags:["instant quote","price calculator","moving cost","estimate"]},{id:"newsletter_form",type:$.NEWSLETTER_FORM,category:W.FORMS,name:"Moving Tips Newsletter",description:"Subscribe for moving tips and company updates",icon:"Mail",preview:"/images/blocks/newsletter-form.jpg",tags:["moving tips","newsletter","updates","subscription"]},{id:"booking_form",type:$.BOOKING_FORM,category:W.FORMS,name:"Schedule Your Move",description:"Book your moving date and time slot",icon:"Calendar",preview:"/images/blocks/booking-form.jpg",tags:["schedule move","book appointment","moving date","time slot"]},{id:"text_block",type:$.TEXT_BLOCK,category:W.CONTENT,name:"Text Block",description:"Rich text content block",icon:"Type",preview:"/images/blocks/text-block.jpg",tags:["text","content","paragraph","rich"]},{id:"image_block",type:$.IMAGE_BLOCK,category:W.CONTENT,name:"Image Block",description:"Single image with caption",icon:"Image",preview:"/images/blocks/image-block.jpg",tags:["image","photo","caption","visual"]},{id:"video_block",type:$.VIDEO_BLOCK,category:W.CONTENT,name:"Video Block",description:"Embedded video player",icon:"Video",preview:"/images/blocks/video-block.jpg",tags:["video","embed","youtube","player"]},{id:"divider",type:$.DIVIDER,category:W.CONTENT,name:"Divider",description:"Section divider line",icon:"Minus",preview:"/images/blocks/divider.jpg",tags:["divider","separator","line","break"]},{id:"spacer",type:$.SPACER,category:W.CONTENT,name:"Spacer",description:"Adjustable spacing block",icon:"Move",preview:"/images/blocks/spacer.jpg",tags:["spacer","spacing","gap","margin"]},{id:"cta_banner",type:$.CTA_BANNER,category:W.CTA,name:"CTA Banner",description:"Full-width call-to-action banner",icon:"Megaphone",preview:"/images/blocks/cta-banner.jpg",tags:["cta","banner","action","conversion"]},{id:"cta_button",type:$.CTA_BUTTON,category:W.CTA,name:"CTA Button",description:"Standalone call-to-action button",icon:"MousePointer",preview:"/images/blocks/cta-button.jpg",tags:["cta","button","action","click"]},{id:"cta_popup",type:$.CTA_POPUP,category:W.CTA,name:"CTA Popup",description:"Popup call-to-action modal",icon:"Square",preview:"/images/blocks/cta-popup.jpg",tags:["cta","popup","modal","overlay"]},{id:"footer_simple",type:$.FOOTER_SIMPLE,category:W.FOOTERS,name:"Simple Footer",description:"Basic footer with links",icon:"Layout",preview:"/images/blocks/footer-simple.jpg",tags:["footer","links","copyright","simple"]},{id:"footer_detailed",type:$.FOOTER_DETAILED,category:W.FOOTERS,name:"Detailed Footer",description:"Multi-column footer with contact info",icon:"Layout",preview:"/images/blocks/footer-detailed.jpg",tags:["footer","detailed","columns","contact"]},{id:"footer_minimal",type:$.FOOTER_MINIMAL,category:W.FOOTERS,name:"Minimal Footer",description:"Clean, minimal footer design",icon:"Layout",preview:"/images/blocks/footer-minimal.jpg",tags:["footer","minimal","clean","simple"]}],Pd=Ss.reduce((s,t)=>(s[t.category]||(s[t.category]=[]),s[t.category].push(t),s),{}),Ad=s=>Ss.find(t=>t.type===s),Id=s=>{const t=s.toLowerCase();return Ss.filter(a=>a.name.toLowerCase().includes(t)||a.description.toLowerCase().includes(t)||a.tags.some(r=>r.toLowerCase().includes(t)))},kd=()=>["hero_banner","features_grid","about_with_image","services_grid","testimonials_carousel","contact_form","cta_banner","footer_detailed"].map(s=>Ss.find(t=>t.id===s)).filter(Boolean),Gr=()=>{const{currentPage:s,addBlock:t,moveBlock:a,setIsDragging:r,setDraggedBlock:n,isDragging:i,draggedBlock:l}=ft(),[o,c]=T.useState(null),[d,u]=T.useState(!1),b=T.useRef(0),C=T.useCallback((N,f,v)=>{const h={type:"NEW_BLOCK",blockType:f,category:v};N.dataTransfer.setData("text/plain",JSON.stringify(h)),N.dataTransfer.effectAllowed="copy",r(!0),n({type:f,category:v})},[r,n]),w=T.useCallback((N,f,v)=>{const h={type:"EXISTING_BLOCK",blockId:f.id,sourceIndex:v};N.dataTransfer.setData("text/plain",JSON.stringify(h)),N.dataTransfer.effectAllowed="move",r(!0),n({...f,sourceIndex:v})},[r,n]),g=T.useCallback(N=>{N.preventDefault(),N.dataTransfer.dropEffect="copy"},[]),p=T.useCallback((N,f)=>{N.preventDefault(),b.current++,c(f),u(!0)},[]),x=T.useCallback(N=>{N.preventDefault(),b.current--,b.current===0&&(c(null),u(!1))},[]),m=T.useCallback(async(N,f)=>{N.preventDefault(),b.current=0;try{const v=N.dataTransfer.getData("text/plain"),h=JSON.parse(v);h.type==="NEW_BLOCK"?await t(h.blockType,h.category,f):h.type==="EXISTING_BLOCK"&&h.sourceIndex!==f&&await a(h.blockId,f)}catch(v){console.error("Error handling drop:",v)}finally{r(!1),n(null),c(null),u(!1)}},[t,a,r,n]),j=T.useCallback(()=>{r(!1),n(null),c(null),u(!1),b.current=0},[r,n]),S=T.useCallback(N=>({onDragOver:g,onDragEnter:f=>p(f,N),onDragLeave:x,onDrop:f=>m(f,N),className:`drop-zone ${o===N?"drag-over":""} ${d?"active":""}`}),[g,p,x,m,o,d]),y=T.useCallback((N,f)=>({draggable:!0,onDragStart:v=>w(v,N,f),onDragEnd:j,className:`draggable-block ${i&&(l==null?void 0:l.id)===N.id?"dragging":""}`}),[w,j,i,l]),A=T.useCallback((N,f)=>({draggable:!0,onDragStart:v=>C(v,N,f),onDragEnd:j,className:`palette-item ${i&&(l==null?void 0:l.type)===N?"dragging":""}`}),[C,j,i,l]);return{isDragging:i,draggedBlock:l,dragOverIndex:o,dropZoneActive:d,handleDragStart:C,handleBlockDragStart:w,handleDragOver:g,handleDragEnter:p,handleDragLeave:x,handleDrop:m,handleDragEnd:j,getDropZoneProps:S,getDraggableBlockProps:y,getPaletteItemProps:A}},Dd=()=>{const[s,t]=T.useState(""),[a,r]=T.useState("popular"),{getPaletteItemProps:n}=Gr(),i=[{key:"popular",label:"Popular",icon:"Star"},{key:W.HEADERS,label:"Headers",icon:"Layout"},{key:W.HEROES,label:"Heroes",icon:"Image"},{key:W.FEATURES,label:"Features",icon:"Grid"},{key:W.ABOUT,label:"About",icon:"FileText"},{key:W.SERVICES,label:"Services",icon:"Briefcase"},{key:W.TESTIMONIALS,label:"Testimonials",icon:"MessageSquare"},{key:W.GALLERIES,label:"Galleries",icon:"Image"},{key:W.FORMS,label:"Forms",icon:"Mail"},{key:W.CONTENT,label:"Content",icon:"Type"},{key:W.CTA,label:"Call to Action",icon:"Megaphone"},{key:W.FOOTERS,label:"Footers",icon:"Layout"}],l=T.useMemo(()=>s?Id(s):a==="popular"?kd():Pd[a]||[],[s,a]),o=c=>{"ontouchstart"in window&&console.log("Add block:",c.type)};return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx(D,{placeholder:"Search blocks...",value:s,onChange:t,icon:"Search"})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("div",{className:"flex overflow-x-auto scrollbar-hide",children:i.map(c=>e.jsxs("button",{onClick:()=>{r(c.key),t("")},className:`flex items-center space-x-2 px-4 py-3 text-sm font-medium whitespace-nowrap transition-colors ${a===c.key?"text-primary border-b-2 border-primary bg-blue-50":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(E,{name:c.icon,size:16}),e.jsx("span",{children:c.label})]},c.key))})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:l.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(E,{name:"Search",size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No blocks found"}),e.jsx("p",{className:"text-gray-600",children:s?"Try a different search term":"No blocks in this category"})]}):e.jsx("div",{className:"grid grid-cols-1 gap-4",children:l.map(c=>e.jsxs("div",{...n(c.type,c.category),onClick:()=>o(c),className:"group bg-white border border-gray-200 rounded-lg p-4 hover:border-primary hover:shadow-md transition-all cursor-grab active:cursor-grabbing",children:[e.jsxs("div",{className:"aspect-video bg-gray-100 rounded-md mb-3 flex items-center justify-center overflow-hidden",children:[c.preview?e.jsx("img",{src:c.preview,alt:c.name,className:"w-full h-full object-cover",onError:d=>{d.target.style.display="none",d.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:"flex items-center justify-center w-full h-full bg-gray-100",children:e.jsx(E,{name:c.icon,size:32,className:"text-gray-400"})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-1 group-hover:text-primary transition-colors",children:c.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:c.description}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[c.tags.slice(0,3).map(d=>e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-gray-100 text-gray-600 rounded-full",children:d},d)),c.tags.length>3&&e.jsxs("span",{className:"inline-flex px-2 py-1 text-xs font-medium bg-gray-100 text-gray-600 rounded-full",children:["+",c.tags.length-3]})]})]}),e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"bg-white rounded-full p-1 shadow-sm border border-gray-200",children:e.jsx(E,{name:"Move",size:16,className:"text-gray-400"})})})]},c.id))})}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(E,{name:"Info",size:16,className:"text-blue-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{className:"font-medium mb-1",children:"How to use blocks:"}),e.jsxs("ul",{className:"space-y-1 text-xs",children:[e.jsx("li",{children:" Drag blocks to the canvas to add them"}),e.jsx("li",{children:" Click on blocks in the canvas to edit"}),e.jsx("li",{children:" Use the property panel to customize"})]})]})]})})]})},Rd=({block:s,content:t,isSelected:a,isEditing:r,deviceMode:n,onUpdate:i})=>{const{title:l="Kenya's Most Trusted Moving Company",subtitle:o="Professional  Reliable  Affordable",description:c="Experience seamless relocations with our expert moving team. We handle residential, office, and commercial moves across Kenya with unmatched care and precision.",backgroundImage:d="",backgroundVideo:u="",buttons:b=[{text:"Get Free Moving Quote",link:"/quote",style:"primary"},{text:"View Moving Services",link:"/services",style:"secondary"}],overlay:C={enabled:!0,color:"#000000",opacity:.4}}=t,w=(p,x)=>{i&&i(s.id,{content:{...t,[p]:x}})},g=(p,x,m)=>{const j=[...b];j[p]={...j[p],[x]:m},w("buttons",j)};return e.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[u?e.jsx("video",{className:"absolute inset-0 w-full h-full object-cover",autoPlay:!0,muted:!0,loop:!0,playsInline:!0,children:e.jsx("source",{src:u,type:"video/mp4"})}):d?e.jsx("div",{className:"absolute inset-0 w-full h-full bg-cover bg-center bg-no-repeat",style:{backgroundImage:`url(${d})`}}):e.jsx("div",{className:"absolute inset-0 w-full h-full bg-gradient-to-br from-blue-600 to-blue-800"}),C.enabled&&e.jsx("div",{className:"absolute inset-0",style:{backgroundColor:C.color,opacity:C.opacity}}),e.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[o&&e.jsx("p",{className:`text-lg sm:text-xl text-blue-200 mb-4 ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:p=>w("subtitle",p.target.textContent),children:o}),e.jsx("h1",{className:`text-4xl sm:text-5xl lg:text-6xl font-bold text-white mb-6 leading-tight ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:p=>w("title",p.target.textContent),children:l}),c&&e.jsx("p",{className:`text-xl text-gray-200 mb-8 max-w-2xl mx-auto ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:p=>w("description",p.target.textContent),children:c}),b&&b.length>0&&e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:b.map((p,x)=>e.jsx(P,{variant:p.style==="primary"?"default":"outline",size:"lg",className:`${p.style==="primary"?"bg-white text-blue-600 hover:bg-gray-100":"border-white text-white hover:bg-white hover:text-blue-600"} ${r?"cursor-text":""}`,onClick:r?void 0:()=>window.location.href=p.link,children:e.jsx("span",{contentEditable:r,suppressContentEditableWarning:!0,onBlur:m=>g(x,"text",m.target.textContent),children:p.text})},x))})]})}),e.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 text-white animate-bounce",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})}),a&&r&&!d&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-30 z-10",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 text-center",children:[e.jsx(Icon,{name:"Image",size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Add Background Image"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Upload a background image to make this hero section stand out"}),e.jsxs(P,{onClick:()=>{var p;(p=document.querySelector("[data-property-panel]"))==null||p.scrollIntoView()},children:[e.jsx(Icon,{name:"Upload",size:16,className:"mr-2"}),"Upload Background"]})]})}),a&&r&&e.jsxs("div",{className:"absolute top-4 right-4 bg-white rounded-lg shadow-lg p-3 z-20",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 mb-2",children:"Hero Banner Settings"}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-600",children:[e.jsx("div",{children:" Click text to edit content"}),e.jsx("div",{children:" Use property panel for styling"}),e.jsx("div",{children:" Upload background in properties"}),e.jsx("div",{children:" Adjust overlay opacity for readability"})]})]})]})},Od=({block:s,content:t,isSelected:a,isEditing:r,deviceMode:n,onUpdate:i})=>{const{title:l="Professional Moving Services in Kenya",subtitle:o="Your Trusted Moving Partner",description:c="Experience stress-free relocations with our professional moving team. We handle residential, office, and commercial moves across Kenya with care and precision.",videoUrl:d="",posterImage:u="",buttons:b=[{text:"Get Free Quote",link:"/quote",style:"primary"},{text:"View Our Services",link:"/services",style:"secondary"}],overlay:C={enabled:!0,color:"#000000",opacity:.5}}=t,w=(g,p)=>{i&&i(s.id,{content:{...t,[g]:p}})};return e.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[d?e.jsxs("video",{className:"absolute inset-0 w-full h-full object-cover",autoPlay:!0,muted:!0,loop:!0,playsInline:!0,poster:u,children:[e.jsx("source",{src:d,type:"video/mp4"}),"Your browser does not support the video tag."]}):e.jsx("div",{className:"absolute inset-0 w-full h-full bg-cover bg-center bg-no-repeat",style:{backgroundImage:u?`url(${u})`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}}),C.enabled&&e.jsx("div",{className:"absolute inset-0",style:{backgroundColor:C.color,opacity:C.opacity}}),e.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[o&&e.jsx("p",{className:`text-lg sm:text-xl text-blue-200 mb-4 ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:g=>w("subtitle",g.target.textContent),children:o}),e.jsx("h1",{className:`text-4xl sm:text-5xl lg:text-6xl font-bold text-white mb-6 leading-tight ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:g=>w("title",g.target.textContent),children:l}),c&&e.jsx("p",{className:`text-xl text-gray-200 mb-8 max-w-2xl mx-auto ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:g=>w("description",g.target.textContent),children:c}),b&&b.length>0&&e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:b.map((g,p)=>e.jsx(P,{variant:g.style==="primary"?"default":"outline",size:"lg",className:`${g.style==="primary"?"bg-white text-blue-600 hover:bg-gray-100":"border-white text-white hover:bg-white hover:text-blue-600"} ${r?"cursor-text":""}`,children:e.jsx("span",{contentEditable:r,suppressContentEditableWarning:!0,onBlur:x=>{const m=[...b];m[p]={...g,text:x.target.textContent},w("buttons",m)},children:g.text})},p))})]})}),d&&e.jsx("button",{className:"absolute bottom-8 right-8 bg-white bg-opacity-20 hover:bg-opacity-30 text-white p-3 rounded-full transition-all",onClick:()=>{const g=document.querySelector("video");g.paused?g.play():g.pause()},children:e.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 5v14l11-7z"})})}),a&&r&&e.jsxs("div",{className:"absolute top-4 right-4 bg-white rounded-lg shadow-lg p-3 z-20",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 mb-2",children:"Video Hero Settings"}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-600",children:[e.jsx("div",{children:" Click text to edit content"}),e.jsx("div",{children:" Add video URL in properties"}),e.jsx("div",{children:" Set poster image for loading"})]})]})]})},_d=({block:s,content:t,isSelected:a,isEditing:r,deviceMode:n,onUpdate:i})=>{const{title:l="Kenya's Most Trusted Moving Company",subtitle:o="Professional Moving Services",description:c="From residential relocations to office moves, we provide comprehensive moving solutions across Kenya. Our experienced team ensures your belongings are handled with utmost care.",image:d="",buttons:u=[{text:"Get Free Estimate",link:"/quote",style:"primary"},{text:"Call Now: +254 700 123 456",link:"tel:+254700123456",style:"secondary"}],features:b=[{icon:"Shield",text:"Fully Insured Moves"},{icon:"Clock",text:"24/7 Customer Support"},{icon:"Award",text:"10+ Years Experience"}],layout:C="image-right"}=t,w=(x,m)=>{i&&i(s.id,{content:{...t,[x]:m}})},g=e.jsxs("div",{className:"flex flex-col justify-center",children:[o&&e.jsx("p",{className:`text-lg text-blue-600 mb-4 font-medium ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:x=>w("subtitle",x.target.textContent),children:o}),e.jsx("h1",{className:`text-4xl sm:text-5xl font-bold text-gray-900 mb-6 leading-tight ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:x=>w("title",x.target.textContent),children:l}),c&&e.jsx("p",{className:`text-lg text-gray-600 mb-8 leading-relaxed ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:x=>w("description",x.target.textContent),children:c}),b&&b.length>0&&e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:b.map((x,m)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(E,{name:x.icon,size:16})}),e.jsx("span",{className:`text-sm font-medium text-gray-700 ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:j=>{const S=[...b];S[m]={...x,text:j.target.textContent},w("features",S)},children:x.text})]},m))})}),u&&u.length>0&&e.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:u.map((x,m)=>e.jsx(P,{variant:x.style==="primary"?"default":"outline",size:"lg",className:r?"cursor-text":"",children:e.jsx("span",{contentEditable:r,suppressContentEditableWarning:!0,onBlur:j=>{const S=[...u];S[m]={...x,text:j.target.textContent},w("buttons",S)},children:x.text})},m))})]}),p=e.jsxs("div",{className:"relative",children:[d?e.jsx("img",{src:d,alt:"Moving Services",className:"w-full h-full object-cover rounded-lg shadow-lg"}):e.jsx("div",{className:"w-full h-96 bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg shadow-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(E,{name:"Truck",size:64,className:"text-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-blue-600 font-medium",children:"Professional Moving Services"}),e.jsx("p",{className:"text-blue-500 text-sm mt-2",children:"Upload your image here"})]})}),e.jsx("div",{className:"absolute -bottom-6 -left-6 bg-white rounded-lg shadow-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"500+"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Happy Clients"})]}),e.jsx("div",{className:"w-px h-8 bg-gray-300"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"99%"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Success Rate"})]})]})})]});return e.jsxs("section",{className:"py-16 lg:py-24 bg-white",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-16 items-center",children:C==="image-right"?e.jsxs(e.Fragment,{children:[e.jsx("div",{children:g}),e.jsx("div",{children:p})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{children:p}),e.jsx("div",{children:g})]})})}),a&&r&&e.jsxs("div",{className:"absolute top-4 right-4 bg-white rounded-lg shadow-lg p-3 z-20",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 mb-2",children:"Split Hero Settings"}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-600",children:[e.jsx("div",{children:" Click text to edit content"}),e.jsx("div",{children:" Upload image in properties"}),e.jsx("div",{children:" Switch layout in properties"})]})]})]})},Ld=({block:s,content:t,isSelected:a,isEditing:r,deviceMode:n,onUpdate:i})=>{const{title:l="Seamless Moving Experience",subtitle:o="Professional  Reliable  Affordable",description:c="Transform your moving experience with Kenya's premier moving company. We make relocations simple, safe, and stress-free.",buttons:d=[{text:"Start Your Move",link:"/quote",style:"primary"}]}=t,u=(b,C)=>{i&&i(s.id,{content:{...t,[b]:C}})};return e.jsx("section",{className:"py-24 lg:py-32 bg-white",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[o&&e.jsx("p",{className:`text-sm uppercase tracking-wider text-blue-600 font-semibold mb-6 ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:b=>u("subtitle",b.target.textContent),children:o}),e.jsx("h1",{className:`text-5xl sm:text-6xl lg:text-7xl font-bold text-gray-900 mb-8 leading-tight ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:b=>u("title",b.target.textContent),children:l}),c&&e.jsx("p",{className:`text-xl text-gray-600 mb-12 max-w-2xl mx-auto leading-relaxed ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:b=>u("description",b.target.textContent),children:c}),d&&d.length>0&&e.jsx("div",{className:"flex justify-center",children:d.map((b,C)=>e.jsx(P,{variant:b.style==="primary"?"default":"outline",size:"lg",className:`px-8 py-4 text-lg ${r?"cursor-text":""}`,children:e.jsx("span",{contentEditable:r,suppressContentEditableWarning:!0,onBlur:w=>{const g=[...d];g[C]={...b,text:w.target.textContent},u("buttons",g)},children:b.text})},C))})]})})},Md=({block:s,content:t,isSelected:a,isEditing:r,deviceMode:n,onUpdate:i})=>{const{slides:l=[{title:"Residential Moving Experts",subtitle:"Home Relocation Services",description:"Professional home moving services across Kenya. We handle everything from packing to unpacking.",backgroundImage:"",buttons:[{text:"Get Home Moving Quote",link:"/quote?type=residential",style:"primary"}]},{title:"Office Relocation Specialists",subtitle:"Business Moving Services",description:"Minimize downtime with our efficient office moving services. We understand business needs.",backgroundImage:"",buttons:[{text:"Get Office Moving Quote",link:"/quote?type=office",style:"primary"}]},{title:"Secure Storage Solutions",subtitle:"Storage & Warehousing",description:"Safe and secure storage facilities for your belongings during transition periods.",backgroundImage:"",buttons:[{text:"View Storage Options",link:"/storage",style:"primary"}]}],autoPlay:o=!0,autoPlayInterval:c=5e3,showDots:d=!0,showArrows:u=!0,overlay:b={enabled:!0,color:"#000000",opacity:.4}}=t,[C,w]=T.useState(0);T.useEffect(()=>{if(o&&!r){const S=setInterval(()=>{w(y=>(y+1)%l.length)},c);return()=>clearInterval(S)}},[o,c,l.length,r]);const g=(S,y)=>{i&&i(s.id,{content:{...t,[S]:y}})},p=()=>{w(S=>(S+1)%l.length)},x=()=>{w(S=>(S-1+l.length)%l.length)},m=S=>{w(S)},j=l[C]||l[0];return e.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 w-full h-full bg-cover bg-center bg-no-repeat transition-all duration-1000",style:{backgroundImage:j.backgroundImage?`url(${j.backgroundImage})`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}}),b.enabled&&e.jsx("div",{className:"absolute inset-0 transition-opacity duration-1000",style:{backgroundColor:b.color,opacity:b.opacity}}),e.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[j.subtitle&&e.jsx("p",{className:`text-lg sm:text-xl text-blue-200 mb-4 transition-all duration-500 ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:S=>{const y=[...l];y[C]={...y[C],subtitle:S.target.textContent},g("slides",y)},children:j.subtitle}),e.jsx("h1",{className:`text-4xl sm:text-5xl lg:text-6xl font-bold text-white mb-6 leading-tight transition-all duration-500 ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:S=>{const y=[...l];y[C]={...y[C],title:S.target.textContent},g("slides",y)},children:j.title}),j.description&&e.jsx("p",{className:`text-xl text-gray-200 mb-8 max-w-2xl mx-auto transition-all duration-500 ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:S=>{const y=[...l];y[C]={...y[C],description:S.target.textContent},g("slides",y)},children:j.description}),j.buttons&&j.buttons.length>0&&e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:j.buttons.map((S,y)=>e.jsx(P,{variant:S.style==="primary"?"default":"outline",size:"lg",className:`${S.style==="primary"?"bg-white text-blue-600 hover:bg-gray-100":"border-white text-white hover:bg-white hover:text-blue-600"} transition-all duration-500 ${r?"cursor-text":""}`,children:e.jsx("span",{contentEditable:r,suppressContentEditableWarning:!0,onBlur:A=>{const N=[...l],f=[...N[C].buttons];f[y]={...S,text:A.target.textContent},N[C]={...N[C],buttons:f},g("slides",N)},children:S.text})},y))})]})}),u&&l.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:x,className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-20 hover:bg-opacity-30 text-white p-3 rounded-full transition-all z-20",children:e.jsx(E,{name:"ChevronLeft",size:24})}),e.jsx("button",{onClick:p,className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white bg-opacity-20 hover:bg-opacity-30 text-white p-3 rounded-full transition-all z-20",children:e.jsx(E,{name:"ChevronRight",size:24})})]}),d&&l.length>1&&e.jsx("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 flex space-x-2 z-20",children:l.map((S,y)=>e.jsx("button",{onClick:()=>m(y),className:`w-3 h-3 rounded-full transition-all ${y===C?"bg-white":"bg-white bg-opacity-50 hover:bg-opacity-75"}`},y))}),e.jsxs("div",{className:"absolute top-4 right-4 bg-black bg-opacity-50 text-white px-3 py-1 rounded-full text-sm z-20",children:[C+1," / ",l.length]}),a&&r&&e.jsxs("div",{className:"absolute top-4 left-4 bg-white rounded-lg shadow-lg p-3 z-20",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 mb-2",children:"Hero Carousel Settings"}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-600",children:[e.jsx("div",{children:" Click text to edit current slide"}),e.jsx("div",{children:" Use arrows to navigate slides"}),e.jsx("div",{children:" Configure slides in properties"})]})]})]})},Fd=({block:s,content:t,isSelected:a,isEditing:r,deviceMode:n,onUpdate:i})=>{const{title:l="Why Choose Our Moving Services",subtitle:o="Kenya's premier moving company with unmatched expertise",features:c=[{icon:"Truck",title:"Professional Moving Team",description:"Certified and experienced movers trained in safe handling techniques"},{icon:"Shield",title:"Fully Insured Moves",description:"Comprehensive insurance coverage for complete peace of mind"},{icon:"Clock",title:"Punctual Service",description:"On-time arrivals and efficient moving process every time"},{icon:"MapPin",title:"Kenya-Wide Coverage",description:"Serving all major cities and towns across Kenya"},{icon:"Package",title:"Safe Packing",description:"Professional packing materials and techniques for fragile items"},{icon:"Phone",title:"24/7 Support",description:"Round-the-clock customer support for your moving needs"}]}=t,d=(w,g)=>{i&&i(s.id,{content:{...t,[w]:g}})},u=(w,g,p)=>{const x=[...c];x[w]={...x[w],[g]:p},d("features",x)},b=()=>{const w={icon:"Star",title:"New Feature",description:"Feature description"};d("features",[...c,w])},C=w=>{const g=c.filter((p,x)=>x!==w);d("features",g)};return e.jsxs("section",{className:"py-16 bg-white",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[o&&e.jsx("p",{className:`text-lg text-blue-600 mb-4 ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:w=>d("subtitle",w.target.textContent),children:o}),e.jsx("h2",{className:`text-3xl sm:text-4xl font-bold text-gray-900 mb-6 ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:w=>d("title",w.target.textContent),children:l})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[c.map((w,g)=>e.jsxs("div",{className:`relative group text-center p-6 rounded-lg hover:shadow-lg transition-shadow ${r?"border-2 border-dashed border-gray-300":""}`,children:[r&&c.length>1&&e.jsx("button",{onClick:()=>C(g),className:"absolute top-2 right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(E,{name:"X",size:12})}),e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 text-blue-600 rounded-full mb-6",children:e.jsx(E,{name:w.icon,size:32})}),e.jsx("h3",{className:`text-xl font-semibold text-gray-900 mb-4 ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:p=>u(g,"title",p.target.textContent),children:w.title}),e.jsx("p",{className:`text-gray-600 leading-relaxed ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:p=>u(g,"description",p.target.textContent),children:w.description}),r&&e.jsxs("div",{className:"mt-4 p-2 bg-gray-50 rounded border",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Icon:"}),e.jsxs("select",{value:w.icon,onChange:p=>u(g,"icon",p.target.value),className:"w-full text-xs border border-gray-300 rounded px-2 py-1",children:[e.jsx("option",{value:"Truck",children:"Moving Truck"}),e.jsx("option",{value:"Shield",children:"Insurance Shield"}),e.jsx("option",{value:"Clock",children:"On-Time Clock"}),e.jsx("option",{value:"MapPin",children:"Location Pin"}),e.jsx("option",{value:"Package",children:"Packing Box"}),e.jsx("option",{value:"Phone",children:"24/7 Phone"}),e.jsx("option",{value:"Users",children:"Team Members"}),e.jsx("option",{value:"Award",children:"Award/Quality"}),e.jsx("option",{value:"CheckCircle",children:"Verified Check"}),e.jsx("option",{value:"Heart",children:"Customer Care"}),e.jsx("option",{value:"Zap",children:"Fast Service"}),e.jsx("option",{value:"Home",children:"Home Moving"}),e.jsx("option",{value:"Building",children:"Office Moving"}),e.jsx("option",{value:"Warehouse",children:"Storage"}),e.jsx("option",{value:"Star",children:"5-Star Rating"})]})]})]},g)),r&&e.jsx("div",{className:"flex items-center justify-center p-6 border-2 border-dashed border-gray-300 rounded-lg",children:e.jsxs("button",{onClick:b,className:"flex flex-col items-center text-gray-500 hover:text-gray-700 transition-colors",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(E,{name:"Plus",size:24})}),e.jsx("span",{className:"text-sm font-medium",children:"Add Feature"})]})})]})]}),a&&r&&e.jsxs("div",{className:"absolute top-4 right-4 bg-white rounded-lg shadow-lg p-3 z-20",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 mb-2",children:"Features Grid Settings"}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-600",children:[e.jsx("div",{children:" Click text to edit content"}),e.jsx("div",{children:" Use dropdown to change icons"}),e.jsx("div",{children:" Click + to add features"}),e.jsx("div",{children:" Click X to remove features"})]})]})]})},Ud=({block:s,content:t,isSelected:a,isEditing:r,deviceMode:n,onUpdate:i})=>{const{title:l="About MoveEase Pro",subtitle:o="Your Trusted Moving Partner Since 2010",description:c="With over a decade of experience in the moving industry, MoveEase Pro has established itself as Kenya's most reliable moving company. Our team of professional movers is dedicated to making your relocation experience smooth, safe, and stress-free.",image:d="",features:u=[{icon:"Award",text:"10+ Years Experience"},{icon:"Users",text:"500+ Happy Customers"},{icon:"Truck",text:"Modern Fleet of Vehicles"},{icon:"Shield",text:"Fully Licensed & Insured"}],buttons:b=[{text:"Learn More About Us",link:"/about",style:"primary"},{text:"View Our Services",link:"/services",style:"outline"}],layout:C="image-right",stats:w=[{number:"500+",label:"Successful Moves"},{number:"10+",label:"Years Experience"},{number:"99%",label:"Customer Satisfaction"}]}=t,g=(m,j)=>{i&&i(s.id,{content:{...t,[m]:j}})},p=e.jsxs("div",{className:"flex flex-col justify-center",children:[o&&e.jsx("p",{className:`text-lg text-blue-600 mb-4 font-medium ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:m=>g("subtitle",m.target.textContent),children:o}),e.jsx("h2",{className:`text-3xl sm:text-4xl font-bold text-gray-900 mb-6 leading-tight ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:m=>g("title",m.target.textContent),children:l}),c&&e.jsx("p",{className:`text-lg text-gray-600 mb-8 leading-relaxed ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:m=>g("description",m.target.textContent),children:c}),u&&u.length>0&&e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"grid grid-cols-2 gap-4",children:u.map((m,j)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(E,{name:m.icon,size:20})}),e.jsx("span",{className:`text-sm font-medium text-gray-700 ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:S=>{const y=[...u];y[j]={...m,text:S.target.textContent},g("features",y)},children:m.text})]},j))})}),w&&w.length>0&&e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"grid grid-cols-3 gap-6",children:w.map((m,j)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold text-blue-600 ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:S=>{const y=[...w];y[j]={...m,number:S.target.textContent},g("stats",y)},children:m.number}),e.jsx("div",{className:`text-sm text-gray-600 ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:S=>{const y=[...w];y[j]={...m,label:S.target.textContent},g("stats",y)},children:m.label})]},j))})}),b&&b.length>0&&e.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:b.map((m,j)=>e.jsx(P,{variant:m.style==="primary"?"default":"outline",size:"lg",className:r?"cursor-text":"",children:e.jsx("span",{contentEditable:r,suppressContentEditableWarning:!0,onBlur:S=>{const y=[...b];y[j]={...m,text:S.target.textContent},g("buttons",y)},children:m.text})},j))})]}),x=e.jsxs("div",{className:"relative",children:[d?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:d,alt:"About MoveEase Pro",className:"w-full h-full object-cover rounded-lg shadow-lg"}),e.jsxs("div",{className:"absolute top-4 left-4 bg-blue-600 text-white px-4 py-2 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold",children:"10+"}),e.jsx("div",{className:"text-xs",children:"Years Experience"})]})]}):e.jsx("div",{className:"w-full h-96 bg-gradient-to-br from-blue-100 to-blue-200 rounded-lg shadow-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(E,{name:"Users",size:64,className:"text-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-blue-600 font-medium",children:"Professional Moving Team"}),e.jsx("p",{className:"text-blue-500 text-sm mt-2",children:"Upload your team photo here"})]})}),e.jsx("div",{className:"absolute -bottom-6 -right-6 bg-white rounded-lg shadow-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 text-green-600 rounded-full flex items-center justify-center",children:e.jsx(E,{name:"Award",size:24})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-gray-900",children:"Award Winner"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Best Moving Company 2023"})]})]})})]});return e.jsxs("section",{className:"py-16 lg:py-24 bg-white",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-16 items-center",children:C==="image-right"?e.jsxs(e.Fragment,{children:[e.jsx("div",{children:p}),e.jsx("div",{children:x})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{children:x}),e.jsx("div",{children:p})]})})}),a&&r&&e.jsxs("div",{className:"absolute top-4 right-4 bg-white rounded-lg shadow-lg p-3 z-20",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 mb-2",children:"About Section Settings"}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-600",children:[e.jsx("div",{children:" Click text to edit content"}),e.jsx("div",{children:" Upload team photo in properties"}),e.jsx("div",{children:" Edit stats and features"}),e.jsx("div",{children:" Switch layout in properties"})]})]})]})},Bd=({block:s,content:t,isSelected:a,isEditing:r,deviceMode:n,onUpdate:i})=>{const{title:l="Our Moving Services",subtitle:o="Comprehensive moving solutions for every need",services:c=[{icon:"Home",title:"Residential Moving",description:"Professional home relocation services with careful handling of your personal belongings.",features:["Packing & Unpacking","Furniture Assembly","Fragile Item Care"],price:"From KSh 15,000",popular:!1},{icon:"Building",title:"Office Relocation",description:"Efficient business moving services to minimize downtime and keep your operations running.",features:["IT Equipment Moving","Document Handling","Weekend Service"],price:"From KSh 25,000",popular:!0},{icon:"Warehouse",title:"Storage Solutions",description:"Secure storage facilities for short-term and long-term storage needs.",features:["Climate Controlled","24/7 Security","Easy Access"],price:"From KSh 5,000/month",popular:!1},{icon:"Package",title:"Packing Services",description:"Professional packing services using high-quality materials and techniques.",features:["Quality Materials","Expert Packing","Inventory List"],price:"From KSh 8,000",popular:!1},{icon:"Truck",title:"Long Distance Moving",description:"Reliable long-distance moving services across Kenya and neighboring countries.",features:["GPS Tracking","Insurance Coverage","Scheduled Delivery"],price:"Custom Quote",popular:!1},{icon:"Shield",title:"Specialty Moving",description:"Specialized moving for pianos, artwork, antiques, and other valuable items.",features:["Custom Crating","Expert Handling","Full Insurance"],price:"Custom Quote",popular:!1}]}=t,d=(w,g)=>{i&&i(s.id,{content:{...t,[w]:g}})},u=(w,g,p)=>{const x=[...c];x[w]={...x[w],[g]:p},d("services",x)},b=()=>{const w={icon:"Package",title:"New Service",description:"Service description",features:["Feature 1","Feature 2","Feature 3"],price:"From KSh 10,000",popular:!1};d("services",[...c,w])},C=w=>{const g=c.filter((p,x)=>x!==w);d("services",g)};return e.jsxs("section",{className:"py-16 lg:py-24 bg-gray-50",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[o&&e.jsx("p",{className:`text-lg text-blue-600 mb-4 font-medium ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:w=>d("subtitle",w.target.textContent),children:o}),e.jsx("h2",{className:`text-3xl sm:text-4xl font-bold text-gray-900 mb-6 ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:w=>d("title",w.target.textContent),children:l})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[c.map((w,g)=>e.jsxs("div",{className:`relative group bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden ${w.popular?"ring-2 ring-blue-500":""} ${r?"border-2 border-dashed border-gray-300":""}`,children:[w.popular&&e.jsx("div",{className:"absolute top-4 right-4 bg-blue-500 text-white px-3 py-1 rounded-full text-xs font-medium",children:"Most Popular"}),r&&c.length>1&&e.jsx("button",{onClick:()=>C(g),className:"absolute top-2 left-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-10",children:e.jsx(E,{name:"X",size:12})}),e.jsxs("div",{className:"p-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 text-blue-600 rounded-xl mb-6",children:e.jsx(E,{name:w.icon,size:32})}),e.jsx("h3",{className:`text-xl font-semibold text-gray-900 mb-4 ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:p=>u(g,"title",p.target.textContent),children:w.title}),e.jsx("p",{className:`text-gray-600 mb-6 leading-relaxed ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:p=>u(g,"description",p.target.textContent),children:w.description}),e.jsx("ul",{className:"space-y-2 mb-6",children:w.features.map((p,x)=>e.jsxs("li",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(E,{name:"Check",size:16,className:"text-green-500 mr-2 flex-shrink-0"}),e.jsx("span",{className:r?"cursor-text":"",contentEditable:r,suppressContentEditableWarning:!0,onBlur:m=>{const j=[...w.features];j[x]=m.target.textContent,u(g,"features",j)},children:p})]},x))}),e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("span",{className:`text-2xl font-bold text-blue-600 ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:p=>u(g,"price",p.target.textContent),children:w.price})}),e.jsx(P,{variant:w.popular?"default":"outline",className:"w-full",disabled:r,children:"Get Quote"})]}),r&&e.jsx("div",{className:"absolute bottom-2 right-2 bg-white rounded shadow-lg p-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("label",{className:"flex items-center text-xs",children:[e.jsx("input",{type:"checkbox",checked:w.popular,onChange:p=>u(g,"popular",p.target.checked),className:"mr-1"}),"Popular"]}),e.jsxs("select",{value:w.icon,onChange:p=>u(g,"icon",p.target.value),className:"text-xs border rounded px-1",children:[e.jsx("option",{value:"Home",children:"Home"}),e.jsx("option",{value:"Building",children:"Building"}),e.jsx("option",{value:"Warehouse",children:"Warehouse"}),e.jsx("option",{value:"Package",children:"Package"}),e.jsx("option",{value:"Truck",children:"Truck"}),e.jsx("option",{value:"Shield",children:"Shield"}),e.jsx("option",{value:"Clock",children:"Clock"}),e.jsx("option",{value:"MapPin",children:"MapPin"})]})]})})]},g)),r&&e.jsx("div",{className:"flex items-center justify-center p-8 border-2 border-dashed border-gray-300 rounded-xl bg-white",children:e.jsxs("button",{onClick:b,className:"flex flex-col items-center text-gray-500 hover:text-gray-700 transition-colors",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-xl flex items-center justify-center mb-4",children:e.jsx(E,{name:"Plus",size:32})}),e.jsx("span",{className:"text-sm font-medium",children:"Add Service"})]})})]}),e.jsxs("div",{className:"text-center mt-16",children:[e.jsx("p",{className:"text-lg text-gray-600 mb-6",children:"Need a custom moving solution? We're here to help!"}),e.jsxs(P,{size:"lg",children:[e.jsx(E,{name:"Phone",size:16,className:"mr-2"}),"Contact Us for Custom Quote"]})]})]}),a&&r&&e.jsxs("div",{className:"absolute top-4 right-4 bg-white rounded-lg shadow-lg p-3 z-20",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 mb-2",children:"Services Grid Settings"}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-600",children:[e.jsx("div",{children:" Click text to edit content"}),e.jsx("div",{children:" Edit service features and pricing"}),e.jsx("div",{children:" Mark services as popular"}),e.jsx("div",{children:" Add/remove services"})]})]})]})},zd=({block:s,content:t,isSelected:a,isEditing:r,deviceMode:n,onUpdate:i})=>{const{title:l="What Our Customers Say",subtitle:o="Real experiences from satisfied customers",testimonials:c=[{name:"Sarah Wanjiku",role:"Homeowner",location:"Nairobi",image:"",rating:5,text:"MoveEase Pro made our family relocation so smooth! Their team was professional, careful with our belongings, and completed the move ahead of schedule. Highly recommended!",moveType:"Residential Move"},{name:"David Kimani",role:"Business Owner",location:"Mombasa",image:"",rating:5,text:"We needed to relocate our office quickly, and MoveEase Pro delivered perfectly. They handled our IT equipment with care and had us operational in our new location within 2 days.",moveType:"Office Relocation"},{name:"Grace Achieng",role:"Apartment Renter",location:"Kisumu",image:"",rating:5,text:"Affordable, reliable, and professional. The team arrived on time, packed everything carefully, and delivered without any damage. Best moving experience I've ever had!",moveType:"Residential Move"},{name:"Michael Ochieng",role:"Store Manager",location:"Nakuru",image:"",rating:5,text:"MoveEase Pro helped us relocate our retail store with minimal downtime. Their storage solution was perfect for our transition period. Excellent service!",moveType:"Commercial Move"}],autoPlay:d=!0,autoPlayInterval:u=5e3,showDots:b=!0,showArrows:C=!0}=t,[w,g]=T.useState(0);T.useEffect(()=>{if(d&&!r&&c.length>1){const N=setInterval(()=>{g(f=>(f+1)%c.length)},u);return()=>clearInterval(N)}},[d,u,c.length,r]);const p=(N,f)=>{i&&i(s.id,{content:{...t,[N]:f}})},x=(N,f,v)=>{const h=[...c];h[N]={...h[N],[f]:v},p("testimonials",h)},m=()=>{g(N=>(N+1)%c.length)},j=()=>{g(N=>(N-1+c.length)%c.length)},S=N=>{g(N)},y=N=>Array.from({length:5},(f,v)=>e.jsx(E,{name:"Star",size:16,className:v<N?"text-yellow-400 fill-current":"text-gray-300"},v)),A=c[w]||c[0];return e.jsxs("section",{className:"py-16 lg:py-24 bg-blue-50",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-16",children:[o&&e.jsx("p",{className:`text-lg text-blue-600 mb-4 font-medium ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:N=>p("subtitle",N.target.textContent),children:o}),e.jsx("h2",{className:`text-3xl sm:text-4xl font-bold text-gray-900 mb-6 ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:N=>p("title",N.target.textContent),children:l})]}),e.jsxs("div",{className:"relative max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 lg:p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-8",children:e.jsx(E,{name:"Quote",size:32})}),e.jsx("div",{className:"flex justify-center mb-6",children:y(A.rating)}),e.jsxs("blockquote",{className:`text-xl lg:text-2xl text-gray-700 leading-relaxed mb-8 ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:N=>x(w,"text",N.target.textContent),children:['"',A.text,'"']}),e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden",children:A.image?e.jsx("img",{src:A.image,alt:A.name,className:"w-full h-full object-cover"}):e.jsx(E,{name:"User",size:24,className:"text-gray-400"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:`font-semibold text-gray-900 ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:N=>x(w,"name",N.target.textContent),children:A.name}),e.jsxs("p",{className:"text-gray-600 text-sm",children:[e.jsx("span",{className:r?"cursor-text":"",contentEditable:r,suppressContentEditableWarning:!0,onBlur:N=>x(w,"role",N.target.textContent),children:A.role}),"  ",e.jsx("span",{className:r?"cursor-text":"",contentEditable:r,suppressContentEditableWarning:!0,onBlur:N=>x(w,"location",N.target.textContent),children:A.location})]}),e.jsx("p",{className:"text-blue-600 text-xs font-medium mt-1",children:e.jsx("span",{className:r?"cursor-text":"",contentEditable:r,suppressContentEditableWarning:!0,onBlur:N=>x(w,"moveType",N.target.textContent),children:A.moveType})})]})]})]}),C&&c.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:j,className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-12 h-12 bg-white shadow-lg rounded-full flex items-center justify-center text-gray-600 hover:text-blue-600 transition-colors",children:e.jsx(E,{name:"ChevronLeft",size:20})}),e.jsx("button",{onClick:m,className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-12 h-12 bg-white shadow-lg rounded-full flex items-center justify-center text-gray-600 hover:text-blue-600 transition-colors",children:e.jsx(E,{name:"ChevronRight",size:20})})]})]}),b&&c.length>1&&e.jsx("div",{className:"flex justify-center mt-8 space-x-2",children:c.map((N,f)=>e.jsx("button",{onClick:()=>S(f),className:`w-3 h-3 rounded-full transition-all ${f===w?"bg-blue-600":"bg-gray-300 hover:bg-gray-400"}`},f))}),e.jsxs("div",{className:"mt-16 text-center",children:[e.jsx("p",{className:"text-gray-600 mb-8",children:"Trusted by hundreds of customers across Kenya"}),e.jsxs("div",{className:"flex justify-center items-center space-x-8 opacity-60",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-400",children:"500+"}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Happy",e.jsx("br",{}),"Customers"]}),e.jsx("div",{className:"w-px h-8 bg-gray-300"}),e.jsx("div",{className:"text-2xl font-bold text-gray-400",children:"99%"}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Satisfaction",e.jsx("br",{}),"Rate"]}),e.jsx("div",{className:"w-px h-8 bg-gray-300"}),e.jsx("div",{className:"text-2xl font-bold text-gray-400",children:"10+"}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Years",e.jsx("br",{}),"Experience"]})]})]})]}),a&&r&&e.jsxs("div",{className:"absolute top-4 right-4 bg-white rounded-lg shadow-lg p-3 z-20",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 mb-2",children:"Testimonials Carousel"}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-600",children:[e.jsx("div",{children:" Click text to edit testimonials"}),e.jsx("div",{children:" Use arrows to navigate slides"}),e.jsx("div",{children:" Edit customer details"}),e.jsx("div",{children:" Configure auto-play in properties"})]})]})]})},Gd=({block:s,content:t,isSelected:a,isEditing:r,deviceMode:n,onUpdate:i})=>{const{title:l="Get Your Free Quote",subtitle:o="Fill out the form below and we'll get back to you within 24 hours",fields:c=[{name:"name",label:"Full Name",type:"text",required:!0},{name:"email",label:"Email Address",type:"email",required:!0},{name:"phone",label:"Phone Number",type:"tel",required:!0},{name:"service",label:"Service Type",type:"select",required:!0,options:["Residential Move","Office Move","Storage","Packing"]},{name:"message",label:"Additional Details",type:"textarea",required:!1}],submitButton:d={text:"Get Free Quote",style:"primary"},successMessage:u="Thank you! We'll contact you within 24 hours.",errorMessage:b="Sorry, there was an error. Please try again."}=t,[C,w]=T.useState({}),[g,p]=T.useState(!1),[x,m]=T.useState(null),j=(h,I)=>{i&&i(s.id,{content:{...t,[h]:I}})},S=(h,I,R)=>{const L=[...c];L[h]={...L[h],[I]:R},j("fields",L)},y=(h,I)=>{w(R=>({...R,[h]:I}))},A=async h=>{if(h.preventDefault(),!r){p(!0),m(null);try{await new Promise(I=>setTimeout(I,1e3)),console.log("Form submitted:",C),m("success"),w({})}catch(I){console.error("Form submission error:",I),m("error")}finally{p(!1)}}},N=()=>{const h={name:`field_${c.length+1}`,label:"New Field",type:"text",required:!1};j("fields",[...c,h])},f=h=>{const I=c.filter((R,L)=>L!==h);j("fields",I)},v=(h,I)=>{const R={key:h.name,label:h.label+(h.required?" *":""),value:C[h.name]||"",onChange:L=>y(h.name,L),required:h.required,disabled:g};switch(h.type){case"select":return e.jsxs("div",{className:"relative",children:[e.jsx(B,{...R,options:[{value:"",label:`Select ${h.label}`},...(h.options||[]).map(L=>({value:L,label:L}))]}),r&&e.jsx("button",{onClick:()=>f(I),className:"absolute top-0 right-0 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs transform translate-x-2 -translate-y-2",children:""})]});case"textarea":return e.jsxs("div",{className:"relative",children:[e.jsx(ve,{...R,rows:4}),r&&e.jsx("button",{onClick:()=>f(I),className:"absolute top-0 right-0 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs transform translate-x-2 -translate-y-2",children:""})]});default:return e.jsxs("div",{className:"relative",children:[e.jsx(D,{...R,type:h.type}),r&&e.jsx("button",{onClick:()=>f(I),className:"absolute top-0 right-0 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs transform translate-x-2 -translate-y-2",children:""})]})}};return e.jsxs("section",{className:"py-16 bg-gray-50",children:[e.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:`text-3xl sm:text-4xl font-bold text-gray-900 mb-4 ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:h=>j("title",h.target.textContent),children:l}),o&&e.jsx("p",{className:`text-lg text-gray-600 ${r?"cursor-text":""}`,contentEditable:r,suppressContentEditableWarning:!0,onBlur:h=>j("subtitle",h.target.textContent),children:o})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-lg p-8",children:x==="success"?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Thank You!"}),e.jsx("p",{className:"text-gray-600",children:u}),e.jsx(P,{variant:"outline",className:"mt-4",onClick:()=>m(null),children:"Send Another Message"})]}):e.jsxs("form",{onSubmit:A,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.map((h,I)=>e.jsxs("div",{className:h.type==="textarea"?"md:col-span-2":"",children:[v(h,I),r&&e.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded border text-xs",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",placeholder:"Field Label",value:h.label,onChange:R=>S(I,"label",R.target.value),className:"border border-gray-300 rounded px-2 py-1"}),e.jsxs("select",{value:h.type,onChange:R=>S(I,"type",R.target.value),className:"border border-gray-300 rounded px-2 py-1",children:[e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"tel",children:"Phone"}),e.jsx("option",{value:"select",children:"Select"}),e.jsx("option",{value:"textarea",children:"Textarea"})]})]}),e.jsxs("label",{className:"flex items-center mt-2",children:[e.jsx("input",{type:"checkbox",checked:h.required,onChange:R=>S(I,"required",R.target.checked),className:"mr-2"}),"Required"]})]})]},h.name)),r&&e.jsx("div",{className:"md:col-span-2 flex justify-center",children:e.jsxs("button",{type:"button",onClick:N,className:"flex items-center px-4 py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:text-gray-700 hover:border-gray-400 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Field"]})})]}),x==="error"&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-red-700",children:b})]})}),e.jsx("div",{className:"text-center",children:e.jsx(P,{type:"submit",size:"lg",loading:g,disabled:g||r,className:"px-8",children:g?"Sending...":d.text})})]})})]}),a&&r&&e.jsxs("div",{className:"absolute top-4 right-4 bg-white rounded-lg shadow-lg p-3 z-20",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 mb-2",children:"Contact Form Settings"}),e.jsxs("div",{className:"space-y-2 text-xs text-gray-600",children:[e.jsx("div",{children:" Click text to edit content"}),e.jsx("div",{children:" Edit field labels and types"}),e.jsx("div",{children:" Add/remove form fields"}),e.jsx("div",{children:" Toggle required fields"})]})]})]})},$d={[$.HERO_BANNER]:Rd,[$.HERO_VIDEO]:Od,[$.HERO_SPLIT]:_d,[$.HERO_MINIMAL]:Ld,[$.HERO_CAROUSEL]:Md,[$.FEATURES_GRID]:Fd,[$.ABOUT_WITH_IMAGE]:Ud,[$.SERVICES_GRID]:Bd,[$.TESTIMONIALS_CAROUSEL]:zd,[$.CONTACT_FORM]:Gd},Hd=({block:s,isSelected:t,isEditing:a,deviceMode:r,onUpdate:n,onSelect:i})=>{var d,u;const l=$d[s.type];if(!l)return e.jsxs("div",{className:"p-8 bg-red-50 border border-red-200 rounded-lg text-center",children:[e.jsx("div",{className:"text-red-600 mb-2",children:e.jsx("svg",{className:"w-8 h-8 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"text-lg font-medium text-red-900 mb-1",children:"Unknown Block Type"}),e.jsxs("p",{className:"text-red-700",children:['Block type "',s.type,'" is not supported']})]});const o=((d=s.styles)==null?void 0:d[r])||{},c={...(u=s.styles)==null?void 0:u.desktop,...o};return e.jsxs("div",{className:`block-wrapper ${t?"block-selected":""} ${a?"block-editing":""}`,style:c,onClick:b=>{b.stopPropagation(),i==null||i(s)},children:[e.jsx(l,{block:s,content:s.content,isSelected:t,isEditing:a,deviceMode:r,onUpdate:n}),a&&e.jsx("div",{className:"absolute inset-0 bg-blue-500 bg-opacity-10 pointer-events-none"})]})},qd=()=>{const{currentPage:s,selectedBlock:t,setSelectedBlock:a,editorMode:r,deviceMode:n,showGrid:i,updateBlock:l,deleteBlock:o,duplicateBlock:c,loading:d}=ft(),{getDropZoneProps:u,getDraggableBlockProps:b,isDragging:C}=Gr();if(!s)return e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(E,{name:"FileText",size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Page Selected"}),e.jsx("p",{className:"text-gray-600",children:"Select a page from the page manager to start editing."})]})});const w=S=>{r==="edit"&&a(S)},g=S=>{S.target===S.currentTarget&&a(null)},p=(S,y)=>{l(S,y)},x=S=>{window.confirm("Are you sure you want to delete this block?")&&o(S)},m=S=>{c(S)},j=()=>{switch(n){case"tablet":return"max-w-3xl mx-auto";case"mobile":return"max-w-sm mx-auto";default:return"w-full"}};return e.jsxs("div",{className:`canvas-container min-h-full p-8 ${i?"canvas-grid":""}`,onClick:g,children:[d&&e.jsx("div",{className:"editor-loading",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{name:"Loader2",size:20,className:"animate-spin"}),e.jsx("span",{children:"Loading..."})]})}),e.jsx("div",{className:`device-frame ${n} ${j()}`,children:e.jsx("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:s.blocks.length===0?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{...u(0),className:"text-center p-12",children:[e.jsx(E,{name:"Plus",size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"Start Building Your Page"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Drag blocks from the left panel to start creating your page."}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[e.jsx("div",{children:" Choose from 50+ pre-built blocks"}),e.jsx("div",{children:" Customize colors, text, and images"}),e.jsx("div",{children:" Preview on different devices"})]})]})}):e.jsxs("div",{className:"relative",children:[e.jsx("div",{...u(0)}),s.blocks.map((S,y)=>e.jsxs("div",{className:"relative",children:[e.jsxs("div",{...b(S,y),className:`relative ${(t==null?void 0:t.id)===S.id?"block-selected":""} ${r==="edit"?"hover:block-hover":""}`,children:[r==="edit"&&e.jsxs("div",{className:"block-controls",children:[e.jsx("button",{className:"block-control-btn",onClick:A=>{A.stopPropagation(),w(S)},title:"Select Block",children:e.jsx(E,{name:"MousePointer",size:14})}),e.jsx("button",{className:"block-control-btn",onClick:A=>{A.stopPropagation(),m(S.id)},title:"Duplicate Block",children:e.jsx(E,{name:"Copy",size:14})}),e.jsx("button",{className:"block-control-btn",onClick:A=>{A.stopPropagation()},title:"Move Up",disabled:y===0,children:e.jsx(E,{name:"ChevronUp",size:14})}),e.jsx("button",{className:"block-control-btn",onClick:A=>{A.stopPropagation(),y<s.blocks.length-1},title:"Move Down",disabled:y===s.blocks.length-1,children:e.jsx(E,{name:"ChevronDown",size:14})}),e.jsx("button",{className:"block-control-btn danger",onClick:A=>{A.stopPropagation(),x(S.id)},title:"Delete Block",children:e.jsx(E,{name:"Trash2",size:14})})]}),e.jsx(Hd,{block:S,isSelected:(t==null?void 0:t.id)===S.id,isEditing:r==="edit",deviceMode:n,onUpdate:p,onSelect:w})]}),e.jsx("div",{...u(y+1)})]},S.id))]})})}),C&&e.jsx("div",{className:"fixed inset-0 bg-blue-500 bg-opacity-10 pointer-events-none z-50",children:e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg shadow-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2 text-blue-600",children:[e.jsx(E,{name:"Move",size:20}),e.jsx("span",{className:"font-medium",children:"Drop to add block"})]})})}),n!=="desktop"&&e.jsx("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-75 text-white px-3 py-1 rounded-full text-sm",children:n==="tablet"?"Tablet View (768px)":"Mobile View (375px)"})]})},Vd=()=>{const{selectedBlock:s,updateBlock:t,deviceMode:a,currentPage:r}=ft(),[n,i]=T.useState("content"),[l,o]=T.useState(!1);if(!s)return e.jsxs("div",{className:"p-6 text-center",children:[e.jsx(E,{name:"MousePointer",size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Block Selected"}),e.jsx("p",{className:"text-gray-600",children:"Click on a block in the canvas to edit its properties."})]});const c=Ad(s.type),d=(p,x)=>{t(s.id,{content:{...s.content,[p]:x}})},u=(p,x)=>{var j;const m=((j=s.styles)==null?void 0:j[a])||{};t(s.id,{styles:{...s.styles,[a]:{...m,[p]:x}}})},b=(p,x)=>{t(s.id,{settings:{...s.settings,[p]:x}})},C=()=>{const p=s.content||{};return e.jsxs("div",{className:"space-y-4",children:[p.title!==void 0&&e.jsx(D,{label:"Title",value:p.title||"",onChange:x=>d("title",x)}),p.subtitle!==void 0&&e.jsx(D,{label:"Subtitle",value:p.subtitle||"",onChange:x=>d("subtitle",x)}),p.description!==void 0&&e.jsx(ve,{label:"Description",value:p.description||"",onChange:x=>d("description",x),rows:3}),p.backgroundImage!==void 0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Background Image"}),e.jsx(ds,{onImageSelect:x=>{d("backgroundImage",x.url)},category:"backgrounds",showPreview:!1,className:"mb-2"}),p.backgroundImage&&e.jsxs("div",{className:"mt-2",children:[e.jsx("img",{src:p.backgroundImage,alt:"Background preview",className:"w-full h-32 object-cover rounded border"}),e.jsxs(P,{variant:"ghost",size:"sm",onClick:()=>d("backgroundImage",""),className:"mt-1 text-red-600 hover:text-red-700",children:[e.jsx(E,{name:"Trash2",size:14,className:"mr-1"}),"Remove"]})]})]}),p.buttons&&Array.isArray(p.buttons)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buttons"}),e.jsxs("div",{className:"space-y-3",children:[p.buttons.map((x,m)=>e.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:["Button ",m+1]}),p.buttons.length>1&&e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>{const j=p.buttons.filter((S,y)=>y!==m);d("buttons",j)},children:e.jsx(E,{name:"Trash2",size:14})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{placeholder:"Button text",value:x.text||"",onChange:j=>{const S=[...p.buttons];S[m]={...x,text:j},d("buttons",S)}}),e.jsx(D,{placeholder:"Link URL",value:x.link||"",onChange:j=>{const S=[...p.buttons];S[m]={...x,link:j},d("buttons",S)}}),e.jsx(B,{options:[{value:"primary",label:"Primary"},{value:"secondary",label:"Secondary"},{value:"outline",label:"Outline"}],value:x.style||"primary",onChange:j=>{const S=[...p.buttons];S[m]={...x,style:j},d("buttons",S)}})]})]},m)),e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>{const x={text:"New Button",link:"#",style:"primary"};d("buttons",[...p.buttons,x])},children:[e.jsx(E,{name:"Plus",size:16,className:"mr-2"}),"Add Button"]})]})]})]})},w=()=>{var x;const p=((x=s.styles)==null?void 0:x[a])||{};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:["Editing styles for ",a," view"]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Spacing"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(D,{label:"Padding Top",type:"number",value:p.paddingTop||"",onChange:m=>u("paddingTop",m+"px"),placeholder:"0"}),e.jsx(D,{label:"Padding Bottom",type:"number",value:p.paddingBottom||"",onChange:m=>u("paddingBottom",m+"px"),placeholder:"0"}),e.jsx(D,{label:"Margin Top",type:"number",value:p.marginTop||"",onChange:m=>u("marginTop",m+"px"),placeholder:"0"}),e.jsx(D,{label:"Margin Bottom",type:"number",value:p.marginBottom||"",onChange:m=>u("marginBottom",m+"px"),placeholder:"0"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Colors"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Background Color"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"color",value:p.backgroundColor||"#ffffff",onChange:m=>u("backgroundColor",m.target.value),className:"w-10 h-8 border border-gray-300 rounded"}),e.jsx(D,{value:p.backgroundColor||"",onChange:m=>u("backgroundColor",m),placeholder:"#ffffff"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Text Color"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"color",value:p.color||"#000000",onChange:m=>u("color",m.target.value),className:"w-10 h-8 border border-gray-300 rounded"}),e.jsx(D,{value:p.color||"",onChange:m=>u("color",m),placeholder:"#000000"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Typography"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(B,{label:"Font Family",options:[{value:"Inter",label:"Inter"},{value:"Arial",label:"Arial"},{value:"Georgia",label:"Georgia"},{value:"Times New Roman",label:"Times New Roman"}],value:p.fontFamily||"Inter",onChange:m=>u("fontFamily",m)}),e.jsx(D,{label:"Font Size",type:"number",value:p.fontSize||"",onChange:m=>u("fontSize",m+"px"),placeholder:"16"}),e.jsx(B,{label:"Font Weight",options:[{value:"300",label:"Light"},{value:"400",label:"Normal"},{value:"500",label:"Medium"},{value:"600",label:"Semi Bold"},{value:"700",label:"Bold"}],value:p.fontWeight||"400",onChange:m=>u("fontWeight",m)})]})]})]})},g=()=>{const p=s.settings||{};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Animation"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(B,{label:"Animation Type",options:[{value:"none",label:"None"},{value:"fadeIn",label:"Fade In"},{value:"slideUp",label:"Slide Up"},{value:"slideDown",label:"Slide Down"},{value:"slideLeft",label:"Slide Left"},{value:"slideRight",label:"Slide Right"},{value:"zoomIn",label:"Zoom In"},{value:"bounce",label:"Bounce"}],value:p.animation||"none",onChange:x=>b("animation",x)}),e.jsx(D,{label:"Animation Duration (ms)",type:"number",value:p.animationDuration||1e3,onChange:x=>b("animationDuration",parseInt(x))}),e.jsx(D,{label:"Animation Delay (ms)",type:"number",value:p.animationDelay||0,onChange:x=>b("animationDelay",parseInt(x))})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Visibility"}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:p.visible!==!1,onChange:x=>b("visible",x.target.checked),className:"mr-2"}),"Block is visible"]})]}),e.jsx("div",{children:e.jsx(ve,{label:"Custom CSS",value:p.customCSS||"",onChange:x=>b("customCSS",x),rows:4,placeholder:"/* Custom CSS styles */"})})]})};return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(E,{name:(c==null?void 0:c.icon)||"Square",size:16,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:(c==null?void 0:c.name)||"Block"}),e.jsx("p",{className:"text-sm text-gray-600",children:s.name})]})]})}),e.jsx("div",{className:"flex border-b border-gray-200",children:[{key:"content",label:"Content",icon:"Type"},{key:"style",label:"Style",icon:"Palette"},{key:"advanced",label:"Advanced",icon:"Settings"}].map(p=>e.jsxs("button",{onClick:()=>i(p.key),className:`flex-1 flex items-center justify-center space-x-2 px-4 py-3 text-sm font-medium transition-colors ${n===p.key?"text-primary border-b-2 border-primary bg-blue-50":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(E,{name:p.icon,size:14}),e.jsx("span",{children:p.label})]},p.key))}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[n==="content"&&C(),n==="style"&&w(),n==="advanced"&&g()]})]})},Kd=()=>{const{website:s,currentPage:t,switchPage:a,createPage:r,updatePage:n,deletePage:i,publishPage:l,unpublishPage:o,loading:c}=ft(),[d,u]=T.useState(!1),[b,C]=T.useState(""),[w,g]=T.useState(""),p=async y=>{if(y.preventDefault(),!b.trim())return;const A=w.trim()||b.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");try{await r(b.trim(),A),C(""),g(""),u(!1)}catch(N){console.error("Error creating page:",N),alert("Error creating page. Please try again.")}},x=async y=>{if(s.pages.length<=1){alert("Cannot delete the last page.");return}window.confirm(`Are you sure you want to delete "${y.name}"?`)&&await i(y.id)},m=async y=>{y.status===ze.PUBLISHED?await o(y.id):await l(y.id)},j=y=>{switch(y){case ze.PUBLISHED:return"bg-green-100 text-green-800";case ze.DRAFT:return"bg-yellow-100 text-yellow-800";case ze.ARCHIVED:return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},S=y=>y?new Date(y).toLocaleDateString():"Never";return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Pages"}),e.jsxs(P,{size:"sm",onClick:()=>u(!0),disabled:c,children:[e.jsx(E,{name:"Plus",size:16,className:"mr-1"}),"New Page"]})]})}),d&&e.jsx("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:e.jsxs("form",{onSubmit:p,className:"space-y-3",children:[e.jsx(D,{label:"Page Name",value:b,onChange:C,placeholder:"e.g., About Us",required:!0}),e.jsx(D,{label:"URL Slug",value:w,onChange:g,placeholder:"e.g., about-us (optional)"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{type:"submit",size:"sm",loading:c,disabled:!b.trim(),children:"Create Page"}),e.jsx(P,{type:"button",variant:"outline",size:"sm",onClick:()=>{u(!1),C(""),g("")},children:"Cancel"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:s.pages.length===0?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx(E,{name:"FileText",size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Pages"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first page to get started."}),e.jsxs(P,{onClick:()=>u(!0),children:[e.jsx(E,{name:"Plus",size:16,className:"mr-2"}),"Create Page"]})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:s.pages.map(y=>{var A;return e.jsxs("div",{className:`p-4 hover:bg-gray-50 cursor-pointer transition-colors ${(t==null?void 0:t.id)===y.id?"bg-blue-50 border-r-2 border-blue-500":""}`,onClick:()=>a(y.id),children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:y.name}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${j(y.status)}`,children:y.status})]}),e.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["/",y.slug]}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(E,{name:"Layers",size:12,className:"mr-1"}),((A=y.blocks)==null?void 0:A.length)||0," blocks"]}),e.jsxs("span",{children:["Updated ",S(y.updatedAt)]})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[e.jsx("button",{onClick:N=>{N.stopPropagation(),m(y)},className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",title:y.status===ze.PUBLISHED?"Unpublish":"Publish",children:e.jsx(E,{name:y.status===ze.PUBLISHED?"Eye":"EyeOff",size:14})}),e.jsx("button",{onClick:N=>{N.stopPropagation();const f=prompt("Enter new page name:",y.name);f&&f!==y.name&&n(y.id,{name:f})},className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",title:"Rename Page",children:e.jsx(E,{name:"Edit",size:14})}),e.jsx("button",{onClick:N=>{N.stopPropagation();const f=`${y.name} Copy`,v=`${y.slug}-copy`;r(f,v)},className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",title:"Duplicate Page",children:e.jsx(E,{name:"Copy",size:14})}),s.pages.length>1&&e.jsx("button",{onClick:N=>{N.stopPropagation(),x(y)},className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Delete Page",children:e.jsx(E,{name:"Trash2",size:14})})]})]}),(t==null?void 0:t.id)===y.id&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{children:"Page Settings"}),e.jsx("button",{className:"text-blue-600 hover:text-blue-800",children:e.jsx(E,{name:"Settings",size:12})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:["Title: ",y.title||"Not set"]}),e.jsxs("div",{children:["Description: ",y.description?`${y.description.substring(0,50)}...`:"Not set"]})]})]})})]},y.id)})})}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Total Pages:"}),e.jsx("span",{className:"font-medium",children:s.pages.length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Published:"}),e.jsx("span",{className:"font-medium text-green-600",children:s.pages.filter(y=>y.status===ze.PUBLISHED).length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Drafts:"}),e.jsx("span",{className:"font-medium text-yellow-600",children:s.pages.filter(y=>y.status===ze.DRAFT).length})]})]})})]})},Wd=()=>{const{deviceMode:s,setDeviceMode:t,editorMode:a}=ft(),r=[{type:at.DESKTOP,name:"Desktop",icon:"Monitor",width:"1200px+",description:"Large screens and desktops"},{type:at.TABLET,name:"Tablet",icon:"Tablet",width:"768px",description:"Tablets and small laptops"},{type:at.MOBILE,name:"Mobile",icon:"Smartphone",width:"375px",description:"Mobile phones"}];return a!=="edit"?null:e.jsxs("div",{className:"bg-gray-50 border-b border-gray-200 px-4 py-3",children:[e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"flex items-center bg-white rounded-lg shadow-sm border border-gray-200 p-1",children:r.map(n=>e.jsxs("button",{onClick:()=>t(n.type),className:`flex items-center space-x-2 px-4 py-2 rounded-md text-sm font-medium transition-all ${s===n.type?"bg-primary text-white shadow-sm":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,title:`${n.description} (${n.width})`,children:[e.jsx(E,{name:n.icon,size:16}),e.jsx("span",{children:n.name}),e.jsx("span",{className:"text-xs opacity-75",children:n.width})]},n.type))}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx("div",{className:"w-px h-6 bg-gray-300"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>{},title:"Zoom Out",children:e.jsx(E,{name:"ZoomOut",size:16})}),e.jsx("span",{className:"text-sm text-gray-600 px-2",children:"100%"}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>{},title:"Zoom In",children:e.jsx(E,{name:"ZoomIn",size:16})})]}),e.jsx("div",{className:"w-px h-6 bg-gray-300"}),(s===at.TABLET||s===at.MOBILE)&&e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>{},title:"Toggle Orientation",children:e.jsx(E,{name:"RotateCcw",size:16})}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>{},title:"Toggle Rulers",children:e.jsx(E,{name:"Ruler",size:16})})]})]}),e.jsx("div",{className:"flex items-center justify-center mt-2",children:e.jsxs("div",{className:"text-xs text-gray-500",children:[s===at.DESKTOP&&"Viewing desktop layout (1200px and above)",s===at.TABLET&&"Viewing tablet layout (768px - 1199px)",s===at.MOBILE&&"Viewing mobile layout (up to 767px)"]})})]})},Yd=()=>{const[s,t]=T.useState("blocks"),[a,r]=T.useState("properties"),[n,i]=T.useState(!0),[l,o]=T.useState(!0);return e.jsxs(jd,{children:[e.jsxs(We,{children:[e.jsx("title",{children:"Website Builder - MoveEase Pro"}),e.jsx("meta",{name:"description",content:"Drag and drop website builder for creating custom landing pages and marketing sites"})]}),e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"flex h-screen",children:[e.jsx(nt,{}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(Td,{leftPanelTab:s,setLeftPanelTab:t,rightPanelTab:a,setRightPanelTab:r,showLeftPanel:n,setShowLeftPanel:i,showRightPanel:l,setShowRightPanel:o}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[n&&e.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col",children:[e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsx("button",{onClick:()=>t("blocks"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${s==="blocks"?"text-primary border-b-2 border-primary bg-blue-50":"text-gray-600 hover:text-gray-900"}`,children:"Blocks"}),e.jsx("button",{onClick:()=>t("pages"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${s==="pages"?"text-primary border-b-2 border-primary bg-blue-50":"text-gray-600 hover:text-gray-900"}`,children:"Pages"})]}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[s==="blocks"&&e.jsx(Dd,{}),s==="pages"&&e.jsx(Kd,{})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(Wd,{}),e.jsx("div",{className:"flex-1 overflow-auto bg-gray-100",children:e.jsx(qd,{})})]}),l&&e.jsxs("div",{className:"w-80 bg-white border-l border-gray-200 flex flex-col",children:[e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsx("button",{onClick:()=>r("properties"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${a==="properties"?"text-primary border-b-2 border-primary bg-blue-50":"text-gray-600 hover:text-gray-900"}`,children:"Properties"}),e.jsx("button",{onClick:()=>r("settings"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${a==="settings"?"text-primary border-b-2 border-primary bg-blue-50":"text-gray-600 hover:text-gray-900"}`,children:"Settings"})]}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[a==="properties"&&e.jsx(Vd,{}),a==="settings"&&e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Page Settings"}),e.jsx("p",{className:"text-gray-600",children:"Page settings panel will be implemented here."})]})]})]})]})]})]})}),e.jsx("style",{jsx:!0,children:`
        .drop-zone {
          min-height: 4px;
          transition: all 0.2s ease;
        }
        
        .drop-zone.active {
          background-color: #dbeafe;
          border: 2px dashed #3b82f6;
          min-height: 40px;
          margin: 8px 0;
          border-radius: 4px;
          display: flex;
          align-items: center;
          justify-content: center;
        }
        
        .drop-zone.drag-over {
          background-color: #bfdbfe;
          border-color: #1d4ed8;
        }
        
        .drop-zone.active::after {
          content: 'Drop block here';
          color: #3b82f6;
          font-size: 14px;
          font-weight: 500;
        }
        
        .draggable-block {
          transition: all 0.2s ease;
          cursor: move;
        }
        
        .draggable-block:hover {
          transform: translateY(-1px);
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .draggable-block.dragging {
          opacity: 0.5;
          transform: rotate(5deg);
        }
        
        .palette-item {
          transition: all 0.2s ease;
          cursor: grab;
        }
        
        .palette-item:hover {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .palette-item.dragging {
          opacity: 0.7;
          transform: scale(0.95);
        }
        
        .palette-item:active {
          cursor: grabbing;
        }
        
        .block-selected {
          outline: 2px solid #3b82f6;
          outline-offset: 2px;
        }
        
        .block-hover {
          outline: 1px solid #93c5fd;
          outline-offset: 1px;
        }
        
        .canvas-grid {
          background-image: 
            linear-gradient(rgba(0, 0, 0, 0.1) 1px, transparent 1px),
            linear-gradient(90deg, rgba(0, 0, 0, 0.1) 1px, transparent 1px);
          background-size: 20px 20px;
        }
        
        .device-frame {
          transition: all 0.3s ease;
        }
        
        .device-frame.desktop {
          max-width: none;
        }
        
        .device-frame.tablet {
          max-width: 768px;
          margin: 0 auto;
        }
        
        .device-frame.mobile {
          max-width: 375px;
          margin: 0 auto;
        }
        
        .editor-loading {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          z-index: 1000;
        }
        
        .block-controls {
          position: absolute;
          top: -40px;
          right: 0;
          background: white;
          border: 1px solid #e5e7eb;
          border-radius: 6px;
          padding: 4px;
          display: flex;
          gap: 4px;
          opacity: 0;
          transition: opacity 0.2s ease;
          z-index: 10;
        }
        
        .draggable-block:hover .block-controls {
          opacity: 1;
        }
        
        .block-control-btn {
          padding: 4px;
          border: none;
          background: transparent;
          border-radius: 4px;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: background-color 0.2s ease;
        }
        
        .block-control-btn:hover {
          background-color: #f3f4f6;
        }
        
        .block-control-btn.danger:hover {
          background-color: #fef2f2;
          color: #dc2626;
        }
      `})]})},Jd=()=>{const s=us(),t=()=>{s("/")};return e.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background p-4",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"relative",children:e.jsx("h1",{className:"text-9xl font-bold text-primary opacity-20",children:"404"})})}),e.jsx("h2",{className:"text-2xl font-medium text-onBackground mb-2",children:"Page Not Found"}),e.jsx("p",{className:"text-onBackground/70 mb-8",children:"The page you're looking for doesn't exist. Let's get you back!"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(P,{variant:"primary",icon:e.jsx(E,{name:"ArrowLeft"}),iconPosition:"left",onClick:()=>window.history.back(),children:"Go Back"}),e.jsx(P,{variant:"outline",icon:e.jsx(E,{name:"Home"}),iconPosition:"left",onClick:t,children:"Back to Home"})]})]})})},Qd=()=>e.jsx(Hr,{children:e.jsxs(nn,{children:[e.jsx(rn,{}),e.jsxs(qr,{children:[e.jsx(Te,{path:"/",element:e.jsx(na,{})}),e.jsx(Te,{path:"/admin-dashboard",element:e.jsx(si,{})}),e.jsx(Te,{path:"/landing-page",element:e.jsx(na,{})}),e.jsx(Te,{path:"/cost-calculator",element:e.jsx(ol,{})}),e.jsx(Te,{path:"/invoice-management",element:e.jsx(pl,{})}),e.jsx(Te,{path:"/login",element:e.jsx(fl,{})}),e.jsx(Te,{path:"/quote-management",element:e.jsx(Nl,{})}),e.jsx(Te,{path:"/settings",element:e.jsx(ha,{})}),e.jsx(Te,{path:"/customers",element:e.jsx(to,{})}),e.jsx(Te,{path:"/staff",element:e.jsx(Hc,{})}),e.jsx(Te,{path:"/payroll",element:e.jsx(id,{})}),e.jsx(Te,{path:"/crm",element:e.jsx(gd,{})}),e.jsx(Te,{path:"/website-builder",element:e.jsx(Yd,{})}),e.jsx(Te,{path:"/help",element:e.jsx(ha,{})}),e.jsx(Te,{path:"*",element:e.jsx(Jd,{})})]})]})});function Zd(){return e.jsx(Qd,{})}const Xd=document.getElementById("root"),em=za(Xd);em.render(e.jsx(Zd,{}));
//# sourceMappingURL=index-B1xJ_MMq.js.map
